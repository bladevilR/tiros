(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6359e761","chunk-24cb054c"],{"25e0":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,centered:"",width:500,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"检查日期"}},[t("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["checkDate",e.validatorRules.checkDate],expression:"['checkDate', validatorRules.checkDate]"}],staticStyle:{width:"100%"},attrs:{format:"YYYY-MM-DD",placeholder:"选择检查日期"},on:{change:e.changeCheckDate}})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"检查结果"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator",value:["checkResult",e.validatorRules.checkResult],expression:"['checkResult', validatorRules.checkResult]"}],attrs:{triggerChange:!0,placeholder:"请选择检查结果",dictCode:"bu_work_order_record_result"}})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"质量负责人"}},[t("a-input",{ref:"userSelect",staticStyle:{width:"100%"},attrs:{placeholder:"请选择质量负责人",open:!1},on:{click:function(t){return e.openSelectUser()}},model:{value:e.checkUserName,callback:function(t){e.checkUserName=t},expression:"checkUserName"}},[t("a-icon",{attrs:{slot:"suffix",type:"ellipsis"},slot:"suffix"})],1)],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"备注"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["remark"],expression:"['remark']",modifiers:{trim:!0}}],attrs:{placeholder:"请输入备注"}})],1)],1)],1),t("user-list",{ref:"userSelectModal",attrs:{multiple:!1},on:{ok:e.onSelectUser}})],1)},n=[],i=r("b245"),c=r("b7b4"),o=r("c1df"),l=r.n(o),u={name:"ConfirmForm",components:{UserList:i["default"]},data:function(){return{title:"检查确认",visible:!1,recordId:"",checkUserName:"",checkUserId:"",model:{},confirmLoading:!1,labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},form:this.$form.createForm(this),validatorRules:{checkDate:{rules:[{required:!0,message:"请选择检查日期!"}]},checkResult:{rules:[{required:!0,message:"请选择检查结果!"}]}}}},mounted:function(){},methods:{confirm:function(e){var t=this;this.form.resetFields(),this.visible=!0,this.confirmLoading=!1,this.recordId=e,this.model=Object.assign({},{checkDate:l()(new Date).format("YYYY-MM-DD")}),this.$nextTick((function(){t.form.setFieldsValue({checkDate:t.model.checkDate})})),this.checkUserName=this.$store.getters.userInfo.realname,this.checkUserId=this.$store.getters.userInfo.id},changeCheckDate:function(e){e&&(this.model.checkDate=e)},handleOk:function(){var e=this;e.form.validateFields((function(t,r){if(!t){e.confirmLoading=!0;var a=Object.assign(e.model,r,{checkDate:l()(e.model.checkDate).format("YYYY-MM-DD"),id:e.recordId,checkUserName:e.checkUserName,checkUserId:e.checkUserId});Object(c["f"])(a).then((function(t){t.success?(e.$message.success(t.message),e.$emit("ok",a),e.close()):e.$message.warning(t.message)})).finally((function(){e.confirmLoading=!1}))}}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1},openSelectUser:function(){this.$refs.userSelectModal.showModal(),this.$refs.userSelect.blur()},onSelectUser:function(e){e.length&&(this.checkUserName=e[0].realname,this.checkUserId=e[0].id,this.$forceUpdate())}}},s=u,d=r("2877"),f=Object(d["a"])(s,a,n,!1,null,null,null);t["default"]=f.exports},9527:function(e,t,r){},b245:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"85%",title:"人员选择",visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",bodyStyle:{height:"70vh"},destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-row",[t("a-col",{attrs:{md:4,sm:24}},[t("div",{staticStyle:{height:"calc(70vh - 20px)","border-right":"1px solid #e3e1e1","margin-right":"15px"}},[e.treeData&&e.treeData.length>0?t("a-tree",{staticClass:"limitHeight",attrs:{defaultSelectedKeys:[e.queryParam.depId],defaultExpandAll:!0,"tree-data":e.treeData},on:{select:e.onSelect}}):e._e()],1)]),t("a-col",{attrs:{md:20,sm:24}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.findList.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"账号"}},[t("a-input",{attrs:{placeholder:"请输入用户账号"},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"真实名字"}},[t("a-input",{attrs:{placeholder:"请输入真实名字"},model:{value:e.queryParam.realname,callback:function(t){e.$set(e.queryParam,"realname",t)},expression:"queryParam.realname"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"手机号码"}},[t("a-input",{attrs:{placeholder:"请输入手机号码"},model:{value:e.queryParam.phone,callback:function(t){e.$set(e.queryParam,"phone",t)},expression:"queryParam.phone"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"角色"}},[t("j-dict-select-tag",{attrs:{triggerChange:!0,dictCode:"sys_role,role_name,id",placeholder:"选择角色"},model:{value:e.queryParam.roleId,callback:function(t){e.$set(e.queryParam,"roleId",t)},expression:"queryParam.roleId"}})],1)],1),t("a-col",{attrs:{md:2,sm:8}},[t("a-button",{on:{click:e.findList}},[e._v("查询")])],1)],1)],1)],1),t("div",{staticStyle:{height:"calc(70vh - 130px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(70vh - 130px)"},attrs:{border:"",align:e.allAlign,data:e.tableData,"max-height":"100%","show-overflow":"tooltip","radio-config":e.multiple?{}:{trigger:"row"},"checkbox-config":e.multiple?{trigger:"row",highlight:!0,range:!0}:{},"edit-config":{trigger:"manual",mode:"row"}}},[e.multiple?t("vxe-table-column",{attrs:{type:"checkbox",width:"5%"}}):t("vxe-table-column",{attrs:{type:"radio",width:"5%"}}),t("vxe-table-column",{attrs:{field:"workNo",title:"工号",width:"100",align:"center"}}),t("vxe-table-column",{attrs:{field:"username",title:"用户账号",width:"150",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"realname",title:"用户名字",width:"100",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"roleNames",title:"角色","min-width":"180",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"sex_dictText",title:"性别",width:"80"}}),t("vxe-table-column",{attrs:{field:"phone",title:"手机号码",width:"120"}}),t("vxe-table-column",{attrs:{field:"orgCode",title:"部门",width:"120",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",width:"80"}})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1)])],1)],1)},n=[],i=r("8fad"),c={name:"UserList",props:{multiple:{type:Boolean,default:!0},depId:{type:String,default:""}},data:function(){return{queryParam:{username:"",realname:"",phone:"",orgCode:"",roleId:void 0,pageNo:1,pageSize:10},allAlign:"center",totalResult:0,tableData:[],visible:!1,confirmLoading:!1,treeData:[]}},watch:{depId:function(e){this.$set(this.queryParam,"depId",e||"")}},mounted:function(){this.$set(this.queryParam,"depId",this.depId||"")},methods:{showModal:function(){this.visible=!0,this.findList(),this.getTreeList()},getTreeList:function(){var e=this;Object(i["yb"])().then((function(t){t.success&&(e.treeData=t.result)}))},onSelect:function(e,t){if(e.length){var r=t.node.dataRef;this.queryParam.depId=r.id,this.findList()}else this.queryParam.orgCode="",this.findList()},findList:function(){var e=this;this.loading=!0,Object(i["uc"])(this.queryParam).then((function(t){e.loading=!1,t.success?(e.totalResult=t.result.total,e.tableData=t.result.records):e.$message.error("加载用户数据失败")})).catch((function(t){e.$message.error("加载用户数据异常")})).finally((function(){}))},handlePageChange:function(e){var t=e.currentPage,r=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=r,this.findList()},handleOk:function(){var e=[];this.multiple?e=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&e.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",e),this.visible=!1},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,Object.assign(this.$data,this.$options.data())}}},o=c,l=(r("f76d"),r("2877")),u=Object(l["a"])(o,a,n,!1,null,"4aa7956f",null);t["default"]=u.exports},b7b4:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"j",(function(){return i})),r.d(t,"n",(function(){return c})),r.d(t,"c",(function(){return l})),r.d(t,"v",(function(){return u})),r.d(t,"x",(function(){return o})),r.d(t,"p",(function(){return d})),r.d(t,"F",(function(){return f})),r.d(t,"H",(function(){return h})),r.d(t,"r",(function(){return m})),r.d(t,"o",(function(){return g})),r.d(t,"l",(function(){return b})),r.d(t,"y",(function(){return y})),r.d(t,"a",(function(){return v})),r.d(t,"i",(function(){return k})),r.d(t,"m",(function(){return q})),r.d(t,"s",(function(){return x})),r.d(t,"B",(function(){return O})),r.d(t,"C",(function(){return w})),r.d(t,"G",(function(){return C})),r.d(t,"J",(function(){return P})),r.d(t,"g",(function(){return $})),r.d(t,"k",(function(){return D})),r.d(t,"t",(function(){return S})),r.d(t,"e",(function(){return I})),r.d(t,"u",(function(){return L})),r.d(t,"E",(function(){return _})),r.d(t,"z",(function(){return N})),r.d(t,"A",(function(){return R})),r.d(t,"d",(function(){return j})),r.d(t,"f",(function(){return U})),r.d(t,"q",(function(){return p})),r.d(t,"D",(function(){return T})),r.d(t,"I",(function(){return Y})),r.d(t,"h",(function(){return z})),r.d(t,"w",(function(){return s}));var a=r("0fea"),n=function(e){return Object(a["j"])("/quality/rectify/add",e)},i=function(e){return Object(a["j"])("/quality/rectify/delete",e)},c=function(e){return Object(a["j"])("/quality/rectify/edit",e)},o=function(e){return Object(a["d"])("/quality/rectify/page",e)},l=function(e){return Object(a["j"])("/quality/rectify/close",e)},u=function(e){return Object(a["d"])("/quality/rectify/get",e)},s=function(e){return Object(a["d"])("/quality/rectify/getCode",e)},d=function(e){return Object(a["d"])("/quality/measurealert/page",e)},f=function(e){return Object(a["d"])("/quality/measurethreshold/form/page-data-form",e)},h=function(e){return Object(a["j"])("/quality/measurethreshold/threshold/save",e)},m=function(e){return Object(a["d"])("/quality/measurethreshold/threshold/list/".concat(e))},p=function(e){return Object(a["d"])("/serialPlan/plan/forms/online-form/alert-records",{dataRecordId:e})},g=function(e){return Object(a["j"])("/quality/measurethreshold/threshold/edit",e)},b=function(e){return Object(a["j"])("/quality/measurethreshold/threshold/delete",e)},y=function(e){return Object(a["d"])("/quality/measurethreshold/threshold/get",e)},v=function(e){return Object(a["j"])("/quality/leaverecord/add",e)},k=function(e){return Object(a["j"])("/quality/leaverecord/delete",e)},j=function(e){return Object(a["j"])("/quality/leaverecord/close",e)},q=function(e){return Object(a["j"])("/quality/leaverecord/edit",e)},x=function(e){return Object(a["d"])("/quality/leaverecord/page",e)},O=function(e,t){return Object(a["c"])("/quality/leaverecord/workLeaveRecordExport",e,t)},w=function(e){return Object(a["d"])("/quality/exception-transfer/page",e)},C=function(e){return Object(a["j"])("/quality/exception-transfer/add",e)},P=function(e){return Object(a["j"])("/quality/exception-transfer/edit",e)},$=function(e){return Object(a["j"])("/quality/exception-transfer/decide",e)},D=function(e){return Object(a["j"])("/quality/exception-transfer/delete",e)},S=function(e){return Object(a["d"])("/quality/record-confirm/list",e)},I=function(e){return Object(a["j"])("/quality/record-confirm/confirm",e)},L=function(e){return Object(a["d"])("/quality/record-confirm/work-record/get",e)},N=function(e){return Object(a["d"])("/serialPlan/plan/forms/check-record/get",e)},R=function(e){return Object(a["d"])("/workcheck/get",e)},U=function(e){return Object(a["j"])("/quality/record-confirm/confirm",e)},_=function(e){return Object(a["d"])("/quality/record-confirm/page",e)},T=function(e){return Object(a["d"])("/quality/record-confirm/page/check-record",e)},Y=function(e){return Object(a["j"])("/serialPlan/plan/forms/judge/save",e)},z=function(e){return Object(a["j"])("/serialPlan/plan/forms/judge/delete",e)}},f76d:function(e,t,r){"use strict";r("9527")}}]);