(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7b755b00"],{"1fb9":function(e,t,n){},"242f":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("div",[t("a-modal",{attrs:{title:"文件上传",width:e.width,visible:e.visible,cancelText:"取消"},on:{ok:e.ok,cancel:e.close}},[t("j-upload",{attrs:{"file-type":e.fileType,value:e.filePath,disabled:e.disabled},on:{change:e.handleChange}})],1)],1)},i=[],o=n("cf74"),s=n("0fea"),l=function(e){if(e.lastIndexOf("\\")>=0){var t=new RegExp("\\\\","g");e=e.replace(t,"/")}return e.substring(e.lastIndexOf("/")+1)},r={name:"JFilePop",components:{JUpload:o["default"]},props:{title:{type:String,default:"",required:!1},position:{type:String,default:"right",required:!1},height:{type:Number,default:200,required:!1},width:{type:Number,default:520,required:!1},popContainer:{type:String,default:"",required:!1},disabled:{type:Boolean,default:!1,required:!1}},data:function(){return{visible:!1,filePath:"",id:"",fileType:"file"}},methods:{handleChange:function(e){this.filePath=e},show:function(e,t,n){this.id=e,this.filePath=t,this.visible=!0,this.fileType="img"===n?"image":"file"},ok:function(){if(!this.filePath)return this.$message.error("未上传任何文件"),!1;var e=this.filePath.split(","),t={name:l(e[0]),url:Object(s["e"])(e[0]),path:this.filePath,status:"done",id:this.id};this.$emit("ok",t),this.visible=!1},close:function(){this.visible=!1}}},u=r,c=n("2877"),d=Object(c["a"])(u,a,i,!1,null,"9168d56a",null);t["default"]=d.exports},"2dab":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("a-date-picker",{attrs:{disabled:e.disabled||e.readOnly,placeholder:e.placeholder,value:e.momVal,showTime:e.showTime,format:e.dateFormat,getCalendarContainer:e.getCalendarContainer},on:{change:e.handleDateChange}})},i=[],o=n("c1df"),s=n.n(o),l={name:"JDate",props:{placeholder:{type:String,default:"",required:!1},value:{type:String,required:!1},dateFormat:{type:String,default:"YYYY-MM-DD",required:!1},triggerChange:{type:Boolean,required:!1,default:!1},readOnly:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,required:!1,default:!1},showTime:{type:Boolean,required:!1,default:!1},getCalendarContainer:{type:Function,default:function(e){return e.parentNode}}},data:function(){var e=this.value;return{decorator:"",momVal:e?s()(e,this.dateFormat):null}},watch:{value:function(e){this.momVal=e?s()(e,this.dateFormat):null}},methods:{moment:s.a,handleDateChange:function(e,t){this.$emit("change",t)}},model:{prop:"value",event:"change"}},r=l,u=n("2877"),c=Object(u["a"])(r,a,i,!1,null,null,null);t["default"]=c.exports},"5f3b":function(e,t,n){"use strict";n("1fb9")},"5f64":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("a-popover",{attrs:{trigger:"contextmenu",placement:e.position},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[t("div",{attrs:{slot:"title"},slot:"title"},[t("span",[e._v(e._s(e.title))]),t("span",{staticStyle:{float:"right"},attrs:{title:"关闭"}},[t("a-icon",{attrs:{type:"close"},on:{click:function(t){e.visible=!1}}})],1)]),t("a-input",{attrs:{value:e.inputContent},on:{change:e.handleInputChange}},[t("a-icon",{attrs:{slot:"suffix",type:"fullscreen"},on:{click:function(t){return t.stopPropagation(),e.pop.apply(null,arguments)}},slot:"suffix"})],1),t("div",{attrs:{slot:"content"},slot:"content"},[t("textarea",{style:{height:e.height+"px",width:e.width+"px"},domProps:{value:e.inputContent},on:{input:e.handleInputChange}})])],1)},i=[],o={name:"JInputPop",props:{title:{type:String,default:"",required:!1},position:{type:String,default:"right",required:!1},height:{type:Number,default:200,required:!1},width:{type:Number,default:150,required:!1},value:{type:String,required:!1},popContainer:{type:String,default:"",required:!1}},data:function(){return{visible:!1,inputContent:""}},watch:{value:{immediate:!0,handler:function(){this.value&&this.value.length>0&&(this.inputContent=this.value)}}},model:{prop:"value",event:"change"},methods:{handleInputChange:function(e){this.inputContent=e.target.value,this.$emit("change",this.inputContent)},pop:function(){this.visible=!0},getPopupContainer:function(e){return this.popContainer?document.getElementById(this.popContainer):e.parentNode}}},s=o,l=n("2877"),r=Object(l["a"])(s,a,i,!1,null,"74157401",null);t["default"]=r.exports},7279:function(e,t,n){"use strict";n("95ba")},7550:function(e,t,n){"use strict";function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return(t=l(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){var t=r(e,"string");return"symbol"==a(t)?t:t+""}function r(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=a(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}n.r(t);var u=function(){var e=this,t=e._self._c;return t("a-spin",{attrs:{spinning:e.loading}},[t("a-row",{attrs:{type:"flex"}},[t("a-col",[e._t("buttonBefore",null,{target:e.getVM()})],2),t("a-col",[e.actionButton?t("div",{staticClass:"action-button"},[t("a-button",{attrs:{type:"primary",icon:"plus",disabled:e.disabled},on:{click:e.handleClickAdd}},[e._v("新增")]),t("span",{staticClass:"gap"}),e.selectedRowIds.length>0?[t("a-popconfirm",{attrs:{title:"确定要删除这 ".concat(e.selectedRowIds.length," 项吗?")},on:{confirm:e.handleConfirmDelete}},[t("a-button",{attrs:{type:"primary",icon:"minus",disabled:e.disabled}},[e._v("删除")]),t("span",{staticClass:"gap"})],1),e.showClearSelectButton?[t("a-button",{attrs:{icon:"delete"},on:{click:e.handleClickClearSelection}},[e._v("清空选择")]),t("span",{staticClass:"gap"})]:e._e()]:e._e()],2):e._e()]),t("a-col",[e._t("buttonAfter",null,{target:e.getVM()})],2)],1),e._t("actionButtonAfter",null,{target:e.getVM()}),t("div",{staticClass:"input-table",attrs:{id:"".concat(e.caseId,"inputTable")}},[t("div",{ref:"thead",staticClass:"thead"},[t("div",{staticClass:"tr",style:{width:this.realTrWidth}},[e.dragSort?t("div",{staticClass:"td td-ds",style:e.style.tdLeftDs},[t("span")]):e._e(),e.rowSelection?t("div",{staticClass:"td td-cb",style:e.style.tdLeft},[t("a-checkbox",{attrs:{checked:e.getSelectAll,indeterminate:e.getSelectIndeterminate},on:{change:e.handleChangeCheckedAll}})],1):e._e(),e.rowNumber?t("div",{staticClass:"td td-num",style:e.style.tdLeft},[t("span",[e._v("#")])]):e._e(),e._l(e.columns,(function(n){return[t("div",{directives:[{name:"show",rawName:"v-show",value:n.type!==e.formTypes.hidden,expression:"col.type !== formTypes.hidden"}],key:n.key,staticClass:"td",style:e.buildTdStyle(n)},[t("span",[e._v(e._s(n.title))])])]}))],2)]),t("div",{ref:"scrollView",staticClass:"scroll-view",style:{"max-height":e.maxHeight+"px"}},[t("div",{staticClass:"tbody",style:e.tbodyStyle,attrs:{id:"".concat(e.caseId,"tbody")}},[t("div",{staticClass:"tr-expand",style:"height:".concat(e.getExpandHeight,"px; z-index:").concat(e.loading?"11":"9",";")}),0===e.rows.length?t("div",{staticClass:"tr-nodata"},[t("span",[e._v("暂无数据")])]):e._e(),t("draggable",{attrs:{value:e.rows,handle:".td-ds-icons"},on:{start:e.handleDragMoveStart,end:e.handleDragMoveEnd}},[e._l(e.rows,(function(n,a){return[a>=parseInt("".concat((e.scrollTop-e.rowHeight)/e.rowHeight))&&parseInt("".concat(e.scrollTop/e.rowHeight))+9>a?t("div",{key:n.id,staticClass:"tr",class:-1!==e.selectedRowIds.indexOf(n.id)?"tr-checked":"",style:e.buildTrStyle(a),attrs:{id:"".concat(e.caseId,"tbody-tr-").concat(a),"data-idx":a}},[e.dragSort?t("div",{staticClass:"td td-ds",style:e.style.tdLeftDs},[t("a-dropdown",{attrs:{trigger:["click"],getPopupContainer:e.getParentContainer}},[t("div",{staticClass:"td-ds-icons"},[t("a-icon",{attrs:{type:"align-left"}}),t("a-icon",{attrs:{type:"align-right"}})],1),t("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[t("a-menu-item",{key:"0",attrs:{disabled:0===a},on:{click:function(t){return e._handleRowMoveUp(a)}}},[e._v("向上移")]),t("a-menu-item",{key:"1",attrs:{disabled:a===e.rows.length-1},on:{click:function(t){return e._handleRowMoveDown(a)}}},[e._v("向下移")]),t("a-menu-divider"),t("a-menu-item",{key:"3",on:{click:function(t){return e._handleRowInsertDown(a)}}},[e._v("插入一行")])],1)],1)],1):e._e(),e.rowSelection?t("div",{staticClass:"td td-cb",style:e.style.tdLeft},[e._l(["".concat(n.id)],(function(n,a){return[t("a-checkbox",{key:a,attrs:{id:n,checked:-1!==e.selectedRowIds.indexOf(n)},on:{change:e.handleChangeLeftCheckbox}})]}))],2):e._e(),e.rowNumber?t("div",{staticClass:"td td-num",style:e.style.tdLeft},[t("span",[e._v(e._s(a+1))])]):e._e(),e._l(e.columns,(function(i){return t("div",{directives:[{name:"show",rawName:"v-show",value:i.type!==e.formTypes.hidden,expression:"col.type !== formTypes.hidden"}],key:i.key,staticClass:"td",style:e.buildTdStyle(i)},[e._l(["".concat(i.key).concat(n.id)],(function(o,s){return[i.type===e.formTypes.input||i.type===e.formTypes.inputNumber?t("label",{key:s},[t("a-tooltip",{attrs:{id:o,placement:"top",title:(e.tooltips[o]||{}).title,visible:(e.tooltips[o]||{}).visible||!1,autoAdjustOverflow:!0,getPopupContainer:e.getParentContainer}},[t("input",e._b({attrs:{id:o,"data-input-number":i.type===e.formTypes.inputNumber,placeholder:e.replaceProps(i,i.placeholder)},on:{blur:function(t){e.handleBlurCommono(t.target,a,n,i)},input:function(t){e.handleInputCommono(t.target,a,n,i)},mouseover:function(){e.handleMouseoverCommono(n,i)},mouseout:function(){e.handleMouseoutCommono(n,i)}}},"input",e.buildProps(n,i),!1))])],1):i.type===e.formTypes.checkbox?[t("a-checkbox",e._b({key:s,attrs:{id:o,checked:e.checkboxValues[o]},on:{change:function(t){return e.handleChangeCheckboxCommon(t,n,i)}}},"a-checkbox",e.buildProps(n,i),!1))]:i.type===e.formTypes.select?[t("a-tooltip",{key:s,attrs:{id:o,placement:"top",title:(e.tooltips[o]||{}).title,visible:(e.tooltips[o]||{}).visible||!1,autoAdjustOverflow:!0,getPopupContainer:e.getParentContainer}},[t("span",{on:{mouseover:function(){e.handleMouseoverCommono(n,i)},mouseout:function(){e.handleMouseoutCommono(n,i)}}},[t("a-select",e._b({key:s,staticStyle:{width:"100%"},attrs:{id:o,value:e.selectValues[o],options:i.options,getPopupContainer:e.getParentContainer,placeholder:e.replaceProps(i,i.placeholder),filterOption:function(t,n){return e.handleSelectFilterOption(t,n,i)},allowClear:""},on:{change:function(t){return e.handleChangeSelectCommon(t,o,n,i)},search:function(t){return e.handleSearchSelect(t,o,n,i)},blur:function(t){return e.handleBlurSearch(t,o,n,i)}}},"a-select",e.buildProps(n,i),!1))],1)])]:i.type===e.formTypes.date||i.type===e.formTypes.datetime?[t("a-tooltip",{key:s,attrs:{id:o,placement:"top",title:(e.tooltips[o]||{}).title,visible:(e.tooltips[o]||{}).visible||!1,autoAdjustOverflow:!0,getPopupContainer:e.getParentContainer}},[t("span",{on:{mouseover:function(){e.handleMouseoverCommono(n,i)},mouseout:function(){e.handleMouseoutCommono(n,i)}}},[t("j-date",e._b({key:s,staticStyle:{width:"100%"},attrs:{id:o,value:e.jdateValues[o],getCalendarContainer:e.getParentContainer,placeholder:e.replaceProps(i,i.placeholder),"trigger-change":!0,showTime:i.type===e.formTypes.datetime,dateFormat:i.type===e.formTypes.date?"YYYY-MM-DD":"YYYY-MM-DD HH:mm:ss",allowClear:""},on:{change:function(t){return e.handleChangeJDateCommon(t,o,n,i,i.type===e.formTypes.datetime)}}},"j-date",e.buildProps(n,i),!1))],1)])]:i.type===e.formTypes.input_pop?[t("a-tooltip",{key:s,attrs:{id:o,placement:"top",title:(e.tooltips[o]||{}).title,visible:(e.tooltips[o]||{}).visible||!1,autoAdjustOverflow:!0,getPopupContainer:e.getParentContainer}},[t("span",{on:{mouseover:function(){e.handleMouseoverCommono(n,i)},mouseout:function(){e.handleMouseoutCommono(n,i)}}},[t("j-input-pop",e._b({key:s,staticStyle:{width:"100%"},attrs:{id:o,width:300,height:210,"pop-container":"".concat(e.caseId,"tbody"),value:e.jInputPopValues[o],getCalendarContainer:e.getParentContainer,placeholder:e.replaceProps(i,i.placeholder)},on:{change:function(t){return e.handleChangeJInputPopCommon(t,o,n,i)}}},"j-input-pop",e.buildProps(n,i),!1))],1)])]:i.type===e.formTypes.upload?t("div",{key:s},[e._l([e.uploadValues[o]||{}],(function(n,a){return null!=e.uploadValues[o]?[t("a-input",{key:a,attrs:{readOnly:!0,value:n.name}},[t("template",{staticStyle:{width:"30px"},slot:"addonBefore"},["uploading"===n.status?t("a-tooltip",{attrs:{title:"上传中(".concat(Math.floor(n.percent),"%)")}},[t("a-icon",{attrs:{type:"loading"}})],1):"done"===n.status?t("a-tooltip",{attrs:{title:"上传完成"}},[t("a-icon",{staticStyle:{color:"#00DB00"},attrs:{type:"check-circle"}})],1):t("a-tooltip",{attrs:{title:"上传失败"}},[t("a-icon",{staticStyle:{color:"red"},attrs:{type:"exclamation-circle"}})],1)],1),!1!==i.allowDownload||!1!==i.allowRemove?t("template",{staticStyle:{width:"30px"},slot:"addonAfter"},[t("a-dropdown",{attrs:{trigger:["click"],placement:"bottomRight",getPopupContainer:e.getParentContainer}},[t("a-tooltip",{attrs:{title:"操作",getPopupContainer:e.getParentContainer}},["uploading"!==n.status?t("a-icon",{staticStyle:{cursor:"pointer"},attrs:{type:"setting"}}):e._e()],1),t("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[!1!==i.allowDownload?t("a-menu-item",{on:{click:function(t){return e.handleClickDownloadFile(o)}}},[t("span",[t("a-icon",{attrs:{type:"download"}}),e._v(" 下载")],1)]):e._e(),!1!==i.allowRemove?t("a-menu-item",{on:{click:function(t){return e.handleClickDelFile(o)}}},[t("span",[t("a-icon",{attrs:{type:"delete"}}),e._v(" 删除")],1)]):e._e()],1)],1)],1):e._e()],2)]:e._e()})),t("div",{attrs:{hidden:null!=e.uploadValues[o]}},[t("a-tooltip",{key:s,attrs:{id:o,placement:"top",title:(e.tooltips[o]||{}).title,visible:(e.tooltips[o]||{}).visible||!1,autoAdjustOverflow:!0,getPopupContainer:e.getParentContainer}},[t("span",{on:{mouseover:function(){e.handleMouseoverCommono(n,i)},mouseout:function(){e.handleMouseoutCommono(n,i)}}},[t("a-upload",e._b({attrs:{name:"file",data:{isup:1},multiple:!1,action:i.action,headers:e.uploadGetHeaders(n,i),showUploadList:!1},on:{change:function(t){return e.handleChangeUpload(t,o,n,i)}}},"a-upload",e.buildProps(n,i),!1),[t("a-button",{attrs:{icon:"upload"}},[e._v(e._s(i.placeholder))])],1)],1)])],1)],2):i.type===e.formTypes.popup?[t("a-tooltip",{key:s,attrs:{id:o,placement:"top",title:(e.tooltips[o]||{}).title,visible:(e.tooltips[o]||{}).visible||!1,autoAdjustOverflow:!0,getPopupContainer:e.getParentContainer}},[t("span",{on:{mouseover:function(){e.handleMouseoverCommono(n,i)},mouseout:function(){e.handleMouseoutCommono(n,i)}}},[t("j-popup",e._b({key:s,staticStyle:{width:"100%"},attrs:{id:o,placeholder:e.replaceProps(i,i.placeholder),value:e.getPopupValue(o),field:i.field||i.key,"org-fields":i.orgFields,"dest-fields":i.destFields,code:i.popupCode,groupId:e.caseId},on:{input:function(t,s){return e.popupCallback(t,s,o,n,i,a)}}},"j-popup",e.buildProps(n,i),!1))],1)])]:i.type===e.formTypes.file?t("div",{key:s},[e._l([e.uploadValues[o]||{}],(function(n,a){return null!=e.uploadValues[o]?[t("div",{key:a,staticStyle:{position:"relative"}},["uploading"===n.status?t("a-tooltip",{attrs:{title:"上传中(".concat(Math.floor(n.percent),"%)")}},[t("a-icon",{staticStyle:{color:"red"},attrs:{type:"loading"}}),t("span",{staticStyle:{color:"red","margin-left":"5px"}},[e._v(e._s(n.status))])],1):"done"===n.status?t("a-tooltip",{attrs:{title:n.name}},[t("a-icon",{attrs:{type:"paper-clip"}}),t("span",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(e.getEllipsisWord(n.name,5)))])],1):t("a-tooltip",{attrs:{title:n.name}},[t("a-icon",{staticStyle:{color:"red"},attrs:{type:"paper-clip"}}),t("span",{staticStyle:{color:"red","margin-left":"5px"}},[e._v(e._s(e.getEllipsisWord(n.name,5)))])],1),[t("a-dropdown",{staticStyle:{"margin-left":"10px"},attrs:{trigger:["click"],placement:"bottomRight",getPopupContainer:e.getParentContainer}},[t("a-tooltip",{attrs:{title:"操作",getPopupContainer:e.getParentContainer}},["uploading"!==n.status?t("a-icon",{staticStyle:{cursor:"pointer"},attrs:{type:"setting"}}):e._e()],1),t("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[!1!==i.allowDownload?t("a-menu-item",{on:{click:function(t){return e.handleClickDownFileByUrl(o)}}},[t("span",[t("a-icon",{attrs:{type:"download"}}),e._v(" 下载")],1)]):e._e(),t("a-menu-item",{on:{click:function(t){return e.handleClickDelFile(o)}}},[t("span",[t("a-icon",{attrs:{type:"delete"}}),e._v(" 删除")],1)]),t("a-menu-item",{on:{click:function(t){return e.handleMoreOperation(o)}}},[t("span",[t("a-icon",{attrs:{type:"bars"}}),e._v(" 更多")],1)])],1)],1)]],2)]:e._e()})),t("div",{attrs:{hidden:null!=e.uploadValues[o]}},[t("a-tooltip",{key:s,attrs:{id:o,placement:"top",title:(e.tooltips[o]||{}).title,visible:(e.tooltips[o]||{}).visible||!1,autoAdjustOverflow:!0,getPopupContainer:e.getParentContainer}},[t("span",{on:{mouseover:function(){e.handleMouseoverCommono(n,i)},mouseout:function(){e.handleMouseoutCommono(n,i)}}},[t("a-upload",e._b({attrs:{name:"file",data:{isup:1},multiple:!1,action:e.getUploadAction(i.action),headers:e.uploadGetHeaders(n,i),showUploadList:!1},on:{change:function(t){return e.handleChangeUpload(t,o,n,i)}}},"a-upload",e.buildProps(n,i),!1),[t("a-button",{attrs:{icon:"upload"}},[e._v("上传文件")])],1)],1)])],1)],2):i.type===e.formTypes.image?t("div",{key:s},[e._l([e.uploadValues[o]||{}],(function(n,a){return null!=e.uploadValues[o]?[t("div",{key:a,staticStyle:{position:"relative"}},[e.uploadValues[o]&&(e.uploadValues[o]["url"]||e.uploadValues[o]["path"]||e.uploadValues[o]["message"])?e.uploadValues[o]["path"]?[t("img",{staticClass:"j-editable-image",attrs:{src:e.getCellImageView(o),alt:"无图片"},on:{click:function(t){return e.handleMoreOperation(o,"img")}}})]:[t("a-icon",{staticStyle:{color:"red"},attrs:{type:"exclamation-circle"},on:{click:function(t){return e.handleClickShowImageError(o)}}})]:[t("a-icon",{attrs:{type:"loading"}})],t("template",{staticStyle:{width:"30px"},slot:"addonBefore"},["uploading"===n.status?t("a-tooltip",{attrs:{title:"上传中(".concat(Math.floor(n.percent),"%)")}},[t("a-icon",{attrs:{type:"loading"}})],1):"done"===n.status?t("a-tooltip",{attrs:{title:"上传完成"}},[t("a-icon",{staticStyle:{color:"#00DB00"},attrs:{type:"check-circle"}})],1):t("a-tooltip",{attrs:{title:"上传失败"}},[t("a-icon",{staticStyle:{color:"red"},attrs:{type:"exclamation-circle"}})],1)],1),[t("a-dropdown",{staticStyle:{"margin-left":"10px"},attrs:{trigger:["click"],placement:"bottomRight",getPopupContainer:e.getParentContainer}},[t("a-tooltip",{attrs:{title:"操作",getPopupContainer:e.getParentContainer}},["uploading"!==n.status?t("a-icon",{staticStyle:{cursor:"pointer"},attrs:{type:"setting"}}):e._e()],1),t("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[!1!==i.allowDownload?t("a-menu-item",{on:{click:function(t){return e.handleClickDownFileByUrl(o)}}},[t("span",[t("a-icon",{attrs:{type:"download"}}),e._v(" 下载")],1)]):e._e(),t("a-menu-item",{on:{click:function(t){return e.handleClickDelFile(o)}}},[t("span",[t("a-icon",{attrs:{type:"delete"}}),e._v(" 删除")],1)]),t("a-menu-item",{on:{click:function(t){return e.handleMoreOperation(o,"img")}}},[t("span",[t("a-icon",{attrs:{type:"bars"}}),e._v(" 更多")],1)])],1)],1)]],2)]:e._e()})),t("div",{attrs:{hidden:null!=e.uploadValues[o]}},[t("a-tooltip",{key:s,attrs:{id:o,placement:"top",title:(e.tooltips[o]||{}).title,visible:(e.tooltips[o]||{}).visible||!1,autoAdjustOverflow:!0,getPopupContainer:e.getParentContainer}},[t("span",{on:{mouseover:function(){e.handleMouseoverCommono(n,i)},mouseout:function(){e.handleMouseoutCommono(n,i)}}},[t("a-upload",e._b({attrs:{name:"file",data:{isup:1},multiple:!1,action:e.getUploadAction(i.action),headers:e.uploadGetHeaders(n,i),showUploadList:!1},on:{change:function(t){return e.handleChangeUpload(t,o,n,i)}}},"a-upload",e.buildProps(n,i),!1),[t("a-button",{attrs:{icon:"upload"}},[e._v("上传图片")])],1)],1)])],1)],2):i.type===e.formTypes.radio?[t("a-tooltip",{key:s,attrs:{id:o,placement:"top",title:(e.tooltips[o]||{}).title,visible:(e.tooltips[o]||{}).visible||!1,autoAdjustOverflow:!0,getPopupContainer:e.getParentContainer}},[t("span",{on:{mouseover:function(){e.handleMouseoverCommono(n,i)},mouseout:function(){e.handleMouseoutCommono(n,i)}}},[t("a-radio-group",e._b({key:s,attrs:{id:o,value:e.radioValues[o]},on:{change:function(t){return e.handleRadioChange(t.target.value,o,n,i)}}},"a-radio-group",e.buildProps(n,i),!1),e._l(i.options,(function(n,a){return t("a-radio",{key:a,attrs:{value:n.value}},[e._v(e._s(n.text))])})),1)],1)])]:i.type===e.formTypes.list_multi?[t("a-tooltip",{key:s,attrs:{id:o,placement:"top",title:(e.tooltips[o]||{}).title,visible:(e.tooltips[o]||{}).visible||!1,autoAdjustOverflow:!0,getPopupContainer:e.getParentContainer}},[t("span",{on:{mouseover:function(){e.handleMouseoverCommono(n,i)},mouseout:function(){e.handleMouseoutCommono(n,i)}}},[t("a-select",e._b({key:s,staticStyle:{width:"100%"},attrs:{id:o,mode:"multiple",maxTagCount:1,value:e.multiSelectValues[o],options:i.options,getPopupContainer:e.getParentContainer,placeholder:e.replaceProps(i,i.placeholder),allowClear:""},on:{change:function(t){return e.handleMultiSelectChange(t,o,n,i)}}},"a-select",e.buildProps(n,i),!1))],1)])]:i.type===e.formTypes.sel_search?[t("a-tooltip",{key:s,attrs:{id:o,placement:"top",title:(e.tooltips[o]||{}).title,visible:(e.tooltips[o]||{}).visible||!1,autoAdjustOverflow:!0,getPopupContainer:e.getParentContainer}},[t("span",{on:{mouseover:function(){e.handleMouseoverCommono(n,i)},mouseout:function(){e.handleMouseoutCommono(n,i)}}},[t("a-select",e._b({key:s,staticStyle:{width:"100%"},attrs:{id:o,showSearch:"",optionFilterProp:"children",filterOption:e.filterOption,value:e.searchSelectValues[o],options:i.options,getPopupContainer:e.getParentContainer,placeholder:e.replaceProps(i,i.placeholder),allowClear:""},on:{change:function(t){return e.handleSearchSelectChange(t,o,n,i)}}},"a-select",e.buildProps(n,i),!1))],1)])]:i.type===e.formTypes.slot?t("div",{key:s},[t("a-tooltip",{key:s,attrs:{id:o,placement:"top",title:(e.tooltips[o]||{}).title,visible:(e.tooltips[o]||{}).visible||!1,autoAdjustOverflow:!0,getPopupContainer:e.getParentContainer}},[t("span",{on:{mouseover:function(){e.handleMouseoverCommono(n,i)},mouseout:function(){e.handleMouseoutCommono(n,i)}}},[e._t(i.slot||i.slotName||i.key,null,{index:a,text:e.slotValues[o],value:e.slotValues[o],column:i,rowId:e.getCleanId(n.id),getValue:function(){return e._getValueForSlot(n.id)},caseId:e.caseId,allValues:e._getAllValuesForSlot(),target:e.getVM(),handleChange:function(t){return e.handleChangeSlotCommon(t,o,n,i)},isNotPass:e.notPassedIds.includes(i.key+n.id)})],2)])],1):t("span",e._b({key:s},"span",e.buildProps(n,i),!1),[e._v(e._s(e.inputValues[a][i.key]))])]}))],2)}))],2):e._e()]}))],2),e.showStatisticsRow?t("div",{staticClass:"tr",style:o(o({},e.buildTrStyle(e.rows.length)),{},{height:"32px"})},[e.dragSort?t("div",{staticClass:"td td-ds",style:e.style.tdLeftDs}):e._e(),e.rowSelection?t("div",{staticClass:"td td-cb",style:e.style.tdLeft},[e._v(" 统计 ")]):e._e(),e.rowNumber?t("div",{staticClass:"td td-num",style:e.style.tdLeft},[e.rowSelection?e._e():t("span",[e._v("统计")])]):e._e(),e._l(e.columns,(function(n){return[t("div",{directives:[{name:"show",rawName:"v-show",value:n.type!==e.formTypes.hidden,expression:"col.type !== formTypes.hidden"}],key:n.key,staticClass:"td",style:e.buildTdStyle(n)},[t("span",{directives:[{name:"show",rawName:"v-show",value:n.type===e.formTypes.inputNumber,expression:"col.type === formTypes.inputNumber"}],staticStyle:{padding:"0 5px"}},[e._v(e._s(e.statisticsColumns[n.key]))])])]}))],2):e._e()],1)]),t("j-file-pop",{ref:"filePop",on:{ok:e.handleFileSuccess}})],1)],2)},c=[],d=n("2b0e"),p=n("b76a"),h=n.n(p),f=n("9fb0"),m=n("e2e0"),v=n("ca00"),y=n("2dab"),g=n("89f2"),b=n("0fea"),w=n("5f64"),C=n("242f");function V(e,t){return k(e)||I(e,t)||j(e,t)||S()}function S(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function I(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,i,o,s,l=[],r=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;r=!1}else for(;!(r=(a=o.call(n)).done)&&(l.push(a.value),l.length!==t);r=!0);}catch(e){u=!0,i=e}finally{try{if(!r&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return l}}function k(e){if(Array.isArray(e))return e}function O(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=j(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw o}}}}function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function x(e){return E(e)||T(e)||j(e)||_()}function _(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function j(e,t){if(e){if("string"==typeof e)return A(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}function T(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function E(e){if(Array.isArray(e))return A(e)}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t,n){return(t=R(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e){var t=M(e,"string");return"symbol"==P(t)?t:t+""}function M(e,t){if("object"!=P(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=P(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var F=61,$={name:"JEditableTable",components:{JDate:y["default"],Draggable:h.a,JInputPop:w["default"],JFilePop:C["default"]},provide:function(){var e=this;return{parentIsJEditableTable:!0,getDestroyCleanGroupRequest:function(){return e.destroyCleanGroupRequest}}},props:{columns:{type:Array,required:!0},dataSource:{type:Array,required:!0,default:function(){return[]}},actionButton:{type:Boolean,default:!1},rowNumber:{type:Boolean,default:!1},rowSelection:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},maxHeight:{type:Number,default:400},disabledRows:{type:Object,default:function(){return{}}},disabled:{type:Boolean,default:!1},dragSort:{type:Boolean,default:!1},dragSortKey:{type:String,default:"orderNum"}},data:function(){return{isFirst:!0,isJEditableTable:!0,caseIdPrefix:"_jet-",caseId:"_jet-".concat(Object(v["o"])(6),"-"),tempId:"_tid-".concat(Object(v["o"])(6)),el:{inputTable:null,tbody:null},style:{tbody:{left:"0px"},tdLeft:{"min-width":"4%","max-width":"45px"},tdLeftDs:{"min-width":"30px","max-width":"35px"}},formTypes:m["a"],rows:[],rowHeight:F,scrollTop:0,selectValues:{},checkboxValues:{},jdateValues:{},jInputPopValues:{},slotValues:{},uploadValues:{},popupValues:{},radioValues:{},metaCheckboxValues:{},multiSelectValues:{},searchSelectValues:{},selectedRowIds:[],deleteIds:[],tooltips:{},notPassedIds:[],dragging:!1,hasStatisticsColumn:!1,statisticsColumns:{},destroyCleanGroupRequest:!1}},created:function(){this.inputValues=[],this.visibleTrEls=[],this.disabledRowIds=this.disabledRowIds||[]},computed:{getExpandHeight:function(){var e=this.rows.length*this.rowHeight;return this.showStatisticsRow&&(e+=34),e},showStatisticsRow:function(){return this.hasStatisticsColumn&&this.rows.length>0},getSelectIndeterminate:function(){return this.selectedRowIds.length>0&&this.selectedRowIds.length<this.rows.length},getSelectAll:function(){return this.selectedRowIds.length===this.rows.length&&this.rows.length>0},tbodyStyle:function(){var e=Object.assign({},this.style.tbody);return e["width"]=this.realTrWidth,e},showClearSelectButton:function(){var e=0;for(var t in this.disabledRows)this.disabledRows.hasOwnProperty(t)&&e++;return e>0},accessToken:function(){return d["default"].ls.get(f["a"])},realTrWidth:function(){var e=" + ",t="calc(";return this.columns.forEach((function(n,a){var i=n.type,o=n.width;i!==m["a"].hidden&&(t+="number"===typeof o?o+"px":"string"===typeof o?o:"120px",t+=e)})),t.endsWith(e)&&(t=t.substring(0,t.length-e.length)),t+=")",t}},watch:{rows:{immediate:!0,handler:function(e,t){}},dataSource:{immediate:!0,handler:function(e){var t=this;this.getElementPromise("tbody").then((function(){t.initialize(),t._pushByDataSource(e)}))}},columns:{immediate:!0,handler:function(e){var t=this;this.getElementPromise("tbody").then((function(){e.forEach((function(e){e.type!==m["a"].select&&e.type!==m["a"].list_multi&&e.type!==m["a"].sel_search||(e.options instanceof Array&&(e.options=e.options.map((function(e){return e?N(N({},e),{},{text:e.text||e.title,title:e.text||e.title}):{}}))),e.dictCode&&t._loadDictConcatToOptions(e))}))}))}},selectedRowIds:function(e){var t=this;this.$emit("selectRowChange",Object(v["d"])(e).map((function(e){return t.getCleanId(e)})))}},mounted:function(){var e=this;this.getElement("inputTable").onscroll=function(t){e.syncScrollBar(t.target.scrollLeft)},this.getElement("tbody").onscroll=function(e){};var t=this.$refs,n=t.thead,a=t.scrollView;a.onscroll=function(t){n.scrollLeft=t.target.scrollLeft,e.recalcTrHiddenItem(t.target.scrollTop)}},methods:{getElement:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.el[e]||(this.el[e]=document.getElementById((t?"":this.caseId)+e)),this.el[e]},getElementPromise:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(a){var i=setInterval((function(){var o=t.getElement(e,n);o&&(clearInterval(i),a(o))}),10)}))},initialize:function(){var e=this;this.visibleTrEls=[],this.isFirst?this.isFirst=!1:(this.inputValues=[],this.rows=[],this.deleteIds=[],this.selectValues={},this.checkboxValues={},this.jdateValues={},this.jInputPopValues={},this.slotValues={},this.selectedRowIds=[],this.tooltips={},this.notPassedIds=[],this.uploadValues=[],this.popupValues=[],this.radioValues=[],this.multiSelectValues=[],this.searchSelectValues=[],this.scrollTop=0,this.$nextTick((function(){e.getElement("tbody").scrollTop=0})))},syncScrollBar:function(e){},resetScrollTop:function(e){var t=this.$refs.scrollView;t.scrollTop=null!=e&&"number"===typeof e?e:this.scrollTop},recalcTrHiddenItem:function(e){var t=this,n=e-this.scrollTop;n<0&&(n=this.scrollTop-e),n>=.3*this.rowHeight&&(this.scrollTop=e,this.$nextTick((function(){t.updateFormValues()})))},generateId:function(e){e instanceof Array||(e=this.rows||[]);var t=(new Date).getTime();return"".concat(this.caseId).concat(t).concat(e.length).concat(Object(v["n"])(6)).concat(this.tempId)},push:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return this._pushByDataSource([e],[a],t,n,i)},_pushByDataSource:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];i instanceof Array||(i=x(this.rows)||[]);var s=N({},this.checkboxValues),l=N({},this.selectValues),r=N({},this.jdateValues),u=N({},this.jInputPopValues),c=N({},this.slotValues),d=N({},this.uploadValues),p=N({},this.popupValues),h=N({},this.radioValues),f=N({},this.multiSelectValues),v=N({},this.searchSelectValues),y=this.disabledRowIds||[];return e.forEach((function(e,a){var g=e.id;null==g||""===g?g=t.generateId(i):t.hasCaseId(g)||(g=t.caseId+g);var b={id:g},w={id:g},C=!1;t.columns.forEach((function(n){var a=n.key+w.id,i=(null==e[n.key]?"":e[n.key]).toString(),g=null;o&&(g=n.defaultValue||(0===n.defaultValue?0:""),g instanceof Array&&(g=g.join(",")),i="number"===typeof i||i?i:g);var V=null==i||""===i;if(n.type===m["a"].inputNumber)!0===n.isOrder?w[n.key]=t.getInputNumberMaxValue(n)+1:w[n.key]=i,n.statistics&&(t.hasStatisticsColumn=!0,t.statisticsColumns[n.key]||t.$set(t.statisticsColumns,n.key,0));else if(n.type===m["a"].checkbox)if(n.customValue instanceof Array){var S=(n.customValue[0]||"").toString();V&&o&&(i=n.defaultChecked?S:i),s[a]=i===S}else s[a]=V&&o?!!n.defaultChecked:i;else if(n.type===m["a"].select)V?l[a]=void 0:("string"===typeof i&&"multiple"===(n.props||{})["mode"]&&(i=i.split(",")),l[a]=i);else if(n.type===m["a"].date||n.type===m["a"].datetime)r[a]=i;else if(n.type===m["a"].slot)c[a]=i;else if(n.type===m["a"].popup)p[a]=i;else if(n.type===m["a"].input_pop)u[a]=i;else if(n.type===m["a"].radio)h[a]=i;else if(n.type===m["a"].sel_search)v[a]=i;else if(n.type===m["a"].list_multi)"string"===typeof i&&i.length>0?f[a]=i.split(","):f[a]=[];else if(n.type===m["a"].upload||n.type===m["a"].file||n.type===m["a"].image){if(i){var I="";if(i.indexOf(",")>0){var k=i.split(",")[0];I=k.substring(k.lastIndexOf("/")+1)}else I=i.substring(i.lastIndexOf("/")+1);d[a]={name:I,status:"done",path:i}}}else w[n.key]=i;for(var O in t.disabledRows)if(t.disabledRows.hasOwnProperty(O)&&e.hasOwnProperty(O)&&!0!==C){var P=t.disabledRows[O];C=P instanceof Array?P.includes(e[O]):P===e[O],C&&y.push(b.id)}}));var V=!1;if(n instanceof Array){var S=n[a];"number"===typeof S&&(V=!0,i.splice(S,0,b),t.inputValues.splice(S,0,w))}V||(i.push(b),t.inputValues.push(w))})),this.dragSort&&this.inputValues.forEach((function(e,n){e[t.dragSortKey]=n+1})),this.disabledRowIds=y,this.checkboxValues=s,this.selectValues=l,this.jdateValues=r,this.jInputPopValues=u,this.slotValues=c,this.uploadValues=d,this.popupValues=p,this.radioValues=h,this.multiSelectValues=f,this.searchSelectValues=v,this.recalcAllStatisticsColumns(),a&&(this.rows=i,this.$nextTick((function(){t.updateFormValues()}))),i},getInputNumberMaxValue:function(e){var t=0;return this.inputValues.forEach((function(n,a){var i,o=n[e.key];try{i=parseInt(o)}catch(s){i=0}t=0===a||i>t?i:t})),t},add:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(t<1)){for(var a,i=this.rows,o=0;o<t;o++)i=this.push({},!1,i),a=i[i.length-1];this.rows=i,this.$nextTick((function(){e.updateFormValues()})),this.$emit("added",{row:function(){var t=Object.assign({},a);return t.id=e.getCleanId(t.id),t}(),target:this});var s=this.getElement("tbody"),l=s.offsetHeight,r=s.scrollTop+l;(!1!==n||s.scrollHeight-r<=10)&&this.$nextTick((function(){s.scrollTop=s.scrollHeight}))}},insert:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(e||!(n<1)){for(var a=this.rows,i=[],o=0;o<n;o++){var s={id:this.generateId(a)};a=this.push(s,!1,a,e),i.push(s)}this.rows=a,this.$nextTick((function(){t.recalcSortNumber(),t.forceUpdateFormValues()})),this.$emit("inserted",{rows:i.map((function(e){var n=Object(v["d"])(e);return n.id=t.getCleanId(n.id),n})),num:n,insertIndex:e,target:this})}},removeSelectedRows:function(){this.removeRows(this.selectedRowIds),this.selectedRowIds=[]},removeRows:function(e){var t=this,n=e;if(!(e instanceof Array)){if("string"!==typeof e)throw"JEditableTable.removeRows() 函数需要的参数可以是string或Array类型，但提供的却是".concat(P(e));n=[e]}var a=Object(v["d"])(this.rows);return n.forEach((function(e){e=t.getCleanId(e);var n=function(n){for(var a=0;a<n.length;a++){var i=t.getCleanId(n[a].id);if(i===e)return n.splice(a,1),!0}};if(n(a)){n(t.inputValues);var i=t.getCleanId(e);t.deleteIds.push(i)}})),this.rows=a,this.$emit("deleted",this.getDeleteIds(),this),this.$nextTick((function(){t.updateFormValues(),t.recalcAllStatisticsColumns()})),!0},getValuesAsync:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,a=t.validate,i=t.rowIds,o=t.deleteTempId;"boolean"!==typeof a&&(a=!0),i instanceof Array||(i=null),"boolean"!==typeof o&&(o=!1);var s,l=0,r=0,u=Object(v["d"])(this.inputValues),c=Object.assign({},this.tooltips),d=Object(v["d"])(this.notPassedIds),p=[],h=O(u);try{var f=function(){var t=s.value,n=!1;if(null==i)n=!0;else{var u,h=O(i);try{for(h.s();!(u=h.n()).done;){var f=u.value;if(e.getCleanId(f)===e.getCleanId(t.id)){n=!0;break}}}catch(y){h.e(y)}finally{h.f()}}if(!n)return 1;e.columns.forEach((function(n){var i=n.key+t.id;if(n.type===m["a"].checkbox){var o=e.checkboxValues[i];n.customValue instanceof Array?t[n.key]=o?n.customValue[0]:n.customValue[1]:t[n.key]=o}else if(n.type===m["a"].select){var s=e.selectValues[i];t[n.key]=s instanceof Array?Object(v["d"])(s):s}else if(n.type===m["a"].date||n.type===m["a"].datetime)t[n.key]=e.jdateValues[i];else if(n.type===m["a"].input_pop)t[n.key]=e.jInputPopValues[i];else if(n.type===m["a"].upload)t[n.key]=Object(v["d"])(e.uploadValues[i]||null);else if(n.type===m["a"].image||n.type===m["a"].file){var u=Object(v["d"])(e.uploadValues[i]||null);u&&(t[n.key]=u["path"]||null)}else n.type===m["a"].popup?t[n.key]||(t[n.key]=e.popupValues[i]||null):n.type===m["a"].radio?t[n.key]=e.radioValues[i]:n.type===m["a"].sel_search?t[n.key]=e.searchSelectValues[i]:n.type===m["a"].list_multi?e.multiSelectValues[i]&&0!==e.multiSelectValues[i].length?t[n.key]=e.multiSelectValues[i].join(","):t[n.key]="":n.type===m["a"].slot&&(t[n.key]=e.slotValues[i]);if(!0===a){var p=function(e){c[i]=e[0],!1===c[i].passed&&r++,c[i].visible=!1,d=e[1]};l++;var h=e.validateOneInputAsync(t[n.key],t,n,d,!1,"getValues",(function(e){p(e),l--}));p(h)}})),o&&e.isTempId(t.id)?delete t.id:t.id=e.getCleanId(t.id),p.push(t)};for(h.s();!(s=h.n()).done;)f()}catch(g){h.e(g)}finally{h.f()}!0===a&&(this.tooltips=c,this.notPassedIds=d);var y=setInterval((function(){0===l&&(clearInterval(y),"function"===typeof n&&n({error:r,values:p}))}),10);return{error:r,values:p}},getValuesSync:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.getValuesAsync(e)},getValues:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;this.getValuesAsync({validate:t,rowIds:n},(function(t){var n=t.error,a=t.values;"function"===typeof e&&e(n,a)}))},getValuesPromise:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;return new Promise((function(i,o){e.getValuesAsync({validate:t,rowIds:n,deleteTempId:a},(function(e){var t=e.error,n=e.values;0===t?i(n):o(m["b"])}))}))},getDeleteIds:function(){return Object(v["d"])(this.deleteIds)},getAll:function(e,t){var n=this;return new Promise((function(a,i){var o=n.getDeleteIds();n.getValuesPromise(e,null,t).then((function(e){a({values:e,deleteIds:o})})).catch((function(e){i(e)}))}))},getAllSync:function(e,t,n){var a=this.getValuesSync({validate:e,rowIds:t,deleteTempId:n});return a.deleteIds=this.getDeleteIds(),a},_getValueForSlot:function(e){return this.getValuesSync({rowIds:[e]}).values[0]},_getAllValuesForSlot:function(){return Object(v["d"])({inputValues:this.inputValues,selectValues:this.selectValues,checkboxValues:this.checkboxValues,jdateValues:this.jdateValues,jInputPopValues:this.jInputPopValues,slotValues:this.slotValues,uploadValues:this.uploadValues,popupValues:this.popupValues,radioValues:this.radioValues,multiSelectValues:this.multiSelectValues,searchSelectValues:this.searchSelectValues})},setValues:function(e){var t=this;e.forEach((function(e){var n=e.rowKey,a=e.values;n=t.getCleanId(n);var i=function(e){if(a.hasOwnProperty(e)){var i=a[e],o=!1;t.inputValues.forEach((function(a){n===t.getCleanId(a.id)&&a.hasOwnProperty(e)&&(o=!0,a[e]=i)}));var s="".concat(e).concat(t.caseId).concat(n);o||(o=0===i||i?t.setOneValue(t.selectValues,s,i):t.setOneValue(t.selectValues,s,void 0)),o||(o=t.setOneValue(t.checkboxValues,s,i)),o||(o=t.setOneValue(t.jdateValues,s,i)),o||(o=t.setOneValue(t.jInputPopValues,s,i)),o||(o=t.setOneValue(t.slotValues,s,i)),o||(o=t.setOneValue(t.uploadValues,s,i)),o||(o=t.setOneValue(t.popupValues,s,i)),o||(o=t.setOneValue(t.radioValues,s,i)),o||(o=t.setOneValue(t.multiSelectValues,s,i)),o||(o=t.setOneValue(t.searchSelectValues,s,i))}};for(var o in a)i(o)})),this.forceUpdateFormValues()},setOneValue:function(e,t,n){var a=this.valuesHasOwnProperty(e,t);return!!a&&(this.$set(e,a,n),!0)},valuesHasOwnProperty:function(e,t){var n=t;return e.hasOwnProperty(n)?n:e.hasOwnProperty(n+this.tempId)?n+this.tempId:null},validateOneInputAsync:function(e,t,n,a){var i=this,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"input",l=arguments.length>6?arguments[6]:void 0,r=Object.assign({},this.tooltips),u=n.key+t.id;r[u]=r[u]?r[u]:{};var c=this.validateValue(n,e),d=V(c,2),p=d[0],h=d[1],f=function(e){var t=V(e,2),s=t[0],c=t[1];if(null!=s){r[u].visible=!s,r[u].passed=s;var d=a.indexOf(u),p=null,h=null;s?-1!==d&&a.splice(d,1):(r[u].title=i.replaceProps(n,c),p="red",h="0 0 0 2px rgba(255, 0, 0, 0.2)",-1===d&&a.push(u));var f=document.getElementById(u);null!=f&&(n.type===m["a"].select&&(f=f.getElementsByClassName("ant-select-selection")[0]),n.type!==m["a"].date&&n.type!==m["a"].datetime||(f=f.getElementsByTagName("input")[0]),n.type!==m["a"].upload&&n.type!==m["a"].file&&n.type!==m["a"].image||(f=f.getElementsByClassName("ant-upload")[0].getElementsByClassName("ant-btn")[0]),f.style.borderColor=p,f.style.boxShadow=h,"SPAN"===f.tagName&&(f.style.display="block"))}o&&(i.tooltips=r,i.notPassedIds=a),"function"===typeof l&&l([r[u],a])};if("function"===typeof p){var v=!1;p(s,e,{id:this.getCleanId(t.id)},N({},n),(function(e,t){v||(v=!0,"string"===typeof t&&(h=t),f(null==e?[null,h]:[!!e,h]))}),this)}else f([p,h]);return[r[u],a]},validateOneInput:function(e,t,n,a){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"input";return this.validateOneInputAsync(e,t,n,a,i,o)},validateValue:function(e,t){var n=e.validateRules,a=!0,i="";if(n instanceof Array){var o,s=O(n);try{for(s.s();!(o=s.n()).done;){var l=o.value,r=null==t||""===t;if(!0===l.required&&r)a=!1;else if(!0===l.unique||"only"===l.pattern){var u,c=this.getValuesSync({validate:!1}),d=c.values,p=0,h=O(d);try{for(h.s();!(u=h.n()).done;){var f=u.value;if(f[e.key]===t&&++p>=2){a=!1;break}}}catch(w){h.e(w)}finally{h.f()}}else if(l.pattern&&!r){for(var m=[{title:"6到16位数字",value:"n6-16",pattern:/^\d{6,18}$/},{title:"6到16位任意字符",value:"*6-16",pattern:/^.{6,16}$/},{title:"6到18位字母",value:"s6-18",pattern:/^[a-z|A-Z]{6,18}$/},{title:"网址",value:"url",pattern:/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/},{title:"电子邮件",value:"e",pattern:/^([\w]+\.*)([\w]+)@[\w]+\.\w{3}(\.\w{2}|)$/},{title:"手机号码",value:"m",pattern:/^1[3456789]\d{9}$/},{title:"邮政编码",value:"p",pattern:/^[1-9]\d{5}$/},{title:"字母",value:"s",pattern:/^[A-Z|a-z]+$/},{title:"数字",value:"n",pattern:/^-?\d+(\.?\d+|\d?)$/},{title:"整数",value:"z",pattern:/^-?\d+$/},{title:"非空",value:"*",pattern:/^.+$/},{title:"金额",value:"money",pattern:/^(([1-9][0-9]*)|([0]\.\d{0,2}|[1-9][0-9]*\.\d{0,2}))$/}],v=!1,y=0,g=m;y<g.length;y++){var b=g[y];if(l.pattern===b.value&&b.pattern){a=new RegExp(b.pattern).test(t),v=!0;break}}v||(a=new RegExp(l.pattern).test(t))}else if("function"===typeof l.handler)return[l.handler,l.message];if(!a){i=l.message;break}}}catch(w){s.e(w)}finally{s.f()}}return[a,i]},updateFormValues:function(){var e,t=this,n=this.getElement("tbody").getElementsByClassName("tr"),a=[],i=O(n);try{for(i.s();!(e=i.n()).done;){var o=e.value;a.push(o)}}catch(f){i.e(f)}finally{i.f()}var s=a;if(this.visibleTrEls.length>0){s=[];var l,r=O(a);try{for(r.s();!(l=r.n()).done;){var u,c=l.value,d=!0,p=O(this.visibleTrEls);try{for(p.s();!(u=p.n()).done;){var h=u.value;if(h.id===c.id){d=!1;break}}}catch(f){p.e(f)}finally{p.f()}d&&s.push(c)}}catch(f){r.e(f)}finally{r.f()}}this.visibleTrEls=a,s.forEach((function(e){var n=e.dataset.idx,a=t.inputValues[n];for(var i in a)if(a.hasOwnProperty(i)){var o="".concat(i).concat(a.id),s=document.getElementById(o);s&&(s.value=a[i])}}))},forceUpdateFormValues:function(){this.visibleTrEls=[],this.updateFormValues()},recalcAllStatisticsColumns:function(){var e=this;this.hasStatisticsColumn&&Object.keys(this.statisticsColumns).forEach((function(t){return e.recalcOneStatisticsColumn(t)}))},recalcOneStatisticsColumn:function(e){if(this.hasStatisticsColumn&&this.statisticsColumns.hasOwnProperty(e)){var t=0;this.inputValues.forEach((function(n){var a=n[e];if(a&&"-"!==t)try{t+=Number.parseInt(a)}catch(i){t="-"}})),this.statisticsColumns[e]=t}},getStatisticsValue:function(e){return this.hasStatisticsColumn&&this.statisticsColumns.hasOwnProperty(e)?this.statisticsColumns[e]:null},handleChangeCheckedAll:function(){var e=this,t=[];this.getSelectAll||this.rows.forEach((function(n){-1===(e.disabledRowIds||[]).indexOf(n.id)&&t.push(n.id)})),this.selectedRowIds=t},handleChangeLeftCheckbox:function(e){var t=e.target.id;if(-1===(this.disabledRowIds||[]).indexOf(t)){var n=this.selectedRowIds.indexOf(t);-1!==n?this.selectedRowIds.splice(n,1):this.selectedRowIds.push(t)}},handleClickAdd:function(){this.add()},handleConfirmDelete:function(){this.removeSelectedRows()},handleClickClearSelection:function(){this.clearSelection()},clearSelection:function(){this.selectedRowIds=[]},handleSelectFilterOption:function(e,t,n){return!0!==n.allowSearch&&!0!==n.allowInput||t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},handleSearchSelect:function(e,t,n,a){if(!0!==a.allowSearch&&!0===a.allowInput){var i,o=!1,s=O(a.options);try{for(s.s();!(i=s.n()).done;){var l=i.value;if(l.value.toLocaleString()===e.toLocaleString()){o=!0;break}}}catch(r){s.e(r)}finally{s.f()}!o&&e&&a.options.push({title:e,value:e,searchAdd:!0})}},handleBlurSearch:function(e,t,n,a){if(!0===a.allowInput&&"string"===typeof e){var i=[];a.options.forEach((function(t,n){t.value.toLocaleString()===e.toLocaleString()?delete t.searchAdd:!0===t.searchAdd&&i.push(n)}));var o,s=O(i.reverse());try{for(s.s();!(o=s.n()).done;){var l=o.value;a.options.splice(l,1)}}catch(r){s.e(r)}finally{s.f()}}this.validateOneInput(e,n,a,this.notPassedIds,!0,"blur")},emitDragged:function(e,t){this.$emit("dragged",{oldIndex:e,newIndex:t,target:this})},handleDragMoveStart:function(e){this.dragging=!0,this.$refs.scrollView.style.overflow="hidden"},handleDragMoveEnd:function(e){this.dragging=!1,this.$refs.scrollView.style.overflow="auto";var t=e.oldIndex,n=e.newIndex,a=e.item.dataset.idx,i=Number.parseInt(a)-t;t+=i,n+=i,this.rowResort(t,n),this.emitDragged(t,n)},rowResort:function(e,t){var n=function(n){var a=n[e];n.splice(e,1),n.splice(t,0,a)};n(this.rows),n(this.inputValues),this.recalcSortNumber(),this.forceUpdateFormValues()},recalcSortNumber:function(){var e=this;this.dragSort&&this.inputValues.forEach((function(t,n){return t[e.dragSortKey]=n+1}))},_handleRowMoveUp:function(e){if(e>0){var t=e-1;this.rowResort(e,t),this.emitDragged(e,t)}},_handleRowMoveDown:function(e){if(e<this.rows.length-1){var t=e+1;this.rowResort(e,t),this.emitDragged(e,t)}},_handleRowInsertDown:function(e){var t=e+1;this.insert(t)},handleMouseoverCommono:function(e,t){var n=t.key+e.id;-1!==this.notPassedIds.indexOf(n)&&this.showOrHideTooltip(n,!0,!0)},handleMouseoutCommono:function(e,t){var n=t.key+e.id;this.showOrHideTooltip(n,!1)},handleInputCommono:function(e,t,n,a){var i=this.inputValues[t][a.key]||"",o=e.value,s=e.dataset,l=e.selectionStart,r=m["a"].input,u=!0;"true"==="".concat(s.inputNumber)&&(r=m["a"].inputNumber,/^-?\d+\.?\d*$/.test(o)||""===o||"-"===o||(u=!1,o=i,e.value=o,"number"===typeof l&&(e.selectionStart=l-1,e.selectionEnd=l-1))),this.inputValues[t][a.key]=o,this.validateOneInput(o,n,a,this.notPassedIds,!0,"input"),r===m["a"].inputNumber&&this.recalcOneStatisticsColumn(a.key),u&&this.elemValueChange(r,n,a,o)},handleChangeSlotCommon:function(e,t,n,a){this.slotValues=this.bindValuesChange(e,t,"slotValues"),this.validateOneInput(e,n,a,this.notPassedIds,!0,"change"),this.elemValueChange(m["a"].slot,n,a,e)},handleBlurCommono:function(e,t,n,a){var i=e.value,o=e.dataset;o&&"true"==="".concat(o.inputNumber)&&(i=/^-?\d+\.?\d*$/.test(i)?Number.parseFloat(i):"",e.value=i),this.validateOneInput(i,n,a,this.notPassedIds,!0,"blur")},handleChangeCheckboxCommon:function(e,t,n){var a=e.target,i=a.id,o=a.checked;this.checkboxValues=this.bindValuesChange(o,i,"checkboxValues"),this.elemValueChange(m["a"].checkbox,t,n,o)},handleChangeSelectCommon:function(e,t,n,a){this.selectValues=this.bindValuesChange(e,t,"selectValues"),this.validateOneInput(e,n,a,this.notPassedIds,!0,"change"),this.elemValueChange(m["a"].select,n,a,e)},handleChangeJDateCommon:function(e,t,n,a,i){this.jdateValues=this.bindValuesChange(e,t,"jdateValues"),this.validateOneInput(e,n,a,this.notPassedIds,!0,"change"),i?this.elemValueChange(m["a"].datetime,n,a,e):this.elemValueChange(m["a"].date,n,a,e)},handleChangeJInputPopCommon:function(e,t,n,a){this.jInputPopValues=this.bindValuesChange(e,t,"jInputPopValues"),this.validateOneInput(e,n,a,this.notPassedIds,!0,"change"),this.elemValueChange(m["a"].input_pop,n,a,e)},handleChangeUpload:function(e,t,n,a){var i=e.file,o={name:i.name,type:i.type,size:i.size,status:i.status,percent:i.percent};a.responseName&&i.response&&(o["responseName"]=i.response[a.responseName]),"done"===i.status?o["path"]=i.response[a.responseName]:"error"===i.status&&(o["message"]=i.response.message||"未知错误"),this.uploadValues=this.bindValuesChange(o,t,"uploadValues")},handleMoreOperation:function(e,t){var n="";this.uploadValues&&this.uploadValues[e]&&(n=this.uploadValues[e].path),this.$refs.filePop.show(e,n,t)},handleFileSuccess:function(e){e.id&&(this.uploadValues=this.bindValuesChange(e,e.id,"uploadValues"))},bindValuesChange:function(e,t,n){return this.$set(this[n],t,e),this[n]},showOrHideTooltip:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.tooltips[e]||n){var a=this.tooltips[e]||{};a.visible!==t&&(a.visible=t,this.$set(this.tooltips,e,a))}},elemValueChange:function(e,t,n,a){var i=Object.assign({},n),o=Object.assign({},t);o.id=this.getCleanId(o.id);var s=this.getValuesSync({validate:!1,rowIds:[o.id]}),l=s.values;l.length>0&&Object.assign(o,l[0]),this.$emit("valueChange",{type:e,row:o,column:i,value:a,target:this})},getCleanId:function(e){return e=this.removeCaseId(e),e=this.removeTempId(e),e},hasCaseId:function(e){return e&&e.startsWith(this.caseId)},removeCaseId:function(e){return this.hasCaseId(e)?e.substring(this.caseId.length,e.length):e},isTempId:function(e){return(e||"").endsWith(this.tempId)},removeTempId:function(e){return this.isTempId(e)?e.substring(0,e.length-this.tempId.length):e},handleClickDelFile:function(e){this.uploadValues[e]=null},handleClickDownloadFile:function(e){var t=this.uploadValues[e]||{},n=t.path;if(n){var a=Object(b["e"])(n);window.open(a)}},handleClickDownFileByUrl:function(e){var t=this.uploadValues[e]||{},n=t.url,a=t.path;n&&0!==n.length||a&&a.length>0&&(n=Object(b["e"])(a.split(",")[0])),n&&window.open(n)},handleClickShowImageError:function(e){var t=this.uploadValues[e]||null;t&&t["message"]&&this.$error({title:"上传出错",content:"错误信息："+t["message"],maskClosable:!0})},_loadDictConcatToOptions:function(e){Object(g["b"])(e.dictCode).then((function(t){if(t.success){var n=e.options||[];t.result.forEach((function(e){var t,a=O(n);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(i.value===e.value)return}}catch(o){a.e(o)}finally{a.f()}n.push(e)})),e.options=n}}))},log:function(){this.$attrs.logger},getVM:function(){return this},getParentContainer:function(e){var t=this,n=function(){if(t.$el&&8!==t.$el.nodeType)return t.$el;var n=document.getElementById(t.caseId+"inputTable");return null!=n?n:e.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode}(),a=function(e){var t=null;if(e["currentStyle"]?t=e["currentStyle"]["overflow"]:window.getComputedStyle&&(t=window.getComputedStyle(e)["overflow"]),null!=t){if("hidden"===t){var n=a(e.parentNode);return null!=n?n:e.parentNode}return e.parentNode&&"body"!==e.parentNode.tagName.toLocaleLowerCase()?a(e.parentNode):null}return e},i=a(n);return null!=i?i:n},replaceProps:function(e,t){return t&&"string"===typeof t&&(t=t.replace(/\${title}/g,e.title),t=t.replace(/\${key}/g,e.key),t=t.replace(/\${defaultValue}/g,e.defaultValue)),t},buildTrStyle:function(e){return{top:"".concat(F*e,"px")}},buildTdStyle:function(e){var t=function(e){return e.type===m["a"].hidden||"0px"===e.width||"0"===e.width||0===e.width},n={};e.width?n["width"]=e.width:this.columns?n["width"]="".concat(92/this.columns.filter((function(e){return!t(e)})).length,"%"):n["width"]="120px";var a=e.type===m["a"].checkbox;return a&&(n["align-items"]="center",n["text-align"]="center",n["padding-left"]="0",n["padding-right"]="0"),t(e)&&(n["padding-left"]="0",n["padding-right"]="0"),n},buildProps:function(e,t){var n={};if("object"===P(t.props))for(var a in t.props)t.props.hasOwnProperty(a)&&(n[a]=this.replaceProps(t,t.props[a]));return t.type!==m["a"].select||!0!==t.allowInput&&!0!==t.allowSearch||(n["showSearch"]=!0),n["disabled"]="boolean"===typeof t["disabled"]?t["disabled"]:n["disabled"],!0!==n["disabled"]&&(n["disabled"]=-1!==(this.disabledRowIds||[]).indexOf(e.id)),!0===this.disabled&&(n["disabled"]=!0),n},uploadGetHeaders:function(e,t){var n={};return!0===t.token&&(n["X-Access-Token"]=this.accessToken),n},getUploadAction:function(e){return e||window._CONFIG["domianURL"]+"/sys/common/upload"},getCellImageView:function(e){var t=this.uploadValues[e]||null;if(t){if(t["url"])return t["url"];if(t["path"]){var n=t["path"].split(",")[0];return Object(b["e"])(n)}}return""},popupCallback:function(e,t,n,a,i,o){var s=this;this.popupValues[n]=e,t&&Object.keys(t).map((function(e){s.columns.map((function(a){if(a.key===e){var i=n.substring(n.indexOf(s.caseIdPrefix));"date"===a.type?s.handleChangeJDateCommon(t[e],e+i,{id:i},a,!1):"datetime"===a.type?s.handleChangeJDateCommon(t[e],e+i,{id:i},a,!0):s.inputValues[o][e]=t[e]}}))})),this.validateOneInput(e,a,i,this.notPassedIds,!0,"change"),this.elemValueChange("input",a,i,e),this.$nextTick((function(){s.forceUpdateFormValues()}))},getPopupValue:function(e){return this.popupValues[e]},handleRadioChange:function(e,t,n,a){this.radioValues=this.bindValuesChange(e,t,"radioValues"),this.validateOneInput(e,n,a,this.notPassedIds,!0,"change"),this.elemValueChange(m["a"].radio,n,a,e)},handleMultiSelectChange:function(e,t,n,a){this.multiSelectValues=this.bindValuesChange(e,t,"multiSelectValues"),this.validateOneInput(e,n,a,this.notPassedIds,!0,"change"),this.elemValueChange(m["a"].list_multi,n,a,e)},handleSearchSelectChange:function(e,t,n,a){this.searchSelectValues=this.bindValuesChange(e,t,"searchSelectValues"),this.validateOneInput(e,n,a,this.notPassedIds,!0,"change"),this.elemValueChange(m["a"].sel_search,n,a,e)},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},getEllipsisWord:function(e,t){return e&&0!=e.length?e.length>t?e.substr(0,t):e:""}},beforeDestroy:function(){this.destroyCleanGroupRequest=!0}},B=$,U=(n("5f3b"),n("2877")),q=Object(U["a"])(B,u,c,!1,null,"139b423a",null);t["default"]=q.exports},"89f2":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return c}));var a=n("4ec3");n("0fea");function i(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",s=n.toStringTag||"@@toStringTag";function l(n,a,i,s){var l=a&&a.prototype instanceof u?a:u,c=Object.create(l.prototype);return o(c,"_invoke",function(n,a,i){var o,s,l,u=0,c=i||[],d=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,l=e,p.n=n,r}};function h(n,a){for(s=n,l=a,t=0;!d&&u&&!i&&t<c.length;t++){var i,o=c[t],h=p.p,f=o[2];n>3?(i=f===a)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,p.v=a,p.n=o[1]):h<f&&(i=n<3||o[0]>a||a>f)&&(o[4]=n,o[5]=a,p.n=f,s=0))}if(i||n>1)return r;throw d=!0,a}return function(i,c,f){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&h(c,f),s=c,l=f;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(p.n=-1),h(s,l)):p.n=l:p.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=p.n<0)?l:n.call(a,p))!==r)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,s),!0),c}var r={};function u(){}function c(){}function d(){}t=Object.getPrototypeOf;var p=[][a]?t(t([][a]())):(o(t={},a,(function(){return this})),t),h=d.prototype=u.prototype=Object.create(p);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,o(e,s,"GeneratorFunction")),e.prototype=Object.create(h),e}return c.prototype=d,o(h,"constructor",d),o(d,"constructor",c),c.displayName="GeneratorFunction",o(d,s,"GeneratorFunction"),o(h),o(h,s,"Generator"),o(h,a,(function(){return this})),o(h,"toString",(function(){return"[object Generator]"})),(i=function(){return{w:l,m:f}})()}function o(e,t,n,a){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}o=function(e,t,n,a){function s(t,n){o(e,t,(function(e){return this._invoke(t,n,e)}))}t?i?i(e,t,{value:n,enumerable:!a,configurable:!a,writable:!a}):e[t]=n:(s("next",0),s("throw",1),s("return",2))},o(e,t,n,a)}function s(e,t,n,a,i,o,s){try{var l=e[o](s),r=l.value}catch(e){return void n(e)}l.done?t(r):Promise.resolve(r).then(a,i)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function l(e){s(o,a,i,l,r,"next",e)}function r(e){s(o,a,i,l,r,"throw",e)}l(void 0)}))}}function r(e){return u.apply(this,arguments)}function u(){return u=l(i().m((function e(t){var n,o;return i().w((function(e){while(1)switch(e.n){case 0:if(t){e.n=1;break}return e.a(2,"字典Code不能为空!");case 1:if(!Object(a["u"])(t)){e.n=2;break}return n={},n.result=Object(a["u"])(t),n.success=!0,e.a(2,n);case 2:return e.n=3,Object(a["f"])(t);case 3:return o=e.v,e.a(2,o)}}),e)}))),u.apply(this,arguments)}function c(e,t){if(null!=t&&0!=t.length){if(!e)return"字典Code不能为空!";if(Object(a["u"])(e)){var n=Object(a["u"])(e).filter((function(e){return e["value"]==t}));if(n&&n.length>0)return n[0]["text"]}}}},"95ba":function(e,t,n){},cf74:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{position:"relative"},attrs:{id:e.containerId}},[t("div",{staticClass:"movety-container",staticStyle:{padding:"0 8px",position:"absolute","z-index":"91",height:"32px",width:"104px","text-align":"center"},style:{top:e.top+"px",left:e.left+"px",display:e.moveDisplay}},[t("div",{class:e.showMoverTask?"uploadty-mover-mask":"movety-opt",staticStyle:{"margin-top":"12px"},attrs:{id:e.containerId+"-mover"}},[t("a",{staticStyle:{margin:"0 5px"},on:{click:e.moveLast}},[t("a-icon",{staticStyle:{color:"#fff","font-size":"16px"},attrs:{type:"arrow-left"}})],1),t("a",{staticStyle:{margin:"0 5px"},on:{click:e.moveNext}},[t("a-icon",{staticStyle:{color:"#fff","font-size":"16px"},attrs:{type:"arrow-right"}})],1)])]),t("a-upload",{class:{"uploadty-disabled":e.disabled},attrs:{name:"file",multiple:!0,action:e.uploadAction,headers:e.headers,data:{biz:e.bizPath},fileList:e.fileList,beforeUpload:e.beforeUpload,disabled:e.disabled,returnUrl:e.returnUrl,listType:e.complistType},on:{change:e.handleChange,preview:e.handlePreview}},[[e.isImageComp?t("div",[t("a-icon",{attrs:{type:"plus"}}),t("div",{staticClass:"ant-upload-text"},[e._v(e._s(e.text))])],1):e.buttonVisible?t("a-button",[t("a-icon",{attrs:{type:"upload"}}),e._v(e._s(e.text)+" ")],1):e._e()]],2),t("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[t("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1)},i=[],o=n("2b0e"),s=n("9fb0"),l=n("0fea"),r="all",u="image",c=function(){return"-"+parseInt(1e4*Math.random()+1,10)},d=function(e){if(e.lastIndexOf("\\")>=0){var t=new RegExp("\\\\","g");e=e.replace(t,"/")}return e.substring(e.lastIndexOf("/")+1)},p={name:"JUpload",data:function(){return{uploadAction:window._CONFIG["domianURL"]+"/sys/common/upload",headers:{},fileList:[],newFileList:[],uploadGoOn:!0,previewVisible:!1,previewImage:"",containerId:"",top:"",left:"",moveDisplay:"none",showMoverTask:!1,moverHold:!1,currentImg:""}},props:{text:{type:String,required:!1,default:"点击上传"},fileType:{type:String,required:!1,default:r},bizPath:{type:String,required:!1,default:"temp"},value:{type:[String,Array],required:!1},disabled:{type:Boolean,required:!1,default:!1},triggerChange:{type:Boolean,required:!1,default:!1},returnUrl:{type:Boolean,required:!1,default:!0},number:{type:Number,required:!1,default:0},buttonVisible:{type:Boolean,required:!1,default:!0}},watch:{value:{immediate:!0,handler:function(){var e=this.value;e instanceof Array?this.returnUrl?this.initFileList(e.join(",")):this.initFileListArr(e):this.initFileList(e)}}},computed:{isImageComp:function(){return this.fileType===u},complistType:function(){return this.fileType===u?"picture-card":"text"}},created:function(){var e=o["default"].ls.get(s["a"]);this.headers={"X-Access-Token":e},this.containerId="container-ty-"+(new Date).getTime()},methods:{initFileListArr:function(e){if(e&&0!=e.length){for(var t=[],n=0;n<e.length;n++){var a=Object(l["e"])(e[n].filePath);t.push({uid:c(),name:e[n].fileName,status:"done",url:a,response:{status:"history",message:e[n].filePath}})}this.fileList=t}else this.fileList=[]},initFileList:function(e){if(e&&0!=e.length){for(var t=[],n=e.split(","),a=0;a<n.length;a++){var i=Object(l["e"])(n[a]);t.push({uid:c(),name:d(n[a]),status:"done",url:i,response:{status:"history",message:n[a]}})}this.fileList=t}else this.fileList=[]},handlePathChange:function(){var e=this.fileList,t="";e&&0!=e.length||(t="");for(var n=[],a=0;a<e.length;a++)n.push(e[a].response.message);n.length>0&&(t=n.join(",")),this.$emit("change",t)},beforeUpload:function(e){this.uploadGoOn=!0;var t=e.type;return!(this.fileType===u&&t.indexOf("image")<0)||(this.$message.warning("请上传图片"),this.uploadGoOn=!1,!1)},handleChange:function(e){e.file.status||!1!==this.uploadGoOn||e.fileList.pop();var t=e.fileList;if("done"===e.file.status?(this.number>0&&(t=t.slice(-this.number)),e.file.response.success&&(t=t.map((function(e){if(e.response){var t=e.response.message;e.url=Object(l["e"])(t)}return e})))):"error"===e.file.status?this.$message.error("".concat(e.file.name," 上传失败.")):"removed"===e.file.status&&this.handleDelete(e.file),this.fileList=t,"done"===e.file.status||"removed"===e.file.status)if(this.returnUrl)this.handlePathChange();else{this.newFileList=[];for(var n=0;n<t.length;n++){var a={fileName:t[n].name,filePath:t[n].response.message,fileSize:t[n].size};this.newFileList.push(a)}this.$emit("change",this.newFileList)}},handleDelete:function(e){},handlePreview:function(e){this.fileType===u?(this.previewImage=e.url||e.thumbUrl,this.previewVisible=!0):location.href=e.url},handleCancel:function(){this.previewVisible=!1},moveLast:function(){var e=this.getIndexByUrl();if(0==e)this.$message.warn("未知的操作");else{for(var t=this.fileList[e].url,n=this.fileList[e-1].url,a=[],i=0;i<this.fileList.length;i++)i==e-1?a.push(t):i==e?a.push(n):a.push(this.fileList[i].url);this.currentImg=n,this.$emit("change",a.join(","))}},moveNext:function(){var e=this.getIndexByUrl();if(e==this.fileList.length-1)this.$message.warn("已到最后~");else{for(var t=this.fileList[e].url,n=this.fileList[e+1].url,a=[],i=0;i<this.fileList.length;i++)i==e+1?a.push(t):i==e?a.push(n):a.push(this.fileList[i].url);this.currentImg=n,this.$emit("change",a.join(","))}},getIndexByUrl:function(){for(var e=0;e<this.fileList.length;e++)if(this.fileList[e].url===this.currentImg||encodeURI(this.fileList[e].url)===this.currentImg)return e;return-1}},mounted:function(){var e=this,t=document.getElementById(this.containerId+"-mover");t.addEventListener("mouseover",(function(){e.moverHold=!0,e.moveDisplay="block"})),t.addEventListener("mouseout",(function(){e.moverHold=!1,e.moveDisplay="none"}));var n=document.getElementById(this.containerId)?document.getElementById(this.containerId).getElementsByClassName("ant-upload-list-picture-card"):[];n&&n.length>0&&(n[0].addEventListener("mouseover",(function(t){t=t||window.event;var n=t.target||t.srcElement;if("ant-upload-list-item-info"==n.className){e.showMoverTask=!1;var a=n.parentElement;e.left=a.offsetLeft,e.top=a.offsetTop+a.offsetHeight-50,e.moveDisplay="block",e.currentImg=n.getElementsByTagName("img")[0].src}})),n[0].addEventListener("mouseout",(function(t){t=t||window.event;var n=t.target||t.srcElement;"ant-upload-list-item-info"==n.className&&(e.showMoverTask=!0,setTimeout((function(){!1===e.moverHold&&(e.moveDisplay="none")}),100)),"ant-upload-list-item ant-upload-list-item-done"!=n.className&&"ant-upload-list ant-upload-list-picture-card"!=n.className||(e.moveDisplay="none")})))},model:{prop:"value",event:"change"}},h=p,f=(n("7279"),n("2877")),m=Object(f["a"])(h,a,i,!1,null,null,null);t["default"]=m.exports},e2e0:function(e,t,n){"use strict";function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return l}));var i={normal:"normal",input:"input",inputNumber:"inputNumber",checkbox:"checkbox",select:"select",date:"date",datetime:"datetime",upload:"upload",file:"file",image:"image",popup:"popup",list_multi:"list_multi",sel_search:"sel_search",radio:"radio",checkbox_meta:"checkbox_meta",input_pop:"input_pop",slot:"slot",hidden:"hidden"},o=Symbol();function s(e,t){return new Promise((function(n){(function a(){var i=e.$refs[t];i?n(i):setTimeout((function(){a()}),10)})()}))}function l(e,t){if(!e||"function"!==typeof e.validateFields)throw"form 参数需要的是一个form对象，而传入的却是".concat(a(e));var n={};return new Promise((function(t,n){e.validateFields((function(e,a){e?n({error:o}):t(a)}))})).then((function(e){return Object.assign(n,{formValue:e}),r(t)})).then((function(e){return Object.assign(n,{tablesValue:e}),Promise.resolve(n)})).catch((function(e){return Promise.reject(e)}))}function r(e,t){if(!(e instanceof Array))throw"'validateTables'函数的'cases'参数需要的是一个数组，而传入的却是".concat(a(e));return new Promise((function(n,a){var i=[],s=0;e&&0!=e.length||n(),function l(){var r=e[s];r.getAll(!0,t).then((function(t){i[s]=t,++s===e.length?n(i):l()}),(function(e){e===o&&a({error:o,index:s}),a(e)}))}()}))}}}]);