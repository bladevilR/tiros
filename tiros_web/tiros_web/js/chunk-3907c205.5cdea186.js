(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3907c205","chunk-42391c95"],{"260f":function(e,t,a){},"353a":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"80%",visible:e.visible,title:e.title,centered:"",bodyStyle:{height:"80vh"},confirmLoading:e.confirmLoading,destroyOnClose:!0,footer:null},on:{cancel:e.handleCancel}},[t("div",[t("iframe",{staticClass:"filename",staticStyle:{height:"calc(80vh - 25px)"},attrs:{src:e.filePath,width:"100%",frameborder:"0"}})])])},r=[],l=a("e2aa"),n={name:"DocPreviewModal",props:{title:{type:String,default:"文件预览"}},data:function(){return{visible:!1,confirmLoading:!1,filePath:""}},methods:{handleFilePath:function(e){var t=this;Object(l["c"])(e).then((function(e){if(e.success){var a=e.result;t.visible=!0,t.filePath=window._CONFIG["onlinePreviewDomainURL"]+"?url="+encodeURIComponent(a)}else t.$message.warning("查看文件失败")}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},o=n,s=(a("9216"),a("2877")),c=Object(s["a"])(o,i,r,!1,null,"484795fd",null);t["default"]=c.exports},"76bc":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"bodyWrapper"},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{label:"文件名称"}},[t("a-input",{attrs:{placeholder:"请输入文件名称",allowClear:""},model:{value:e.queryParam.fileName,callback:function(t){e.$set(e.queryParam,"fileName",t)},expression:"queryParam.fileName"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"资料类型"}},[t("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_outin_other_file_type"},model:{value:e.queryParam.fileType,callback:function(t){e.$set(e.queryParam,"fileType",t)},expression:"queryParam.fileType"}})],1)],1),t("a-col",{attrs:{md:10,sm:8}},[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-space",[t("a-button",{on:{click:e.findList}},[e._v("查询")]),t("a-button",{on:{click:e.handleUpload}},[e._v("上传")]),t("a-button",{on:{click:e.deleteRecord}},[e._v("删除")])],1)],1)])],1)],1)],1),t("div",{staticStyle:{height:"calc(100vh - 318px)"}},[t("vxe-table",{ref:"listTable",attrs:{border:"",height:"auto",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","checkbox-config":{trigger:"row",highlight:!0,range:!0},"edit-config":{trigger:"manual",mode:"row"}}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"5%"}}),t("vxe-table-column",{attrs:{title:"-",width:"8%"},scopedSlots:e._u([{key:"default",fn:function(a){var i=a.row;return[t("span",[t("a-space",[t("a",{on:{click:function(t){return t.stopPropagation(),e.handleSeeing(i)}}},[e._v("查看")]),t("a",{on:{click:function(t){return t.stopPropagation(),e.handleDownload(i)}}},[e._v("下载")])])],1)]}}])}),t("vxe-table-column",{attrs:{field:"name",title:"资料名称",width:"25%","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{field:"type",title:"文件类型",width:"8%"}}),t("vxe-table-column",{attrs:{field:"fileSize",title:"大小(KB)",width:"8%","header-align":"center",align:"right"}}),t("vxe-table-column",{attrs:{field:"uploadDate",title:"上传日期",width:"10%"}}),t("vxe-table-column",{attrs:{field:"remark",title:"备注",width:"25%","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{title:"操作",width:"11%"},scopedSlots:e._u([{key:"default",fn:function(a){var i=a.row;return[t("a",{on:{click:function(t){return t.stopPropagation(),e.handleEdit(i)}}},[e._v("编辑")])]}}])})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1),t("resource-upload-module",{ref:"modalForm",attrs:{outinDetailId:e.outinDetailId,other:!0},on:{ok:function(t){return e.loadData()}}}),t("edit-file-modal",{ref:"editModalForm",attrs:{other:!0},on:{ok:function(t){return e.loadData()}}}),t("doc-preview-modal",{ref:"docPreview",attrs:{title:e.fileName}})],1)},r=[],l=a("d214"),n=a("85dfa"),o=a("b824"),s=a("353a"),c=a("e2aa"),d={name:"PerformOtherResource",props:["outinDetailId"],components:{ResourceUploadModule:o["default"],EditFileModal:n["default"],DocPreviewModal:s["default"]},data:function(){return{queryParam:{fileName:"",outinDetailId:"",fileType:null,pageNo:1,pageSize:10},fileName:"",filePath:"",totalResult:0,allAlign:"center",tableData:[]}},created:function(){this.findList()},methods:{findList:function(){var e=this;this.queryParam.outinDetailId=this.outinDetailId,Object(l["O"])(this.queryParam).then((function(t){e.totalResult=t.result.total,e.loading=!1,e.tableData=t.result.records}))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()},loadData:function(){this.findList(),this.$emit("load")},handleUpload:function(){this.$refs.modalForm.handleAdd()},handleSeeing:function(e){this.fileName=e.name,this.$refs.docPreview.handleFilePath(e.savepath)},handleDownload:function(e){Object(c["b"])(e.savepath)},handleEdit:function(e){this.$refs.editModalForm.edit(e),this.$refs.editModalForm.title="编辑"},deleteRecord:function(){var e=this,t=this.$refs.listTable.getCheckboxRecords();t.length>0?this.$confirm({content:"是否删除选中".concat(t.length,"数据？"),okText:"确认",cancelText:"取消",onOk:function(){var a=t.map((function(e,t){return e.id})).join(",");Object(l["m"])("ids="+a).then((function(t){t.success&&e.findList(),e.$message.success(t.message)}))}}):this.$message.error("尚未选中任何数据!")}}},u=d,m=a("2877"),f=Object(m["a"])(u,i,r,!1,null,"25805215",null);t["default"]=f.exports},"85dfa":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,width:700,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:24,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"名称"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["name",e.validatorRules.name],expression:"[ 'name', validatorRules.name]",modifiers:{trim:!0}}],attrs:{placeholder:"文件名称"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:24,sm:24}},[t("a-form-item",{attrs:{label:"备注",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark",e.validatorRules.remark],expression:"[ 'remark',validatorRules.remark]"}]})],1)],1)],1)],1)],1)],1)},r=[],l=a("d214"),n={name:"EditFileModal",props:["other"],data:function(){return{title:"操作",visible:!1,model:{},labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:15}},confirmLoading:!1,form:this.$form.createForm(this),validatorRules:{name:{rules:[{required:!0,message:"请输入名称!"},{max:100,message:"输入长度不能超过100字符!"}]},remark:{rules:[{max:255,message:"输入长度不能超过255字符!"}]}}}},created:function(){},methods:{edit:function(e){var t=this;this.form.resetFields(),this.model=Object.assign({},e),this.visible=!0,this.$nextTick((function(){t.form.setFieldsValue({name:t.model.name,remark:t.model.remark})}))},handleOk:function(){var e=this,t=this;t.form.validateFields((function(a,i){if(!a){t.confirmLoading=!0;var r,n=Object.assign(t.model,i);r=e.other?Object(l["y"])(n):Object(l["B"])(n),r.then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok"),t.close()):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1}))}}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},o=n,s=a("2877"),c=Object(s["a"])(o,i,r,!1,null,null,null);t["default"]=c.exports},9216:function(e,t,a){"use strict";a("260f")}}]);