(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2501a10d","chunk-1712b60c","chunk-1bd47cc3"],{"11e8":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-row",[t("a-col",{attrs:{span:e.colSize}},[t("a-form-item",{attrs:{label:"用户账号",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["username",e.validatorRules.username],expression:"[ 'username', validatorRules.username]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入用户账号",readOnly:!!e.model.id}})],1)],1),e.model.id?e._e():[t("a-col",{attrs:{span:e.colSize}},[t("a-form-item",{attrs:{label:"登陆密码",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",e.validatorRules.password],expression:"[ 'password', validatorRules.password]"}],attrs:{type:"password",placeholder:"请输入登陆密码"}})],1)],1),t("a-col",{attrs:{span:e.colSize}},[t("a-form-item",{attrs:{label:"确认密码",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["confirmpassword",e.validatorRules.confirmpassword],expression:"[ 'confirmpassword', validatorRules.confirmpassword]"}],attrs:{type:"password",placeholder:"请重新输入登陆密码"},on:{blur:e.handleConfirmBlur}})],1)],1)],t("a-col",{attrs:{span:e.colSize}},[t("a-form-item",{attrs:{label:"用户姓名",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["realname",e.validatorRules.realname],expression:"[ 'realname', validatorRules.realname]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入用户姓名"}})],1)],1),t("a-col",{attrs:{span:e.colSize}},[t("a-form-item",{attrs:{label:"工号",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["workNo",e.validatorRules.workNo],expression:"[ 'workNo', validatorRules.workNo]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入工号"}})],1)],1),t("a-col",{attrs:{span:e.colSize}},[t("a-form-item",{attrs:{label:"职务",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("j-select-position",{directives:[{name:"decorator",rawName:"v-decorator",value:["post",{}],expression:"['post', {}]"}],attrs:{placeholder:"请选择职务",multiple:!1}})],1)],1),t("a-col",{attrs:{span:e.colSize}},[t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.roleDisabled,expression:"!roleDisabled"}],attrs:{label:"角色分配",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-select",{staticStyle:{width:"100%"},attrs:{mode:"multiple",placeholder:"请选择用户角色",optionFilterProp:"children",getPopupContainer:function(e){return e.parentNode}},model:{value:e.selectedRole,callback:function(t){e.selectedRole=t},expression:"selectedRole"}},e._l(e.roleList,(function(a,r){return t("a-select-option",{key:r.toString(),attrs:{value:a.id}},[e._v(" "+e._s(a.roleName)+" ")])})),1)],1)],1),t("a-col",{attrs:{span:e.colSize}},[t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.departDisabled,expression:"!departDisabled"}],attrs:{label:"部门分配",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input-search",{attrs:{placeholder:"点击选择部门",readOnly:""},on:{search:e.onSearch},model:{value:e.checkedDepartNameString,callback:function(t){e.checkedDepartNameString=t},expression:"checkedDepartNameString"}},[t("a-button",{attrs:{slot:"enterButton",icon:"search"},slot:"enterButton"},[e._v("选择")])],1)],1)],1),t("a-col",{attrs:{span:e.colSize}},[t("a-form-item",{attrs:{label:"身份",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-radio-group",{on:{change:e.identityChange},model:{value:e.identity,callback:function(t){e.identity=t},expression:"identity"}},[t("a-radio",{attrs:{value:"1"}},[e._v("普通用户")]),t("a-radio",{attrs:{value:"2"}},[e._v("上级")])],1)],1)],1),t("a-col",{attrs:{span:e.colSize}},[1==e.departIdShow?t("a-form-item",{attrs:{label:"负责部门",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-select",{staticStyle:{width:"100%"},attrs:{mode:"multiple",placeholder:"请选择负责部门",optionFilterProp:"children",getPopupContainer:function(e){return e.parentNode},dropdownStyle:{maxHeight:"200px",overflow:"auto"}},model:{value:e.departIds,callback:function(t){e.departIds=t},expression:"departIds"}},e._l(e.resultDepartOptions,(function(a){return t("a-select-option",{key:a.key,attrs:{value:a.key}},[e._v(e._s(a.title)+" ")])})),1)],1):e._e()],1),t("a-col",{attrs:{span:e.colSize}},[t("a-form-item",{attrs:{label:"生日",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["birthday",{initialValue:e.model.birthday?e.moment(e.model.birthday,e.dateFormat):null}],expression:"['birthday', {initialValue:!model.birthday?null:moment(model.birthday,dateFormat)}]"}],staticStyle:{width:"100%"},attrs:{placeholder:"请选择生日",getCalendarContainer:function(e){return e.parentNode}}})],1)],1),t("a-col",{attrs:{span:e.colSize}},[t("a-form-item",{attrs:{label:"性别",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["sex",{}],expression:"[ 'sex', {}]"}],attrs:{placeholder:"请选择性别",getPopupContainer:function(e){return e.parentNode}}},[t("a-select-option",{attrs:{value:1}},[e._v("男")]),t("a-select-option",{attrs:{value:2}},[e._v("女")])],1)],1)],1),t("a-col",{attrs:{span:e.colSize}},[t("a-form-item",{attrs:{label:"邮箱",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["email",e.validatorRules.email],expression:"[ 'email', validatorRules.email]"}],attrs:{placeholder:"请输入邮箱"}})],1)],1),t("a-col",{attrs:{span:e.colSize}},[t("a-form-item",{attrs:{label:"手机号码",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["phone",e.validatorRules.phone],expression:"[ 'phone', validatorRules.phone]"}],attrs:{placeholder:"请输入手机号码",disabled:e.isDisabledAuth("user:form:phone")}})],1)],1),t("a-col",{attrs:{span:e.colSize}},[t("a-form-item",{attrs:{label:"座机",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["telephone",e.validatorRules.telephone],expression:"[ 'telephone', validatorRules.telephone]"}],attrs:{placeholder:"请输入座机"}})],1)],1),t("a-col",{attrs:{span:e.colSize}},[t("a-form-item",{attrs:{label:"头像",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("j-image-upload",{staticClass:"avatar-uploader",attrs:{text:"上传"},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}})],1)],1)],2)],1)],1),t("depart-window",{ref:"departWindow",on:{ok:e.modalFormOk}})],1)},i=[],s=a("88bc"),l=a.n(s),n=a("c1df"),o=a.n(n),c=a("2b0e"),u=a("c63e"),d=a("61fc"),p=a("9fb0"),h=a("0fea"),m=a("4ec3"),f=a("c82c"),g=a("e610"),v={name:"BaseInfo2",components:{JImageUpload:g["default"],departWindow:u["default"],JSelectPosition:d["default"]},props:{currentUser:{type:Object,default:{}}},data:function(){return{colSize:12,departDisabled:!1,roleDisabled:!1,modalWidth:800,drawerWidth:700,modaltoggleFlag:!0,confirmDirty:!1,selectedDepartKeys:[],checkedDepartKeys:[],checkedDepartNames:[],checkedDepartNameString:"",resultDepartOptions:[],userId:"",disableSubmit:!1,userDepartModel:{userId:"",departIdList:[]},dateFormat:"YYYY-MM-DD",validatorRules:{username:{rules:[{required:!0,message:"请输入用户账号!"},{validator:this.validateUsername}]},password:{rules:[{required:!0,pattern:/^(?=.*[a-zA-Z])(?=.*\d)(?=.*[~!@#$%^&*()_+`\-={}:";'<>?,./]).{8,}$/,message:"密码由8位数字、大小写字母和特殊符号组成!"},{validator:this.validateToNextPassword}]},confirmpassword:{rules:[{required:!0,message:"请重新输入登陆密码!"},{validator:this.compareToFirstPassword}]},realname:{rules:[{required:!0,message:"请输入用户名称!"}]},phone:{rules:[{validator:this.validatePhone}]},email:{rules:[{validator:this.validateEmail}]},roles:{},workNo:{rules:[{required:!0,message:"请输入工号"},{validator:this.validateWorkNo}]},telephone:{rules:[{pattern:/^0\d{2,3}-[1-9]\d{6,7}$/,message:"请输入正确的座机号码"}]}},departIdShow:!1,departIds:[],title:"操作",visible:!1,model:{},roleList:[],selectedRole:[],labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},uploadLoading:!1,confirmLoading:!1,headers:{},form:this.$form.createForm(this),picUrl:"",url:{fileUpload:window._CONFIG["domianURL"]+"/sys/common/upload",userWithDepart:"/sys/user/userDepartList",userId:"/sys/user/generateUserId",syncUserByUserName:"/process/extActProcess/doSyncUserByUserName"},identity:"1",fileList:[]}},created:function(){var e=c["default"].ls.get(p["a"]);this.headers={"X-Access-Token":e}},mounted:function(){this.currentUser&&this.currentUser.id&&this.show(this.currentUser.id)},computed:{uploadAction:function(){return this.url.fileUpload}},methods:{isDisabledAuth:function(e){return Object(f["a"])(e)},toggleScreen:function(){this.modaltoggleFlag?this.modalWidth=window.innerWidth:this.modalWidth=800,this.modaltoggleFlag=!this.modaltoggleFlag},initialRoleList:function(){var e=this;Object(m["U"])().then((function(t){t.success&&(e.roleList=t.result)}))},loadUserRoles:function(e){var t=this;Object(m["T"])({userid:e}).then((function(e){e.success&&(t.selectedRole=e.result)}))},refresh:function(){this.selectedDepartKeys=[],this.checkedDepartKeys=[],this.checkedDepartNames=[],this.checkedDepartNameString="",this.userId="",this.resultDepartOptions=[],this.departId=[],this.departIdShow=!1},show:function(e){var t=this;Object(m["S"])(e).then((function(e){e.success?t.edit(e.result):t.add()}))},add:function(){this.picUrl="",this.refresh(),this.edit({activitiSync:"1"})},edit:function(e){var t=this;this.resetScreenSize();var a=this;a.initialRoleList(),a.checkedDepartNameString="",a.form.resetFields(),e.hasOwnProperty("id")&&(a.loadUserRoles(e.id),setTimeout((function(){t.fileList=e.avatar}),5)),a.userId=e.id,a.visible=!0,a.model=Object.assign({},e),a.$nextTick((function(){a.form.setFieldsValue(l()(t.model,"username","sex","realname","email","phone","activitiSync","workNo","telephone","post"))})),"2"==this.model.userIdentity?(this.identity="2",this.departIdShow=!0):(this.identity="1",this.departIdShow=!1),a.checkedDepartKeys=[],a.loadCheckedDeparts()},loadCheckedDeparts:function(){var e=this,t=this;t.userId&&Object(h["d"])(t.url.userWithDepart,{userId:t.userId}).then((function(a){if(t.checkedDepartNames=[],a.success){for(var r=[],i=[],s=0;s<a.result.length;s++)t.checkedDepartNames.push(a.result[s].title),e.checkedDepartNameString=e.checkedDepartNames.join(","),t.checkedDepartKeys.push(a.result[s].key),r.push({key:a.result[s].key,title:a.result[s].title}),i.push(a.result[s].key);t.resultDepartOptions=r,e.model.departIds?e.departIds=e.model.departIds.split(","):e.departIds=i,t.userDepartModel.departIdList=t.checkedDepartKeys}}))},close:function(){this.$emit("close"),this.visible=!1,this.disableSubmit=!1,this.selectedRole=[],this.userDepartModel={userId:"",departIdList:[]},this.checkedDepartNames=[],this.checkedDepartNameString="",this.checkedDepartKeys=[],this.selectedDepartKeys=[],this.resultDepartOptions=[],this.departIds=[],this.departIdShow=!1,this.identity="1",this.fileList=[]},moment:o.a,validateInput:function(){var e=this;return new Promise((function(t,a){e.form.validateFields((function(e,r){e?a():t()}))}))},handleSubmit:function(){var e=this,t=this;return new Promise((function(a,r){e.form.validateFields((function(i,s){if(!i){t.confirmLoading=!0,s.birthday?s.birthday=s.birthday.format(e.dateFormat):s.birthday="";var l,n=Object.assign(e.model,s);""!=t.fileList?n.avatar=t.fileList:n.avatar=null,n.selectedroles=e.selectedRole.length>0?e.selectedRole.join(","):"",n.selecteddeparts=e.userDepartModel.departIdList.length>0?e.userDepartModel.departIdList.join(","):"",n.userIdentity=e.identity,"2"===e.identity?n.departIds=e.departIds.join(","):n.departIds="",e.model.id?l=Object(m["r"])(n):(n.id=e.userId,l=Object(m["e"])(n)),l.then((function(e){e.success?a(e.result):r(e.message)})).finally((function(){t.confirmLoading=!1}))}}))}))},handleCancel:function(){this.close()},validateToNextPassword:function(e,t,a){var r=this.form,i=r.getFieldValue("confirmpassword");t&&i&&t!==i&&a("两次输入的密码不一样！"),t&&this.confirmDirty&&r.validateFields(["confirm"],{force:!0}),a()},compareToFirstPassword:function(e,t,a){var r=this.form;t&&t!==r.getFieldValue("password")?a("两次输入的密码不一样！"):a()},validatePhone:function(e,t,a){if(t)if(new RegExp(/^1[3|4|5|7|8|9][0-9]\d{8}$/).test(t)){var r={tableName:"sys_user",fieldName:"phone",fieldVal:t,dataId:this.userId};Object(m["m"])(r).then((function(e){e.success?a():a("手机号已存在!")}))}else a("请输入正确格式的手机号码!");else a()},validateEmail:function(e,t,a){if(t)if(new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/).test(t)){var r={tableName:"sys_user",fieldName:"email",fieldVal:t,dataId:this.userId};Object(m["m"])(r).then((function(e){e.success?a():a("邮箱已存在!")}))}else a("请输入正确格式的邮箱!");else a()},validateUsername:function(e,t,a){var r={tableName:"sys_user",fieldName:"username",fieldVal:t,dataId:this.userId};Object(m["m"])(r).then((function(e){e.success?a():a("用户名已存在!")}))},validateWorkNo:function(e,t,a){var r={tableName:"sys_user",fieldName:"work_no",fieldVal:t,dataId:this.userId};Object(m["m"])(r).then((function(e){e.success?a():a("工号已存在!")}))},handleConfirmBlur:function(e){var t=e.target.value;this.confirmDirty=this.confirmDirty||!!t},normFile:function(e){return Array.isArray(e)?e:e&&e.fileList},beforeUpload:function(e){var t=e.type;if(t.indexOf("image")<0)return this.$message.warning("请上传图片"),!1},handleChange:function(e){if(this.picUrl="","uploading"!==e.file.status){if("done"===e.file.status){var t=e.file.response;this.uploadLoading=!1,t.success?(this.model.avatar=t.message,this.picUrl="Has no pic url yet"):this.$message.warning(t.message)}}else this.uploadLoading=!0},onSearch:function(){this.$refs.departWindow.add(this.checkedDepartKeys,this.userId)},modalFormOk:function(e){this.checkedDepartNames=[],this.selectedDepartKeys=[],this.checkedDepartNameString="",this.userId=e.userId,this.userDepartModel.userId=e.userId,this.departIds=[],this.resultDepartOptions=[];for(var t=[],a=0;a<e.departIdList.length;a++)this.selectedDepartKeys.push(e.departIdList[a].key),this.checkedDepartNames.push(e.departIdList[a].title),this.checkedDepartNameString=this.checkedDepartNames.join(","),t.push({key:e.departIdList[a].key,title:e.departIdList[a].title}),this.departIds.push(e.departIdList[a].key);this.resultDepartOptions=t,this.userDepartModel.departIdList=this.selectedDepartKeys,this.checkedDepartKeys=this.selectedDepartKeys},resetScreenSize:function(){var e=document.body.clientWidth;this.drawerWidth=e<500?e:700},identityChange:function(e){"1"===e.target.value?this.departIdShow=!1:this.departIdShow=!0}}},b=v,y=(a("92d5"),a("2877")),w=Object(y["a"])(b,r,i,!1,null,"2e0388eb",null);t["default"]=w.exports},"120f":function(e,t,a){},"29f1":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"info-wrapper info-bottom-wrapper"},[t("h4",[e._v("技能标签")]),e._l(e.tagTitleList,(function(a,r){return[a.length>20?t("a-tooltip",{key:a,attrs:{title:a}},[t("a-tag",{key:a,attrs:{closable:!0,color:"blue"},on:{close:function(){return e.handleClose(a)}}},[e._v(" "+e._s("".concat(a.slice(0,20),"..."))+" ")])],1):t("a-tag",{key:a,attrs:{closable:!0,color:"blue"},on:{close:function(){return e.handleClose(a)}}},[e._v(" "+e._s(a)+" ")])]})),e.inputVisible?t("a-input",{ref:"input",style:{width:"78px"},attrs:{type:"text",size:"small",value:e.inputValue},on:{change:e.handleInputChange,blur:e.handleInputConfirm,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm.apply(null,arguments)}}}):t("a-tag",{staticStyle:{background:"#fff",borderStyle:"dashed"},attrs:{color:"blue",size:""},on:{click:e.showInput}},[t("a-icon",{attrs:{type:"plus"}}),e._v(" 添加标签 ")],1)],2)},i=[],s=a("8fad"),l={props:{tagTitleList:{type:Array,default:function(){return[]}},userId:{type:String,default:""}},mounted:function(){var e=this;Object(s["ic"])({id:this.userId}).then((function(t){t.success&&e.$nextTick((function(){e.$emit("update:tagTitleList",t.result.tagTitleList)}))}))},data:function(){return{inputVisible:!1,inputValue:"",tagColor:"blue"}},methods:{handleClose:function(e){var t=this.tagTitleList.filter((function(t){return t!==e}));this.trainingList=t,this.$emit("update:tagTitleList",this.tagTitleList)},showInput:function(){this.inputVisible=!0,this.$nextTick((function(){this.$refs.input.focus()}))},handleInputChange:function(e){this.inputValue=e.target.value},handleInputConfirm:function(){var e=this.inputValue,t=this.tagTitleList;e&&-1===t.indexOf(e)&&(e.length>32?this.$message.warning("输入长度不能超过32个字符!"):(t.push(e),this.inputVisible=!1,this.inputValue="",this.$emit("update:tagTitleList",t)))}}},n=l,o=(a("cc7e"),a("2877")),c=Object(o["a"])(n,r,i,!1,null,null,null);t["default"]=c.exports},"2c62":function(e,t,a){},3981:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("v-chart",{attrs:{forceFit:!0,height:e.height,data:e.data,padding:[20,20,95,20],scale:e.scale}},[t("v-tooltip"),t("v-axis",{attrs:{dataKey:e.axis1Opts.dataKey,line:e.axis1Opts.line,tickLine:e.axis1Opts.tickLine,grid:e.axis1Opts.grid}}),t("v-axis",{attrs:{dataKey:e.axis2Opts.dataKey,line:e.axis2Opts.line,tickLine:e.axis2Opts.tickLine,grid:e.axis2Opts.grid}}),t("v-legend",{attrs:{dataKey:"user",marker:"circle",offset:30}}),t("v-coord",{attrs:{type:"polar",radius:"0.8"}}),t("v-line",{attrs:{position:"skillName*score",color:"user",size:2}}),t("v-point",{attrs:{position:"skillName*score",color:"user",size:4,shape:"circle"}}),t("v-area",{attrs:{position:"skillName*score",color:"user"}})],1)},i=[],s=a("8fad"),l=a("7104"),n=a.n(l),o={dataKey:"skillName",line:null,tickLine:null,grid:{lineStyle:{lineDash:null},hideFirstLine:!1}},c={dataKey:"评分",line:null,tickLine:null,grid:{type:"polygon",lineStyle:{lineDash:null}}},u=[{dataKey:"评分",min:0,max:100}],d={name:"Radar",props:{height:{type:Number,default:254},skillList:{type:Array,default:function(){return[]}},userId:{type:String,default:""}},mounted:function(){var e=this;Object(s["ic"])({id:this.userId}).then((function(t){t.success&&e.$nextTick((function(){e.$emit("update:skillList",t.result.skillList)}))}))},data:function(){return{axis1Opts:o,axis2Opts:c,scale:u,data:[]}},watch:{skillList:function(e){0===e.length?this.data=this.skillList:this.data=e;var t=(new n.a.View).source(this.data);t.transform({type:"fold",fields:["评分"],key:"user",value:"评分"}),this.data=t.rows}}},p=d,h=a("2877"),m=Object(h["a"])(p,r,i,!1,null,"fb44b1b6",null);t["default"]=m.exports},4173:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{height:"calc(100% - 0px)"}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:8}},[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-space",[t("a-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增")]),t("a-button",{on:{click:e.deleteRecord}},[e._v("删除")])],1)],1)])],1)],1),t("div",{staticStyle:{height:"calc(100vh - 185px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(100vh - 235px)"},attrs:{border:"","max-height":"100%",align:e.allAlign,data:e.certList,"show-overflow":"tooltip","keep-source":!0,"checkbox-config":{trigger:"row",highlight:!0},"edit-config":{key:"id",trigger:"manual",mode:"row",autoClear:!1,showStatus:!0}},on:{"update:data":function(t){e.certList=t}}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),t("vxe-table-column",{attrs:{field:"certNo",title:"证件编号","min-width":"80","edit-render":{name:"input"}}}),t("vxe-table-column",{attrs:{field:"certName",title:"证件名称","min-width":"100",align:"left","header-align":"center","edit-render":{name:"input"}}}),t("vxe-table-column",{attrs:{field:"certCategory_dictText",title:"证件类型",width:"140","edit-render":{name:"input"}},scopedSlots:e._u([{key:"edit",fn:function(a){var r=a.row;return[t("j-dict-select-tag",{staticStyle:{width:"100%"},attrs:{triggerChange:!0,dictCode:"bu_user_cert_category"},on:{change:e.onCategoryChange},model:{value:r.certCategory,callback:function(t){e.$set(r,"certCategory",t)},expression:"row.certCategory"}})]}}])}),t("vxe-table-column",{attrs:{field:"validDate",title:"证件有效期","min-width":"100","edit-render":{name:"input"}},scopedSlots:e._u([{key:"edit",fn:function(a){var r=a.row;return[t("a-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择有效期",format:"YYYY-MM-DD"},model:{value:r.validDate,callback:function(t){e.$set(r,"validDate",t)},expression:"row.validDate"}})]}}])}),t("vxe-table-column",{attrs:{field:"scanFile",title:"扫描件","min-width":"120"}}),t("vxe-table-column",{attrs:{field:"remark",title:"备注",align:"left","header-align":"center","edit-render":{name:"input"}}}),t("vxe-table-column",{attrs:{title:"操作",width:"120",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[e.$refs.listTable.isActiveByRow(r)?[t("a-space",[t("a-button",{attrs:{type:"dashed",size:"small"},on:{click:function(t){return t.stopPropagation(),e.saveRowEvent(r)}}},[e._v("保存")]),t("a-button",{attrs:{type:"dashed",size:"small"},on:{click:function(t){return t.stopPropagation(),e.cancelRowEvent(r)}}},[e._v("取消")])],1)]:[t("a-button",{attrs:{type:"dashed",size:"small"},on:{click:function(t){return t.stopPropagation(),e.editRowEvent(r)}}},[e._v("编辑")])]]}}])})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.currentPage,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"currentPage",t)},"update:current-page":function(t){return e.$set(e.queryParam,"currentPage",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)}}})],1)])},i=[],s=a("8fad"),l=a("c1df"),n=a.n(l),o=a("4ec3"),c=a("ca00"),u={props:{certList:{type:Array,default:function(){return[]}},userId:{type:String,default:""}},mounted:function(){var e=this;this.totalResult=this.certList.length,Object(s["ic"])({id:this.userId}).then((function(t){t.success&&e.$emit("update:certList",t.result.certList)}))},data:function(){return{curEditMode:0,curRow:null,queryParam:{title:"",trainTime:"",userId:"",pageNo:1,pageSize:10},totalResult:0,allAlign:"center",validRules:{code:[{required:!0,message:"请选择工器具"}],amount:[{required:!0,message:"数量必须填写"}]}}},methods:{handleAdd:function(){var e=this;if(!this.$refs.listTable.getActiveRecord()){this.curEditMode=1;var t={id:Object(c["p"])()};this.$refs.listTable.insertAt(t,-1).then((function(t){var a=t.row;e.$refs.listTable.setActiveCell(a,"certNo")}))}},editRowEvent:function(e){this.curEditMode=2,this.$refs.listTable.setActiveRow(e)},delRowEvent:function(e){var t=this;this.certList.map((function(a,r){e.id===a.id&&(t.certList.splice(r,1),t.$emit("update:certList",t.certList))}))},saveRowEvent:function(e){var t=this;this.$refs.listTable.validate(e,(function(a){if(a)for(var r in a){var i=a[r];i.forEach((function(e){e.rule&&t.$message.error(e.rule.message)}))}else 1===t.curEditMode&&(e["validDate"]=n()(e.validDate).format("YYYY-MM-DD"),Object(o["f"])("bu_user_cert_category").then((function(a){a.success&&(a.result.map((function(t){t.value===e.trainType&&(e["certCategory_dictText"]=t.title)})),t.certList.push(e),t.$emit("update:certList",t.certList))}))),t.$refs.listTable.clearActived(),t.curEditMode=0}))},cancelRowEvent:function(e){this.$refs.listTable.clearActived(),1===this.curEditMode?this.$refs.listTable.remove(e):2===this.curEditMode&&this.$refs.listTable.revertData(e),this.curEditMode=0},selectAllEvent:function(e){e.checked,e.records},selectChangeEvent:function(e){e.checked,e.records},deleteRecord:function(){var e=this,t=this.$refs.listTable.getCheckboxRecords();t.length>0?this.$confirm({content:"是否删除选中".concat(t.length,"数据？"),onOk:function(){e.certList.map((function(a,r){t.find((function(e){return a.id==e.id}))&&e.certList.splice(r,1)})),e.$emit("update:certList",e.certList)}}):this.$message.error("尚未选中任何数据!")},onCategoryChange:function(e,t){var a=this.$refs.listTable.getActiveRecord(),r=a.row;r.certCategory_dictText=t.title}}},d=u,p=a("2877"),h=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=h.exports},"489e":function(e,t,a){},"8fbd":function(e,t,a){},"92d5":function(e,t,a){"use strict";a("120f")},9317:function(e,t,a){"use strict";a("8fbd")},c2d1:function(e,t,a){"use strict";a("2c62")},cc7e:function(e,t,a){"use strict";a("489e")},d10c:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-form-model",{ref:"form",attrs:{model:e.userBaseInfo,rules:e.formRules}},[t("div",[t("div",{staticClass:"info-wrapper info-bottom-wrapper"},[t("h4",[e._v("用户基本信息")]),t("a-row",{attrs:{gutter:12}},[t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"姓名",prop:"realname"}},[t("a-input",{attrs:{disabled:e.isDisable},model:{value:e.userBaseInfo.realname,callback:function(t){e.$set(e.userBaseInfo,"realname",t)},expression:"userBaseInfo.realname"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"工号",prop:"workNo"}},[t("a-input",{attrs:{disabled:e.isDisable},model:{value:e.userBaseInfo.workNo,callback:function(t){e.$set(e.userBaseInfo,"workNo",t)},expression:"userBaseInfo.workNo"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"班组",prop:"groupId"}},[t("j-dict-select-tag",{attrs:{"trigger-change":!0,placeholder:"请选择",dictCode:"sys_depart,depart_name,id,org_category=4",disabled:e.isDisable},model:{value:e.userBaseInfo.groupId,callback:function(t){e.$set(e.userBaseInfo,"groupId",t)},expression:"userBaseInfo.groupId"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"岗位",prop:"positionId"}},[t("j-dict-select-tag",{attrs:{"trigger-change":!0,placeholder:"请选择",dictCode:"bu_postion_info,position_name,id",disabled:e.isDisable},model:{value:e.userBaseInfo.positionId,callback:function(t){e.$set(e.userBaseInfo,"positionId",t)},expression:"userBaseInfo.positionId"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"性别",prop:"sex"}},[t("a-radio-group",{attrs:{options:e.sexOptions,value:e.sexOptionsValue,disabled:e.isDisable},on:{change:e.sexOnChange}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"状态",prop:"status"}},[t("a-radio-group",{attrs:{options:e.statusOptions,value:e.statusOptionsValue,disabled:e.isDisable},on:{change:e.statusOnChange}})],1)],1)],1)],1),t("div",{staticClass:"info-wrapper info-bottom-wrapper"},[t("h4",[e._v("其他信息")]),t("a-row",[t("a-col",{attrs:{span:10}},[t("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"账号",prop:"username"}},[t("a-input",{model:{value:e.userBaseInfo.username,callback:function(t){e.$set(e.userBaseInfo,"username",t)},expression:"userBaseInfo.username"}})],1)],1),t("a-col",{attrs:{span:10}},[t("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-button",[e._v("创建账号")])],1)],1),t("a-col",{attrs:{span:10}},[t("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"手机",prop:"phone"}},[t("a-input",{model:{value:e.userBaseInfo.phone,callback:function(t){e.$set(e.userBaseInfo,"phone",t)},expression:"userBaseInfo.phone"}})],1)],1),t("a-col",{attrs:{span:10}},[t("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"邮件",prop:"email"}},[t("a-input",{model:{value:e.userBaseInfo.email,callback:function(t){e.$set(e.userBaseInfo,"email",t)},expression:"userBaseInfo.email"}})],1)],1),t("a-col",{attrs:{span:20}},[t("a-form-model-item",{attrs:{labelCol:{span:2},wrapperCol:{span:18},label:"照片"}},[t("a-upload",{staticClass:"avatar-uploader",attrs:{name:"avatar","list-type":"picture-card","show-upload-list":!1,action:"https://www.mocky.io/v2/5cc8019d300000980a055e76","before-upload":e.beforeUpload},on:{change:e.handleChange}},[e.imageUrl?t("img",{attrs:{src:e.imageUrl,alt:"avatar"},model:{value:e.userBaseInfo.avatar,callback:function(t){e.$set(e.userBaseInfo,"avatar",t)},expression:"userBaseInfo.avatar"}}):t("div",[t("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),t("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)])],1)],1)],1)],1)])])},i=[],s=a("ca00"),l=a("4ec3"),n=a("61f7"),o={name:"BaseInfo",props:{currentUser:{type:Object,default:{}},isDisable:{type:Boolean,default:!1}},data:function(){return{userBaseInfo:{id:"",username:"",realname:"",workNo:"",avatar:"",orgCode:"",groupId:"",groupName:"",positionId:"",positionName:"",positionWages:0,sex:1,sex_dictText:"",phone:"",email:"",address:"",status:1,status_dictText:"",tags:"",certs:"",tagTitleList:[],certList:[],trainingList:[],skillList:[]},formRules:{realname:[{required:!0,message:"请输入姓名!",trigger:"change"},{max:32,message:"输入长度不能超过32字符!"}],workNo:[{required:!0,message:"请输入工号!",trigger:"change"},{validator:this.validateCode,trigger:"change"},{max:64,message:"输入长度不能超过64字符!"}],groupId:[{required:!0,message:"请输入班组!",trigger:"change"}],positionId:[{required:!0,message:"请输入岗位!",trigger:"change"}],sex:[{required:!0,message:"请输入性别!",trigger:"change"}],status:[{required:!0,message:"请输入状态!",trigger:"change"}],username:[{required:!0,message:"请输入账号!",trigger:"change"},{max:32,message:"输入长度不能超过32字符!"}],phone:[{validator:this.checkPhone,trigger:"change"}],email:[{validator:this.checkEmail,trigger:"change"}],address:[{required:!0,message:"请输入地址!",trigger:"change"}],avatar:[{required:!0,message:"请输入地址!"}]},labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:12}},buttonItemLayout:{},sexOptions:[{label:"男",value:"1"},{label:"女",value:"2"}],statusOptions:[{label:"正常",value:"1"},{label:"冻结",value:"2"}],imageUrl:"",loading:!1,sexOptionsValue:"1",statusOptionsValue:"1",form:this.$form.createForm(this)}},mounted:function(){this.currentUser&&(Object.assign(this.userBaseInfo,this.currentUser),2===this.userBaseInfo.sex&&(this.sexOptionsValue="2"),2===this.userBaseInfo.status&&(this.statusOptionsValue="2"))},created:function(){},methods:{validateCode:function(e,t,a){var r={tableName:"sys_user",fieldName:"work_no",fieldVal:t,dataId:this.userBaseInfo.id};Object(s["e"])(t)?a():Object(l["m"])(r).then((function(e){e.success?a():a(e.message)}))},checkPhone:function(e,t,a){Object(s["e"])(t)||Object(n["b"])(t)||Object(n["c"])(t)?a():a("请输入正确的号码！")},checkEmail:function(e,t,a){Object(s["e"])(t)||Object(n["a"])(t)?a():a("请输入正确的邮箱！")},sexOnChange:function(){"1"===this.sexOptionsValue?this.sexOptionsValue="2":"2"===this.sexOptionsValue&&(this.sexOptionsValue="1")},statusOnChange:function(){"1"===this.statusOptionsValue?this.statusOptionsValue="2":"2"===this.statusOptionsValue&&(this.statusOptionsValue="1")},handleChange:function(e){"uploading"!==e.file.status?"done"===e.file.status&&(this.loading=!1):this.loading=!0},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type;t||this.$message.error("You can only upload JPG file!");var a=e.size/1024/1024<2;return a||this.$message.error("Image must smaller than 2MB!"),t&&a},getData:function(){return"1"===this.sexOptionsValue?this.userBaseInfo.sex=1:"2"===this.sexOptionsValue?this.userBaseInfo.sex=2:this.userBaseInfo.sex=0,"1"===this.statusOptionsValue?this.userBaseInfo.status=1:this.userBaseInfo.status=2,mini.clone(this.userBaseInfo)}}},c=o,u=(a("c2d1"),a("2877")),d=Object(u["a"])(c,r,i,!1,null,null,null);t["default"]=d.exports},e092:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"培训名称"}},[t("a-input",{attrs:{placeholder:"请输入名称",allowClear:""},model:{value:e.queryParam.title,callback:function(t){e.$set(e.queryParam,"title",t)},expression:"queryParam.title"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"培训时间"}},[t("a-date-picker",{model:{value:e.queryParam.trainTime,callback:function(t){e.$set(e.queryParam,"trainTime",t)},expression:"queryParam.trainTime"}})],1)],1),t("a-col",{attrs:{md:6,sm:8}},[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-button",{on:{click:e.searchQuery}},[e._v("查询")]),t("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增")]),t("a-button",{staticStyle:{"margin-left":"8px"},on:{click:e.deleteRecord}},[e._v("删除")])],1)])],1)],1)],1),t("div",{staticStyle:{height:"calc(100vh - 185px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(100vh - 235px)"},attrs:{border:"","max-height":"100%",align:e.allAlign,data:e.trainingList,"edit-rules":e.validatorRules,"show-overflow":"tooltip","keep-source":!0,"checkbox-config":{trigger:"row",highlight:!0},"edit-config":{key:"id",trigger:"manual",mode:"row",autoClear:!1,showStatus:!0}}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"60"}}),t("vxe-table-column",{attrs:{field:"title",title:"培训名称","min-width":"160",align:"left","header-align":"center","edit-render":{name:"input"}}}),t("vxe-table-column",{attrs:{field:"trainType_dictText",title:"培训类型","min-width":"120","edit-render":{name:"input"}},scopedSlots:e._u([{key:"edit",fn:function(a){var r=a.row;return[t("j-dict-select-tag",{staticStyle:{width:"100%"},attrs:{triggerChange:!0,dictCode:"bu_train_type"},model:{value:r.trainType,callback:function(t){e.$set(r,"trainType",t)},expression:"row.trainType"}})]}}])}),t("vxe-table-column",{attrs:{field:"address",title:"培训地点","min-width":"160","edit-render":{name:"input"}}}),t("vxe-table-column",{attrs:{field:"teacher",title:"讲师","min-width":"120","edit-render":{name:"input"}}}),t("vxe-table-column",{attrs:{field:"trainTime",title:"培训时间","min-width":"120","edit-render":{name:"input"}},scopedSlots:e._u([{key:"edit",fn:function(a){var r=a.row;return[t("a-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择培训时间",format:"YYYY-MM-DD"},model:{value:r.trainTime,callback:function(t){e.$set(r,"trainTime",t)},expression:"row.trainTime"}})]}}])}),t("vxe-table-column",{attrs:{field:"timeLength",title:"课时",width:"120","edit-render":{name:"input"}},scopedSlots:e._u([{key:"edit",fn:function(a){var r=a.row;return[t("a-input-number",{staticStyle:{width:"100%"},attrs:{defaultValue:1,min:1,max:1e4},model:{value:r.timeLength,callback:function(t){e.$set(r,"timeLength",t)},expression:"row.timeLength"}})]}}])}),t("vxe-table-column",{attrs:{field:"remark",title:"备注","min-width":"160",align:"left","header-align":"center","edit-render":{name:"input"}}}),t("vxe-table-column",{attrs:{title:"操作",width:"120",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[e.$refs.listTable.isActiveByRow(r)?[t("a-button",{attrs:{type:"dashed",size:"small"},on:{click:function(t){return t.stopPropagation(),e.saveRowEvent(r)}}},[e._v("保存")]),t("a-button",{staticStyle:{"margin-left":"2px"},attrs:{type:"dashed",size:"small"},on:{click:function(t){return t.stopPropagation(),e.cancelRowEvent(r)}}},[e._v("取消")])]:[t("a-button",{attrs:{type:"dashed",size:"small"},on:{click:function(t){return t.stopPropagation(),e.editRowEvent(r)}}},[e._v("编辑")])]]}}])})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)}}})],1)])},i=[],s=a("8fad"),l=a("ca00"),n=a("c1df"),o=a.n(n),c=a("4ec3"),u={name:"TrainingInfo",props:{userId:{type:String,default:""}},data:function(){return{curEditMode:0,curRow:null,form:this.$form.createForm(this),queryParam:{title:"",trainTime:"",userId:"",pageNo:1,pageSize:10},trainingList:[],totalResult:0,allAlign:"center",validatorRules:{title:[{required:!0,message:"请输入培训名称!"},{max:32,message:"输入长度不能超过32个字符!"}],trainType_dictText:[{required:!0,message:"请选择培训类型!"}],address:[{required:!0,message:"请输入培训地点!"},{max:64,message:"输入长度不能超过64个字符!"}],trainTime:[{required:!0,message:"请选择培训时间!"}],remark:[{max:200,message:"备注长度不能超过200个字符!"}],teacher:[{max:32,message:"备注长度不能超过32个字符!"}]}}},mounted:function(){var e=this;Object(s["ic"])({id:this.userId}).then((function(t){t.success&&(e.trainingList=t.result.trainingList,e.totalResult=t.result.trainingList.length,e.$emit("trainingListMethod",e.trainingList))})),this.$forceUpdate()},methods:{editRowEvent:function(e){this.curEditMode=2,this.$refs.listTable.setActiveRow(e)},delRowEvent:function(e){var t=this;this.taskTools.map((function(a,r){e.id===a.id&&(t.trainingList.splice(r,1),t.$emit("update:trainingList",t.trainingList))}))},saveRowEvent:function(e){var t=this;e["trainType_dictText"]=e.trainType,this.$refs.listTable.validate(e,(function(a){if(a)for(var r in a){var i=a[r];i.forEach((function(e){e.rule&&t.$message.error(e.rule.message)}))}else 1===t.curEditMode&&(e["trainTime"]=o()(e.trainTime).format("YYYY-MM-DD"),Object(c["f"])("bu_train_type").then((function(a){a.success&&(a.result.map((function(t){t.value===e.trainType&&(e["trainType_dictText"]=t.title)})),t.trainingList.push(e),t.$emit("trainingListMethod",t.trainingList))}))),t.$refs.listTable.clearActived(),t.curEditMode=0}))},cancelRowEvent:function(e){this.$refs.listTable.clearActived(),1===this.curEditMode?this.$refs.listTable.remove(e):2===this.curEditMode&&this.$refs.listTable.revertData(e),this.curEditMode=0},handleAdd:function(){var e=this;if(!this.$refs.listTable.getActiveRecord()){this.curEditMode=1;var t={id:Object(l["p"])()};this.$refs.listTable.insertAt(t,-1).then((function(t){var a=t.row;e.$refs.listTable.setActiveCell(a,"title")}))}},searchTrainingPage:function(){var e=this;this.queryParam.trainTime=this.queryParam.trainTime?o()(this.queryParam.trainTime).format("YYYY-MM-DD"):"",Object(s["Kc"])(this.queryParam).then((function(t){t.success&&(e.totalResult=t.result.total,e.trainingList=t.result.records)}))},searchQuery:function(){this.queryParam.userId=this.userId,this.searchTrainingPage()},searchReset:function(){},deleteRecord:function(){var e=this,t=this.$refs.listTable.getCheckboxRecords();t.length>0?this.$confirm({content:"是否删除选中".concat(t.length,"数据？"),onOk:function(){var a=t.map((function(e){return e.id}));e.trainingList=e.trainingList.filter((function(e){return!a.includes(e.id)})),e.$emit("trainingListMethod",e.trainingList)}}):this.$message.error("尚未选中任何数据!")}}},d=u,p=a("2877"),h=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=h.exports},ee79:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{centered:"",width:"100%",title:e.title,dialogClass:"fullDialog no-footer",visible:e.visible,footer:null,destroyOnClose:!0},on:{cancel:e.handleCancel,ok:e.save}},[t("div",[t("a-tabs",{attrs:{activeKey:e.activeKey},on:{change:e.changeTab}},[t("a-tab-pane",{key:"1",attrs:{tab:"基本信息"}},[e.currentUser?t("base-info2",{ref:"baseInfo",staticStyle:{"margin-top":"15px"},attrs:{"current-user":e.currentUser,isDisable:e.isDisable},on:{"update:currentUser":function(t){e.currentUser=t},"update:current-user":function(t){e.currentUser=t}}}):e._e()],1),t("a-tab-pane",{key:"2",attrs:{tab:"培训信息"}},[t("training-info",{ref:"trainingInfo",attrs:{userId:e.currentUser.id},on:{trainingListMethod:e.trainingListMethod}})],1),t("a-tab-pane",{key:"3",attrs:{tab:"作业证件"}},[t("cert-info",{attrs:{certList:e.currentUser.certList,userId:e.currentUser.id},on:{"update:certList":function(t){return e.$set(e.currentUser,"certList",t)},"update:cert-list":function(t){return e.$set(e.currentUser,"certList",t)}}})],1),t("a-tab-pane",{key:"4",attrs:{tab:"技能标签"}},[t("skill-tags-info",{attrs:{tagTitleList:e.currentUser.tagTitleList,userId:e.currentUser.id},on:{"update:tagTitleList":function(t){return e.$set(e.currentUser,"tagTitleList",t)},"update:tag-title-list":function(t){return e.$set(e.currentUser,"tagTitleList",t)}}})],1),t("a-tab-pane",{key:"5",attrs:{tab:"技能分布"}},[t("radar",{attrs:{skillList:e.currentUser.skillList,height:600,userId:e.currentUser.id},on:{"update:skillList":function(t){return e.$set(e.currentUser,"skillList",t)},"update:skill-list":function(t){return e.$set(e.currentUser,"skillList",t)}}})],1),e.isDisable?e._e():t("a-button",{staticClass:"margin-right8",attrs:{slot:"tabBarExtraContent",type:"primary"},on:{click:e.save},slot:"tabBarExtraContent"},[e._v(" 保存 ")]),e.isDisable?e._e():t("a-button",{staticClass:"margin-right8",attrs:{slot:"tabBarExtraContent",type:"dashed"},on:{click:e.handleCancel},slot:"tabBarExtraContent"},[e._v(" 取消 ")])],1)],1)])},i=[],s=a("d10c"),l=a("11e8"),n=a("e092"),o=a("4173"),c=a("29f1"),u=a("3981"),d=a("8fad"),p={components:{BaseInfo:s["default"],BaseInfo2:l["default"],TrainingInfo:n["default"],CertInfo:o["default"],SkillTagsInfo:c["default"],Radar:u["default"]},name:"StaffInfo",data:function(){return{isDisable:!1,title:"人员信息",activeKey:"1",visible:!1,loading:!1,queryParam:{id:""},currentUser:{tagTitleList:[],certList:[],trainingList:[],skillList:[]}}},methods:{changeTab:function(e){this.activeKey=e},handleCancel:function(){this.visible=!1,this.isDisable=!1,this.activeKey="1",this.currentUser={}},add:function(){this.edit({})},edit:function(e){Object.assign(this.currentUser,e),this.visible=!0},save:function(){var e=this;this.$refs.baseInfo.validateInput().then((function(){e.$refs.baseInfo.handleSubmit().then((function(t){var a={id:t.id};a.tagTitleList=e.currentUser.tagTitleList,a.certList=e.currentUser.certList,a.trainingList=e.currentUser.trainingList,Object(d["Zc"])(a).then((function(t){t.success?(e.$message.success("保存成功"),e.visible=!1,e.activeKey="1",e.$emit("ok"),e.handleCancel()):e.$message.error("保存失败")})).finally((function(){return e.currentUser={}}))})).catch((function(t){e.$message.error("保存基本信息失败")}))})).catch((function(t){e.$message.warn("你的输入验证不通过")}))},trainingListMethod:function(e){this.$set(this.currentUser,"trainingList",e)}}},h=p,m=(a("9317"),a("2877")),f=Object(m["a"])(h,r,i,!1,null,"0472974f",null);t["default"]=f.exports}}]);