(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b291b"],{2557:function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{title:"导入EXCEL",width:600,visible:t.visible,confirmLoading:t.uploading},on:{cancel:t.handleClose}},[e("a-form-model",{attrs:{form:t.form}},[e("a-row",[e("a-col",[e("a-form-model-item",{attrs:{prop:"fileList",labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"请选择文件"}},[e("a-upload",{attrs:{name:"file",multiple:!1,accept:".xls,.xlsx",fileList:t.form.fileList,remove:t.handleRemove,beforeUpload:t.beforeUpload}},[e("a-button",{attrs:{disabled:t.form.fileList.length>=t.sum}},[e("a-icon",{attrs:{type:"upload"}}),t._v(" 选择导入文件 ")],1)],1)],1)],1),e("a-col",[e("a-form-model-item",{attrs:{prop:"",labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"导入类型"}},[e("a-select",{staticStyle:{width:"120px"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[e("a-select-option",{attrs:{value:1}},[t._v(" 架修 ")]),e("a-select-option",{attrs:{value:2}},[t._v(" 大修 ")])],1)],1)],1)],1)],1),e("template",{slot:"footer"},[e("a-button",{on:{click:t.handleClose}},[t._v("关闭")]),e("a-button",{attrs:{type:"primary",disabled:0===t.form.fileList.length&&!t.form.type,loading:t.uploading},on:{click:t.handleImport}},[t._v(" "+t._s(t.uploading?"导入中...":"开始导入")+" ")])],1)],2)},r=[],n=o("0fea");function a(t){return p(t)||f(t)||s(t)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t,e){if(t){if("string"==typeof t)return u(t,e);var o={}.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?u(t,e):void 0}}function f(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function p(t){if(Array.isArray(t))return u(t)}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,i=Array(e);o<e;o++)i[o]=t[o];return i}var c={name:"GroupStockImport",props:{url:{type:String,default:"",required:!1},biz:{type:String,default:"",required:!1},sum:{type:Number,default:1}},data:function(){return{visible:!1,uploading:!1,form:{fileList:[],type:null},uploadAction:"",foreignKeys:"",labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}}},watch:{url:function(t){t&&(this.uploadAction=t)}},created:function(){this.uploadAction=this.url},mounted:function(){},methods:{handleClose:function(){this.visible=!1},show:function(t){Object.assign(this.form,this.$options.data().form),this.uploading=!1,this.visible=!0,this.foreignKeys=t},handleRemove:function(t){var e=this.form.fileList.indexOf(t),o=this.form.fileList;o.splice(e,1),this.fileList=JSON.parse(JSON.stringify(o))},beforeUpload:function(t){return this.form.fileList=[].concat(a(this.form.fileList),[t]),!1},handleImport:function(){var t=this,e=this.form.fileList,o=new FormData;this.biz&&o.append("isSingleTableImport",this.biz),this.foreignKeys&&this.foreignKeys.length>0&&o.append("foreignKeys",this.foreignKeys),e.forEach((function(t){o.append("file",t)})),o.append("type",this.form.type),this.uploading=!0,Object(n["j"])(this.uploadAction,o).then((function(e){t.uploading=!1,e.success?(t.$message.success(e.result),t.visible=!1,t.$emit("ok"),Object.assign(t.form,t.$options.data().form)):t.$message.warning(e.message)}))}}},m=c,d=o("2877"),h=Object(d["a"])(m,i,r,!1,null,"607218d0",null);e["default"]=h.exports}}]);