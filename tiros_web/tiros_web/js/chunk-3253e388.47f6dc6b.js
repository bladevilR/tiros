(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3253e388"],{"21a4":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,width:800,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:14,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-upload",{attrs:{multiple:!0,"file-list":e.fileList,remove:e.handleRemove,"before-upload":e.beforeUpload}},[t("a-button",{attrs:{type:"primary"}},[e._v("添加文件")])],1)],1)],1),t("a-col",{attrs:{md:10,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"资料类型"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["fileType",e.validatorRules.fileType],expression:"['fileType',validatorRules.fileType]",modifiers:{trim:!0}}],attrs:{triggerChange:!0,placeholder:"请选择",dictCode:"bu_outin_other_file_type"}})],1)],1)],1),t("a-row",[t("a-col",[e._v("一次最多上传5个文件，且单个文件不能超过10MB")])],1)],1)],1)],1)},i=[],o=n("c1df"),u=n.n(o),a=n("cf74"),s=n("ca00"),c=n("e2aa"),l=(n("8fad"),n("d214"));function f(e){return m(e)||h(e)||p(e)||d()}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e,t){if(e){if("string"==typeof e)return b(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}function h(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function m(e){if(Array.isArray(e))return b(e)}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var g={name:"SupplierUploadModule",components:{JUpload:a["default"]},data:function(){return{title:"文件上传",visible:!1,confirmLoading:!1,fileList:[],uploadData:[],fileType:null,fileSize:5,outinDetailId:"",form:this.$form.createForm(this),validatorRules:{fileType:{rules:[{required:!0,message:"请选择资料类型!"}]}},labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:15}}}},watch:{uploadData:{immediate:!1,handler:function(e){var t=this;e.length===this.fileList.length&&e.length>0&&Object(l["d"])(this.uploadData).then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok"),t.close()):t.$message.error(e.message)}))}}},methods:{handleRemove:function(e){var t=this.fileList.indexOf(e),n=this.fileList.slice();n.splice(t,1),this.fileList=n},beforeUpload:function(e){var t=e.size/1024/1024<10;return t||this.$message.error("文件不得大于10MB!"),this.fileList=[].concat(f(this.fileList),[e]),!1},handleFileName:function(e){var t=e.name.lastIndexOf("."),n=e.name.length,r=e.name.substring(t+1,n);return r},customRequest:function(e){var t=this;this.confirmLoading=!0;var n=this.fileList;n.forEach((function(n){var r=new FormData;r.append("file",n),t.saveFile(r,n,e)}))},getUploadData:function(e,t,n){var r=Object(s["p"])(),i={id:r,fileId:r,fileName:e.name,name:e.name,type:this.handleFileName(e),fileSize:Math.round(e.size/1024),savepath:t.result,fileType:n,outinDetailId:this.outinDetailId,uploadDate:u()(new Date).format("YYYY-MM-DD")};this.uploadData.push(i)},saveFile:function(e,t,n){var r=this;Object(c["d"])(e).then((function(e){e.success?r.getUploadData(t,e,n):r.$message.error(e.message)}))},handleAdd:function(e){this.visible=!0,this.outinDetailId=e.outinDetailId},handleOk:function(){var e=this;this.form.validateFields((function(t,n){if(!t){var r=e.fileList,i=e.fileSize;e.fileType=n.fileType,r.length>i?e.$message.error("一次最多上传5个文件!"):e.fileList&&0==e.fileList.length?e.$message.warning("请先选择文件!"):e.customRequest(e.fileType)}}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,this.fileList=[],this.uploadData=[],this.confirmLoading=!1}}},v=g,j=n("2877"),y=Object(j["a"])(v,r,i,!1,null,"00063f48",null);t["default"]=y.exports},7279:function(e,t,n){"use strict";n("95ba")},"95ba":function(e,t,n){},cf74:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{position:"relative"},attrs:{id:e.containerId}},[t("div",{staticClass:"movety-container",staticStyle:{padding:"0 8px",position:"absolute","z-index":"91",height:"32px",width:"104px","text-align":"center"},style:{top:e.top+"px",left:e.left+"px",display:e.moveDisplay}},[t("div",{class:e.showMoverTask?"uploadty-mover-mask":"movety-opt",staticStyle:{"margin-top":"12px"},attrs:{id:e.containerId+"-mover"}},[t("a",{staticStyle:{margin:"0 5px"},on:{click:e.moveLast}},[t("a-icon",{staticStyle:{color:"#fff","font-size":"16px"},attrs:{type:"arrow-left"}})],1),t("a",{staticStyle:{margin:"0 5px"},on:{click:e.moveNext}},[t("a-icon",{staticStyle:{color:"#fff","font-size":"16px"},attrs:{type:"arrow-right"}})],1)])]),t("a-upload",{class:{"uploadty-disabled":e.disabled},attrs:{name:"file",multiple:!0,action:e.uploadAction,headers:e.headers,data:{biz:e.bizPath},fileList:e.fileList,beforeUpload:e.beforeUpload,disabled:e.disabled,returnUrl:e.returnUrl,listType:e.complistType},on:{change:e.handleChange,preview:e.handlePreview}},[[e.isImageComp?t("div",[t("a-icon",{attrs:{type:"plus"}}),t("div",{staticClass:"ant-upload-text"},[e._v(e._s(e.text))])],1):e.buttonVisible?t("a-button",[t("a-icon",{attrs:{type:"upload"}}),e._v(e._s(e.text)+" ")],1):e._e()]],2),t("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[t("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1)},i=[],o=n("2b0e"),u=n("9fb0"),a=n("0fea"),s="all",c="image",l=function(){return"-"+parseInt(1e4*Math.random()+1,10)},f=function(e){if(e.lastIndexOf("\\")>=0){var t=new RegExp("\\\\","g");e=e.replace(t,"/")}return e.substring(e.lastIndexOf("/")+1)},d={name:"JUpload",data:function(){return{uploadAction:window._CONFIG["domianURL"]+"/sys/common/upload",headers:{},fileList:[],newFileList:[],uploadGoOn:!0,previewVisible:!1,previewImage:"",containerId:"",top:"",left:"",moveDisplay:"none",showMoverTask:!1,moverHold:!1,currentImg:""}},props:{text:{type:String,required:!1,default:"点击上传"},fileType:{type:String,required:!1,default:s},bizPath:{type:String,required:!1,default:"temp"},value:{type:[String,Array],required:!1},disabled:{type:Boolean,required:!1,default:!1},triggerChange:{type:Boolean,required:!1,default:!1},returnUrl:{type:Boolean,required:!1,default:!0},number:{type:Number,required:!1,default:0},buttonVisible:{type:Boolean,required:!1,default:!0}},watch:{value:{immediate:!0,handler:function(){var e=this.value;e instanceof Array?this.returnUrl?this.initFileList(e.join(",")):this.initFileListArr(e):this.initFileList(e)}}},computed:{isImageComp:function(){return this.fileType===c},complistType:function(){return this.fileType===c?"picture-card":"text"}},created:function(){var e=o["default"].ls.get(u["a"]);this.headers={"X-Access-Token":e},this.containerId="container-ty-"+(new Date).getTime()},methods:{initFileListArr:function(e){if(e&&0!=e.length){for(var t=[],n=0;n<e.length;n++){var r=Object(a["e"])(e[n].filePath);t.push({uid:l(),name:e[n].fileName,status:"done",url:r,response:{status:"history",message:e[n].filePath}})}this.fileList=t}else this.fileList=[]},initFileList:function(e){if(e&&0!=e.length){for(var t=[],n=e.split(","),r=0;r<n.length;r++){var i=Object(a["e"])(n[r]);t.push({uid:l(),name:f(n[r]),status:"done",url:i,response:{status:"history",message:n[r]}})}this.fileList=t}else this.fileList=[]},handlePathChange:function(){var e=this.fileList,t="";e&&0!=e.length||(t="");for(var n=[],r=0;r<e.length;r++)n.push(e[r].response.message);n.length>0&&(t=n.join(",")),this.$emit("change",t)},beforeUpload:function(e){this.uploadGoOn=!0;var t=e.type;return!(this.fileType===c&&t.indexOf("image")<0)||(this.$message.warning("请上传图片"),this.uploadGoOn=!1,!1)},handleChange:function(e){e.file.status||!1!==this.uploadGoOn||e.fileList.pop();var t=e.fileList;if("done"===e.file.status?(this.number>0&&(t=t.slice(-this.number)),e.file.response.success&&(t=t.map((function(e){if(e.response){var t=e.response.message;e.url=Object(a["e"])(t)}return e})))):"error"===e.file.status?this.$message.error("".concat(e.file.name," 上传失败.")):"removed"===e.file.status&&this.handleDelete(e.file),this.fileList=t,"done"===e.file.status||"removed"===e.file.status)if(this.returnUrl)this.handlePathChange();else{this.newFileList=[];for(var n=0;n<t.length;n++){var r={fileName:t[n].name,filePath:t[n].response.message,fileSize:t[n].size};this.newFileList.push(r)}this.$emit("change",this.newFileList)}},handleDelete:function(e){},handlePreview:function(e){this.fileType===c?(this.previewImage=e.url||e.thumbUrl,this.previewVisible=!0):location.href=e.url},handleCancel:function(){this.previewVisible=!1},moveLast:function(){var e=this.getIndexByUrl();if(0==e)this.$message.warn("未知的操作");else{for(var t=this.fileList[e].url,n=this.fileList[e-1].url,r=[],i=0;i<this.fileList.length;i++)i==e-1?r.push(t):i==e?r.push(n):r.push(this.fileList[i].url);this.currentImg=n,this.$emit("change",r.join(","))}},moveNext:function(){var e=this.getIndexByUrl();if(e==this.fileList.length-1)this.$message.warn("已到最后~");else{for(var t=this.fileList[e].url,n=this.fileList[e+1].url,r=[],i=0;i<this.fileList.length;i++)i==e+1?r.push(t):i==e?r.push(n):r.push(this.fileList[i].url);this.currentImg=n,this.$emit("change",r.join(","))}},getIndexByUrl:function(){for(var e=0;e<this.fileList.length;e++)if(this.fileList[e].url===this.currentImg||encodeURI(this.fileList[e].url)===this.currentImg)return e;return-1}},mounted:function(){var e=this,t=document.getElementById(this.containerId+"-mover");t.addEventListener("mouseover",(function(){e.moverHold=!0,e.moveDisplay="block"})),t.addEventListener("mouseout",(function(){e.moverHold=!1,e.moveDisplay="none"}));var n=document.getElementById(this.containerId)?document.getElementById(this.containerId).getElementsByClassName("ant-upload-list-picture-card"):[];n&&n.length>0&&(n[0].addEventListener("mouseover",(function(t){t=t||window.event;var n=t.target||t.srcElement;if("ant-upload-list-item-info"==n.className){e.showMoverTask=!1;var r=n.parentElement;e.left=r.offsetLeft,e.top=r.offsetTop+r.offsetHeight-50,e.moveDisplay="block",e.currentImg=n.getElementsByTagName("img")[0].src}})),n[0].addEventListener("mouseout",(function(t){t=t||window.event;var n=t.target||t.srcElement;"ant-upload-list-item-info"==n.className&&(e.showMoverTask=!0,setTimeout((function(){!1===e.moverHold&&(e.moveDisplay="none")}),100)),"ant-upload-list-item ant-upload-list-item-done"!=n.className&&"ant-upload-list ant-upload-list-picture-card"!=n.className||(e.moveDisplay="none")})))},model:{prop:"value",event:"change"}},p=d,h=(n("7279"),n("2877")),m=Object(h["a"])(p,r,i,!1,null,null,null);t["default"]=m.exports},d214:function(e,t,n){"use strict";n.d(t,"h",(function(){return i})),n.d(t,"D",(function(){return o})),n.d(t,"eb",(function(){return u})),n.d(t,"r",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"w",(function(){return c})),n.d(t,"H",(function(){return l})),n.d(t,"I",(function(){return m})),n.d(t,"k",(function(){return f})),n.d(t,"c",(function(){return b})),n.d(t,"x",(function(){return g})),n.d(t,"l",(function(){return j})),n.d(t,"K",(function(){return v})),n.d(t,"a",(function(){return y})),n.d(t,"v",(function(){return O})),n.d(t,"j",(function(){return w})),n.d(t,"F",(function(){return L})),n.d(t,"J",(function(){return d})),n.d(t,"G",(function(){return p})),n.d(t,"t",(function(){return h})),n.d(t,"Q",(function(){return I})),n.d(t,"u",(function(){return x})),n.d(t,"db",(function(){return D})),n.d(t,"q",(function(){return k})),n.d(t,"bb",(function(){return U})),n.d(t,"cb",(function(){return B})),n.d(t,"C",(function(){return S})),n.d(t,"g",(function(){return T})),n.d(t,"P",(function(){return C})),n.d(t,"X",(function(){return A})),n.d(t,"ab",(function(){return N})),n.d(t,"f",(function(){return E})),n.d(t,"p",(function(){return M})),n.d(t,"jb",(function(){return $})),n.d(t,"kb",(function(){return F})),n.d(t,"Z",(function(){return _})),n.d(t,"e",(function(){return q})),n.d(t,"A",(function(){return z})),n.d(t,"n",(function(){return R})),n.d(t,"m",(function(){return V})),n.d(t,"O",(function(){return Y})),n.d(t,"Y",(function(){return X})),n.d(t,"V",(function(){return Q})),n.d(t,"gb",(function(){return W})),n.d(t,"hb",(function(){return Z})),n.d(t,"L",(function(){return ee})),n.d(t,"ib",(function(){return te})),n.d(t,"B",(function(){return P})),n.d(t,"y",(function(){return H})),n.d(t,"d",(function(){return J})),n.d(t,"z",(function(){return K})),n.d(t,"W",(function(){return ne})),n.d(t,"o",(function(){return G})),n.d(t,"fb",(function(){return re})),n.d(t,"i",(function(){return ie})),n.d(t,"E",(function(){return oe})),n.d(t,"s",(function(){return ue})),n.d(t,"M",(function(){return ae})),n.d(t,"N",(function(){return se})),n.d(t,"S",(function(){return ce})),n.d(t,"T",(function(){return le})),n.d(t,"U",(function(){return fe})),n.d(t,"R",(function(){return de}));var r=n("0fea"),i=function(e){return Object(r["j"])("/outsource/supplier/add",e)},o=function(e){return Object(r["j"])("/outsource/supplier/edit",e)},u=function(e){return Object(r["d"])("/outsource/supplier/page",e)},a=function(e){return Object(r["j"])("/outsource/supplier/delete",e)},s=function(e){return Object(r["j"])("/outsource/contractInfo/add",e)},c=function(e){return Object(r["j"])("/outsource/contractInfo/edit",e)},l=function(e){return Object(r["d"])("/outsource/contractInfo/page",e)},f=function(e){return Object(r["j"])("/outsource/contractInfo/delete",e)},d=function(e){return Object(r["d"])("/outsource/contractInfo/monitor",e)},p=function(e){return Object(r["d"])("/outsource/contract/annex/list",e)},h=function(e){return Object(r["j"])("/outsource/contract/annex/delete",e)},m=function(e){return Object(r["d"])("/outsource/contractInfo/price",e)},b=function(e){return Object(r["j"])("/outsource/contractPay/add",e)},g=function(e){return Object(r["j"])("/outsource/contractPay/edit",e)},v=function(e){return Object(r["d"])("/outsource/contractPay/page",e)},j=function(e){return Object(r["j"])("/outsource/contractPay/delete",e)},y=function(e){return Object(r["j"])("/outsource/contractBakMoney/add",e)},O=function(e){return Object(r["j"])("/outsource/contractBakMoney/edit",e)},L=function(e){return Object(r["d"])("/outsource/contractBakMoney/page",e)},w=function(e){return Object(r["j"])("/outsource/contractBakMoney/delete",e)},I=function(e){return Object(r["d"])("/outsource/outin/page",e)},x=function(e){return Object(r["j"])("/outsource/outin/delete",e)},C=function(e){return Object(r["d"])("/outsource/outin/page/detail",e)},T=function(e){return Object(r["j"])("/outsource/supervise/add",e)},S=function(e){return Object(r["j"])("/outsource/supervise/edit",e)},D=function(e){return Object(r["d"])("/outsource/supervise/page",e)},k=function(e){return Object(r["j"])("/outsource/supervise/delete",e)},U=function(e){return Object(r["d"])("/outsource/supervise/get",{id:e})},B=function(e){return Object(r["d"])("/outsource/supervise/get-by-order",e)},F=function(e){return Object(r["d"])("/outsource/perform/vendor/tree",e)},$=function(e){return Object(r["j"])("/outsource/perform/delayReason",e)},A=function(e){return Object(r["d"])("/outsource/perform/page",e)},M=function(e){return Object(r["j"])("/outsource/perform/delete/resource",e)},N=function(e){return Object(r["d"])("/outsource/perform/resource",e)},E=function(e){return Object(r["j"])("/outsource/perform/resource/add",e)},P=function(e){return Object(r["j"])("/outsource/perform/resource/edit",e)},_=function(e){return Object(r["d"])("/outsource/rateing/page",e)},q=function(e){return Object(r["j"])("/outsource/rateing/add",e)},z=function(e){return Object(r["j"])("/outsource/rateing/edit",e)},R=function(e){return Object(r["j"])("/outsource/rateing/delete",e)},G=function(e){return Object(r["j"])("/outsource/rateing/delete/attachment",e)},V=function(e){return Object(r["j"])("/outsource/otherSource/delete",e)},H=function(e){return Object(r["j"])("/outsource/otherSource/edit",e)},J=function(e){return Object(r["j"])("/outsource/otherSource/add",e)},Y=function(e){return Object(r["d"])("/outsource/otherSource/page",e)},X=function(e){return Object(r["d"])("/outsource/quality/page",e)},K=function(e){return Object(r["j"])("/outsource/quality/edit",e)},Q=function(e){return Object(r["d"])("/outsource/part/page",e)},W=function(e){return Object(r["d"])("/outsource/fault/countFault",e)},Z=function(e){return Object(r["d"])("/outsource/fault/countFaultGroupBySystem",e)},ee=function(e){return Object(r["d"])("/outsource/fault/page",e)},te=function(e){return Object(r["j"])("/outsource/fault/countFaultGroupByPhaseAndSystem",e)},ne=function(e){return Object(r["d"])("/outsource/contractPay/page",e)},re=function(e){return Object(r["d"])("/training/record/page",e)},ie=function(e){return Object(r["j"])("/training/record/add",e)},oe=function(e){return Object(r["j"])("/training/record/edit",e)},ue=function(e){return Object(r["j"])("/training/record/delete",e)},ae=function(e){return Object(r["d"])("/base/finance/project/list",e)},se=function(e){return Object(r["d"])("/base/finance/task/list",e)},ce=function(e){return Object(r["d"])("/outsource/cost/listCost",e)},le=function(e){return Object(r["d"])("/outsource/cost/detail",e)},fe=function(e){return Object(r["d"])("/outsource/cost/part",e)},de=function(e){return Object(r["d"])("/outsource/cost/asset",e)}}}]);