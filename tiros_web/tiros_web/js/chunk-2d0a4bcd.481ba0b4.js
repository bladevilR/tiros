(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a4bcd"],{"085d":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchQuery.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"名称"}},[t("a-input",{attrs:{placeholder:"名称或编码",allowClear:""},model:{value:e.queryParam.title,callback:function(t){e.$set(e.queryParam,"title",t)},expression:"queryParam.title"}})],1)],1),t("a-col",{attrs:{md:4,sm:24}},[t("a-form-item",{attrs:{label:"状态"}},[t("j-dict-select-tag",{attrs:{dictCode:"bu_effective"},model:{value:e.queryParam.status,callback:function(t){e.$set(e.queryParam,"status",t)},expression:"queryParam.status"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"上级"}},[t("a-tree-select",{attrs:{"tree-data-simple-mode":"","allow-clear":"","tree-data":e.selectTreeNode,placeholder:"请选择","load-data":e.loadSelectNodeMethod},model:{value:e.queryParam.id,callback:function(t){e.$set(e.queryParam,"id",t)},expression:"queryParam.id"}})],1)],1),t("a-col",{attrs:{md:10,sm:24}},[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-space",[t("a-button",{on:{click:e.searchQuery}},[e._v("查询")])],1)],1)])],1)],1)],1),t("a-spin",{attrs:{spinning:e.loading}},[t("div",{staticClass:"tableHeight",staticStyle:{height:"calc(100vh - 290px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(100vh - 290px)"},attrs:{border:"",resizable:"","row-id":"id",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","max-height":"100%","checkbox-config":{trigger:"row",highlight:!0,checkStrictly:!0},"edit-config":{trigger:"manual",mode:"row"},"tree-config":{lazy:!0,children:"children",hasChild:"hasChildren",loadMethod:e.loadChildrenMethod}}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"40",fixed:"left"}}),t("vxe-table-column",{attrs:{field:"assetName",title:"设备名称","tree-node":"",align:"left","header-align":"center","min-width":"120"}}),t("vxe-table-column",{attrs:{field:"assetNo",title:"设备编码",width:"120"}}),t("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",width:"100"}}),t("vxe-table-column",{attrs:{field:"structType_dictText",title:"设备类型",width:"100"}}),t("vxe-table-column",{attrs:{field:"vendor",title:"厂商",width:"120"}}),t("vxe-table-column",{attrs:{field:"brand",title:"品牌",width:"120"}}),t("vxe-table-column",{attrs:{field:"manufNo",title:"出厂编号",width:"120"}}),t("vxe-table-column",{attrs:{field:"model",title:"规格类型","min-width":"140",align:"left","header-align":"center"}})],1)],1)])],1)},l=[],r=a("8fad"),s={name:"TrainAssetInfo",props:["trainNo"],data:function(){return{trainId:"",trainTypeId:"",selectParent:{},queryParam:{code:this.trainNo},allAlign:"center",tableData:[],selectTreeNode:[],selectPid:"",loading:!1}},created:function(){this.findSelectList(),this.findList()},methods:{findList:function(){var e=this;this.loading=!0,Object(r["ic"])(this.queryParam).then((function(t){t.success&&(e.tableData=t.result)})).finally((function(){return e.loading=!1}))},findSelectList:function(){var e=this,t={code:this.trainNo};Object(r["ic"])(t).then((function(t){t.success&&(e.loading=!1,e.selectTreeNode=t.result.map((function(t){return e.genSelectTreeNode(t)})))}))},loadChildrenMethod:function(e){var t=this,a=e.row,i={code:this.trainNo,id:a.id,searchText:this.queryParam.searchText,status:this.queryParam.status};return new Promise((function(e){Object(r["ic"])(i).then((function(a){a.success?e(a.result):t.$message.error("".concat(a.msg))}))}))},loadSelectNodeMethod:function(e){var t=this,a={code:this.trainId,id:e.dataRef.id};return new Promise((function(e){Object(r["ic"])(a).then((function(e){if(e.success)e.result.map((function(e){t.selectTreeNode=t.selectTreeNode.concat(t.genSelectTreeNode(e))}));else t.$message.error(e.message)})),e()}))},genSelectTreeNode:function(e){return{id:e.id,pId:e.parentId,value:e.id,title:e.assetName,isLeaf:!e.hasChildren}},searchQuery:function(){this.findList()},loadData:function(){this.queryParam.id="",this.findSelectList(),this.findList()}}},n=s,c=a("2877"),o=Object(c["a"])(n,i,l,!1,null,"ed7937d8",null);t["default"]=o.exports}}]);