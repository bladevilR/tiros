(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-49b93d74"],{"12df":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("div",{staticClass:"content"},[t("div",{staticClass:"info-wrapper info-top-wrapper",staticStyle:{"margin-bottom":"20px"}},[t("h4",[e._v("基本信息")]),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"合同编号"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["contractNo",e.validatorRules.contractNo],expression:"['contractNo', validatorRules.contractNo]"}],attrs:{disabled:"",placeholder:"合同编号"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"合同名称"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["contractName",e.validatorRules.contractName],expression:"['contractName', validatorRules.contractName]"}],attrs:{disabled:"",placeholder:"合同名称"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"合同厂商"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["supplierName",e.validatorRules.supplierName],expression:"['supplierName', validatorRules.supplierName]"}],attrs:{disabled:"",placeholder:"合同厂商"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"合同金额"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["amount",e.validatorRules.amount],expression:"['amount', validatorRules.amount]"}],staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"合同金额",formatter:function(e){return"".concat(e,"万")},parser:function(e){return e.replace("万","")},min:0,step:.1,max:99999999}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"合同税率"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["taxRate",e.validatorRules.taxRate],expression:"['taxRate', validatorRules.taxRate]"}],staticStyle:{width:"100%"},attrs:{disabled:"",formatter:function(e){return"".concat(e,"%")},parser:function(e){return e.replace("%","")},min:0,step:.1,max:100,placeholder:"合同税率"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"执行税率"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["executeTaxRate",e.validatorRules.executeTaxRate],expression:"['executeTaxRate', validatorRules.executeTaxRate]"}],staticStyle:{width:"100%"},attrs:{disabled:"",formatter:function(e){return"".concat(e,"%")},parser:function(e){return e.replace("%","")},min:0,step:.1,max:100,placeholder:"执行税率"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"合同状态"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",e.validatorRules.status],expression:"['status', validatorRules.status]"}],attrs:{disabled:"",placeholder:"选择合同状态",triggerChange:!0,dictCode:"bu_contract_status"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"保证金类型"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator",value:["depositType",e.validatorRules.depositType],expression:"['depositType', validatorRules.depositType]"}],attrs:{disabled:"",triggerChange:!0,placeholder:"选择保证金类型",dictCode:"bu_contract_deposit_type"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"履约保证金"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["deposit",{initialValue:0}],expression:"['deposit', { initialValue: 0 }]"}],staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"履约保证金",formatter:function(e){return"".concat(e,"万")},parser:function(e){return e.replace("万","")},min:0,step:.1,max:99999999}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"所属线路"}},[t("line-select-list",{directives:[{name:"decorator",rawName:"v-decorator",value:["lineId",e.validatorRules.lineId],expression:"['lineId', validatorRules.lineId]"}],attrs:{disabled:"","trigger-change":!0},on:{change:e.handleLine}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"开始时间"}},[t("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["startDate",e.validatorRules.startDate],expression:"['startDate', validatorRules.startDate]"}],staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"开始时间"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"终止日期"}},[t("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["finishDate",e.validatorRules.finishDate],expression:"['finishDate', validatorRules.finishDate]"}],staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"终止日期"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"质保期"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["expiration",e.validatorRules.expiration],expression:"['expiration', validatorRules.expiration]"}],staticStyle:{width:"80%"},attrs:{disabled:"",placeholder:"质保期",min:0,max:99999999,precision:0}}),e._v(" 个月 ")],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"质保金类型"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator",value:["qualityDepositType"],expression:"['qualityDepositType']"}],attrs:{disabled:"",triggerChange:!0,placeholder:"选择质保金类型",dictCode:"bu_contract_deposit_type"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"质保金比例"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["qualityDepositPercent",e.validatorRules.qualityDepositPercent],expression:"['qualityDepositPercent', validatorRules.qualityDepositPercent]"}],staticStyle:{width:"100%"},attrs:{disabled:"",formatter:function(e){return"".concat(e,"%")},parser:function(e){return e.replace("%","")},min:0,step:.1,max:100,placeholder:"质保金比例"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"预付款"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["advancePayment",{initialValue:0}],expression:"['advancePayment', { initialValue: 0 }]"}],staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"输入预付款",formatter:function(e){return"".concat(e,"万")},parser:function(e){return e.replace("万","")},min:0,step:.1,max:99999999}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"合同部件",required:"true"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["assetTypeName",e.validatorRules.assetTypeName],expression:"['assetTypeName', validatorRules.assetTypeName]",modifiers:{trim:!0}}],ref:"mySelect",attrs:{disabled:"",placeholder:"请选择",open:!1,showArrow:!0},on:{focus:e.openModal}},[t("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"合同部件别名"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["assetTypeAlias",e.validatorRules.assetTypeAlias],expression:"['assetTypeAlias',validatorRules.assetTypeAlias]"}],attrs:{disabled:"",placeholder:"合同部件别名"}})],1)],1),t("a-col",{attrs:{md:6,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"每列部件数量"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["assetAmount",e.validatorRules.assetAmount],expression:"['assetAmount', validatorRules.assetAmount]"}],attrs:{disabled:"",placeholder:"每列部件数量"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"车辆数"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["trainAmount",e.validatorRules.trainAmount],expression:"['trainAmount', validatorRules.trainAmount]"}],staticStyle:{width:"100%"},attrs:{disabled:"",min:1,placeholder:"输入车辆数"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"已完成数"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["finishAmount",e.validatorRules.finishAmount],expression:"['finishAmount', validatorRules.finishAmount]"}],staticStyle:{width:"100%"},attrs:{disabled:"",min:0,placeholder:"输入已完成数"}})],1)],1),t("a-col",{attrs:{md:6,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"修程类型"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator",value:["repairProgramId",e.validatorRules.repairProgramId],expression:"['repairProgramId', validatorRules.repairProgramId]"}],attrs:{disabled:"",triggerChange:!0,placeholder:"请选择修程类型",dictCode:"bu_repair_program,name,id"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"计数开始"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["payBegin"],expression:"['payBegin']"}],staticStyle:{width:"100%"},attrs:{disabled:"",min:1,placeholder:"从第几列开始计算"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"支付间隔数"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["payInterval"],expression:"['payInterval']"}],staticStyle:{width:"100%"},attrs:{disabled:"",min:1,placeholder:"每隔多少列支付一次"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"维修周期"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["needDay",e.validatorRules.needDay],expression:"['needDay', validatorRules.needDay]"}],staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"自然日",min:0,max:999999999,precision:0}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"签订日期"}},[t("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["signDate"],expression:"['signDate']"}],staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"签订日期"}})],1)],1),t("a-col",{attrs:{md:18,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"支付条款"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["attention",e.validatorRules.attention],expression:"['attention', validatorRules.attention]"}],staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"支付条款"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:18,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"监修信息"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["superInfo",e.validatorRules.superInfo],expression:"['superInfo', validatorRules.superInfo]"}],staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"输入监修信息"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:18,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"培训信息"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["trainInfo",e.validatorRules.trainInfo],expression:"['trainInfo', validatorRules.trainInfo]"}],staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"输入培训信息"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:18,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"备注"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark",e.validatorRules.remark],expression:"['remark', validatorRules.remark]"}],staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"备注"}})],1)],1)],1)],1)]),t("div",{staticClass:"content"},[t("div",{staticClass:"info-wrapper info-top-wrapper"},[t("h4",[e._v("合同附件")]),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:18,sm:24,offset:3}},[t("vxe-table",{attrs:{border:"",data:e.annexList,"show-overflow":"tooltip","edit-config":{trigger:"manual",mode:"row"}}},[t("div",{}),t("vxe-table-column",{attrs:{type:"index",title:"序号",width:"50px","header-align":"center",align:"center"}}),t("vxe-table-column",{attrs:{field:"name",title:"文件名","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{field:"type",title:"文件类型",width:"120px","header-align":"center",align:"center"}}),t("vxe-table-column",{attrs:{field:"fileSize",title:"文件大小",width:"180px","header-align":"center",align:"center"}}),t("vxe-table-column",{attrs:{title:"操作",width:"160px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("a",{staticStyle:{"margin-right":"12px"},on:{click:function(t){return t.stopPropagation(),e.handleSeeing(r)}}},[e._v("查看")]),t("a",{staticStyle:{"margin-left":"12px"},on:{click:function(t){return t.stopPropagation(),e.handleDownload(r)}}},[e._v("下载")])]}}])})],1)],1)],1)],1)]),t("doc-preview-modal",{ref:"docPreview",attrs:{title:e.fileName}}),t("train-asset-type",{ref:"selectModal",attrs:{multiple:!1,trainTypeId:e.trainTypeId},on:{ok:e.addTarget}})],1)],1)},l=[],i=a("b098"),o=a("c1df"),s=a.n(o),n=a("8fad"),c=a("d214"),d=a("e2aa"),u=a("2cb5"),p=a("ca00"),m=a("5633"),f=a("353a"),h=a("5371");function v(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",l=a.toStringTag||"@@toStringTag";function i(a,r,l,i){var n=r&&r.prototype instanceof s?r:s,c=Object.create(n.prototype);return b(c,"_invoke",function(a,r,l){var i,s,n,c=0,d=l||[],u=!1,p={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,a){return i=t,s=0,n=e,p.n=a,o}};function m(a,r){for(s=a,n=r,t=0;!u&&c&&!l&&t<d.length;t++){var l,i=d[t],m=p.p,f=i[2];a>3?(l=f===r)&&(n=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=m&&((l=a<2&&m<i[1])?(s=0,p.v=r,p.n=i[1]):m<f&&(l=a<3||i[0]>r||r>f)&&(i[4]=a,i[5]=r,p.n=f,s=0))}if(l||a>1)return o;throw u=!0,r}return function(l,d,f){if(c>1)throw TypeError("Generator is already running");for(u&&1===d&&m(d,f),s=d,n=f;(t=s<2?e:n)||!u;){i||(s?s<3?(s>1&&(p.n=-1),m(s,n)):p.n=n:p.v=n);try{if(c=2,i){if(s||(l="next"),t=i[l]){if(!(t=t.call(i,n)))throw TypeError("iterator result is not an object");if(!t.done)return t;n=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(n=TypeError("The iterator does not provide a '"+l+"' method"),s=1);i=e}else if((t=(u=p.n<0)?n:a.call(r,p))!==o)break}catch(t){i=e,s=1,n=t}finally{c=1}}return{value:t,done:u}}}(a,l,i),!0),c}var o={};function s(){}function n(){}function c(){}t=Object.getPrototypeOf;var d=[][r]?t(t([][r]())):(b(t={},r,(function(){return this})),t),u=c.prototype=s.prototype=Object.create(d);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,b(e,l,"GeneratorFunction")),e.prototype=Object.create(u),e}return n.prototype=c,b(u,"constructor",c),b(c,"constructor",n),n.displayName="GeneratorFunction",b(c,l,"GeneratorFunction"),b(u),b(u,l,"Generator"),b(u,r,(function(){return this})),b(u,"toString",(function(){return"[object Generator]"})),(v=function(){return{w:i,m:p}})()}function b(e,t,a,r){var l=Object.defineProperty;try{l({},"",{})}catch(e){l=0}b=function(e,t,a,r){function i(t,a){b(e,t,(function(e){return this._invoke(t,a,e)}))}t?l?l(e,t,{value:a,enumerable:!r,configurable:!r,writable:!r}):e[t]=a:(i("next",0),i("throw",1),i("return",2))},b(e,t,a,r)}function w(e,t,a,r,l,i,o){try{var s=e[i](o),n=s.value}catch(e){return void a(e)}s.done?t(n):Promise.resolve(n).then(r,l)}function y(e){return function(){var t=this,a=arguments;return new Promise((function(r,l){var i=e.apply(t,a);function o(e){w(i,r,l,o,s,"next",e)}function s(e){w(i,r,l,o,s,"throw",e)}o(void 0)}))}}var g={name:"ContractInfoBasic",components:{JTreeSelect:i["default"],TrainAssetType:u["default"],LineSelectList:m["default"],DocUpload:h["default"],DocPreviewModal:f["default"]},props:["contractDetail"],data:function(){return{title:"新增",trainTypeId:"",assetTypeId:"",back:!0,detail:{},lineId:"",form:this.$form.createForm(this),confirmLoading:!1,defaultFileList:[],annexList:[],filePath:"",fileName:"",status:!1,visible:!1,validatorRules:{contractName:{rules:[{required:!0,message:"请输入合同名称!"},{max:32,message:"输入长度不能超过32字符!"}]},contractNo:{rules:[{required:!0,message:"请输入合同编号!"},{max:32,message:"输入长度不能超过32字符!"}]},attention:{rules:[{max:255,message:"输入长度不能超过255字符!"}]},remark:{rules:[{max:255,message:"输入长度不能超过255字符!"}]},supplierId:{rules:[{required:!0,message:"请选择厂商!"}]},amount:{rules:[{required:!0,message:"请输入合同金额!"}]},taxRate:{rules:[{required:!0,message:"请输入合同税率!"}]},status:{rules:[{required:!0,message:"请选择合同状态!"}]},lineId:{rules:[{required:!0,message:"请选择所属线路!"}]},startDate:{rules:[{required:!0,message:"请输入开始时间!"}]},finishDate:{rules:[{required:!0,message:"请输入终止时间!"}]},signDate:{rules:[{required:!0,message:"请输入签订时间!"}]},expiration:{rules:[{required:!0,message:"请输入质保期!"}]},trainAmount:{rules:[{required:!0,message:"输入车辆数!"}]},finishAmount:{rules:[{required:!0,message:"输入已完成数!"}]},repairProgramId:{rules:[{required:!0,message:"请选择修程类型!"}]},assetTypeAlias:{rules:[{max:150,message:"输入长度不能超过150字符!"}]}},labelCol1:{xs:{span:24},sm:{span:9}},wrapperCol1:{xs:{span:24},sm:{span:15}},labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:21}}}},watch:{contractDetail:{immediate:!0,handler:function(e){e&&(this.detail=this.contractDetail,this.back=!1,this.edit(this.detail))}}},methods:{handleLine:function(e){var t=this;Object(p["e"])(e)?this.trainTypeId="":Object(n["vb"])({lineId:e}).then((function(e){e.success&&(t.trainTypeId=e.result.trainTypeId)}))},openModal:function(){Object(p["e"])(this.trainTypeId)?this.$message.error("请先选择线路!"):(this.$refs.selectModal.showModal(),this.$refs.mySelect.blur())},addTarget:function(e){Object(p["e"])(e)||(this.assetTypeId=e[0].id,this.form.setFieldsValue({assetTypeName:e[0].name}))},successUploadFile:function(e){var t=this;!e||e.length<1||(e.map((function(e){Object.assign(e,{id:Object(p["p"])()}),t.annexList.push(e)})),this.confirmLoading=!1,Object(n["d"])(e).then((function(e){t.confirmLoading=!1})))},uploadFail:function(e){this.confirmLoading=!1},onRemoveFile:function(e){},beginUpload:function(){this.confirmLoading=!0,this.$refs.upload.beginUpload()},handlePrivilege:function(){var e=y(v().m((function e(t,a){var r,l=this;return v().w((function(e){while(1)switch(e.n){case 0:return r={id:t,operation:a},e.n=1,Object(n["uc"])(r).then((function(e){l.status=e.result}));case 1:return e.a(2)}}),e)})));function t(t,a){return e.apply(this,arguments)}return t}(),handleSeeing:function(){var e=y(v().m((function e(t){return v().w((function(e){while(1)switch(e.n){case 0:return e.n=1,this.handlePrivilege(t.id,2);case 1:this.status?(this.fileName=t.fileName,this.$refs.docPreview.handleFilePath(t.savepath)):this.$message.error("您没有权限!");case 2:return e.a(2)}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleDelete:function(){var e=y(v().m((function e(t,a){var r;return v().w((function(e){while(1)switch(e.n){case 0:r=this,r.$confirm({title:"提示",content:"确定删除该条附件吗？",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){Object(c["t"])({ids:t.id}).then((function(e){e.success?(r.annexList.splice(a,1),r.$message.success(e.message)):r.$message.error(e.message)}))},onCancel:function(){}});case 1:return e.a(2)}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}(),handleDownload:function(){var e=y(v().m((function e(t){return v().w((function(e){while(1)switch(e.n){case 0:return e.n=1,this.handlePrivilege(t.id,3);case 1:this.status?Object(d["b"])(t.savepath):this.$message.error("您没有权限!");case 2:return e.a(2)}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleOk:function(){var e=this;this.form.validateFields((function(t,a){if(!t){e.beginUpload();var r=Object.assign({},e.model,a,{startDate:s()(a.startDate).format("YYYY-MM-DD"),finishDate:s()(a.applyDate).format("YYYY-MM-DD"),signDate:s()(a.signDate).format("YYYY-MM-DD"),assetTypeId:e.assetTypeId,extInfo:{superInfo:a.superInfo,trainInfo:a.trainInfo}});setTimeout((function(){var t;r.annexList=e.annexList,e.confirmLoading=!0,t=Object(p["e"])(e.model)?Object(c["b"])(r):Object(c["w"])(r),t.then((function(t){t.success?(e.$message.success(t.message),e.$emit("ok"),e.close()):e.$message.error(t.message)})).finally((function(){return e.confirmLoading=!1}))}),800)}}))},add:function(){this.edit({})},edit:function(e){var t=this;this.visible=!0,this.form.resetFields(),this.model=Object.assign({},e),Object(p["e"])(e)?this.assetTypeId="":(this.assetTypeId=this.model.assetTypeId,this.handleLine(this.model.lineId)),Object(p["e"])(this.model.extInfo)||this.$nextTick((function(){t.form.setFieldsValue({superInfo:t.model.extInfo.superInfo,trainInfo:t.model.extInfo.trainInfo})})),this.$nextTick((function(){Object(c["G"])({contractId:t.model.id}).then((function(e){e.success&&e.result.length&&(t.annexList=e.result||[])})),t.form.setFieldsValue({amount:t.model.amount,contractName:t.model.contractName,contractNo:t.model.contractNo,finishDate:s()(t.model.finishDate||void 0),signDate:s()(t.model.signDate||void 0),startDate:s()(t.model.startDate||void 0),status:t.model.status,taxRate:t.model.taxRate,assetTypeName:t.model.assetTypeName,attention:t.model.attention,behindMoney:t.model.behindMoney,deposit:t.model.deposit,expiration:t.model.expiration,lineId:t.model.lineId,supplierName:t.model.supplierName,remark:t.model.remark,needDay:t.model.needDay,qualityDepositPercent:t.model.qualityDepositPercent,depositType:t.model.depositType,advancePayment:t.model.advancePayment,assetAmount:t.model.assetAmount,executeTaxRate:t.model.executeTaxRate,trainAmount:t.model.trainAmount,finishAmount:t.model.finishAmount,repairProgramId:t.model.repairProgramId,qualityDepositType:t.model.qualityDepositType,payInterval:t.model.payInterval,payBegin:t.model.payBegin,assetTypeAlias:t.model.assetTypeAlias})}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},C=g,x=(a("6769"),a("2877")),T=Object(x["a"])(C,r,l,!1,null,"0af360a9",null);t["default"]=T.exports},"2cb5":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"90%",centered:"",title:e.title,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",destroyOnClose:!0,bodyStyle:{height:"80vh"}},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchQuery.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:7,sm:24}},[t("a-form-item",{attrs:{label:"名称"}},[t("a-input",{attrs:{placeholder:"名称或编码","allow-clear":""},model:{value:e.queryParam.searchText,callback:function(t){e.$set(e.queryParam,"searchText",t)},expression:"queryParam.searchText"}})],1)],1),t("a-col",{attrs:{md:7,sm:24}},[t("a-form-item",{attrs:{label:"状态"}},[t("j-dict-select-tag",{attrs:{dictCode:"bu_enable"},model:{value:e.queryParam.status,callback:function(t){e.$set(e.queryParam,"status",t)},expression:"queryParam.status"}})],1)],1),t("a-col",{attrs:{md:3,sm:12}},[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-button",{on:{click:e.searchQuery}},[e._v("查询")])],1)])],1)],1)],1),t("div",{staticStyle:{height:"calc(80vh - 85px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(80vh - 85px)"},attrs:{border:"","max-height":"100%","row-id":"id",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","radio-config":e.multiple?{}:{trigger:"row",checkMethod:e.checkRadioMethod},"checkbox-config":e.multiple?{trigger:"row",highlight:!0,checkMethod:e.checkRadioMethod}:{},"tree-config":{lazy:!0,children:"children",hasChild:"hasChildren",loadMethod:e.loadChildrenMethod}}},[e.multiple?t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}):t("vxe-table-column",{attrs:{type:"radio",width:"40"}}),t("vxe-table-column",{attrs:{field:"name",title:"名称","tree-node":"",align:"left"}}),t("vxe-table-column",{attrs:{align:"left","header-align":"center",field:"code",title:"编码",width:"15%"}}),t("vxe-table-column",{attrs:{field:"structType_dictText",title:"类型",width:"10%"}}),t("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",width:"10%"}}),t("vxe-table-column",{attrs:{field:"placeCode",title:"位置编码",width:"15%"}}),t("vxe-table-column",{attrs:{field:"placeDesc",title:"位置描述",width:"15%"}})],1)],1)])},l=[],i=a("8fad"),o={name:"TrainAssetType",props:{trainTypeId:{type:String,default:""},parentId:{type:String,default:null},multiple:{type:Boolean,default:!0},title:{type:String,default:"设备类型选择"},canSelectType:{type:Array,default:function(){return[1,2,3,4]}}},data:function(){return{queryParam:{trainTypeId:"",id:"",searchText:"",status:null,structType:null},allAlign:"center",tableData:[],treeData:[],selectParent:"",visible:!1,confirmLoading:!1}},mounted:function(){},methods:{showModal:function(){this.visible=!0,this.queryParam.trainTypeId=this.trainTypeId,this.findList()},handleOk:function(){var e=[];this.multiple?e=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&e.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",e),this.visible=!1},handleCancel:function(){this.$emit("cancel"),this.close()},close:function(){this.$emit("close"),this.visible=!1},findList:function(){var e=this;this.loading=!0,this.parentId&&(this.queryParam.id=this.parentId),this.selectParent&&(this.queryParam.id=this.selectParent),Object(i["Zc"])(this.queryParam).then((function(t){t.success&&(e.loading=!1,e.tableData=t.result)}))},findSelectList:function(){var e=this,t={id:this.parentId,trainTypeId:this.trainTypeId};this.parentId&&(t.id=this.parentId),Object(i["Zc"])(t).then((function(t){t.success&&(e.loading=!1,e.treeData=t.result.map((function(t){return e.genSelectTreeNode(t)})))}))},loadChildrenMethod:function(e){var t=this,a=e.row,r={trainTypeId:this.trainTypeId,id:a.id};return new Promise((function(e){Object(i["Zc"])(r).then((function(a){a.success?e(a.result):t.$message.error("".concat(a.msg))}))}))},loadSelectNodeMethod:function(e){var t=this,a={trainTypeId:this.trainTypeId,id:e.dataRef.id,searchText:this.queryParam.searchText,status:this.queryParam.status,structType:this.queryParam.structType};return new Promise((function(e){Object(i["Zc"])(a).then((function(e){e.success?e.result.map((function(e){t.treeData=t.treeData.concat(t.genSelectTreeNode(e))})):t.$message.warning(e.message)})),e()}))},genSelectTreeNode:function(e){return{id:e.id,pId:e.parentId,value:e.id,title:e.name,isLeaf:!e.hasChildren}},searchQuery:function(){this.findList()},checkRadioMethod:function(e){var t=e.row;return this.canSelectType.indexOf(t.structType)>-1}}},s=o,n=(a("9589"),a("2877")),c=Object(n["a"])(s,r,l,!1,null,"52968c59",null);t["default"]=c.exports},6769:function(e,t,a){"use strict";a("aa6b")},7237:function(e,t,a){},9589:function(e,t,a){"use strict";a("7237")},aa6b:function(e,t,a){}}]);