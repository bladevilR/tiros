(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f6d0490e"],{"8bf7":function(e,t,n){},ab4c:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"bodyWrapper"},[t("a-spin",{attrs:{spinning:e.loading,tip:"同步中...","na-spin-flex1":""}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{label:"故障代码"}},[t("a-input",{attrs:{placeholder:"请输入编码和描述"},model:{value:e.queryParam.searchText,callback:function(t){e.$set(e.queryParam,"searchText",t)},expression:"queryParam.searchText"}})],1)],1),t("a-col",{attrs:{md:12}},[t("a-space",[t("a-button",{on:{click:e.findList}},[e._v("查询")]),t("a-button",{on:{click:e.syncCode}},[e._v("从检修系统同步")])],1)],1)],1)],1)],1),t("div",{staticStyle:{flex:"1"}},[t("vxe-table",{ref:"listTable",attrs:{border:"",align:"center",height:"auto",data:e.tableData,"tree-config":{lazy:!1,children:"children",hasChild:"hasChildren",loadMethod:e.loadChildrenMethod}},on:{"checkbox-change":e.rangeChange,"checkbox-all":e.rangeChange}},[t("vxe-table-column",{attrs:{field:"fltCode",title:"故障代码",align:"left","header-align":"center",width:"260","tree-node":""}}),t("vxe-table-column",{attrs:{field:"fltLevel_dictText",title:"类型",width:"150"}}),t("vxe-table-column",{attrs:{field:"fltName",title:"代码描述",align:"left","header-align":"center"}})],1)],1)])],1)},r=[],i=n("b47d"),o=(n("9fb0"),n("bc3a")),l=n.n(o);function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=c(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw i}}}}function c(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var u={name:"SpecialMaterial",components:{},data:function(){return{loading:!1,isCheckRow:!1,isCheckRows:!1,tableData:[],defaultExpandRowKeys:[],queryParam:{searchText:""},page:{totalResult:1}}},mounted:function(){this.findList()},methods:{findList:function(){var e=this;this.isCheckRow=!1,this.isCheckRows=!1,Object(i["bb"])(this.queryParam).then((function(t){t.success?(e.tableData=e.listToTreeList(t.result),e.$nextTick((function(){e.tableData.length&&e.$refs.listTable.setTreeExpand(e.tableData.find((function(e){return e.children.length})),!0)}))):e.$message.error(t.message)}))},syncCode:function(){var e=this;this.$confirm({content:"同步将从检修系统更新所有故障代码，确定要同步故障编码吗？",onOk:function(){e.loading=!0;var t=window._CONFIG["syncMaximo"]+"/third/maximo/read/init/faultCode";l()({url:t,method:"GET"}).then((function(t){t.data.success&&(e.$message.success("操作成功"),e.findList()),e.loading=!1})).catch((function(t){e.$emit("change",!1),e.$notification.error({message:"服务器出错了",description:"Network Error",duration:4}),e.loading=!1}))},onCancel:function(){}})},handlePageChange:function(e){var t=e.currentPage,n=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=n,this.findList()},handleAdd:function(){this.$refs.workSopModal.add()},handleEdit:function(){var e=this.$refs.listTable.getCheckboxRecords()[0];this.$refs.workSopModal.edit(e)},handleDel:function(){},rangeChange:function(e){var t=e.records;this.isCheckRow=1===t.length,this.isCheckRows=t.length>0},listToTreeList:function(e){if(!e||!e.length)return[];var t,n={},a=s(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;n[r.fltCode]=r}}catch(o){a.e(o)}finally{a.f()}for(var i=0;i<e.length;i++)e[i].parentCode&&n[e[i].parentCode]&&(n[e[i].parentCode].children||(n[e[i].parentCode].children=[]),n[e[i].parentCode].children.push(e[i]),e.splice(i,1),i--);return e.sort((function(e,t){return e.fltCode-t.fltCode})),e},loadChildrenMethod:function(e){var t=e.row;return t.children}}},f=u,h=(n("bd70"),n("2877")),g=Object(h["a"])(f,a,r,!1,null,"6f3e23b0",null);t["default"]=g.exports},bd70:function(e,t,n){"use strict";n("8bf7")}}]);