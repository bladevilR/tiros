(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b8cdcf8"],{31700:function(t,e,a){"use strict";a("3830")},3830:function(t,e,a){},7456:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("div",[e("a-modal",{attrs:{title:"核实",width:"70%",visible:t.visible,confirmLoading:t.confirmLoading,destroyOnClose:!0},on:{cancel:t.handleCancel,ok:t.saveOutInInfo}},[e("div",{staticClass:"fieldset-wrapper"},[e("h4",{staticClass:"title"},[t._v("物料详情")]),e("a-form-model",{attrs:{layout:"inline",model:t.form,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[e("a-row",[e("a-col",{attrs:{span:8}},[e("a-form-model-item",{staticClass:"modelItemWarp",attrs:{label:"线路"}},[e("a-input",{attrs:{value:t.form.lineName,disabled:""}})],1)],1),e("a-col",{attrs:{span:8}},[e("a-form-model-item",{staticClass:"modelItemWarp",attrs:{label:"车辆"}},[e("a-input",{attrs:{value:t.form.trainNo,disabled:""}})],1)],1),e("a-col",{attrs:{span:8}},[e("a-form-model-item",{staticClass:"modelItemWarp",attrs:{label:"列计划"}},[e("a-input",{attrs:{value:t.form.planName,disabled:""}})],1)],1),e("a-col",{attrs:{span:8}},[e("a-form-model-item",{staticClass:"modelItemWarp",attrs:{label:"工单号"}},[e("a-input",{attrs:{value:t.form.orderCode,disabled:""}})],1)],1),e("a-col",{attrs:{span:8}},[e("a-form-model-item",{staticClass:"modelItemWarp",attrs:{label:"工单名称"}},[e("a-input",{attrs:{value:t.form.orderName,disabled:""}})],1)],1),e("a-col",{attrs:{span:8}},[e("a-form-model-item",{staticClass:"modelItemWarp",attrs:{label:"工单类型"}},[e("a-input",{attrs:{value:t.form.orderType_dictText,disabled:""}})],1)],1),e("a-col",{attrs:{span:8}},[e("a-form-model-item",{staticClass:"modelItemWarp",attrs:{label:"物资编码"}},[e("a-input",{attrs:{value:t.form.materialTypeCode,disabled:""}})],1)],1),e("a-col",{attrs:{span:8}},[e("a-form-model-item",{staticClass:"modelItemWarp",attrs:{label:"物资名称"}},[e("a-input",{attrs:{value:t.form.materialTypeName,disabled:""}})],1)],1),e("a-col",{attrs:{span:8}},[e("a-form-model-item",{staticClass:"modelItemWarp",attrs:{label:"物资描述"}},[e("a-input",{attrs:{value:t.form.materialTypeSpec,disabled:""}})],1)],1),e("a-col",{attrs:{span:8}},[e("a-form-model-item",{staticClass:"modelItemWarp",attrs:{label:"工班"}},[e("a-input",{attrs:{value:t.form.groupName,disabled:""}})],1)],1),e("a-col",{attrs:{span:8}},[e("a-form-model-item",{staticClass:"modelItemWarp",attrs:{label:"额定数量"}},[e("a-input",{attrs:{value:t.form.amount,disabled:""}})],1)],1),e("a-col",{attrs:{span:8}},[e("a-form-model-item",{staticClass:"modelItemWarp",attrs:{label:"实际消耗"}},[e("a-input",{attrs:{value:t.form.actAmount,disabled:""}})],1)],1),e("a-col",{attrs:{span:8}},[e("a-form-model-item",{staticClass:"modelItemWarp",attrs:{label:"类别"}},[e("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_material_type"},model:{value:t.form.useCategory,callback:function(e){t.$set(t.form,"useCategory",e)},expression:"form.useCategory"}})],1)],1),e("a-col",{attrs:{span:8}},[e("a-form-model-item",{staticClass:"modelItemWarp",attrs:{label:"系统"}},[e("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_train_asset_type,name,id,struct_type=1 and parent_id is null"},model:{value:t.form.systemId,callback:function(e){t.$set(t.form,"systemId",e)},expression:"form.systemId"}})],1)],1),e("a-col",{attrs:{span:8}},[e("a-form-model-item",{staticClass:"modelItemWarp",attrs:{label:"工位"}},[e("j-dict-select-tag",{attrs:{placeholder:"请选择工位",dictCode:"bu_mtr_workstation,name,id"},model:{value:t.form.workstationId,callback:function(e){t.$set(t.form,"workstationId",e)},expression:"form.workstationId"}})],1)],1)],1)],1)],1),e("div",{staticClass:"fieldset-wrapper"},[e("h4",{staticClass:"title"},[t._v("实际消耗")]),e("div",{staticStyle:{"padding-bottom":"10px"}},[e("a-space",[e("a-button",{on:{click:function(e){return t.$refs.modalForm.showModal()}}},[t._v("添加")]),e("a-button",{on:{click:t.deleteEvent}},[t._v("删除")])],1)],1),e("div",{staticStyle:{height:"calc(100vh - 600px)"}},[e("vxe-table",{key:"outTable",ref:"outTable",attrs:{border:"",height:"auto",align:"center",data:t.form.actList,"show-overflow":"tooltip","checkbox-config":{trigger:"row",highlight:!0,range:!0}},on:{"checkbox-all":t.selectChangeEvent,"checkbox-change":t.selectChangeEvent}},[e("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),e("vxe-table-column",{attrs:{field:"tradeNo",title:"批次号"}}),e("vxe-table-column",{attrs:{field:"price",title:"价格"}}),e("vxe-table-column",{attrs:{field:"actAmount",title:"数量"},scopedSlots:t._u([{key:"default",fn:function(a){var r=a.row;return[e("a-input-number",{attrs:{min:0,precision:0},model:{value:r.actAmount,callback:function(e){t.$set(r,"actAmount",e)},expression:"row.actAmount"}})]}}])})],1)],1)])]),e("material-list",{ref:"modalForm",attrs:{lineId:t.form.lineId,multiple:!1,mode:[3],materialTypeCode:t.form.materialTypeCode,"group-id":t.form.groupId},on:{ok:t.onSelectMaterial}})],1)},o=[],l=a("ca00"),s=a("7164"),i=a("c54ca");function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function c(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function m(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(Object(a),!0).forEach((function(e){d(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function d(t,e,a){return(e=u(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function u(t){var e=p(t,"string");return"symbol"==n(e)?e:e+""}function p(t,e){if("object"!=n(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,e||"default");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var f={name:"planMaterialModal",components:{MaterialList:s["default"]},data:function(){return{visible:!1,confirmLoading:!1,form:{workstationId:null,useCategory:null,systemId:null,actList:[]},selecteList:[],labelCol:{span:6},wrapperCol:{span:18}}},methods:{selectChangeEvent:function(t){var e=t.records;this.selecteList=JSON.parse(JSON.stringify(e))},deleteEvent:function(){var t=this;this.selecteList.forEach((function(e,a,r){for(var o=0,l=t.form.actList.length;o<l;o++)if(e.id==t.form.actList[o].id){t.form.actList.splice(o,1);break}}))},onSelectMaterial:function(t){if(t.length){var e=this.form.actList.filter((function(e){return e.tradeNo==t[0].tradeNo}));if(e.length)return this.$message.warning("添加的批次已经存在列表中");this.form.actList.push({id:Object(l["p"])(),groupStockId:t[0].id,applyId:t[0].applyId,applyIdDetailId:t[0].applyIdDetailId,assignDetailId:t[0].assignDetailId,tradeNo:t[0].tradeNo,actAmount:"",price:t[0].price})}},show:function(t){var e=this;Object(i["Vb"])({orderMaterialId:t.id}).then((function(t){t.success&&t.result&&(e.form=m(m({},e.form),t.result),e.selecteList=[])})),this.visible=!0},saveOutInInfo:function(){var t=this;this.confirmLoading=!0,Object(i["Wb"])(this.form).then((function(e){e.success?(t.$emit("ok"),t.$message.success(e.message),t.handleCancel()):t.$message.warning(e.message),t.confirmLoading=!1}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},b=f,v=(a("31700"),a("2877")),h=Object(v["a"])(b,r,o,!1,null,"775a462c",null);e["default"]=h.exports}}]);