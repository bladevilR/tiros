(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-317338ea","chunk-19142b96","chunk-62495c08","chunk-42391c95","chunk-72e72170"],{"260f":function(e,t,r){},"2cb5":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"90%",centered:"",title:e.title,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",destroyOnClose:!0,bodyStyle:{height:"80vh"}},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchQuery.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:7,sm:24}},[t("a-form-item",{attrs:{label:"名称"}},[t("a-input",{attrs:{placeholder:"名称或编码","allow-clear":""},model:{value:e.queryParam.searchText,callback:function(t){e.$set(e.queryParam,"searchText",t)},expression:"queryParam.searchText"}})],1)],1),t("a-col",{attrs:{md:7,sm:24}},[t("a-form-item",{attrs:{label:"状态"}},[t("j-dict-select-tag",{attrs:{dictCode:"bu_enable"},model:{value:e.queryParam.status,callback:function(t){e.$set(e.queryParam,"status",t)},expression:"queryParam.status"}})],1)],1),t("a-col",{attrs:{md:3,sm:12}},[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-button",{on:{click:e.searchQuery}},[e._v("查询")])],1)])],1)],1)],1),t("div",{staticStyle:{height:"calc(80vh - 85px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(80vh - 85px)"},attrs:{border:"","max-height":"100%","row-id":"id",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","radio-config":e.multiple?{}:{trigger:"row",checkMethod:e.checkRadioMethod},"checkbox-config":e.multiple?{trigger:"row",highlight:!0,checkMethod:e.checkRadioMethod}:{},"tree-config":{lazy:!0,children:"children",hasChild:"hasChildren",loadMethod:e.loadChildrenMethod}}},[e.multiple?t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}):t("vxe-table-column",{attrs:{type:"radio",width:"40"}}),t("vxe-table-column",{attrs:{field:"name",title:"名称","tree-node":"",align:"left"}}),t("vxe-table-column",{attrs:{align:"left","header-align":"center",field:"code",title:"编码",width:"15%"}}),t("vxe-table-column",{attrs:{field:"structType_dictText",title:"类型",width:"10%"}}),t("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",width:"10%"}}),t("vxe-table-column",{attrs:{field:"placeCode",title:"位置编码",width:"15%"}}),t("vxe-table-column",{attrs:{field:"placeDesc",title:"位置描述",width:"15%"}})],1)],1)])},n=[],i=r("8fad"),o={name:"TrainAssetType",props:{trainTypeId:{type:String,default:""},parentId:{type:String,default:null},multiple:{type:Boolean,default:!0},title:{type:String,default:"设备类型选择"},canSelectType:{type:Array,default:function(){return[1,2,3,4]}}},data:function(){return{queryParam:{trainTypeId:"",id:"",searchText:"",status:null,structType:null},allAlign:"center",tableData:[],treeData:[],selectParent:"",visible:!1,confirmLoading:!1}},mounted:function(){},methods:{showModal:function(){this.visible=!0,this.queryParam.trainTypeId=this.trainTypeId,this.findList()},handleOk:function(){var e=[];this.multiple?e=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&e.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",e),this.visible=!1},handleCancel:function(){this.$emit("cancel"),this.close()},close:function(){this.$emit("close"),this.visible=!1},findList:function(){var e=this;this.loading=!0,this.parentId&&(this.queryParam.id=this.parentId),this.selectParent&&(this.queryParam.id=this.selectParent),Object(i["gd"])(this.queryParam).then((function(t){t.success&&(e.loading=!1,e.tableData=t.result)}))},findSelectList:function(){var e=this,t={id:this.parentId,trainTypeId:this.trainTypeId};this.parentId&&(t.id=this.parentId),Object(i["gd"])(t).then((function(t){t.success&&(e.loading=!1,e.treeData=t.result.map((function(t){return e.genSelectTreeNode(t)})))}))},loadChildrenMethod:function(e){var t=this,r=e.row,a={trainTypeId:this.trainTypeId,id:r.id};return new Promise((function(e){Object(i["gd"])(a).then((function(r){r.success?e(r.result):t.$message.error("".concat(r.msg))}))}))},loadSelectNodeMethod:function(e){var t=this,r={trainTypeId:this.trainTypeId,id:e.dataRef.id,searchText:this.queryParam.searchText,status:this.queryParam.status,structType:this.queryParam.structType};return new Promise((function(e){Object(i["gd"])(r).then((function(e){e.success?e.result.map((function(e){t.treeData=t.treeData.concat(t.genSelectTreeNode(e))})):t.$message.warning(e.message)})),e()}))},genSelectTreeNode:function(e){return{id:e.id,pId:e.parentId,value:e.id,title:e.name,isLeaf:!e.hasChildren}},searchQuery:function(){this.findList()},checkRadioMethod:function(e){var t=e.row;return this.canSelectType.indexOf(t.structType)>-1}}},l=o,s=(r("9589"),r("2877")),u=Object(s["a"])(l,a,n,!1,null,"52968c59",null);t["default"]=u.exports},"353a":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"80%",visible:e.visible,title:e.title,centered:"",bodyStyle:{height:"80vh"},confirmLoading:e.confirmLoading,destroyOnClose:!0,footer:null},on:{cancel:e.handleCancel}},[t("div",[t("iframe",{staticClass:"filename",staticStyle:{height:"calc(80vh - 25px)"},attrs:{src:e.filePath,width:"100%",frameborder:"0"}})])])},n=[],i=r("e2aa"),o={name:"DocPreviewModal",props:{title:{type:String,default:"文件预览"}},data:function(){return{visible:!1,confirmLoading:!1,filePath:""}},methods:{handleFilePath:function(e){var t=this;Object(i["c"])(e).then((function(e){if(e.success){var r=e.result;t.visible=!0,t.filePath=window._CONFIG["onlinePreviewDomainURL"]+"?url="+encodeURIComponent(r)}else t.$message.warning("查看文件失败")}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},l=o,s=(r("9216"),r("2877")),u=Object(s["a"])(l,a,n,!1,null,"484795fd",null);t["default"]=u.exports},5371:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("div",[t("a-row",{staticStyle:{"padding-bottom":"10px"},attrs:{gutter:24}},[t("a-col",{attrs:{md:24,sm:24}},[t("a-upload",{attrs:{multiple:!0,"file-list":e.fileList,remove:e.handleRemove,"before-upload":e.beforeUpload,"default-file-list":e.defaultFileList}},[t("a-button",{staticClass:"border-primary-4"},[e._v("添加文件")])],1)],1)],1),t("a-row",[e.showUpload?t("a-col",{attrs:{span:5}},[t("a-button",{attrs:{type:"primary",loading:e.isLoading},on:{click:e.beginUpload}},[e._v("上传至服务器")])],1):e._e(),t("a-col",{staticStyle:{color:"#cccccc"},attrs:{span:19}},[e._v("一次最多上传"+e._s(e.fileSize)+"个文件，且单个文件不能超过10MB")])],1)],1)},n=[],i=r("e2aa");function o(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",n=r.toStringTag||"@@toStringTag";function i(r,a,n,i){var o=a&&a.prototype instanceof u?a:u,c=Object.create(o.prototype);return l(c,"_invoke",function(r,a,n){var i,o,l,u=0,c=n||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return i=t,o=0,l=e,f.n=r,s}};function p(r,a){for(o=r,l=a,t=0;!d&&u&&!n&&t<c.length;t++){var n,i=c[t],p=f.p,m=i[2];r>3?(n=m===a)&&(l=i[(o=i[4])?5:(o=3,3)],i[4]=i[5]=e):i[0]<=p&&((n=r<2&&p<i[1])?(o=0,f.v=a,f.n=i[1]):p<m&&(n=r<3||i[0]>a||a>m)&&(i[4]=r,i[5]=a,f.n=m,o=0))}if(n||r>1)return s;throw d=!0,a}return function(n,c,m){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&p(c,m),o=c,l=m;(t=o<2?e:l)||!d;){i||(o?o<3?(o>1&&(f.n=-1),p(o,l)):f.n=l:f.v=l);try{if(u=2,i){if(o||(n="next"),t=i[n]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,o<2&&(o=0)}else 1===o&&(t=i.return)&&t.call(i),o<2&&(l=TypeError("The iterator does not provide a '"+n+"' method"),o=1);i=e}else if((t=(d=f.n<0)?l:r.call(a,f))!==s)break}catch(t){i=e,o=1,l=t}finally{u=1}}return{value:t,done:d}}}(r,n,i),!0),c}var s={};function u(){}function c(){}function d(){}t=Object.getPrototypeOf;var f=[][a]?t(t([][a]())):(l(t={},a,(function(){return this})),t),p=d.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,l(e,n,"GeneratorFunction")),e.prototype=Object.create(p),e}return c.prototype=d,l(p,"constructor",d),l(d,"constructor",c),c.displayName="GeneratorFunction",l(d,n,"GeneratorFunction"),l(p),l(p,n,"Generator"),l(p,a,(function(){return this})),l(p,"toString",(function(){return"[object Generator]"})),(o=function(){return{w:i,m:m}})()}function l(e,t,r,a){var n=Object.defineProperty;try{n({},"",{})}catch(e){n=0}l=function(e,t,r,a){function i(t,r){l(e,t,(function(e){return this._invoke(t,r,e)}))}t?n?n(e,t,{value:r,enumerable:!a,configurable:!a,writable:!a}):e[t]=r:(i("next",0),i("throw",1),i("return",2))},l(e,t,r,a)}function s(e,t,r,a,n,i,o){try{var l=e[i](o),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(a,n)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var i=e.apply(t,r);function o(e){s(i,a,n,o,l,"next",e)}function l(e){s(i,a,n,o,l,"throw",e)}o(void 0)}))}}var c={name:"DocUpload",props:{path:{type:String,default:""},fileSize:{type:Number,default:5},defaultFileList:{type:Array,default:[]},showUpload:{type:Boolean,default:!0},isFileEmpty:{type:Boolean,default:!1}},watch:{uploadFiles:{immediate:!1,handler:function(){var e=u(o().m((function e(t){return o().w((function(e){while(1)switch(e.n){case 0:if(t.length!==this.fileList.length){e.n=1;break}return e.n=1,this.$emit("uploaded",this.uploadFiles);case 1:return e.a(2)}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},data:function(){return{fileList:[],uploadFiles:[],isLoading:!1}},methods:{beforeUpload:function(e){var t=e.size/1024/1024<10;return t?(this.fileList.push(e),this.$emit("fileNum",this.fileList.length),this.$emit("setBforeUploadStatus",!1),!1):(this.$message.error("文件不得大于10MB!"),!1)},handleRemove:function(e){var t=this.fileList.indexOf(e),r=this.fileList.slice();r.splice(t,1),this.fileList=r,this.$emit("fileNum",this.fileList.length),this.$emit("removed",e)},beginUpload:function(){var e=this;return new Promise((function(t,r){var a=e.fileList,n=e.fileSize;if(!e.isFileEmpty&&0===a.length)return e.$emit("upLoadingEnd"),e.$message.warning("请选择要上传的文件"),void r();a.length>n?(e.$message.error("一次最多上传"+n+"个文件!"),r()):e.customRequest().then((function(){t()})).catch((function(e){r()}))}))},customRequest:function(){var e=this,t=this.fileList;if(t.length<1)return this.$emit("uploaded",[]),this.$emit("upLoadingEnd"),Promise.resolve();this.isLoading=!0;var r=[];return t.forEach((function(t){var a=new FormData;a.append("file",t),r.push(e.saveFile(a,t))})),Promise.all(r).finally((function(){e.isLoading=!1,e.$emit("upLoadingEnd")}))},saveFile:function(){var e=u(o().m((function e(t,r){var a=this;return o().w((function(e){while(1)switch(e.n){case 0:return e.a(2,Object(i["d"])(t,this.path).then((function(e){e.success?(a.getUploadData(r,e),a.$emit("setUpLoadingEndStatus",!0)):(a.$message.error(e.message),a.$emit("uploadFail",r))})))}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}(),getUploadData:function(e,t){var r=this.uploadFiles,a={name:e.name,type:this.handleFileName(e),fileSize:Math.round(e.size/1024),savepath:t.result};r.push(a)},handleFileName:function(e){var t=e.name.lastIndexOf("."),r=e.name.length,a=e.name.substring(t+1,r);return a}}},d=c,f=(r("9615"),r("2877")),p=Object(f["a"])(d,a,n,!1,null,"69990be1",null);t["default"]=p.exports},7237:function(e,t,r){},"769e":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"80%",title:"厂商选择",visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",centered:"",destroyOnClose:!0,bodyStyle:{height:"80vh"}},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"名称"}},[t("a-input",{attrs:{placeholder:"请输入名称"},model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,"name",t)},expression:"queryParam.name"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"修程类型"}},[t("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_repair_program,name,id"},model:{value:e.queryParam.repairProgramId,callback:function(t){e.$set(e.queryParam,"repairProgramId",t)},expression:"queryParam.repairProgramId"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"所属线路"}},[t("line-select-list",{model:{value:e.queryParam.lineId,callback:function(t){e.$set(e.queryParam,"lineId",t)},expression:"queryParam.lineId"}})],1)],1),t("a-col",{attrs:{md:4,sm:24}},[t("a-form-item",{attrs:{label:"状态"}},[t("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_effective"},model:{value:e.queryParam.status,callback:function(t){e.$set(e.queryParam,"status",t)},expression:"queryParam.status"}})],1)],1),t("a-col",{attrs:{md:4,sm:8}},[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-space",[t("a-button",{on:{click:e.findList}},[e._v("查询")])],1)],1)])],1)],1)],1),t("div",{staticStyle:{height:"calc(80vh - 130px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(80vh - 130px)"},attrs:{border:"","max-height":"100%",align:e.allAlign,data:e.tableData,"highlight-current-row":"","show-overflow":"tooltip","radio-config":e.multiple?{}:{trigger:"row"},"checkbox-config":e.multiple?{trigger:"row",highlight:!0,range:!0}:{},"edit-config":{trigger:"click",mode:"cell",showIcon:"true"}}},[e.multiple?t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}):t("vxe-table-column",{attrs:{type:"radio",width:"40"}}),t("vxe-table-column",{attrs:{field:"name",title:"厂商名称","min-width":"140","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{field:"shortName",title:"厂商简称","min-width":"120"}}),t("vxe-table-column",{attrs:{field:"category_dictText",title:"厂商类别",width:"80"}}),t("vxe-table-column",{attrs:{field:"repairProgramName",title:"所属修程",width:"8%"}}),t("vxe-table-column",{attrs:{field:"lineName",title:"所属线路",width:"8%"}}),t("vxe-table-column",{attrs:{field:"contactName",title:"联系人员",width:"80"}}),t("vxe-table-column",{attrs:{field:"contactPhone",title:"联系电话",width:"100","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{field:"email",title:"邮箱",width:"100","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{field:"address",title:"地址","min-width":"120","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{field:"appraise",title:"评分",width:"80","header-align":"center",align:"right"}}),t("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",width:"80"}}),t("vxe-table-column",{attrs:{field:"remarks",title:"备注","min-width":"120","header-align":"center",align:"left"}})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1)])},n=[],i=r("d214"),o=r("5633"),l={name:"SupplierList",components:{LineSelectList:o["default"]},props:{multiple:{type:Boolean,default:!0}},data:function(){return{queryParam:{category:null,name:"",objTypeId:"",status:null,lineId:"",repairProgramId:"",pageNo:1,pageSize:10},allAlign:"center",totalResult:0,tableData:[],visible:!1,confirmLoading:!1,formItemLayout:{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}}}},methods:{showModal:function(){this.visible=!0,this.findList()},findList:function(){var e=this;this.loading=!0,Object(i["eb"])(this.queryParam).then((function(t){e.totalResult=t.result.total,e.loading=!1,e.tableData=t.result.records}))},handlePageChange:function(e){var t=e.currentPage,r=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=r,this.findList()},handleOk:function(){var e=[];this.multiple?e=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&e.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",e),this.close()},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,this.queryParam.searchText=""}}},s=l,u=(r("cc0c"),r("2877")),c=Object(u["a"])(s,a,n,!1,null,"2c33e9dc",null);t["default"]=c.exports},9216:function(e,t,r){"use strict";r("260f")},"94c2d":function(e,t,r){},9589:function(e,t,r){"use strict";r("7237")},9615:function(e,t,r){"use strict";r("94c2d")},a612:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,width:"85%",visible:e.visible,confirmLoading:e.confirmLoading,dialogClass:"fullDialog",cancelText:"关闭",destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("div",{staticClass:"content"},[t("div",{staticClass:"info-wrapper info-top-wrapper",staticStyle:{"margin-bottom":"20px"}},[t("h4",[e._v("基本信息")]),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"合同编号"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["contractNo",e.validatorRules.contractNo],expression:"['contractNo', validatorRules.contractNo]"}],attrs:{placeholder:"合同编号"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"合同名称"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["contractName",e.validatorRules.contractName],expression:"['contractName', validatorRules.contractName]"}],attrs:{placeholder:"合同名称"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"合同厂商"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["supplierName",e.validatorRules.supplierId],expression:"['supplierName', validatorRules.supplierId]"}],ref:"mySupplierSelect",attrs:{placeholder:"请选择厂商",open:!1,showArrow:!0},on:{focus:e.openSupplierModal}},[t("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"合同金额"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["amount",e.validatorRules.amount],expression:"['amount', validatorRules.amount]"}],staticStyle:{width:"100%"},attrs:{placeholder:"合同金额",formatter:function(e){return"".concat(e,"万")},parser:function(e){return e.replace("万","")},min:0,step:.1,max:99999999}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"合同税率"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["taxRate",e.validatorRules.taxRate],expression:"['taxRate', validatorRules.taxRate]"}],staticStyle:{width:"100%"},attrs:{formatter:function(e){return"".concat(e,"%")},parser:function(e){return e.replace("%","")},min:0,step:.1,max:100,placeholder:"合同税率"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"执行税率"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["executeTaxRate",e.validatorRules.executeTaxRate],expression:"['executeTaxRate', validatorRules.executeTaxRate]"}],staticStyle:{width:"100%"},attrs:{formatter:function(e){return"".concat(e,"%")},parser:function(e){return e.replace("%","")},min:0,step:.1,max:100,placeholder:"执行税率"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"合同状态"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",e.validatorRules.status],expression:"['status', validatorRules.status]"}],attrs:{placeholder:"选择合同状态",triggerChange:!0,dictCode:"bu_contract_status"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"保证金类型"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator",value:["depositType",e.validatorRules.depositType],expression:"['depositType', validatorRules.depositType]"}],attrs:{triggerChange:!0,placeholder:"选择保证金类型",dictCode:"bu_contract_deposit_type"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"履约保证金"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["deposit",{initialValue:0}],expression:"['deposit', { initialValue: 0 }]"}],staticStyle:{width:"100%"},attrs:{placeholder:"履约保证金",formatter:function(e){return"".concat(e,"万")},parser:function(e){return e.replace("万","")},min:0,step:.1,max:99999999}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"所属线路"}},[t("line-select-list",{directives:[{name:"decorator",rawName:"v-decorator",value:["lineId",e.validatorRules.lineId],expression:"['lineId', validatorRules.lineId]"}],attrs:{"trigger-change":!0},on:{change:e.handleLine}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"开始时间"}},[t("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["startDate",e.validatorRules.startDate],expression:"['startDate', validatorRules.startDate]"}],staticStyle:{width:"100%"},attrs:{placeholder:"开始时间"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"终止日期"}},[t("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["finishDate",e.validatorRules.finishDate],expression:"['finishDate', validatorRules.finishDate]"}],staticStyle:{width:"100%"},attrs:{placeholder:"终止日期"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"质保期"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["expiration",e.validatorRules.expiration],expression:"['expiration', validatorRules.expiration]"}],staticStyle:{width:"80%"},attrs:{placeholder:"质保期",min:0,max:99999999,precision:0}}),e._v(" 个月 ")],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"质保金类型"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator",value:["qualityDepositType"],expression:"['qualityDepositType']"}],attrs:{triggerChange:!0,placeholder:"选择质保金类型",dictCode:"bu_contract_deposit_type"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"质保金比例"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["qualityDepositPercent",e.validatorRules.qualityDepositPercent],expression:"['qualityDepositPercent', validatorRules.qualityDepositPercent]"}],staticStyle:{width:"100%"},attrs:{formatter:function(e){return"".concat(e,"%")},parser:function(e){return e.replace("%","")},min:0,step:.1,max:100,placeholder:"质保金比例"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"预付款"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["advancePayment",{initialValue:0}],expression:"['advancePayment', { initialValue: 0 }]"}],staticStyle:{width:"100%"},attrs:{placeholder:"输入预付款",formatter:function(e){return"".concat(e,"万")},parser:function(e){return e.replace("万","")},min:0,step:.1,max:99999999}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"合同部件",required:"true"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["assetTypeName",e.validatorRules.assetTypeName],expression:"['assetTypeName', validatorRules.assetTypeName]",modifiers:{trim:!0}}],ref:"mySelect",attrs:{placeholder:"请选择",open:!1,showArrow:!0},on:{focus:e.openModal}},[t("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"合同部件别名"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["assetTypeAlias",e.validatorRules.assetTypeAlias],expression:"['assetTypeAlias',validatorRules.assetTypeAlias]"}],attrs:{placeholder:"合同部件别名"}})],1)],1),t("a-col",{attrs:{md:6,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"每列部件数量"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["assetAmount",e.validatorRules.assetAmount],expression:"['assetAmount', validatorRules.assetAmount]"}],attrs:{placeholder:"每列部件数量"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"车辆数"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["trainAmount",e.validatorRules.trainAmount],expression:"['trainAmount', validatorRules.trainAmount]"}],staticStyle:{width:"100%"},attrs:{min:1,placeholder:"输入车辆数"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"已完成数"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["finishAmount",e.validatorRules.finishAmount],expression:"['finishAmount', validatorRules.finishAmount]"}],staticStyle:{width:"100%"},attrs:{min:0,placeholder:"输入已完成数"}})],1)],1),t("a-col",{attrs:{md:6,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"修程类型"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator",value:["repairProgramId",e.validatorRules.repairProgramId],expression:"['repairProgramId', validatorRules.repairProgramId]"}],attrs:{triggerChange:!0,placeholder:"请选择修程类型",dictCode:"bu_repair_program,name,id"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"计数开始"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["payBegin"],expression:"['payBegin']"}],staticStyle:{width:"100%"},attrs:{min:1,placeholder:"从第几列开始计算"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"支付间隔数"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["payInterval"],expression:"['payInterval']"}],staticStyle:{width:"100%"},attrs:{min:1,placeholder:"每隔多少列支付一次"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"维修周期"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["needDay",e.validatorRules.needDay],expression:"['needDay', validatorRules.needDay]"}],staticStyle:{width:"100%"},attrs:{placeholder:"自然日",min:0,max:999999999,precision:0}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"签订日期"}},[t("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["signDate"],expression:"['signDate']"}],staticStyle:{width:"100%"},attrs:{placeholder:"签订日期"}})],1)],1),t("a-col",{attrs:{md:18,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"支付条款"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["attention",e.validatorRules.attention],expression:"['attention', validatorRules.attention]"}],staticStyle:{width:"100%"},attrs:{placeholder:"支付条款"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:18,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"监修信息"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["superInfo",e.validatorRules.superInfo],expression:"['superInfo', validatorRules.superInfo]"}],staticStyle:{width:"100%"},attrs:{placeholder:"输入监修信息"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:18,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"培训信息"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["trainInfo",e.validatorRules.trainInfo],expression:"['trainInfo', validatorRules.trainInfo]"}],staticStyle:{width:"100%"},attrs:{placeholder:"输入培训信息"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:18,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"备注"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark",e.validatorRules.remark],expression:"['remark', validatorRules.remark]"}],staticStyle:{width:"100%"},attrs:{placeholder:"备注"}})],1)],1)],1)],1)]),t("div",{staticClass:"content"},[t("div",{staticClass:"info-wrapper info-top-wrapper"},[t("h4",[e._v("合同附件")]),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:18,sm:24,offset:3}},[t("DocUpload",{ref:"upload",attrs:{"default-file-list":e.defaultFileList,"show-upload":!1,isFileEmpty:!0},on:{setBforeUploadStatus:e.setBforeUploadStatus,uploaded:e.successUploadFile,removed:e.onRemoveFile,uploadFail:e.uploadFail,setUpLoadingEndStatus:e.setUpLoadingEndStatus}}),t("a-divider",{staticStyle:{"font-size":"14px"},attrs:{orientation:"left"}},[e._v("已上传列表")]),t("vxe-table",{staticStyle:{"margin-top":"12px"},attrs:{border:"",data:e.annexList,"show-overflow":"tooltip","edit-config":{trigger:"manual",mode:"row"}}},[t("div",{}),t("vxe-table-column",{attrs:{type:"index",title:"序号",width:"50px","header-align":"center",align:"center"}}),t("vxe-table-column",{attrs:{field:"name",title:"文件名","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{field:"type",title:"文件类型",width:"120px","header-align":"center",align:"center"}}),t("vxe-table-column",{attrs:{field:"fileSize",title:"文件大小",width:"180px","header-align":"center",align:"center"}}),t("vxe-table-column",{attrs:{title:"操作",width:"160px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(r){var a=r.row,n=r.rowIndex;return[t("a",{staticStyle:{"margin-right":"12px"},on:{click:function(t){return t.stopPropagation(),e.handleSeeing(a)}}},[e._v("查看")]),t("a",{on:{click:function(t){return t.stopPropagation(),e.handleDelete(a,n)}}},[e._v("删除")])]}}])})],1)],1)],1)],1)]),t("doc-preview-modal",{ref:"docPreview",attrs:{title:e.fileName}}),t("train-asset-type",{ref:"selectModal",attrs:{multiple:!1,trainTypeId:e.trainTypeId},on:{ok:e.addTarget}}),t("supplier-list",{ref:"supplierModal",attrs:{multiple:!1},on:{ok:e.supplierSelect}})],1)],1)],1)},n=[],i=r("b098"),o=r("c1df"),l=r.n(o),s=r("8fad"),u=r("d214"),c=r("2cb5"),d=r("ca00"),f=r("5633"),p=r("769e"),m=r("353a"),h=r("5371"),v=r("4ec3");function b(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",n=r.toStringTag||"@@toStringTag";function i(r,a,n,i){var s=a&&a.prototype instanceof l?a:l,u=Object.create(s.prototype);return g(u,"_invoke",function(r,a,n){var i,l,s,u=0,c=n||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return i=t,l=0,s=e,f.n=r,o}};function p(r,a){for(l=r,s=a,t=0;!d&&u&&!n&&t<c.length;t++){var n,i=c[t],p=f.p,m=i[2];r>3?(n=m===a)&&(s=i[(l=i[4])?5:(l=3,3)],i[4]=i[5]=e):i[0]<=p&&((n=r<2&&p<i[1])?(l=0,f.v=a,f.n=i[1]):p<m&&(n=r<3||i[0]>a||a>m)&&(i[4]=r,i[5]=a,f.n=m,l=0))}if(n||r>1)return o;throw d=!0,a}return function(n,c,m){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&p(c,m),l=c,s=m;(t=l<2?e:s)||!d;){i||(l?l<3?(l>1&&(f.n=-1),p(l,s)):f.n=s:f.v=s);try{if(u=2,i){if(l||(n="next"),t=i[n]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,l<2&&(l=0)}else 1===l&&(t=i.return)&&t.call(i),l<2&&(s=TypeError("The iterator does not provide a '"+n+"' method"),l=1);i=e}else if((t=(d=f.n<0)?s:r.call(a,f))!==o)break}catch(t){i=e,l=1,s=t}finally{u=1}}return{value:t,done:d}}}(r,n,i),!0),u}var o={};function l(){}function s(){}function u(){}t=Object.getPrototypeOf;var c=[][a]?t(t([][a]())):(g(t={},a,(function(){return this})),t),d=u.prototype=l.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,g(e,n,"GeneratorFunction")),e.prototype=Object.create(d),e}return s.prototype=u,g(d,"constructor",u),g(u,"constructor",s),s.displayName="GeneratorFunction",g(u,n,"GeneratorFunction"),g(d),g(d,n,"Generator"),g(d,a,(function(){return this})),g(d,"toString",(function(){return"[object Generator]"})),(b=function(){return{w:i,m:f}})()}function g(e,t,r,a){var n=Object.defineProperty;try{n({},"",{})}catch(e){n=0}g=function(e,t,r,a){function i(t,r){g(e,t,(function(e){return this._invoke(t,r,e)}))}t?n?n(e,t,{value:r,enumerable:!a,configurable:!a,writable:!a}):e[t]=r:(i("next",0),i("throw",1),i("return",2))},g(e,t,r,a)}function y(e,t,r,a,n,i,o){try{var l=e[i](o),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(a,n)}function w(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var i=e.apply(t,r);function o(e){y(i,a,n,o,l,"next",e)}function l(e){y(i,a,n,o,l,"throw",e)}o(void 0)}))}}var x={name:"ContractInfoAdd",components:{JTreeSelect:i["default"],TrainAssetType:c["default"],LineSelectList:f["default"],SupplierList:p["default"],DocUpload:h["default"],DocPreviewModal:m["default"]},props:["contractDetail"],data:function(){return{title:"新增",trainTypeId:"",assetTypeId:"",back:!0,detail:{},lineId:"",form:this.$form.createForm(this),confirmLoading:!1,visible:!1,supplierName:"",supplierId:"",defaultFileList:[],annexList:[],filePath:"",fileName:"",status:!1,saveFlag:!0,uploading:!1,validatorRules:{contractName:{rules:[{required:!0,message:"请输入合同名称!"},{max:200,message:"输入长度不能超过200字符!"}]},contractNo:{rules:[{required:!0,message:"请输入合同编号!"},{max:32,message:"输入长度不能超过32字符!"},{validator:this.validateCode}]},attention:{rules:[{max:255,message:"输入长度不能超过255字符!"}]},remark:{rules:[{max:255,message:"输入长度不能超过255字符!"}]},supplierId:{rules:[{required:!0,message:"请选择厂商!"}]},amount:{rules:[{required:!0,message:"请输入合同金额!"}]},taxRate:{rules:[{required:!0,message:"请输入合同税率!"}]},status:{rules:[{required:!0,message:"请选择合同状态!"}]},lineId:{rules:[{required:!0,message:"请选择所属线路!"}]},startDate:{rules:[{required:!0,message:"请输入开始时间!"}]},finishDate:{rules:[{required:!0,message:"请输入终止时间!"}]},signDate:{rules:[{required:!0,message:"请输入签订时间!"}]},expiration:{rules:[{required:!0,message:"请输入质保期!"}]},needDay:{rules:[{required:!0,message:"请输入维修周期!"}]},qualityDepositPercent:{rules:[{required:!0,message:"请输入质保金比例!"}]},depositType:{rules:[{required:!0,message:"请选择保证金类型!"}]},advancePayment:{rules:[{required:!0,message:"请输入预付款!"}]},assetAmount:{rules:[{required:!0,message:"请输入每列部件数量!"}]},executeTaxRate:{rules:[{required:!0,message:"请输入执行税率!"}]},assetTypeName:{rules:[{required:!0,message:"请选择合同设备!"}]},trainAmount:{rules:[{required:!0,message:"输入车辆数!"}]},finishAmount:{rules:[{required:!0,message:"输入已完成数!"}]},repairProgramId:{rules:[{required:!0,message:"请选择修程类型!"}]},assetTypeAlias:{rules:[{max:150,message:"输入长度不能超过150字符!"}]}},labelCol1:{xs:{span:24},sm:{span:9}},wrapperCol1:{xs:{span:24},sm:{span:15}},labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:21}}}},methods:{validateCode:function(e,t,r){var a={tableName:"bu_contract_info",fieldName:"contract_no",fieldVal:t,dataId:this.model.id};Object(d["e"])(t)?r():Object(v["m"])(a).then((function(e){e.success?r():r(e.message)}))},openSupplierModal:function(){this.$refs.supplierModal.showModal(),this.$refs.mySupplierSelect.blur()},supplierSelect:function(e){var t=this;Object(d["e"])(e)||(this.$nextTick((function(){t.form.setFieldsValue({supplierName:e[0].name})})),this.supplierId=e[0].id)},handleLine:function(e,t){t&&(this.trainTypeId=t.trainTypeId)},openModal:function(){Object(d["e"])(this.form.getFieldValue("lineId"))?this.$message.warn("请先选择线路!"):(this.$refs.selectModal.showModal(),this.$refs.mySelect.blur())},addTarget:function(e){Object(d["e"])(e)||(this.assetTypeId=e[0].id,this.form.setFieldsValue({assetTypeName:e[0].name}))},setBforeUploadStatus:function(e){this.saveFlag=e},setUpLoadingEndStatus:function(e){this.saveFlag=e},successUploadFile:function(e){var t=this;!e||e.length<1||(e.map((function(e){Object.assign(e,{id:Object(d["p"])()}),t.annexList.push(e)})),this.confirmLoading=!1)},uploadFail:function(e){this.confirmLoading=!1},onRemoveFile:function(e){},beginUpload:function(){this.confirmLoading=!0,this.$refs.upload.beginUpload()},handlePrivilege:function(){var e=w(b().m((function e(t,r){var a,n=this;return b().w((function(e){while(1)switch(e.n){case 0:return a={id:t,operation:r},e.n=1,Object(s["xc"])(a).then((function(e){n.status=e.result}));case 1:return e.a(2)}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),handleSeeing:function(){var e=w(b().m((function e(t){return b().w((function(e){while(1)switch(e.n){case 0:return e.n=1,this.handlePrivilege(t.id,2);case 1:this.status?(this.fileName=t.fileName,this.$refs.docPreview.handleFilePath(t.savepath)):this.$message.error("您没有权限!");case 2:return e.a(2)}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleDelete:function(){var e=w(b().m((function e(t,r){var a;return b().w((function(e){while(1)switch(e.n){case 0:a=this,a.$confirm({title:"提示",content:"确定删除该条附件吗？",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){a.annexList.splice(r,1)},onCancel:function(){}});case 1:return e.a(2)}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}(),handleOk:function(){var e=this;this.form.validateFields((function(t,r){if(!t){e.beginUpload();var a=Object.assign({},e.model,r,{startDate:l()(r.startDate).format("YYYY-MM-DD"),finishDate:l()(r.finishDate).format("YYYY-MM-DD"),signDate:r.signDate?l()(r.signDate).format("YYYY-MM-DD"):"",assetTypeId:e.assetTypeId,supplierId:e.supplierId,extInfo:{superInfo:r.superInfo,trainInfo:r.trainInfo}}),n=null;clearInterval(n),n=setInterval((function(){var t;e.saveFlag&&(a.annexList=e.annexList,e.confirmLoading=!0,t=Object(d["e"])(e.model)?Object(u["b"])(a):Object(u["w"])(a),t.then((function(t){t.success?(e.annexList=[],e.$message.success(t.message),e.$emit("ok"),e.close()):e.$message.error(t.message)})).finally((function(){clearInterval(n),e.confirmLoading=!1})))}),1e3)}}))},add:function(){var e=this;this.edit({}),this.$nextTick((function(){e.form.setFieldsValue({trainAmount:1,finishAmount:0})}))},edit:function(e){var t=this;this.visible=!0,this.form.resetFields(),this.model=Object.assign({},e),Object(d["e"])(e)?this.assetTypeId="":(this.assetTypeId=this.model.assetTypeId,this.supplierId=this.model.supplierId,this.handleLine(this.model.lineId)),Object(d["e"])(this.model.extInfo)||this.$nextTick((function(){t.form.setFieldsValue({superInfo:t.model.extInfo.superInfo,trainInfo:t.model.extInfo.trainInfo})})),this.model.id&&(Object(u["G"])({contractId:this.model.id}).then((function(e){e.success&&e.result.length&&(t.annexList=e.result||[])})),this.$nextTick((function(){t.form.setFieldsValue({amount:t.model.amount,contractName:t.model.contractName,contractNo:t.model.contractNo,finishDate:t.model.finishDate?l()(t.model.finishDate):"",signDate:l()(t.model.signDate||void 0),startDate:t.model.startDate?l()(t.model.startDate):"",status:t.model.status,taxRate:t.model.taxRate,assetTypeName:t.model.assetTypeName,attention:t.model.attention,deposit:t.model.deposit,expiration:t.model.expiration,lineId:t.model.lineId,supplierName:t.model.supplierName,remark:t.model.remark,needDay:t.model.needDay,qualityDepositPercent:t.model.qualityDepositPercent,depositType:t.model.depositType,advancePayment:t.model.advancePayment,assetAmount:t.model.assetAmount,executeTaxRate:t.model.executeTaxRate,trainAmount:t.model.trainAmount,finishAmount:t.model.finishAmount,repairProgramId:t.model.repairProgramId,qualityDepositType:t.model.qualityDepositType,payInterval:t.model.payInterval,payBegin:t.model.payBegin,assetTypeAlias:t.model.assetTypeAlias})})))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,this.annexList=[]}}},C=x,j=(r("b44d"),r("2877")),O=Object(j["a"])(C,a,n,!1,null,"6d764443",null);t["default"]=O.exports},b098:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("a-tree-select",{staticStyle:{width:"100%"},attrs:{allowClear:"",labelInValue:"",getPopupContainer:function(e){return e.parentNode},disabled:e.disabled,dropdownStyle:{maxHeight:"400px",overflow:"auto"},placeholder:e.placeholder,loadData:e.asyncLoadTreeData,value:e.treeValue,treeData:e.treeData,multiple:e.multiple},on:{change:e.onChange,search:e.onSearch}})},n=[],i=r("0fea");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function l(e){return c(e)||u(e)||f(e)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function c(e){if(Array.isArray(e))return p(e)}function d(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=f(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw i}}}}function f(e,t){if(e){if("string"==typeof e)return p(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}var m={name:"JTreeSelect",props:{value:{type:String,required:!1},placeholder:{type:String,default:"请选择",required:!1},dict:{type:String,default:"",required:!1},pidField:{type:String,default:"pid",required:!1},pidValue:{type:String,default:"",required:!1},disabled:{type:Boolean,default:!1,required:!1},hasChildField:{type:String,default:"",required:!1},condition:{type:String,default:"",required:!1},multiple:{type:Boolean,default:!1},loadTriggleChange:{type:Boolean,default:!1,required:!1}},data:function(){return{treeValue:null,treeData:[],url:"/sys/dict/loadTreeData",view:"/sys/dict/loadDictItem/",tableName:"",text:"",code:""}},watch:{value:function(){this.loadItemByCode()},dict:function(){this.initDictInfo(),this.loadRoot()}},created:function(){var e=this;this.validateProp().then((function(){e.initDictInfo(),e.loadRoot(),e.loadItemByCode()}))},methods:{loadItemByCode:function(){var e=this;this.value&&"0"!=this.value?Object(i["d"])("".concat(this.view).concat(this.dict),{key:this.value}).then((function(t){if(t.success){var r=e.value.split(",");e.treeValue=t.result.map((function(e,t){return{key:r[t],value:r[t],label:e}})),e.onLoadTriggleChange(t.result[0])}})):this.treeValue=null},onLoadTriggleChange:function(e){!this.multiple&&this.loadTriggleChange&&this.$emit("change",this.value,e)},initDictInfo:function(){var e=this.dict.split(",");this.tableName=e[0],this.text=e[1],this.code=e[2]},asyncLoadTreeData:function(e){var t=this;return new Promise((function(r){if(e.$vnode.children)r();else{var a=e.$vnode.key,n={pid:a,tableName:t.tableName,text:t.text,code:t.code,pidField:t.pidField,hasChildField:t.hasChildField,condition:t.condition};Object(i["d"])(t.url,n).then((function(e){if(e.success){var n,i=d(e.result);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.value=o.key,0==o.leaf?o.isLeaf=!1:1==o.leaf&&(o.isLeaf=!0)}}catch(s){i.e(s)}finally{i.f()}t.addChildren(a,e.result,t.treeData),t.treeData=l(t.treeData)}r()}))}}))},addChildren:function(e,t,r){if(r&&r.length>0){var a,n=d(r);try{for(n.s();!(a=n.n()).done;){var i=a.value;if(i.key==e){t&&0!=t.length?i.children=t:i.isLeaf=!0;break}this.addChildren(e,t,i.children)}}catch(o){n.e(o)}finally{n.f()}}},loadRoot:function(){var e=this,t={pid:this.pidValue,tableName:this.tableName,text:this.text,code:this.code,pidField:this.pidField,hasChildField:this.hasChildField,condition:this.condition};Object(i["d"])(this.url,t).then((function(t){if(t.success&&t.result){var r,a=d(t.result);try{for(a.s();!(r=a.n()).done;){var n=r.value;n.value=n.key,0==n.leaf?n.isLeaf=!1:1==n.leaf&&(n.isLeaf=!0)}}catch(i){a.e(i)}finally{a.f()}e.treeData=l(t.result)}}))},onChange:function(e){e?e instanceof Array?(this.$emit("change",e.map((function(e){return e.value})).join(",")),this.treeValue=e):(this.$emit("change",e.value,e.label),this.treeValue=e):(this.$emit("change",""),this.treeValue=null)},onSearch:function(e){},getCurrTreeData:function(){return this.treeData},validateProp:function(){var e=this,t=this.condition;return new Promise((function(r,a){if(t)try{var n=JSON.parse(t);"object"==o(n)&&n?r():(e.$message.error("组件JTreeSelect-condition传值有误，需要一个json字符串!"),a())}catch(i){e.$message.error("组件JTreeSelect-condition传值有误，需要一个json字符串!"),a()}else r()}))}},model:{prop:"value",event:"change"}},h=m,v=r("2877"),b=Object(v["a"])(h,a,n,!1,null,null,null);t["default"]=b.exports},b44d:function(e,t,r){"use strict";r("ed8b")},cc0c:function(e,t,r){"use strict";r("cdfd")},cdfd:function(e,t,r){},d214:function(e,t,r){"use strict";r.d(t,"h",(function(){return n})),r.d(t,"D",(function(){return i})),r.d(t,"eb",(function(){return o})),r.d(t,"r",(function(){return l})),r.d(t,"b",(function(){return s})),r.d(t,"w",(function(){return u})),r.d(t,"H",(function(){return c})),r.d(t,"I",(function(){return h})),r.d(t,"k",(function(){return d})),r.d(t,"c",(function(){return v})),r.d(t,"x",(function(){return b})),r.d(t,"l",(function(){return y})),r.d(t,"K",(function(){return g})),r.d(t,"a",(function(){return w})),r.d(t,"v",(function(){return x})),r.d(t,"j",(function(){return j})),r.d(t,"F",(function(){return C})),r.d(t,"J",(function(){return f})),r.d(t,"G",(function(){return p})),r.d(t,"t",(function(){return m})),r.d(t,"Q",(function(){return O})),r.d(t,"u",(function(){return S})),r.d(t,"db",(function(){return N})),r.d(t,"q",(function(){return D})),r.d(t,"bb",(function(){return R})),r.d(t,"cb",(function(){return k})),r.d(t,"C",(function(){return P})),r.d(t,"g",(function(){return I})),r.d(t,"P",(function(){return T})),r.d(t,"X",(function(){return $})),r.d(t,"ab",(function(){return _})),r.d(t,"f",(function(){return A})),r.d(t,"p",(function(){return F})),r.d(t,"jb",(function(){return L})),r.d(t,"kb",(function(){return q})),r.d(t,"Z",(function(){return B})),r.d(t,"e",(function(){return U})),r.d(t,"A",(function(){return V})),r.d(t,"n",(function(){return E})),r.d(t,"m",(function(){return G})),r.d(t,"O",(function(){return Q})),r.d(t,"Y",(function(){return H})),r.d(t,"V",(function(){return W})),r.d(t,"gb",(function(){return X})),r.d(t,"hb",(function(){return Z})),r.d(t,"L",(function(){return ee})),r.d(t,"ib",(function(){return te})),r.d(t,"B",(function(){return M})),r.d(t,"y",(function(){return Y})),r.d(t,"d",(function(){return J})),r.d(t,"z",(function(){return K})),r.d(t,"W",(function(){return re})),r.d(t,"o",(function(){return z})),r.d(t,"fb",(function(){return ae})),r.d(t,"i",(function(){return ne})),r.d(t,"E",(function(){return ie})),r.d(t,"s",(function(){return oe})),r.d(t,"M",(function(){return le})),r.d(t,"N",(function(){return se})),r.d(t,"S",(function(){return ue})),r.d(t,"T",(function(){return ce})),r.d(t,"U",(function(){return de})),r.d(t,"R",(function(){return fe}));var a=r("0fea"),n=function(e){return Object(a["j"])("/outsource/supplier/add",e)},i=function(e){return Object(a["j"])("/outsource/supplier/edit",e)},o=function(e){return Object(a["d"])("/outsource/supplier/page",e)},l=function(e){return Object(a["j"])("/outsource/supplier/delete",e)},s=function(e){return Object(a["j"])("/outsource/contractInfo/add",e)},u=function(e){return Object(a["j"])("/outsource/contractInfo/edit",e)},c=function(e){return Object(a["d"])("/outsource/contractInfo/page",e)},d=function(e){return Object(a["j"])("/outsource/contractInfo/delete",e)},f=function(e){return Object(a["d"])("/outsource/contractInfo/monitor",e)},p=function(e){return Object(a["d"])("/outsource/contract/annex/list",e)},m=function(e){return Object(a["j"])("/outsource/contract/annex/delete",e)},h=function(e){return Object(a["d"])("/outsource/contractInfo/price",e)},v=function(e){return Object(a["j"])("/outsource/contractPay/add",e)},b=function(e){return Object(a["j"])("/outsource/contractPay/edit",e)},g=function(e){return Object(a["d"])("/outsource/contractPay/page",e)},y=function(e){return Object(a["j"])("/outsource/contractPay/delete",e)},w=function(e){return Object(a["j"])("/outsource/contractBakMoney/add",e)},x=function(e){return Object(a["j"])("/outsource/contractBakMoney/edit",e)},C=function(e){return Object(a["d"])("/outsource/contractBakMoney/page",e)},j=function(e){return Object(a["j"])("/outsource/contractBakMoney/delete",e)},O=function(e){return Object(a["d"])("/outsource/outin/page",e)},S=function(e){return Object(a["j"])("/outsource/outin/delete",e)},T=function(e){return Object(a["d"])("/outsource/outin/page/detail",e)},I=function(e){return Object(a["j"])("/outsource/supervise/add",e)},P=function(e){return Object(a["j"])("/outsource/supervise/edit",e)},N=function(e){return Object(a["d"])("/outsource/supervise/page",e)},D=function(e){return Object(a["j"])("/outsource/supervise/delete",e)},R=function(e){return Object(a["d"])("/outsource/supervise/get",{id:e})},k=function(e){return Object(a["d"])("/outsource/supervise/get-by-order",e)},q=function(e){return Object(a["d"])("/outsource/perform/vendor/tree",e)},L=function(e){return Object(a["j"])("/outsource/perform/delayReason",e)},$=function(e){return Object(a["d"])("/outsource/perform/page",e)},F=function(e){return Object(a["j"])("/outsource/perform/delete/resource",e)},_=function(e){return Object(a["d"])("/outsource/perform/resource",e)},A=function(e){return Object(a["j"])("/outsource/perform/resource/add",e)},M=function(e){return Object(a["j"])("/outsource/perform/resource/edit",e)},B=function(e){return Object(a["d"])("/outsource/rateing/page",e)},U=function(e){return Object(a["j"])("/outsource/rateing/add",e)},V=function(e){return Object(a["j"])("/outsource/rateing/edit",e)},E=function(e){return Object(a["j"])("/outsource/rateing/delete",e)},z=function(e){return Object(a["j"])("/outsource/rateing/delete/attachment",e)},G=function(e){return Object(a["j"])("/outsource/otherSource/delete",e)},Y=function(e){return Object(a["j"])("/outsource/otherSource/edit",e)},J=function(e){return Object(a["j"])("/outsource/otherSource/add",e)},Q=function(e){return Object(a["d"])("/outsource/otherSource/page",e)},H=function(e){return Object(a["d"])("/outsource/quality/page",e)},K=function(e){return Object(a["j"])("/outsource/quality/edit",e)},W=function(e){return Object(a["d"])("/outsource/part/page",e)},X=function(e){return Object(a["d"])("/outsource/fault/countFault",e)},Z=function(e){return Object(a["d"])("/outsource/fault/countFaultGroupBySystem",e)},ee=function(e){return Object(a["d"])("/outsource/fault/page",e)},te=function(e){return Object(a["j"])("/outsource/fault/countFaultGroupByPhaseAndSystem",e)},re=function(e){return Object(a["d"])("/outsource/contractPay/page",e)},ae=function(e){return Object(a["d"])("/training/record/page",e)},ne=function(e){return Object(a["j"])("/training/record/add",e)},ie=function(e){return Object(a["j"])("/training/record/edit",e)},oe=function(e){return Object(a["j"])("/training/record/delete",e)},le=function(e){return Object(a["d"])("/base/finance/project/list",e)},se=function(e){return Object(a["d"])("/base/finance/task/list",e)},ue=function(e){return Object(a["d"])("/outsource/cost/listCost",e)},ce=function(e){return Object(a["d"])("/outsource/cost/detail",e)},de=function(e){return Object(a["d"])("/outsource/cost/part",e)},fe=function(e){return Object(a["d"])("/outsource/cost/asset",e)}},ed8b:function(e,t,r){}}]);