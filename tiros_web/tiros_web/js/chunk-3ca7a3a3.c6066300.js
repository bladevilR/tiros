(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ca7a3a3","chunk-08864626","chunk-42391c95","chunk-72e72170","chunk-0e6cd5c9","chunk-79e63da3","chunk-24cb054c","chunk-2d2257aa","chunk-2d0a36d7"],{"01aa":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,width:700,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:24,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"名称"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["name",e.validatorRules.name],expression:"[ 'name', validatorRules.name]",modifiers:{trim:!0}}],attrs:{placeholder:"名称"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:24,sm:24}},[t("a-form-item",{attrs:{label:"备注",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark",e.validatorRules.remark],expression:"[ 'remark',validatorRules.remark]"}]})],1)],1)],1),1==e.model.isFile?t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:24,sm:24}},[t("a-form-item",{attrs:{label:"标签",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("div",{attrs:{id:"fileTag"}},[e._l(e.tags,(function(a,r){return[a.length>10?t("a-tooltip",{key:a,attrs:{title:a}},[t("a-tag",{key:a,attrs:{color:"blue",closable:!0},on:{close:function(){return e.handleClose(a)}}},[e._v(" "+e._s("".concat(a.slice(0,10),"..."))+" ")])],1):t("a-tag",{key:a,attrs:{color:"blue",closable:!0},on:{close:function(){return e.handleClose(a)}}},[e._v(" "+e._s(a)+" ")])]})),e.inputVisible?t("a-input",{ref:"input",style:{width:"78px"},attrs:{type:"text",value:e.inputValue},on:{change:e.handleInputChange,blur:e.handleInputConfirm,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm.apply(null,arguments)}}}):t("a-tag",{staticStyle:{background:"#fff",borderstyle:"dashed"},attrs:{color:"blue"},on:{click:e.showInput}},[t("a-icon",{attrs:{type:"plus"}}),e._v(" 添加标签 ")],1)],2)])],1)],1):e._e()],1)],1)],1)},i=[],n=a("8fad"),o=a("ca00");function s(e){return d(e)||u(e)||c(e)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"==typeof e)return f(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?f(e,t):void 0}}function u(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function d(e){if(Array.isArray(e))return f(e)}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}var h={name:"EditDirectoryModal",data:function(){return{title:"操作",visible:!1,model:{},tags:[],inputVisible:!1,inputValue:"",labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:15}},confirmLoading:!1,form:this.$form.createForm(this),validatorRules:{name:{rules:[{required:!0,message:"请输入名称!"},{max:50,message:"输入长度不能超过50字符!"}]},remark:{rules:[{max:255,message:"输入长度不能超过255字符!"}]}}}},created:function(){},methods:{edit:function(e){var t=this;this.visible=!0,this.form.resetFields(),this.model=Object.assign({},e),Object(o["e"])(this.model.fileTags)||(this.tags=this.model.fileTags.split(",")),this.$nextTick((function(){t.form.setFieldsValue({name:t.model.name,remark:t.model.remark})}))},handleOk:function(){var e=this,t=this;t.form.validateFields((function(a,r){if(!a){if(t.tags.length>10)return void t.$message.warn("最多只能添加10个标签！");t.confirmLoading=!0;var i=Object.assign(t.model,r,{fileTags:t.tags.length>0?t.tags.join(","):""});Object(n["hb"])(i).then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok")):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1,t.close()})),e.visible=!1}}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,this.tags=[]},handleClose:function(e){var t=this.tags.filter((function(t){return t!==e}));this.tags=t},showInput:function(){this.inputVisible=!0,this.$nextTick((function(){this.$refs.input.focus()}))},handleInputChange:function(e){this.inputValue=e.target.value},handleInputConfirm:function(){var e=this.inputValue,t=this.tags;e&&-1===t.indexOf(e)&&(t=[].concat(s(t),[e])),Object.assign(this,{tags:t,inputVisible:!1,inputValue:""})}}},m=h,p=a("2877"),g=Object(p["a"])(m,r,i,!1,null,null,null);t["default"]=g.exports},"260f":function(e,t,a){},3348:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"800px",visible:e.visible,title:"文件上传",centered:"",bodyStyle:{height:"500px"},confirmLoading:e.confirmLoading,destroyOnClose:!0,footer:null},on:{cancel:e.handleCancel}},[t("a-form",{attrs:{form:e.form}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:24,sm:24}},[t("a-form-item",[t("DocUpload",{ref:"upload",attrs:{"default-file-list":e.defaultFileList,"show-upload":!1,path:e.save_path},on:{upLoadingEnd:e.upLoadingEnd,uploaded:e.successUploadFile,removed:e.onRemoveFile,uploadFail:e.uploadFail}})],1)],1)],1),t("a-row",[t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{label:"是否共享？"}},[t("a-switch",{model:{value:e.shared,callback:function(t){e.shared=t},expression:"shared"}})],1)],1),e.shared?t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{label:"共享到"}},[t("a-tree-select",{attrs:{"tree-data-simple-mode":"","allow-clear":"","tree-data":e.selectTreeNode,replaceFields:{title:"title",value:"id"},placeholder:"请选择","load-data":e.loadSelectNodeMethod},model:{value:e.sharedId,callback:function(t){e.sharedId=t},expression:"sharedId"}})],1)],1):e._e()],1),t("a-row",{staticStyle:{"margin-top":"8px"},attrs:{gutter:24}},[t("a-col",{attrs:{md:24,sm:24}},[t("a-textarea",{attrs:{maxLength:201,placeholder:"备注"},on:{change:e.remarkChange},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}})],1)],1)],1),t("div",{attrs:{id:"fileTag"}},[e._l(e.tags,(function(a){return[a.length>10?t("a-tooltip",{key:a,attrs:{title:a}},[t("a-tag",{key:a,attrs:{color:"blue",closable:!0},on:{close:function(){return e.handleClose(a)}}},[e._v(" "+e._s("".concat(a.slice(0,10),"..."))+" ")])],1):t("a-tag",{key:a,attrs:{color:"blue",closable:!0},on:{close:function(){return e.handleClose(a)}}},[e._v(" "+e._s(a)+" ")])]})),e.inputVisible?t("a-input",{ref:"input",style:{width:"78px"},attrs:{type:"text",value:e.inputValue},on:{change:e.handleInputChange,blur:e.handleInputConfirm,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm.apply(null,arguments)}}}):t("a-tag",{staticStyle:{background:"#fff",borderstyle:"dashed"},attrs:{color:"blue"},on:{click:e.showInput}},[t("a-icon",{attrs:{type:"plus"}}),e._v(" 添加标签 ")],1)],2),t("div",{staticStyle:{"margin-top":"80px",position:"absolute",bottom:"10px","text-align":"right","padding-right":"25px",width:"100%"}},[t("a-space",[t("a-button",{attrs:{type:"primary",loading:e.isLoading},on:{click:e.beginUpload}},[e._v("上传至服务器")]),t("a-button",{on:{click:function(t){e.visible=!1}}},[e._v("关闭")])],1)],1)],1)},i=[],n=a("b098"),o=a("8fad"),s=a("5371");function l(e){return f(e)||d(e)||u(e)||c()}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){if(e){if("string"==typeof e)return h(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?h(e,t):void 0}}function d(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function f(e){if(Array.isArray(e))return h(e)}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}var m={name:"DocumentUpload",components:{JTreeSelect:n["default"],DocUpload:s["default"]},props:["save_path"],data:function(){return{selectTreeNode:[],form:this.$form.createForm(this),visible:!1,confirmLoading:!1,directoryId:"",isLoading:!1,defaultFileList:[],shared:!1,sharedId:"",tags:[],remark:"",inputVisible:!1,inputValue:"",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:16}}}},watch:{shared:{immediate:!1,handler:function(e){e&&this.loadSelectNodeMethod(null)}}},methods:{loadSelectNodeMethod:function(e){var t=this;return new Promise((function(a){Object(o["Zb"])(null==e?"-1":e.dataRef.id).then((function(e){e.success?e.result.map((function(e){t.selectTreeNode=t.selectTreeNode.concat(t.genSelectTreeNode(e))})):t.$message.error(e.message)})),a()}))},genSelectTreeNode:function(e){return{id:e.id,pId:e.parentId,value:e.id,title:e.name,isLeaf:!e.hasChildren}},remarkChange:function(){return!(this.remark.length>200)||(this.$message.error("备注不能超过255个字符"),!1)},showModal:function(e){this.tags=[],this.remark="",this.shared=!1,this.sharedId="",this.directoryId=e,this.visible=!0},successUploadFile:function(e){var t=this;if(this.confirmLoading=!1,e&&!(e.length<1)){var a={directoryId:this.directoryId,sharedId:this.sharedId,remark:this.remark,fileTags:this.tags.length>0?this.tags.join(","):""};e.map((function(e){Object.assign(e,a)})),Object(o["d"])(e).then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok"),t.handleCancel()):t.$message.error(e.message)}))}},uploadFail:function(e){this.confirmLoading=!1,this.$message.error("上传失败！")},onRemoveFile:function(e){},handleClose:function(e){var t=this.tags.filter((function(t){return t!==e}));this.tags=t},showInput:function(){this.inputVisible=!0,this.$nextTick((function(){this.$refs.input.focus()}))},handleInputChange:function(e){this.inputValue=e.target.value},handleInputConfirm:function(){var e=this.inputValue,t=this.tags;e&&-1===t.indexOf(e)&&(t=[].concat(l(t),[e])),Object.assign(this,{tags:t,inputVisible:!1,inputValue:""})},beginUpload:function(){this.tags.length>10?this.$message.warn("最多只能添加10个标签！"):(this.isLoading=!0,this.confirmLoading=!0,this.$refs.upload.beginUpload())},upLoadingEnd:function(){this.isLoading=!1},handleCancel:function(){this.visible=!1,this.selectTreeNode=[]}}},p=m,g=(a("babc"),a("2877")),b=Object(g["a"])(p,r,i,!1,null,"7a8011c7",null);t["default"]=b.exports},"353a":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"80%",visible:e.visible,title:e.title,centered:"",bodyStyle:{height:"80vh"},confirmLoading:e.confirmLoading,destroyOnClose:!0,footer:null},on:{cancel:e.handleCancel}},[t("div",[t("iframe",{staticClass:"filename",staticStyle:{height:"calc(80vh - 25px)"},attrs:{src:e.filePath,width:"100%",frameborder:"0"}})])])},i=[],n=a("e2aa"),o={name:"DocPreviewModal",props:{title:{type:String,default:"文件预览"}},data:function(){return{visible:!1,confirmLoading:!1,filePath:""}},methods:{handleFilePath:function(e){var t=this;Object(n["c"])(e).then((function(e){if(e.success){var a=e.result;t.visible=!0,t.filePath=window._CONFIG["onlinePreviewDomainURL"]+"?url="+encodeURIComponent(a)}else t.$message.warning("查看文件失败")}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},s=o,l=(a("9216"),a("2877")),c=Object(l["a"])(s,r,i,!1,null,"484795fd",null);t["default"]=c.exports},3791:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:"设置权限",width:"85%",visible:e.visible,dialogClass:"fullDialog no-footer",destroyOnClose:!0},on:{cancel:e.handleCancel}},[t("div",{attrs:{id:"PrivilegeContent"}},[t("div",{staticClass:"info-wrapper info-top-wrapper"},[t("h4",[e._v("可选权限")]),t("a-form",{attrs:{form:e.form}},[t("a-row",[t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"权限维度"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator",value:["dimension",{rules:[{required:!0,message:"请选择权限维度"}]}],expression:"['dimension',  { rules: [{ required: true, message: '请选择权限维度' }] },]"}],attrs:{dictCode:"bu_dimension",triggerChange:!0,placeholder:"请选择接收维度"},on:{change:e.changeDimension}})],1)],1),t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"权限对象"}},[t("a-select",{ref:"mySelect",attrs:{mode:"multiple",placeholder:"请选择接收对象",open:!1,showArrow:!0},on:{focus:e.openModal,deselect:e.changeSelect},model:{value:e.target,callback:function(t){e.target=t},expression:"target"}},[t("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:14,sm:24}},[t("a-form-item",{attrs:{labelCol:{xs:{span:24},sm:{span:2}},wrapperCol:e.wrapperCol,label:"权限"}},[t("a-checkbox-group",{attrs:{options:e.plainOptions},model:{value:e.privilegeValue,callback:function(t){e.privilegeValue=t},expression:"privilegeValue"}})],1)],1),t("a-col",{attrs:{md:6,sm:12}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"设置子项"}},[t("a-switch",{model:{value:e.isSub,callback:function(t){e.isSub=t},expression:"isSub"}})],1)],1)],1),t("a-row",[t("a-col",[t("a-button",{on:{click:e.handleOk}},[e._v("添加权限")])],1)],1)],1)],1),t("div",[e._v(" 如果不设置任何权限项，默认为所有人拥有所有权限 ")]),t("div",{staticClass:"info-wrapper info-top-wrapper"},[t("h4",[e._v("已设置权限")]),t("vxe-table",{attrs:{stripe:"",border:"inner",align:"center",data:e.tableData}},[t("vxe-table-column",{attrs:{type:"seq",width:"60",title:"序号"}}),t("vxe-table-column",{attrs:{field:"objName",title:"权限对象"}}),t("vxe-table-column",{attrs:{title:"上传文件"},scopedSlots:e._u([{key:"default",fn:function(e){var a=e.row;return[t("a-checkbox",{attrs:{checked:"1"===a.docPrivileges.slice(0,1)}})]}}])}),t("vxe-table-column",{attrs:{title:"查看文件"},scopedSlots:e._u([{key:"default",fn:function(e){var a=e.row;return[t("a-checkbox",{attrs:{checked:"1"===a.docPrivileges.slice(1,2)}})]}}])}),t("vxe-table-column",{attrs:{title:"下载文件"},scopedSlots:e._u([{key:"default",fn:function(e){var a=e.row;return[t("a-checkbox",{attrs:{checked:"1"===a.docPrivileges.slice(2,3)}})]}}])}),t("vxe-table-column",{attrs:{title:"删除文件"},scopedSlots:e._u([{key:"default",fn:function(e){var a=e.row;return[t("a-checkbox",{attrs:{checked:"1"===a.docPrivileges.slice(3,4)}})]}}])}),t("vxe-table-column",{attrs:{title:"目录管理"},scopedSlots:e._u([{key:"default",fn:function(e){var a=e.row;return[t("a-checkbox",{attrs:{checked:"1"===a.docPrivileges.slice(4,5)}})]}}])}),t("vxe-table-column",{attrs:{title:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("a",{on:{click:function(t){return t.stopPropagation(),e.handleDel(r)}}},[e._v("删除")])]}}])})],1)],1),t("user-list",{ref:"UserModalForm",attrs:{multiple:!0},on:{ok:e.addTarget}}),t("role-list",{ref:"RoleModalForm",attrs:{multiple:!0},on:{ok:e.addTarget}}),t("org-list",{ref:"OrgModalForm",attrs:{multiple:!0},on:{ok:e.addTarget}})],1)])},i=[],n=a("b245"),o=a("fc35"),s=a("f004"),l=a("8fad"),c={name:"PrivilegeAdd",components:{UserList:n["default"],RoleList:o["default"],OrgList:s["default"]},data:function(){return{plainOptions:[{label:"上传文件",value:"1"},{label:"查看文件",value:"2"},{label:"下载文件",value:"3"},{label:"删除文件",value:"4"},{label:"目录管理",value:"5"}],tableData:[],queryParam:{dimension:"",target:""},privilegeValue:[],target:[],targetItem:[],dimension:"",labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},form:this.$form.createForm(this),showSelect:!0,confirmLoading:!1,visible:!1,directoryId:"",objType:"",isSub:!0}},methods:{show:function(e){this.visible=!0,this.directoryId=e.directoryId,this.objType=e.objType,this.findList()},findList:function(){var e=this;Object(l["Rb"])(this.directoryId).then((function(t){t.success&&(e.tableData=t.result)}))},openModal:function(){if(this.queryParam.dimension)switch(this.queryParam.dimension){case"1":this.$refs.UserModalForm.showModal();break;case"2":this.$refs.RoleModalForm.showModal();break;case"3":this.$refs.OrgModalForm.showModal();break;default:break}else this.$message.error("请先选择接收维度!");this.$refs.mySelect.blur()},addTarget:function(e){var t=this;this.target=[],this.targetItem=[],this.queryParam.target="",e.map((function(e,a){switch(t.queryParam.dimension){case"1":t.target.push(e.username);break;case"2":t.target.push(e.roleName);break;case"3":t.target.push(e.departName);break;default:break}t.targetItem.push(e)}))},changeSelect:function(e,t){var a;switch(this.queryParam.dimension){case"1":a=this.targetItem.findIndex((function(t){return t.username===e}));break;case"2":a=this.targetItem.findIndex((function(t){return t.roleName===e}));break;case"3":a=this.targetItem.findIndex((function(t){return t.departName===e}));break;default:break}this.targetItem.splice(a,1)},getTargetIds:function(e){var t=this;e.map((function(e,a){t.queryParam.target=0===a?t.queryParam.target+e.id:t.queryParam.target+","+e.id}))},changeDimension:function(e){e!==this.queryParam.dimension&&(this.queryParam.dimension=e,this.queryParam.target="",this.target=[])},handleOk:function(){var e=this;if(this.queryParam.dimension&&this.targetItem.length){if(this.getTargetIds(this.targetItem),0==this.privilegeValue.length)return void this.$message.warn("至少选择一个权限!");this.form.validateFields((function(t,a){if(!t){var r=Object.assign({},a,{objId:e.directoryId,docPrivileges:e.privilegeValue.join(","),targetId:e.queryParam.target,targetType:e.queryParam.dimension,objType:e.objType,isSub:e.isSub});Object(l["Id"])(r).then((function(t){t.success?(e.findList(),e.$message.success(t.message),e.queryParam={dimension:"",target:""},e.form.resetFields(),e.privilegeValue=[],e.target=[],e.targetItem=[],e.dimension=""):e.$message.error(t.message)}))}}))}else this.queryParam.dimension&&!this.targetItem.length?this.$message.error("请选择接收对象！"):this.$message.error("请选择接收维度和接收对象！")},handleDel:function(e){var t=this;Object(l["H"])(e.id).then((function(e){e.success?(t.findList(),t.$message.success(e.message)):t.$message.error(e.message)}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},u=c,d=(a("cc1e"),a("2877")),f=Object(d["a"])(u,r,i,!1,null,"37ab631a",null);t["default"]=f.exports},5371:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",[t("a-row",{staticStyle:{"padding-bottom":"10px"},attrs:{gutter:24}},[t("a-col",{attrs:{md:24,sm:24}},[t("a-upload",{attrs:{multiple:!0,"file-list":e.fileList,remove:e.handleRemove,"before-upload":e.beforeUpload,"default-file-list":e.defaultFileList}},[t("a-button",{staticClass:"border-primary-4"},[e._v("添加文件")])],1)],1)],1),t("a-row",[e.showUpload?t("a-col",{attrs:{span:5}},[t("a-button",{attrs:{type:"primary",loading:e.isLoading},on:{click:e.beginUpload}},[e._v("上传至服务器")])],1):e._e(),t("a-col",{staticStyle:{color:"#cccccc"},attrs:{span:19}},[e._v("一次最多上传"+e._s(e.fileSize)+"个文件，且单个文件不能超过10MB")])],1)],1)},i=[],n=a("e2aa");function o(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",i=a.toStringTag||"@@toStringTag";function n(a,r,i,n){var o=r&&r.prototype instanceof c?r:c,u=Object.create(o.prototype);return s(u,"_invoke",function(a,r,i){var n,o,s,c=0,u=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,a){return n=t,o=0,s=e,f.n=a,l}};function h(a,r){for(o=a,s=r,t=0;!d&&c&&!i&&t<u.length;t++){var i,n=u[t],h=f.p,m=n[2];a>3?(i=m===r)&&(s=n[(o=n[4])?5:(o=3,3)],n[4]=n[5]=e):n[0]<=h&&((i=a<2&&h<n[1])?(o=0,f.v=r,f.n=n[1]):h<m&&(i=a<3||n[0]>r||r>m)&&(n[4]=a,n[5]=r,f.n=m,o=0))}if(i||a>1)return l;throw d=!0,r}return function(i,u,m){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,m),o=u,s=m;(t=o<2?e:s)||!d;){n||(o?o<3?(o>1&&(f.n=-1),h(o,s)):f.n=s:f.v=s);try{if(c=2,n){if(o||(i="next"),t=n[i]){if(!(t=t.call(n,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,o<2&&(o=0)}else 1===o&&(t=n.return)&&t.call(n),o<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),o=1);n=e}else if((t=(d=f.n<0)?s:a.call(r,f))!==l)break}catch(t){n=e,o=1,s=t}finally{c=1}}return{value:t,done:d}}}(a,i,n),!0),u}var l={};function c(){}function u(){}function d(){}t=Object.getPrototypeOf;var f=[][r]?t(t([][r]())):(s(t={},r,(function(){return this})),t),h=d.prototype=c.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,i,"GeneratorFunction")),e.prototype=Object.create(h),e}return u.prototype=d,s(h,"constructor",d),s(d,"constructor",u),u.displayName="GeneratorFunction",s(d,i,"GeneratorFunction"),s(h),s(h,i,"Generator"),s(h,r,(function(){return this})),s(h,"toString",(function(){return"[object Generator]"})),(o=function(){return{w:n,m:m}})()}function s(e,t,a,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}s=function(e,t,a,r){function n(t,a){s(e,t,(function(e){return this._invoke(t,a,e)}))}t?i?i(e,t,{value:a,enumerable:!r,configurable:!r,writable:!r}):e[t]=a:(n("next",0),n("throw",1),n("return",2))},s(e,t,a,r)}function l(e,t,a,r,i,n,o){try{var s=e[n](o),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function c(e){return function(){var t=this,a=arguments;return new Promise((function(r,i){var n=e.apply(t,a);function o(e){l(n,r,i,o,s,"next",e)}function s(e){l(n,r,i,o,s,"throw",e)}o(void 0)}))}}var u={name:"DocUpload",props:{path:{type:String,default:""},fileSize:{type:Number,default:5},defaultFileList:{type:Array,default:[]},showUpload:{type:Boolean,default:!0},isFileEmpty:{type:Boolean,default:!1}},watch:{uploadFiles:{immediate:!1,handler:function(){var e=c(o().m((function e(t){return o().w((function(e){while(1)switch(e.n){case 0:if(t.length!==this.fileList.length){e.n=1;break}return e.n=1,this.$emit("uploaded",this.uploadFiles);case 1:return e.a(2)}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},data:function(){return{fileList:[],uploadFiles:[],isLoading:!1}},methods:{beforeUpload:function(e){var t=e.size/1024/1024<10;return t?(this.fileList.push(e),this.$emit("fileNum",this.fileList.length),this.$emit("setBforeUploadStatus",!1),!1):(this.$message.error("文件不得大于10MB!"),!1)},handleRemove:function(e){var t=this.fileList.indexOf(e),a=this.fileList.slice();a.splice(t,1),this.fileList=a,this.$emit("fileNum",this.fileList.length),this.$emit("removed",e)},beginUpload:function(){var e=this;return new Promise((function(t,a){var r=e.fileList,i=e.fileSize;if(!e.isFileEmpty&&0===r.length)return e.$emit("upLoadingEnd"),e.$message.warning("请选择要上传的文件"),void a();r.length>i?(e.$message.error("一次最多上传"+i+"个文件!"),a()):e.customRequest().then((function(){t()})).catch((function(e){a()}))}))},customRequest:function(){var e=this,t=this.fileList;if(t.length<1)return this.$emit("uploaded",[]),this.$emit("upLoadingEnd"),Promise.resolve();this.isLoading=!0;var a=[];return t.forEach((function(t){var r=new FormData;r.append("file",t),a.push(e.saveFile(r,t))})),Promise.all(a).finally((function(){e.isLoading=!1,e.$emit("upLoadingEnd")}))},saveFile:function(){var e=c(o().m((function e(t,a){var r=this;return o().w((function(e){while(1)switch(e.n){case 0:return e.a(2,Object(n["d"])(t,this.path).then((function(e){e.success?(r.getUploadData(a,e),r.$emit("setUpLoadingEndStatus",!0)):(r.$message.error(e.message),r.$emit("uploadFail",a))})))}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}(),getUploadData:function(e,t){var a=this.uploadFiles,r={name:e.name,type:this.handleFileName(e),fileSize:Math.round(e.size/1024),savepath:t.result};a.push(r)},handleFileName:function(e){var t=e.name.lastIndexOf("."),a=e.name.length,r=e.name.substring(t+1,a);return r}}},d=u,f=(a("9615"),a("2877")),h=Object(f["a"])(d,r,i,!1,null,"69990be1",null);t["default"]=h.exports},"5e461":function(e,t,a){"use strict";a("ce67")},"82f3":function(e,t,a){"use strict";a("aaee")},9216:function(e,t,a){"use strict";a("260f")},"94c2d":function(e,t,a){},9527:function(e,t,a){},9615:function(e,t,a){"use strict";a("94c2d")},"9ff8":function(e,t,a){},a374:function(e,t,a){"use strict";a("cf71")},aaee:function(e,t,a){},b245:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"85%",title:"人员选择",visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",bodyStyle:{height:"70vh"},destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-row",[t("a-col",{attrs:{md:4,sm:24}},[t("div",{staticStyle:{height:"calc(70vh - 20px)","border-right":"1px solid #e3e1e1","margin-right":"15px"}},[e.treeData&&e.treeData.length>0?t("a-tree",{staticClass:"limitHeight",attrs:{defaultSelectedKeys:[e.queryParam.depId],defaultExpandAll:!0,"tree-data":e.treeData},on:{select:e.onSelect}}):e._e()],1)]),t("a-col",{attrs:{md:20,sm:24}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.findList.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"账号"}},[t("a-input",{attrs:{placeholder:"请输入用户账号"},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"真实名字"}},[t("a-input",{attrs:{placeholder:"请输入真实名字"},model:{value:e.queryParam.realname,callback:function(t){e.$set(e.queryParam,"realname",t)},expression:"queryParam.realname"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"手机号码"}},[t("a-input",{attrs:{placeholder:"请输入手机号码"},model:{value:e.queryParam.phone,callback:function(t){e.$set(e.queryParam,"phone",t)},expression:"queryParam.phone"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"角色"}},[t("j-dict-select-tag",{attrs:{triggerChange:!0,dictCode:"sys_role,role_name,id",placeholder:"选择角色"},model:{value:e.queryParam.roleId,callback:function(t){e.$set(e.queryParam,"roleId",t)},expression:"queryParam.roleId"}})],1)],1),t("a-col",{attrs:{md:2,sm:8}},[t("a-button",{on:{click:e.findList}},[e._v("查询")])],1)],1)],1)],1),t("div",{staticStyle:{height:"calc(70vh - 130px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(70vh - 130px)"},attrs:{border:"",align:e.allAlign,data:e.tableData,"max-height":"100%","show-overflow":"tooltip","radio-config":e.multiple?{}:{trigger:"row"},"checkbox-config":e.multiple?{trigger:"row",highlight:!0,range:!0}:{},"edit-config":{trigger:"manual",mode:"row"}}},[e.multiple?t("vxe-table-column",{attrs:{type:"checkbox",width:"5%"}}):t("vxe-table-column",{attrs:{type:"radio",width:"5%"}}),t("vxe-table-column",{attrs:{field:"workNo",title:"工号",width:"100",align:"center"}}),t("vxe-table-column",{attrs:{field:"username",title:"用户账号",width:"150",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"realname",title:"用户名字",width:"100",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"roleNames",title:"角色","min-width":"180",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"sex_dictText",title:"性别",width:"80"}}),t("vxe-table-column",{attrs:{field:"phone",title:"手机号码",width:"120"}}),t("vxe-table-column",{attrs:{field:"orgCode",title:"部门",width:"120",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",width:"80"}})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1)])],1)],1)},i=[],n=a("8fad"),o={name:"UserList",props:{multiple:{type:Boolean,default:!0},depId:{type:String,default:""}},data:function(){return{queryParam:{username:"",realname:"",phone:"",orgCode:"",roleId:void 0,pageNo:1,pageSize:10},allAlign:"center",totalResult:0,tableData:[],visible:!1,confirmLoading:!1,treeData:[]}},watch:{depId:function(e){this.$set(this.queryParam,"depId",e||"")}},mounted:function(){this.$set(this.queryParam,"depId",this.depId||"")},methods:{showModal:function(){this.visible=!0,this.findList(),this.getTreeList()},getTreeList:function(){var e=this;Object(n["yb"])().then((function(t){t.success&&(e.treeData=t.result)}))},onSelect:function(e,t){if(e.length){var a=t.node.dataRef;this.queryParam.depId=a.id,this.findList()}else this.queryParam.orgCode="",this.findList()},findList:function(){var e=this;this.loading=!0,Object(n["uc"])(this.queryParam).then((function(t){e.loading=!1,t.success?(e.totalResult=t.result.total,e.tableData=t.result.records):e.$message.error("加载用户数据失败")})).catch((function(t){e.$message.error("加载用户数据异常")})).finally((function(){}))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()},handleOk:function(){var e=[];this.multiple?e=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&e.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",e),this.visible=!1},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,Object.assign(this.$data,this.$options.data())}}},s=o,l=(a("f76d"),a("2877")),c=Object(l["a"])(s,r,i,!1,null,"4aa7956f",null);t["default"]=c.exports},babc:function(e,t,a){"use strict";a("9ff8")},cc1e:function(e,t,a){"use strict";a("e105")},ce67:function(e,t,a){},cf71:function(e,t,a){},df41:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-card",{attrs:{id:"rightDocument"}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:7,sm:24}},[t("a-form-item",{attrs:{label:"文件名称"}},[t("a-input",{attrs:{placeholder:"请输入文件名称",allowClear:""},model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,"name",t)},expression:"queryParam.name"}})],1)],1),t("a-col",{attrs:{md:7,sm:24}},[t("a-form-item",{attrs:{label:"显示"}},[t("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_file_show_type"},model:{value:e.queryParam.showType,callback:function(t){e.$set(e.queryParam,"showType",t)},expression:"queryParam.showType"}})],1)],1),t("a-col",{attrs:{md:7,sm:24}},[t("a-form-item",{attrs:{label:"文件类型"}},[t("a-select",{attrs:{placeholder:"请选择",allowClear:""},model:{value:e.queryParam.type,callback:function(t){e.$set(e.queryParam,"type",t)},expression:"queryParam.type"}},[t("a-select-option",{attrs:{value:void 0}},[e._v("请选择")]),t("a-select-option",{attrs:{value:""}},[e._v("所有文件")]),e._l(e.fileType,(function(a){return t("a-select-option",{key:a,attrs:{value:a}},[e._v(" "+e._s(a)+" ")])}))],2)],1)],1)],1),t("a-row",[t("a-col",{attrs:{md:9,sm:12}},[t("span",{staticClass:"table-page-search-submitButtons"},[t("a-space",[t("a-button",{attrs:{type:"primary"},on:{click:e.handleUpload}},[e._v("上传")]),t("a-button",{attrs:{disabled:1!=e.records.length},on:{click:function(t){return e.handleEdit(e.records[0])}}},[e._v("编辑")]),t("a-button",{on:{click:e.handleAddDic}},[e._v("新建目录")]),t("a-button",{attrs:{disabled:e.records.length<1},on:{click:e.handleAddPrivilege}},[e._v("设置权限")]),t("a-button",{attrs:{disabled:e.records.length<1},on:{click:e.deleteRecord}},[e._v("删除")]),t("a-button",{on:{click:e.findList}},[e._v("查询")])],1)],1)])],1)],1)],1),t("div",{staticStyle:{height:"calc(100vh - 282px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(100vh - 282px)"},attrs:{border:"","auto-resize":"","max-height":"100%",data:e.tableData,"show-overflow":"tooltip","edit-config":{trigger:"manual",mode:"row"},"checkbox-config":{trigger:"row",highlight:!0,range:!0},"header-align":"center",align:"center"},on:{"checkbox-change":e.checkboxChange,"checkbox-all":e.checkboxChange}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),t("vxe-table-column",{attrs:{title:"-",width:"90"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[1===r.isFile?t("span",[t("a",{on:{click:function(t){return t.stopPropagation(),e.handleSeeing(r)}}},[e._v("查看")]),t("a",{staticStyle:{"margin-left":"3px"},on:{click:function(t){return t.stopPropagation(),e.handleDownload(r)}}},[e._v("下载")])]):e._e()]}}])}),t("vxe-table-column",{attrs:{field:"name",title:"文件名称","min-width":"160",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"type",title:"文件类型",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.type)+" ")]}}])}),t("vxe-table-column",{attrs:{field:"fileSize",title:"大小(KB)",width:"100","header-align":"center",align:"right"}}),t("vxe-table-column",{attrs:{field:"uploadDate",title:"上传日期",width:"100","header-align":"center",align:"right"}}),t("vxe-table-column",{attrs:{field:"fileTags",title:"标签","min-width":"120","header-align":"center",align:"left"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[r.fileTags?t("span",e._l(r.fileTags.split(","),(function(a,r){return t("a-tag",{key:r,attrs:{color:"blue"}},[e._v(e._s(a))])})),1):e._e()]}}])}),t("vxe-table-column",{attrs:{field:"remark",title:"备注",width:"160"}})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1),t("add-directory-modal",{ref:"modalForm",attrs:{directoryId:e.directoryId},on:{ok:function(t){return e.loadData()}}}),t("edit-directory-modal",{ref:"editModalForm",on:{ok:function(t){return e.loadData()}}}),t("doc-preview-modal",{ref:"docPreview",attrs:{title:e.fileName}}),t("document-upload",{ref:"docUpload",attrs:{save_path:e.curPath},on:{ok:function(t){return e.findList()}}}),t("privilege-add",{ref:"privilegeAdd",on:{ok:function(t){return e.loadData()}}})],1)},i=[],n=a("8fad"),o=a("e2aa"),s=a("e526"),l=a("01aa"),c=a("353a"),u=a("3348"),d=a("3791"),f=a("ca00");function h(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=m(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){s=!0,n=e},f:function(){try{o||null==a.return||a.return()}finally{if(s)throw n}}}}function m(e,t){if(e){if("string"==typeof e)return p(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}function g(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",i=a.toStringTag||"@@toStringTag";function n(a,r,i,n){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return b(c,"_invoke",function(a,r,i){var n,s,l,c=0,u=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,a){return n=t,s=0,l=e,f.n=a,o}};function h(a,r){for(s=a,l=r,t=0;!d&&c&&!i&&t<u.length;t++){var i,n=u[t],h=f.p,m=n[2];a>3?(i=m===r)&&(l=n[(s=n[4])?5:(s=3,3)],n[4]=n[5]=e):n[0]<=h&&((i=a<2&&h<n[1])?(s=0,f.v=r,f.n=n[1]):h<m&&(i=a<3||n[0]>r||r>m)&&(n[4]=a,n[5]=r,f.n=m,s=0))}if(i||a>1)return o;throw d=!0,r}return function(i,u,m){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,m),s=u,l=m;(t=s<2?e:l)||!d;){n||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(c=2,n){if(s||(i="next"),t=n[i]){if(!(t=t.call(n,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=n.return)&&t.call(n),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);n=e}else if((t=(d=f.n<0)?l:a.call(r,f))!==o)break}catch(t){n=e,s=1,l=t}finally{c=1}}return{value:t,done:d}}}(a,i,n),!0),c}var o={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(b(t={},r,(function(){return this})),t),d=c.prototype=s.prototype=Object.create(u);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,b(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=c,b(d,"constructor",c),b(c,"constructor",l),l.displayName="GeneratorFunction",b(c,i,"GeneratorFunction"),b(d),b(d,i,"Generator"),b(d,r,(function(){return this})),b(d,"toString",(function(){return"[object Generator]"})),(g=function(){return{w:n,m:f}})()}function b(e,t,a,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}b=function(e,t,a,r){function n(t,a){b(e,t,(function(e){return this._invoke(t,a,e)}))}t?i?i(e,t,{value:a,enumerable:!r,configurable:!r,writable:!r}):e[t]=a:(n("next",0),n("throw",1),n("return",2))},b(e,t,a,r)}function v(e,t,a,r,i,n,o){try{var s=e[n](o),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function y(e){return function(){var t=this,a=arguments;return new Promise((function(r,i){var n=e.apply(t,a);function o(e){v(n,r,i,o,s,"next",e)}function s(e){v(n,r,i,o,s,"throw",e)}o(void 0)}))}}var w={name:"RightDocument",props:["directoryId","curPath"],components:{AddDirectoryModal:s["default"],EditDirectoryModal:l["default"],DocPreviewModal:c["default"],DocumentUpload:u["default"],PrivilegeAdd:d["default"]},data:function(){return{records:[],toggleSearchStatus:!1,fileType:[],filePath:"",fileName:"",queryParam:{id:"",name:"",showType:"2",type:null,pageNo:1,pageSize:10},totalResult:0,tableData:[],showEdit:!1,status:!1,dirParentId:""}},created:function(){this.getFileType(),this.findList()},watch:{directoryId:{immediate:!1,handler:function(e){this.queryParam.id=e,this.records=[],this.tableData=[],this.findList(),this.getDirParentId(e)}}},methods:{checkboxChange:function(e){this.records=e.records},getDirParentId:function(e){var t=this;Object(n["zb"])(e).then((function(e){e.success&&(t.dirParentId=e.result)}))},getFileType:function(){var e=this;Object(n["Cb"])().then((function(t){e.fileType=t.result}))},handlePrivilege:function(){var e=y(g().m((function e(t,a){var r,i=this;return g().w((function(e){while(1)switch(e.n){case 0:return r={id:t,operation:a},e.n=1,Object(n["Ic"])(r).then((function(e){i.status=e.result}));case 1:return e.a(2)}}),e)})));function t(t,a){return e.apply(this,arguments)}return t}(),handleSeeing:function(){var e=y(g().m((function e(t){return g().w((function(e){while(1)switch(e.n){case 0:return e.n=1,this.handlePrivilege(t.id,2);case 1:this.status?(this.fileName=t.fileName,this.$refs.docPreview.handleFilePath(t.savepath)):this.$message.error("您没有权限!");case 2:return e.a(2)}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleDownload:function(){var e=y(g().m((function e(t){return g().w((function(e){while(1)switch(e.n){case 0:return e.n=1,this.handlePrivilege(t.id,3);case 1:this.status?Object(o["b"])(t.savepath):this.$message.error("您没有权限!");case 2:return e.a(2)}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),findList:function(){var e=this;Object(n["Ab"])(this.queryParam).then((function(t){e.totalResult=t.result.total,e.loading=!1,e.records=[],e.tableData=t.result.records}))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()},loadData:function(){this.findList(),this.$emit("load"),this.$emit("selectTree")},handleUpload:function(){var e=y(g().m((function e(){return g().w((function(e){while(1)switch(e.n){case 0:if(!this.directoryId){e.n=2;break}return e.n=1,this.handlePrivilege(this.directoryId,1);case 1:this.status?this.$refs.docUpload.showModal(this.directoryId):this.$message.error("您没有权限!"),e.n=3;break;case 2:this.$message.warn("请选择目录!");case 3:return e.a(2)}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleEdit:function(){var e=y(g().m((function e(t){return g().w((function(e){while(1)switch(e.n){case 0:return e.n=1,this.handlePrivilege(t.id,5);case 1:this.status?(this.$refs.editModalForm.edit(t),this.$refs.editModalForm.title="编辑"):this.$message.error("您没有权限!");case 2:return e.a(2)}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleAddDic:function(){var e=y(g().m((function e(){return g().w((function(e){while(1)switch(e.n){case 0:if(!this.directoryId){e.n=2;break}return e.n=1,this.handlePrivilege(this.directoryId,5);case 1:this.status?(this.$refs.modalForm.add(),this.$refs.modalForm.title="新增"):this.$message.error("您没有权限!"),e.n=3;break;case 2:this.$message.warn("请选择目录!");case 3:return e.a(2)}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleAddPrivilege:function(){var e=y(g().m((function e(){var t,a,r,i;return g().w((function(e){while(1)switch(e.n){case 0:if(t=this.$refs.listTable.getCheckboxRecords(),!this.directoryId&&1!==t.length){e.n=4;break}if(a=this.directoryId,r=1,1!==t.length){e.n=1;break}a=t[0].id,r=0===t[0].isFile?1:2,e.n=2;break;case 1:if(!(t.length>1)){e.n=2;break}return this.$message.warn("只能选择一条数据!"),e.a(2);case 2:return e.n=3,this.handlePrivilege(a,5);case 3:this.status?(i={directoryId:a,objType:r},this.$refs.privilegeAdd.show(i)):this.$message.error("您没有权限!"),e.n=5;break;case 4:t.length>1?this.$message.warn("只能选择一条数据!"):this.$message.warn("请选择目录或者文件!");case 5:return e.a(2)}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getSelectEvent:function(){var e=this.$refs.listTable.getCheckboxRecords();this.$XModal.alert(e.length)},deleteRecord:function(){var e=y(g().m((function e(){var t,a,r,i,o,s=this;return g().w((function(e){while(1)switch(e.p=e.n){case 0:if(t=this.$refs.listTable.getCheckboxRecords(),!(!t.length>0)){e.n=2;break}if(Object(f["e"])(this.directoryId)){e.n=2;break}if("1"===this.directoryId||"2"===this.directoryId||"3"===this.directoryId||"4"===this.directoryId){e.n=1;break}t.push({id:this.directoryId}),e.n=2;break;case 1:return this.$message.warn("初始化数据不能删除!"),e.a(2);case 2:if(!(t.length>0)){e.n=13;break}a=h(t),e.p=3,a.s();case 4:if((r=a.n()).done){e.n=9;break}if(i=r.value,"1"===i.id||"2"===i.id||"3"===i.id||"4"===i.id){e.n=7;break}return e.n=5,this.handlePrivilege(i.id,4);case 5:if(this.status){e.n=6;break}return this.$message.error("您没有权限!"),e.a(2);case 6:e.n=8;break;case 7:return this.$message.warn("初始化数据不能删除!"),e.a(2);case 8:e.n=4;break;case 9:e.n=11;break;case 10:e.p=10,o=e.v,a.e(o);case 11:return e.p=11,a.f(),e.f(11);case 12:this.$confirm({content:"是否删除选中".concat(t.length,"数据？"),okText:"确认",cancelText:"取消",onOk:function(){var e=t.map((function(e,t){return e.id})).join(",");Object(n["C"])("ids="+e).then((function(e){e.success?(s.$emit("selectTree"),s.findList(),s.$message.success(e.message)):s.$message.error(e.message)}))}}),e.n=14;break;case 13:this.$message.error("尚未选中任何数据!");case 14:return e.a(2)}}),e,this,[[3,10,11,12]])})));function t(){return e.apply(this,arguments)}return t}()}},k=w,x=(a("5e461"),a("2877")),P=Object(x["a"])(k,r,i,!1,null,null,null);t["default"]=P.exports},e105:function(e,t,a){},e526:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,width:600,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:24,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"名称"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["name",e.validatorRules.name],expression:"[ 'name', validatorRules.name]",modifiers:{trim:!0}}],attrs:{placeholder:"名称"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:24,sm:24}},[t("a-form-item",{attrs:{label:"备注",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark",e.validatorRules.remark],expression:"[ 'remark',validatorRules.remark]"}]})],1)],1)],1)],1)],1)],1)},i=[],n=a("8fad"),o={name:"AddDirectoryModal",props:["directoryId"],data:function(){return{title:"操作",visible:!1,model:{},labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:15}},confirmLoading:!1,form:this.$form.createForm(this),validatorRules:{name:{rules:[{required:!0,message:"请输入目录名称!"},{max:50,message:"输入长度不能超过50字符!"}]},remark:{rules:[{max:255,message:"输入长度不能超过255字符!"}]}}}},created:function(){},methods:{add:function(){this.edit({})},edit:function(e){var t=this;this.form.resetFields(),this.model=Object.assign({},e),this.visible=!0,this.$nextTick((function(){t.form.setFieldsValue({name:t.model.name,remark:t.model.remark})}))},handleOk:function(){var e=this,t=this;t.form.validateFields((function(a,r){if(!a){t.confirmLoading=!0;var i=Object.assign(t.model,r,{parentId:e.directoryId});Object(n["c"])(i).then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok")):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1,t.close()})),e.visible=!1}}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},s=o,l=a("2877"),c=Object(l["a"])(s,r,i,!1,null,null,null);t["default"]=c.exports},f004:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"90%",title:"机构选择",visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",destroyOnClose:!0,bodyStyle:{height:"60vh"}},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-row",[t("a-col",{attrs:{md:5,sm:24}},[e.treeData.length?t("a-tree",{staticClass:"limitHeight",attrs:{defaultExpandAll:"","tree-data":e.treeData},on:{select:e.onSelect}}):e._e()],1),t("a-col",{attrs:{md:19,sm:24}},[t("div",{staticClass:"limitHeight"},[t("vxe-table",{ref:"listTable",attrs:{border:"",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","edit-config":{trigger:"manual",mode:"row"}}},[e.multiple?t("vxe-table-column",{attrs:{type:"checkbox",width:"10%"}}):t("vxe-table-column",{attrs:{type:"radio",width:"5%"}}),t("vxe-table-column",{attrs:{field:"departName",title:"机构名称",width:"45%"}}),t("vxe-table-column",{attrs:{field:"orgCode",title:"机构编码",width:"45%"}})],1)],1)])],1)],1)},i=[],n=a("8fad"),o={name:"OrgList",props:{multiple:{type:Boolean,default:!0}},data:function(){return{visible:!1,confirmLoading:!1,treeData:[],defaultSelect:[],tableData:[],allAlign:"center"}},created:function(){},methods:{showModal:function(){this.visible=!0,this.getTreeList()},getTreeList:function(){var e=this;Object(n["yb"])().then((function(t){t.success&&(e.treeData=t.result)}))},onSelect:function(e,t){this.tableData=t.node.dataRef.children},handleOk:function(){var e=[];this.multiple?e=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&e.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",e),this.visible=!1},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},s=o,l=(a("a374"),a("2877")),c=Object(l["a"])(s,r,i,!1,null,"d673464c",null);t["default"]=c.exports},f76d:function(e,t,a){"use strict";a("9527")},fc35:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"90%",title:"角色选择",visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",destroyOnClose:!0,bodyStyle:{height:"60vh"}},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.findList.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:7,sm:24}},[t("a-form-item",{attrs:{label:"角色名称"}},[t("a-input",{attrs:{placeholder:"请输入角色名称"},model:{value:e.queryParam.roleName,callback:function(t){e.$set(e.queryParam,"roleName",t)},expression:"queryParam.roleName"}})],1)],1),t("a-col",{attrs:{md:3,sm:8}},[t("a-button",{on:{click:e.findList}},[e._v("查询")])],1)],1)],1)],1),t("div",{staticClass:"limitHeight"},[t("vxe-table",{ref:"listTable",attrs:{border:"",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","edit-config":{trigger:"manual",mode:"row"}}},[e.multiple?t("vxe-table-column",{attrs:{type:"checkbox",width:"10%"}}):t("vxe-table-column",{attrs:{type:"radio",width:"10%"}}),t("vxe-table-column",{attrs:{field:"roleCode",title:"角色编码",width:"30%"}}),t("vxe-table-column",{attrs:{field:"roleName",title:"角色名称",width:"30%"}}),t("vxe-table-column",{attrs:{field:"createTime",title:"创建时间",width:"30%"}})],1)],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1)},i=[],n=a("8fad"),o={name:"RoleList",props:{multiple:{type:Boolean,default:!0}},data:function(){return{queryParam:{roleName:"",pageNo:1,pageSize:10},allAlign:"center",totalResult:0,tableData:[],visible:!1,confirmLoading:!1}},methods:{showModal:function(){this.visible=!0,this.findList()},findList:function(){var e=this;this.loading=!0,Object(n["Xb"])(this.queryParam).then((function(t){e.totalResult=t.result.total,e.loading=!1,e.tableData=t.result.records}))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()},handleOk:function(){var e=[];this.multiple?e=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&e.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",e),this.visible=!1},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},s=o,l=(a("82f3"),a("2877")),c=Object(l["a"])(s,r,i,!1,null,"364d5b69",null);t["default"]=c.exports}}]);