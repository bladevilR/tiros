(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a3c7a"],{"0444":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e._self._c;return a("a-modal",{attrs:{title:e.title,width:800,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"所属车辆段"}},[a("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["depotId",e.validatorRules.depotId],expression:"[ 'depotId', validatorRules.depotId]",modifiers:{trim:!0}}],attrs:{placeholder:"请选择",triggerChange:!0,dictCode:"bu_mtr_depot,name,id"},on:{change:e.handleDep}})],1),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"编号"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["code",e.validatorRules.code],expression:"[ 'code', validatorRules.code]",modifiers:{trim:!0}}],attrs:{placeholder:"编号"}})],1),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"状态"}},[a("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["status",e.validatorRules.status],expression:"[ 'status', validatorRules.status]",modifiers:{trim:!0}}],attrs:{triggerChange:!0,placeholder:"请选择股道状态",dictCode:"bu_valid_status"}})],1),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"备注"}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["remark",e.validatorRules.remark],expression:"[ 'remark', validatorRules.remark]",modifiers:{trim:!0}}]})],1)],1)],1)],1)},i=[],o=t("8fad"),s=t("4ec3"),l=t("ca00"),d={name:"TrackModal",data:function(){return{value:1,title:"操作",visible:!1,depId:"",model:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,form:this.$form.createForm(this),validatorRules:{code:{rules:[{required:!0,message:"请输入编号!"},{validator:this.validateCode},{max:32,message:"输入长度不能超过32字符!"}]},status:{rules:[{required:!0,message:"请选择状态!"}]},depotId:{rules:[{required:!0,message:"请选择所属车辆段!"}]},remark:{rules:[{max:256,message:"输入长度不能超过255字符!"}]}}}},created:function(){},methods:{handleDep:function(e){this.depId=e},validateCode:function(e,a,t){var r={tableName:"bu_mtr_track",fieldName:"code",fieldVal:a,dataId:this.model.id,filterFields:[{name:"depot_id",val:this.model.depotId?this.model.depotId:this.depId}]};Object(l["e"])(a)?t():Object(s["m"])(r).then((function(e){e.success?t():t(e.message)}))},add:function(){this.edit({})},edit:function(e){var a=this;e.id?this.visiblekey=!0:this.visiblekey=!1,this.form.resetFields(),this.model=Object.assign({},e),this.visible=!0,this.$nextTick((function(){a.form.setFieldsValue({code:a.model.code,depotId:a.model.depotId,status:a.model.status,remark:a.model.remark})}))},handleOk:function(){var e=this;e.form.validateFields((function(a,t){if(!a){e.confirmLoading=!0;var r,i=Object.assign(e.model,t);r=e.model.id?Object(o["lb"])(i):Object(o["l"])(i),r.then((function(a){a.success?(e.$message.success(a.message),e.$emit("ok"),e.close()):e.$message.warning(a.message)})).finally((function(){e.confirmLoading=!1}))}}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},n=d,c=t("2877"),m=Object(c["a"])(n,r,i,!1,null,null,null);a["default"]=m.exports}}]);