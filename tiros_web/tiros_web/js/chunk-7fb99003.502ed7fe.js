(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7fb99003","chunk-f4d4d6de","chunk-4adb1458","chunk-24cb054c"],{"21e2":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"table-page-search-wrapper"},[e("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.findList.apply(null,arguments)}}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:4,sm:24}},[e("a-form-item",{attrs:{label:"名称"}},[e("a-input",{attrs:{placeholder:"布局名称"},model:{value:t.queryParam.layoutName,callback:function(e){t.$set(t.queryParam,"layoutName",e)},expression:"queryParam.layoutName"}})],1)],1),e("a-col",{attrs:{md:3,sm:24}},[e("a-form-item",{attrs:{label:"状态"}},[e("j-dict-select-tag",{attrs:{dictCode:"bu_valid_status"},model:{value:t.queryParam.status,callback:function(e){t.$set(t.queryParam,"status",e)},expression:"queryParam.status"}})],1)],1),e("a-col",{attrs:{md:4,sm:24}},[e("a-form-item",{attrs:{label:"所属人员"}},[e("div",{on:{click:function(e){return t.showUserModal()}}},[e("a-select",{ref:"userSelect",attrs:{placeholder:"请选择人员",open:!1},model:{value:t.queryParam.userName,callback:function(e){t.$set(t.queryParam,"userName",e)},expression:"queryParam.userName"}},[e("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},on:{click:function(e){return t.showUserModal()}},slot:"suffixIcon"})],1)],1)])],1),e("a-col",{attrs:{md:10,sm:8}},[e("a-space",[e("a-button",{on:{click:t.findList}},[t._v("查询")]),e("a-button",{attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v("新增")]),e("a-button",{on:{click:t.deleteRecord}},[t._v("删除")]),e("a-button",{on:{click:t.layoutSetting}},[t._v("布局设置")])],1)],1)],1)],1)],1),e("div",{staticStyle:{height:"calc(100vh - 225px)"}},[e("vxe-table",{ref:"listTable",staticStyle:{height:"calc(100vh - 225px)"},attrs:{border:"",align:"center",data:t.tableData,"show-overflow":"tooltip","max-height":"100%","checkbox-config":{trigger:"row",highlight:!0,range:!0},"edit-config":{trigger:"manual",mode:"row"}}},[e("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),e("vxe-table-column",{attrs:{field:"layoutCode",title:"布局编码",width:"150",align:"left"}}),e("vxe-table-column",{attrs:{field:"layoutName",title:"布局名称","min-width":"200",align:"left"}}),e("vxe-table-column",{attrs:{field:"isMain_dictText",title:"是否主面板",width:"100"}}),e("vxe-table-column",{attrs:{field:"layoutScope_dictText",title:"使用范围",width:"100"}}),e("vxe-table-column",{attrs:{field:"byUserName",title:"所属人员",width:"150"}}),e("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",width:"100"}}),e("vxe-table-column",{attrs:{field:"layoutDesc",title:"描述",width:"180",align:"left"}}),e("vxe-table-column",{attrs:{title:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(a){var i=a.row;return[e("a-space",[e("a-button",{attrs:{type:"link"},on:{click:function(e){return e.stopPropagation(),t.handleEdit(i)}}},[t._v("编辑")])],1)]}}])})],1),e("vxe-pager",{attrs:{perfect:"","current-page":t.queryParam.pageNo,"page-size":t.queryParam.pageSize,total:t.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(e){return t.$set(t.queryParam,"pageNo",e)},"update:current-page":function(e){return t.$set(t.queryParam,"pageNo",e)},"update:pageSize":function(e){return t.$set(t.queryParam,"pageSize",e)},"update:page-size":function(e){return t.$set(t.queryParam,"pageSize",e)},"page-change":t.handlePageChange}})],1),e("layout-edit",{ref:"editModal",on:{ok:t.findList}}),e("layout-setting",{ref:"settingModal"}),e("user-list",{ref:"userSelectModal",attrs:{multiple:!1},on:{ok:t.onUserSelect}})],1)},o=[],l=a("bebf"),n=a("b245"),s=a("94d7"),r=a("6505"),u={name:"list",components:{UserList:n["default"],layoutEdit:r["default"],layoutSetting:s["default"]},data:function(){return{tableData:[],queryParam:{layoutName:null,status:"",userId:null,userName:null,pageNo:1,pageSize:10},totalResult:0}},mounted:function(){this.findList()},methods:{findList:function(){var t=this;this.loading=!0,Object(l["c"])(this.queryParam).then((function(e){e.success&&(t.totalResult=e.result.total,t.loading=!1,t.tableData=e.result.records)}))},handlePageChange:function(t){var e=t.currentPage,a=t.pageSize;this.queryParam.pageNo=e,this.queryParam.pageSize=a,this.findList()},handleAdd:function(){this.$refs.editModal.showModal()},handleEdit:function(t){this.$refs.editModal.showModal(t)},layoutSetting:function(){var t=this.$refs.listTable.getCheckboxRecords();t.length>0?(t.length>1&&this.$message.warning("一次只能对一条记录进行设置"),this.$refs.settingModal.showModal(t[0].id)):this.$message.warning("请选择要设置的记录")},deleteRecord:function(){var t=this,e=this.$refs.listTable.getCheckboxRecords(),a=e.filter((function(t){return"default-dashboard"===t.layoutCode}));a.length>0?this.$message.warn("默认首页面板不能删除的哦!!!"):e.length>0?this.$confirm({content:"是否删除选中".concat(e.length,"条数据？"),okText:"确定",cancelText:"取消",onOk:function(){var a=e.map((function(t,e){return t.id})).join(",");Object(l["a"])({ids:a}).then((function(e){e.success?(t.$message.success(e.message),t.findList()):t.$message.warning(e.message)}))}}):this.$message.error("尚未选中任何数据!")},showUserModal:function(){this.$refs.userSelectModal.showModal()},onUserSelect:function(t){t.length?(this.queryParam.userId=t[0].id,this.queryParam.userName=t[0].realname):(this.queryParam.userId=null,this.queryParam.userName=null)}}},d=u,c=a("2877"),h=Object(c["a"])(d,i,o,!1,null,"55b363e0",null);e["default"]=h.exports},2830:function(t,e,a){},3979:function(t,e,a){"use strict";a("2830")},6505:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{title:"布局编辑",centered:"",width:800,bodyStyle:{height:"400px"},visible:t.visible,destroyOnClose:!0},on:{ok:t.handleOk,cancel:function(e){t.visible=!1}}},[e("a-form-model",{ref:"form",attrs:{model:t.model,"label-col":{span:5},"wrapper-col":{span:17},rules:t.rules}},[e("a-row",[e("a-col",{attrs:{span:24}},[e("a-form-model-item",{attrs:{label:"布局编码",prop:"layoutCode"}},[e("a-input",{attrs:{disabled:"default-dashboard"===t.model.layoutCode},model:{value:t.model.layoutCode,callback:function(e){t.$set(t.model,"layoutCode",e)},expression:"model.layoutCode"}})],1)],1),e("a-col",{attrs:{span:24}},[e("a-form-model-item",{attrs:{label:"布局名称",prop:"layoutName"}},[e("a-input",{model:{value:t.model.layoutName,callback:function(e){t.$set(t.model,"layoutName",e)},expression:"model.layoutName"}})],1)],1),e("a-col",{attrs:{span:24}},[e("a-form-model-item",{attrs:{label:"有效状态",prop:"status"}},[e("j-dict-select-tag",{attrs:{dictCode:"bu_valid_status"},model:{value:t.model.status,callback:function(e){t.$set(t.model,"status",e)},expression:"model.status"}})],1)],1),e("a-col",{attrs:{span:24}},[e("a-form-model-item",{attrs:{label:"是否主面板",prop:"isMain"}},[e("a-switch",{on:{change:t.changeIsMain},model:{value:t.isMain,callback:function(e){t.isMain=e},expression:"isMain"}})],1)],1),e("a-col",{attrs:{span:24}},[e("a-form-model-item",{attrs:{label:"应用范围",prop:"layoutScope"}},[e("j-dict-select-tag",{attrs:{"trigger-change":!0,dictCode:"bu_layout_scope"},on:{change:t.changeScope},model:{value:t.model.layoutScope,callback:function(e){t.$set(t.model,"layoutScope",e)},expression:"model.layoutScope"}})],1)],1),e("a-col",{attrs:{span:24}},[e("a-form-model-item",{attrs:{label:"所属人员",prop:"byUserId"}},[e("div",{on:{click:function(e){return t.showUserModal()}}},[e("a-select",{ref:"userSelect",attrs:{placeholder:"请选择人员",open:!1},model:{value:t.model.byUserName,callback:function(e){t.$set(t.model,"byUserName",e)},expression:"model.byUserName"}},[e("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},on:{click:function(e){return t.showUserModal()}},slot:"suffixIcon"})],1)],1)])],1),e("a-col",{attrs:{span:24}},[e("a-form-model-item",{attrs:{label:"备注"}},[e("a-textarea",{attrs:{"auto-size":{minRows:3,maxRows:5}},model:{value:t.model.layoutDesc,callback:function(e){t.$set(t.model,"layoutDesc",e)},expression:"model.layoutDesc "}})],1)],1)],1)],1),e("user-list",{ref:"userSelectModal",attrs:{multiple:!1},on:{ok:t.onUserSelect}})],1)},o=[],l=a("b245"),n=a("bebf"),s=a("4ec3"),r={name:"edit",components:{UserList:l["default"]},data:function(){return{visible:!1,isMain:!1,model:{},rules:{layoutCode:[{required:!0,message:"请输入布局编码",trigger:"blur"},{validator:this.validateCode,trigger:"change"},{min:3,max:25,message:"编码长度为3-25个字符",trigger:"blur"}],layoutName:[{required:!0,message:"请输入布局名称",trigger:"blur"},{min:2,max:16,message:"名称长度为2-16个字符",trigger:"blur"}],layoutScope:[{required:!0,message:"请选择应用范围",trigger:"blur"}],byUserId:[{required:!1,message:"请选择所属用户",trigger:"blur"}]}}},methods:{showModal:function(t){this.model=t?Object.assign({},t):{byUserId:"",byUserName:"",id:"",isMain:0,layoutCode:"",layoutDesc:"",layoutName:"",layoutScope:0,status:1,layoutWidgetsList:[]},this.visible=!0},handleOk:function(){var t=this;this.$refs.form.validate((function(e){e&&Object(n["f"])(t.model).then((function(e){e.success?(t.$message.success("保存成功"),t.$emit("ok"),t.visible=!1):t.$message.error("保存失败")}))}))},changeIsMain:function(){this.isMain?this.model.isMain=1:this.model.isMain=0},showUserModal:function(){this.$refs.userSelectModal.showModal()},onUserSelect:function(t){t.length?(this.model.byUserId=t[0].id,this.model.byUserName=t[0].realname):(this.model.byUserId=null,this.model.byUserName=null)},changeScope:function(t){this.rules.byUserId[0].required=0!==t},validateCode:function(t,e,a){var i={tableName:"sys_layouts",fieldName:"layout_code",fieldVal:e,dataId:this.model.id,filterFields:[{name:"layout_scope",val:this.model.layoutScope}]};Object(s["m"])(i).then((function(t){t.success?a():a(new Error("布局编码重复"))}))}}},u=r,d=a("2877"),c=Object(d["a"])(u,i,o,!1,null,"43e76603",null);e["default"]=c.exports},"94d7":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{title:"布局设置",centered:"",width:"100%",dialogClass:"fullDialog",visible:t.visible,destroyOnClose:!0},on:{ok:t.handleOk,cancel:function(e){t.visible=!1}}},[e("na-splitter",{staticStyle:{height:"calc(100%)"},attrs:{defaultSize:200}},[e("div",{staticStyle:{"overflow-y":"auto","overflow-x":"hidden"},attrs:{slot:"left-panel"},slot:"left-panel"},[e("div",{staticStyle:{padding:"10px","padding-left":"0px"}},[e("a-input-search",{staticStyle:{width:"100%"},attrs:{placeholder:"部件搜索"},on:{search:t.onSearch},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}})],1),e("div",{staticStyle:{padding:"10px","padding-left":"0px"}},t._l(t.widgets,(function(a){return a.hidden?t._e():e("div",{key:a.id,staticClass:"droppable-element",attrs:{id:a.id,draggable:"true",unselectable:"on"},on:{drag:t.drag,dragend:t.dragend}},[e("div",{staticStyle:{"line-height":"20px","font-weight":"bold"},attrs:{title:a.widgetName}},[e("a-icon",{style:{fontSize:"16px",color:"#08c"},attrs:{type:"ant-design"}}),t._v(" "+t._s(t.subStringBylen(a.widgetName,8))+" ")],1),e("div",{staticStyle:{color:"#cccccc"},attrs:{title:a.widgetDesc}},[t._v(t._s(t.subStringBylen(a.widgetDesc,10)))])])})),0)]),e("div",{staticStyle:{"padding-left":"5px","padding-right":"3px",height:"calc(100%)"},attrs:{slot:"right-panel"},slot:"right-panel"},[e("div",{attrs:{id:"content"}},[e("grid-layout",{ref:"gridlayout",attrs:{layout:t.layouts,"col-num":t.colNum,"row-height":20,autoSize:!0,"is-draggable":!0,"is-resizable":!0,responsive:!1,"prevent-collision":!0,"vertical-compact":!1,"use-css-transforms":!0},on:{"update:layout":function(e){t.layouts=e}}},t._l(t.layouts,(function(a){return e("grid-item",{key:a.i,attrs:{x:a.x,y:a.y,w:a.w,h:a.h,i:a.i}},[e("na-card",{staticStyle:{width:"100%",height:"100%"}},[e("div",{attrs:{slot:"title"},slot:"title"},[t.editTitle||t.editLayoutIndex===a.i?t._e():e("span",{on:{click:function(e){return e.stopPropagation(),t.editLayoutTitle(a)}}},[t._v(t._s(a.extInfo.title))]),t.editTitle&&t.editLayoutIndex===a.i?e("a-input",{staticStyle:{width:"60%"},attrs:{placeholder:"请输入"},on:{pressEnter:function(e){return e.stopPropagation(),t.doneEditItem.apply(null,arguments)}},model:{value:a.extInfo.title,callback:function(e){t.$set(a.extInfo,"title",e)},expression:"item.extInfo.title"}}):t._e()],1),e("div",{attrs:{slot:"extra"},slot:"extra"},[e("a",{attrs:{href:"javascript:void(0)",title:"移除该部件"},on:{click:function(e){return e.stopPropagation(),t.removeLayoutWidget(a)}}},[t._v("X")])]),e(a.viewComponent,{tag:"component"})],1)],1)})),1)],1)])])],1)},o=[],l=a("bebf"),n=a("ca00"),s=a("7be8"),r={x:null,y:null},u={x:null,y:null,w:1,h:1,i:null},d={name:"edit",components:{GridLayout:s["GridLayout"],GridItem:s["GridItem"]},data:function(){return{visible:!1,colNum:100,editTitle:!1,editLayoutIndex:null,searchText:"",layoutInfo:null,layouts:[],widgets:[]}},beforeMount:function(){this.getWidgets()},mounted:function(){document.addEventListener("dragover",(function(t){r.x=t.clientX,r.y=t.clientY}),!1)},methods:{editLayoutTitle:function(t){this.editTitle=!0,this.editLayoutIndex=t.i},doneEditItem:function(){this.editTitle=!1,this.editLayoutIndex=""},removeLayoutWidget:function(t){var e=this;this.layouts.forEach((function(a,i){a.i===t.i&&e.layouts.splice(i,1)}))},onSearch:function(){var t=this;this.widgets.forEach((function(e){t.searchText?e.widgetName.indexOf(t.searchText)>-1?e.hidden=!1:e.hidden=!0:e.hidden=!1}))},getWidgets:function(){var t=this;Object(l["e"])({pageNo:1,pageSize:1e5,status:1}).then((function(e){e.success?t.widgets=e.result.records:t.$message.error("查询部件失败")}))},getLayoutInfo:function(t){var e=this;Object(l["b"])({id:t}).then((function(t){t.success?(e.layoutInfo=t.result,e.initLayoutWidgets()):e.$message.error("加载部件信息失败")}))},trimStart:function(t){var e=new RegExp("^/*");return t.replace(e,"")},initLayoutWidgets:function(){var t=this;this.layoutInfo.layoutWidgetsList&&(this.layouts=[],this.layoutInfo.layoutWidgetsList.forEach((function(e){t.layouts.push({x:e.xPos,y:e.yPos,w:e.defWidth,h:e.defHeight,i:e.id,viewComponent:function(i){return Promise.all([a.e("chunk-2d0ea0c7"),a.e("chunk-1fa43c28"),a.e("chunk-5948b475"),a.e("chunk-d97b72b4"),a.e("chunk-26fa21ae")]).then(function(){var o=[a("692e")("./"+t.trimStart(e.componentPath)+".vue")];i.apply(null,o)}.bind(this)).catch(a.oe)},extInfo:e})})))},showModal:function(t){t?this.getLayoutInfo(t):this.layoutInfo={byUserId:"",byUserName:"",id:"",isMain:0,layoutCode:"",layoutDesc:"",layoutName:"",layoutScope:0,layoutWidgetsList:[{componentPath:"",defHeight:0,defWidth:0,id:"",isStatic:0,layoutId:"",moreUrl:"",status:0,title:"",widgetCategory:"",widgetCategoryName:"",widgetDesc:"",widgetId:"",widgetName:"",xPos:0,xpos:0,yPos:0,ypos:0}],status:0},this.visible=!0},handleOk:function(){var t=this;this.visible=!1;var e=[];this.layouts.forEach((function(t){var a=Object.assign({},t.extInfo);a.xPos=t.x,a.yPos=t.y,a.defWidth=t.w,a.defHeight=t.h,e.push(a)})),this.layoutInfo.layoutWidgetsList=e,Object(l["f"])(this.layoutInfo).then((function(e){e.success?(t.$message.success("保存成功"),t.$emit("ok"),t.visible=!1):t.$message.error("保存失败")}))},drag:function(t){var e=this,i=document.getElementById("content").getBoundingClientRect(),o=!1;if(r.x>i.left&&r.x<i.right&&r.y>i.top&&r.y<i.bottom&&(o=!0),!0===o&&-1===this.layouts.findIndex((function(t){return"drop"===t.i}))){var l=this.widgets.filter((function(e){return e.id===t.target.id}))[0];if(!l)return void(o=!1);this.layouts.push({x:2*this.layouts.length%(this.colNum||12),y:this.layouts.length+(this.colNum||12),w:1,h:1,i:"drop",viewComponent:function(t){return Promise.all([a.e("chunk-2d0ea0c7"),a.e("chunk-1fa43c28"),a.e("chunk-5948b475"),a.e("chunk-d97b72b4"),a.e("chunk-26fa21ae")]).then(function(){var i=[a("692e")("./"+e.trimStart(l.componentPath)+".vue")];t.apply(null,i)}.bind(this)).catch(a.oe)},extInfo:{componentPath:l.componentPath,defHeight:l.defHeight,defWidth:l.defWidth,id:Object(n["a"])(),isStatic:0,layoutId:"",moreUrl:l.moreUrl,status:0,title:l.widgetName,widgetId:l.id}})}var s=this.layouts.findIndex((function(t){return"drop"===t.i}));if(-1!==s){try{this.$refs.gridlayout.$children[this.layouts.length].$refs.item.style.display="none"}catch(h){}var d=this.$refs.gridlayout.$children[s];d.dragging={top:r.y-i.top,left:r.x-i.left};var c=d.calcXY(r.y-i.top,r.x-i.left);!0===o&&(this.$refs.gridlayout.dragEvent("dragstart","drop",c.x,c.y,1,1),u.i=String(s),u.x=this.layouts[s].x,u.y=this.layouts[s].y),!1===o&&(this.$refs.gridlayout.dragEvent("dragend","drop",c.x,c.y,1,1),this.layouts=this.layouts.filter((function(t){return"drop"!==t.i})))}},dragend:function(t){var e=document.getElementById("content").getBoundingClientRect(),a=!1;if(r.x>e.left&&r.x<e.right&&r.y>e.top&&r.y<e.bottom&&(a=!0),!0===a){var i=this.layouts.filter((function(t){return"drop"===t.i}))[0];this.$refs.gridlayout.dragEvent("dragend","drop",u.x,u.y,1,1),this.layouts=this.layouts.filter((function(t){return"drop"!==t.i})),this.layouts.push({x:u.x,y:u.y,w:i.extInfo.defWidth,h:i.extInfo.defHeight,i:i.extInfo.id,viewComponent:i.viewComponent,extInfo:i.extInfo});try{this.$refs.gridLayout.$children[this.layouts.length].$refs.item.style.display="block"}catch(o){}}},subStringBylen:function(t,e){var a=Object(n["q"])(t);return a>e?Object(n["r"])(t,e,!0)+"...":t}}},c=d,h=(a("3979"),a("2877")),f=Object(h["a"])(c,i,o,!1,null,"1c1fd9e8",null);e["default"]=f.exports},9527:function(t,e,a){},b245:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{width:"85%",title:"人员选择",visible:t.visible,confirmLoading:t.confirmLoading,cancelText:"关闭",bodyStyle:{height:"70vh"},destroyOnClose:!0},on:{ok:t.handleOk,cancel:t.handleCancel}},[e("a-row",[e("a-col",{attrs:{md:4,sm:24}},[e("div",{staticStyle:{height:"calc(70vh - 20px)","border-right":"1px solid #e3e1e1","margin-right":"15px"}},[t.treeData&&t.treeData.length>0?e("a-tree",{staticClass:"limitHeight",attrs:{defaultSelectedKeys:[t.queryParam.depId],defaultExpandAll:!0,"tree-data":t.treeData},on:{select:t.onSelect}}):t._e()],1)]),e("a-col",{attrs:{md:20,sm:24}},[e("div",{staticClass:"table-page-search-wrapper"},[e("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.findList.apply(null,arguments)}}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:5,sm:24}},[e("a-form-item",{attrs:{label:"账号"}},[e("a-input",{attrs:{placeholder:"请输入用户账号"},model:{value:t.queryParam.username,callback:function(e){t.$set(t.queryParam,"username",e)},expression:"queryParam.username"}})],1)],1),e("a-col",{attrs:{md:5,sm:24}},[e("a-form-item",{attrs:{label:"真实名字"}},[e("a-input",{attrs:{placeholder:"请输入真实名字"},model:{value:t.queryParam.realname,callback:function(e){t.$set(t.queryParam,"realname",e)},expression:"queryParam.realname"}})],1)],1),e("a-col",{attrs:{md:6,sm:24}},[e("a-form-item",{attrs:{label:"手机号码"}},[e("a-input",{attrs:{placeholder:"请输入手机号码"},model:{value:t.queryParam.phone,callback:function(e){t.$set(t.queryParam,"phone",e)},expression:"queryParam.phone"}})],1)],1),e("a-col",{attrs:{md:6,sm:24}},[e("a-form-item",{attrs:{label:"角色"}},[e("j-dict-select-tag",{attrs:{triggerChange:!0,dictCode:"sys_role,role_name,id",placeholder:"选择角色"},model:{value:t.queryParam.roleId,callback:function(e){t.$set(t.queryParam,"roleId",e)},expression:"queryParam.roleId"}})],1)],1),e("a-col",{attrs:{md:2,sm:8}},[e("a-button",{on:{click:t.findList}},[t._v("查询")])],1)],1)],1)],1),e("div",{staticStyle:{height:"calc(70vh - 130px)"}},[e("vxe-table",{ref:"listTable",staticStyle:{height:"calc(70vh - 130px)"},attrs:{border:"",align:t.allAlign,data:t.tableData,"max-height":"100%","show-overflow":"tooltip","radio-config":t.multiple?{}:{trigger:"row"},"checkbox-config":t.multiple?{trigger:"row",highlight:!0,range:!0}:{},"edit-config":{trigger:"manual",mode:"row"}}},[t.multiple?e("vxe-table-column",{attrs:{type:"checkbox",width:"5%"}}):e("vxe-table-column",{attrs:{type:"radio",width:"5%"}}),e("vxe-table-column",{attrs:{field:"workNo",title:"工号",width:"100",align:"center"}}),e("vxe-table-column",{attrs:{field:"username",title:"用户账号",width:"150",align:"left","header-align":"center"}}),e("vxe-table-column",{attrs:{field:"realname",title:"用户名字",width:"100",align:"left","header-align":"center"}}),e("vxe-table-column",{attrs:{field:"roleNames",title:"角色","min-width":"180",align:"left","header-align":"center"}}),e("vxe-table-column",{attrs:{field:"sex_dictText",title:"性别",width:"80"}}),e("vxe-table-column",{attrs:{field:"phone",title:"手机号码",width:"120"}}),e("vxe-table-column",{attrs:{field:"orgCode",title:"部门",width:"120",align:"left","header-align":"center"}}),e("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",width:"80"}})],1),e("vxe-pager",{attrs:{perfect:"","current-page":t.queryParam.pageNo,"page-size":t.queryParam.pageSize,total:t.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(e){return t.$set(t.queryParam,"pageNo",e)},"update:current-page":function(e){return t.$set(t.queryParam,"pageNo",e)},"update:pageSize":function(e){return t.$set(t.queryParam,"pageSize",e)},"update:page-size":function(e){return t.$set(t.queryParam,"pageSize",e)},"page-change":t.handlePageChange}})],1)])],1)],1)},o=[],l=a("8fad"),n={name:"UserList",props:{multiple:{type:Boolean,default:!0},depId:{type:String,default:""}},data:function(){return{queryParam:{username:"",realname:"",phone:"",orgCode:"",roleId:void 0,pageNo:1,pageSize:10},allAlign:"center",totalResult:0,tableData:[],visible:!1,confirmLoading:!1,treeData:[]}},watch:{depId:function(t){this.$set(this.queryParam,"depId",t||"")}},mounted:function(){this.$set(this.queryParam,"depId",this.depId||"")},methods:{showModal:function(){this.visible=!0,this.findList(),this.getTreeList()},getTreeList:function(){var t=this;Object(l["yb"])().then((function(e){e.success&&(t.treeData=e.result)}))},onSelect:function(t,e){if(t.length){var a=e.node.dataRef;this.queryParam.depId=a.id,this.findList()}else this.queryParam.orgCode="",this.findList()},findList:function(){var t=this;this.loading=!0,Object(l["uc"])(this.queryParam).then((function(e){t.loading=!1,e.success?(t.totalResult=e.result.total,t.tableData=e.result.records):t.$message.error("加载用户数据失败")})).catch((function(e){t.$message.error("加载用户数据异常")})).finally((function(){}))},handlePageChange:function(t){var e=t.currentPage,a=t.pageSize;this.queryParam.pageNo=e,this.queryParam.pageSize=a,this.findList()},handleOk:function(){var t=[];this.multiple?t=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&t.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",t),this.visible=!1},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,Object.assign(this.$data,this.$options.data())}}},s=n,r=(a("f76d"),a("2877")),u=Object(r["a"])(s,i,o,!1,null,"4aa7956f",null);e["default"]=u.exports},bebf:function(t,e,a){"use strict";a.d(e,"e",(function(){return n})),a.d(e,"f",(function(){return s})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return u})),a.d(e,"b",(function(){return d})),a.d(e,"d",(function(){return c}));var i=a("0fea"),o=a("4328"),l=a.n(o),n=function(t){return Object(i["d"])("/layout/widgets/page",t)},s=function(t){return Object(i["j"])("/layout/layouts/save",t)},r=function(t){return Object(i["d"])("/layout/layouts/page",t)},u=function(t){return Object(i["j"])("/layout/layouts/delete",l.a.stringify(t))},d=function(t){return Object(i["d"])("/layout/layouts/get",t)},c=function(){return Object(i["d"])("/layout/layouts/get/current-user-main")}},f76d:function(t,e,a){"use strict";a("9527")}}]);