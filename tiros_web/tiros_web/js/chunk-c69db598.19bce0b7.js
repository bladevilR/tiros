(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c69db598","chunk-8ea2f18c","chunk-65f784c8","chunk-6ffc3d02","chunk-6b918856","chunk-371ab49c","chunk-29096d72","chunk-24cb054c","chunk-2293043d","chunk-c68df1ca","chunk-be46b5cc","chunk-78856620","chunk-ce9d7666","chunk-2d0a4bcd"],{"085d":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchQuery.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"名称"}},[t("a-input",{attrs:{placeholder:"名称或编码",allowClear:""},model:{value:e.queryParam.title,callback:function(t){e.$set(e.queryParam,"title",t)},expression:"queryParam.title"}})],1)],1),t("a-col",{attrs:{md:4,sm:24}},[t("a-form-item",{attrs:{label:"状态"}},[t("j-dict-select-tag",{attrs:{dictCode:"bu_effective"},model:{value:e.queryParam.status,callback:function(t){e.$set(e.queryParam,"status",t)},expression:"queryParam.status"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"上级"}},[t("a-tree-select",{attrs:{"tree-data-simple-mode":"","allow-clear":"","tree-data":e.selectTreeNode,placeholder:"请选择","load-data":e.loadSelectNodeMethod},model:{value:e.queryParam.id,callback:function(t){e.$set(e.queryParam,"id",t)},expression:"queryParam.id"}})],1)],1),t("a-col",{attrs:{md:10,sm:24}},[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-space",[t("a-button",{on:{click:e.searchQuery}},[e._v("查询")])],1)],1)])],1)],1)],1),t("a-spin",{attrs:{spinning:e.loading}},[t("div",{staticClass:"tableHeight",staticStyle:{height:"calc(100vh - 290px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(100vh - 290px)"},attrs:{border:"",resizable:"","row-id":"id",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","max-height":"100%","checkbox-config":{trigger:"row",highlight:!0,checkStrictly:!0},"edit-config":{trigger:"manual",mode:"row"},"tree-config":{lazy:!0,children:"children",hasChild:"hasChildren",loadMethod:e.loadChildrenMethod}}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"40",fixed:"left"}}),t("vxe-table-column",{attrs:{field:"assetName",title:"设备名称","tree-node":"",align:"left","header-align":"center","min-width":"120"}}),t("vxe-table-column",{attrs:{field:"assetNo",title:"设备编码",width:"120"}}),t("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",width:"100"}}),t("vxe-table-column",{attrs:{field:"structType_dictText",title:"设备类型",width:"100"}}),t("vxe-table-column",{attrs:{field:"vendor",title:"厂商",width:"120"}}),t("vxe-table-column",{attrs:{field:"brand",title:"品牌",width:"120"}}),t("vxe-table-column",{attrs:{field:"manufNo",title:"出厂编号",width:"120"}}),t("vxe-table-column",{attrs:{field:"model",title:"规格类型","min-width":"140",align:"left","header-align":"center"}})],1)],1)])],1)},i=[],n=a("8fad"),l={name:"TrainAssetInfo",props:["trainNo"],data:function(){return{trainId:"",trainTypeId:"",selectParent:{},queryParam:{code:this.trainNo},allAlign:"center",tableData:[],selectTreeNode:[],selectPid:"",loading:!1}},created:function(){this.findSelectList(),this.findList()},methods:{findList:function(){var e=this;this.loading=!0,Object(n["ic"])(this.queryParam).then((function(t){t.success&&(e.tableData=t.result)})).finally((function(){return e.loading=!1}))},findSelectList:function(){var e=this,t={code:this.trainNo};Object(n["ic"])(t).then((function(t){t.success&&(e.loading=!1,e.selectTreeNode=t.result.map((function(t){return e.genSelectTreeNode(t)})))}))},loadChildrenMethod:function(e){var t=this,a=e.row,r={code:this.trainNo,id:a.id,searchText:this.queryParam.searchText,status:this.queryParam.status};return new Promise((function(e){Object(n["ic"])(r).then((function(a){a.success?e(a.result):t.$message.error("".concat(a.msg))}))}))},loadSelectNodeMethod:function(e){var t=this,a={code:this.trainId,id:e.dataRef.id};return new Promise((function(e){Object(n["ic"])(a).then((function(e){if(e.success)e.result.map((function(e){t.selectTreeNode=t.selectTreeNode.concat(t.genSelectTreeNode(e))}));else t.$message.error(e.message)})),e()}))},genSelectTreeNode:function(e){return{id:e.id,pId:e.parentId,value:e.id,title:e.assetName,isLeaf:!e.hasChildren}},searchQuery:function(){this.findList()},loadData:function(){this.queryParam.id="",this.findSelectList(),this.findList()}}},s=l,o=a("2877"),c=Object(o["a"])(s,r,i,!1,null,"ed7937d8",null);t["default"]=c.exports},"2cb5":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"90%",centered:"",title:e.title,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",destroyOnClose:!0,bodyStyle:{height:"80vh"}},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchQuery.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:7,sm:24}},[t("a-form-item",{attrs:{label:"名称"}},[t("a-input",{attrs:{placeholder:"名称或编码","allow-clear":""},model:{value:e.queryParam.searchText,callback:function(t){e.$set(e.queryParam,"searchText",t)},expression:"queryParam.searchText"}})],1)],1),t("a-col",{attrs:{md:7,sm:24}},[t("a-form-item",{attrs:{label:"状态"}},[t("j-dict-select-tag",{attrs:{dictCode:"bu_enable"},model:{value:e.queryParam.status,callback:function(t){e.$set(e.queryParam,"status",t)},expression:"queryParam.status"}})],1)],1),t("a-col",{attrs:{md:3,sm:12}},[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-button",{on:{click:e.searchQuery}},[e._v("查询")])],1)])],1)],1)],1),t("div",{staticStyle:{height:"calc(80vh - 85px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(80vh - 85px)"},attrs:{border:"","max-height":"100%","row-id":"id",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","radio-config":e.multiple?{}:{trigger:"row",checkMethod:e.checkRadioMethod},"checkbox-config":e.multiple?{trigger:"row",highlight:!0,checkMethod:e.checkRadioMethod}:{},"tree-config":{lazy:!0,children:"children",hasChild:"hasChildren",loadMethod:e.loadChildrenMethod}}},[e.multiple?t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}):t("vxe-table-column",{attrs:{type:"radio",width:"40"}}),t("vxe-table-column",{attrs:{field:"name",title:"名称","tree-node":"",align:"left"}}),t("vxe-table-column",{attrs:{align:"left","header-align":"center",field:"code",title:"编码",width:"15%"}}),t("vxe-table-column",{attrs:{field:"structType_dictText",title:"类型",width:"10%"}}),t("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",width:"10%"}}),t("vxe-table-column",{attrs:{field:"placeCode",title:"位置编码",width:"15%"}}),t("vxe-table-column",{attrs:{field:"placeDesc",title:"位置描述",width:"15%"}})],1)],1)])},i=[],n=a("8fad"),l={name:"TrainAssetType",props:{trainTypeId:{type:String,default:""},parentId:{type:String,default:null},multiple:{type:Boolean,default:!0},title:{type:String,default:"设备类型选择"},canSelectType:{type:Array,default:function(){return[1,2,3,4]}}},data:function(){return{queryParam:{trainTypeId:"",id:"",searchText:"",status:null,structType:null},allAlign:"center",tableData:[],treeData:[],selectParent:"",visible:!1,confirmLoading:!1}},mounted:function(){},methods:{showModal:function(){this.visible=!0,this.queryParam.trainTypeId=this.trainTypeId,this.findList()},handleOk:function(){var e=[];this.multiple?e=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&e.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",e),this.visible=!1},handleCancel:function(){this.$emit("cancel"),this.close()},close:function(){this.$emit("close"),this.visible=!1},findList:function(){var e=this;this.loading=!0,this.parentId&&(this.queryParam.id=this.parentId),this.selectParent&&(this.queryParam.id=this.selectParent),Object(n["Qd"])(this.queryParam).then((function(t){t.success&&(e.loading=!1,e.tableData=t.result)}))},findSelectList:function(){var e=this,t={id:this.parentId,trainTypeId:this.trainTypeId};this.parentId&&(t.id=this.parentId),Object(n["Qd"])(t).then((function(t){t.success&&(e.loading=!1,e.treeData=t.result.map((function(t){return e.genSelectTreeNode(t)})))}))},loadChildrenMethod:function(e){var t=this,a=e.row,r={trainTypeId:this.trainTypeId,id:a.id};return new Promise((function(e){Object(n["Qd"])(r).then((function(a){a.success?e(a.result):t.$message.error("".concat(a.msg))}))}))},loadSelectNodeMethod:function(e){var t=this,a={trainTypeId:this.trainTypeId,id:e.dataRef.id,searchText:this.queryParam.searchText,status:this.queryParam.status,structType:this.queryParam.structType};return new Promise((function(e){Object(n["Qd"])(a).then((function(e){e.success?e.result.map((function(e){t.treeData=t.treeData.concat(t.genSelectTreeNode(e))})):t.$message.warning(e.message)})),e()}))},genSelectTreeNode:function(e){return{id:e.id,pId:e.parentId,value:e.id,title:e.name,isLeaf:!e.hasChildren}},searchQuery:function(){this.findList()},checkRadioMethod:function(e){var t=e.row;return this.canSelectType.indexOf(t.structType)>-1}}},s=l,o=(a("9589"),a("2877")),c=Object(o["a"])(s,r,i,!1,null,"52968c59",null);t["default"]=c.exports},3793:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"bodyWrapper"},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"测点名称"}},[t("a-input",{attrs:{placeholder:"",allowClear:""},model:{value:e.queryParam.measureName,callback:function(t){e.$set(e.queryParam,"measureName",t)},expression:"queryParam.measureName"}})],1)],1),t("a-col",{attrs:{md:6,sm:8}},[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-space",[t("a-button",{on:{click:e.findList}},[e._v("查询")])],1)],1)])],1)],1)],1),t("a-spin",{attrs:{spinning:e.loading}},[t("div",{staticStyle:{height:"calc(100vh - 290px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(100vh - 340px)"},attrs:{border:"","max-height":"80%",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","edit-config":{trigger:"manual",mode:"row"}}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),t("vxe-table-column",{attrs:{field:"trainName",title:"车辆",width:"100"}}),t("vxe-table-column",{attrs:{field:"trainAssetName",title:"设备",width:"120"}}),t("vxe-table-column",{attrs:{field:"measureName",title:"测量项名称","min-width":"100"}}),t("vxe-table-column",{attrs:{field:"values",title:"测量值",width:"100",align:"right","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"workUser",title:"测量人",width:"100"}}),t("vxe-table-column",{attrs:{field:"workTime",title:"测量日期","min-width":"80"}}),t("vxe-table-column",{attrs:{field:"alertMessage",title:"预警信息","min-width":"100","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{field:"alertReason",title:"预警原因","min-width":"100","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{field:"fixValues",title:"修正值",width:"100",align:"right","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"tools",title:"测量器具",width:"100"}})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1)])],1)},i=[],n=a("3bcd"),l={name:"MeasurementRecord",props:["trainNo"],data:function(){return{queryParam:{trainNo:this.trainNo,measureName:"",pageNo:1,pageSize:10},totalResult:0,allAlign:"center",tableData:[],loading:!1}},created:function(){this.findList()},methods:{findList:function(){var e=this;this.loading=!0,Object(n["u"])(this.queryParam).then((function(t){t.success&&(e.totalResult=t.result.total,e.tableData=t.result.records)})).finally((function(){return e.loading=!1}))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()}}},s=l,o=a("2877"),c=Object(o["a"])(s,r,i,!1,null,"3c388e1c",null);t["default"]=c.exports},"3bcd":function(e,t,a){"use strict";a.d(t,"P",(function(){return i})),a.d(t,"N",(function(){return n})),a.d(t,"F",(function(){return l})),a.d(t,"J",(function(){return s})),a.d(t,"t",(function(){return o})),a.d(t,"i",(function(){return b})),a.d(t,"j",(function(){return v})),a.d(t,"h",(function(){return x})),a.d(t,"g",(function(){return w})),a.d(t,"l",(function(){return y})),a.d(t,"c",(function(){return P})),a.d(t,"e",(function(){return k})),a.d(t,"f",(function(){return N})),a.d(t,"d",(function(){return C})),a.d(t,"b",(function(){return T})),a.d(t,"x",(function(){return q})),a.d(t,"z",(function(){return I})),a.d(t,"w",(function(){return S})),a.d(t,"H",(function(){return O})),a.d(t,"I",(function(){return D})),a.d(t,"y",(function(){return R})),a.d(t,"A",(function(){return _})),a.d(t,"B",(function(){return $})),a.d(t,"M",(function(){return j})),a.d(t,"r",(function(){return L})),a.d(t,"E",(function(){return M})),a.d(t,"k",(function(){return u})),a.d(t,"D",(function(){return m})),a.d(t,"u",(function(){return d})),a.d(t,"L",(function(){return c})),a.d(t,"a",(function(){return h})),a.d(t,"K",(function(){return z})),a.d(t,"m",(function(){return A})),a.d(t,"p",(function(){return F})),a.d(t,"o",(function(){return Y})),a.d(t,"G",(function(){return f})),a.d(t,"v",(function(){return p})),a.d(t,"C",(function(){return g})),a.d(t,"n",(function(){return J})),a.d(t,"q",(function(){return B})),a.d(t,"s",(function(){return H})),a.d(t,"O",(function(){return Q}));var r=a("0fea"),i=function(e){return Object(r["d"])("/produce/train/history/tree/line-train",e)},n=function(e){return Object(r["d"])("/produce/train/history/maximo-asset/list-child",e)},l=function(e){return Object(r["d"])("/produce/train/history/train/get",e)},s=function(e){return Object(r["d"])("/produce/train/history/train/period",e)},o=function(e){return Object(r["d"])("/produce/train/history/maximo-asset/get",e)},c=function(e){return Object(r["d"])("/produce/train/history/work/page",e)},d=function(e){return Object(r["d"])("/produce/train/history/measure/page",e)},u=function(e){return Object(r["d"])("/produce/train/history/fault/page",e)},m=function(e){return Object(r["d"])("/produce/train/history/forms/page",e)},h=function(e){return Object(r["d"])("/produce/train/history/change/page",e)},f=function(e){return Object(r["d"])("/produce/train/history/train/period",e)},p=function(e){return Object(r["d"])("/produce/train/history/workLeaveRecord/page",e)},g=function(e){return Object(r["d"])("/produce/train/history/workRectify/page",e)},b=function(e){return Object(r["d"])("/produce/fault/detail/count",e)},v=function(e){return Object(r["d"])("/produce/fault/detail/page",e)},y=function(e){return Object(r["d"])("/produce/fault/statistics",e)},x=function(e){return Object(r["j"])("/produce/fault/compare",e)},w=function(e){return Object(r["d"])("/produce/fault/time-effect/data",e)},P=function(e){return Object(r["d"])("/produce/cost/detail/count",e)},k=function(e){return Object(r["d"])("/produce/cost/detail/page",e)},N=function(e){return Object(r["j"])("/produce/cost/statistics",e)},C=function(e){return Object(r["d"])("/produce/cost/compare/count-6year",e)},T=function(e){return Object(r["j"])("/produce/cost/compare",e)},q=function(e){return Object(r["d"])("/produce/plan/list",e)},I=function(e){return Object(r["d"])("/produce/plan/task/listByPlanId/".concat(e))},S=function(e){return Object(r["d"])("/produce/plan/get/".concat(e))},O=function(e){return Object(r["d"])("/serialPlan/plan/get/".concat(e))},D=function(e){return Object(r["d"])("/produce/plan/task/get/".concat(e))},R=function(e){return Object(r["d"])("/produce/plan/regu/list/".concat(e))},_=function(e){return Object(r["d"])("/produce/plan/train-struct/list/".concat(e))},$=function(e){return Object(r["d"])("/produce/plan/train-struct/orders/".concat(e))},j=function(e){return Object(r["d"])("/workshop/list",e)},L=function(e){return Object(r["d"])("/produce/workshop/fault/latest",e)},M=function(e){return Object(r["d"])("/produce/workshop/workstation/list",e)},z=function(e){return Object(r["d"])("/produce/workshop/train-track",e)},A=function(e){return Object(r["d"])("/produce/kpi/group",e)},F=function(e){return Object(r["d"])("/produce/kpi/user",e)},Y=function(e){return Object(r["d"])("/produce/kpi/plan/list",e)},J=function(e){return Object(r["d"])("/produce/kpi/plan/get",e)},B=function(e){return Object(r["d"])("/serialPlan/plan/material/lack",e)},H=function(e){return Object(r["d"])("/board/plan-group-statistic/get-last-working-plan",e)},Q=function(e){return Object(r["d"])("/board/plan-group-statistic/list",e)}},4929:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"bodyWrapper"},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"工单"}},[t("a-input",{attrs:{placeholder:"工单编号或名称",allowClear:""},model:{value:e.queryParam.searchText,callback:function(t){e.$set(e.queryParam,"searchText",t)},expression:"queryParam.searchText"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"状态"}},[t("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_group_order_status"},model:{value:e.queryParam.status,callback:function(t){e.$set(e.queryParam,"status",t)},expression:"queryParam.status"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"工单日期"}},[t("a-date-picker",{model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)],1),t("a-col",{attrs:{md:6,sm:8}},[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-space",[t("a-button",{on:{click:e.findList}},[e._v("查询")])],1)],1)])],1)],1)],1),t("a-spin",{attrs:{spinning:e.loading}},[t("div",{staticStyle:{height:"calc(100vh - 290px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(100vh - 340px)"},attrs:{border:"","max-height":"80%",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","edit-config":{trigger:"manual",mode:"row"}}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),t("vxe-table-column",{attrs:{field:"orderCode",title:"工单编号",width:"120"}}),t("vxe-table-column",{attrs:{field:"orderName",title:"工单名称","min-width":"120"}}),t("vxe-table-column",{attrs:{field:"orderType_dictText",title:"工单类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.orderType_dictText||a.orderType)+" ")]}}])}),t("vxe-table-column",{attrs:{field:"groupName",title:"作业工班",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.groupName||a.groupId)+" ")]}}])}),t("vxe-table-column",{attrs:{field:"lineName",title:"线路",width:"100"}}),t("vxe-table-column",{attrs:{field:"trainName",title:"车号",width:"100"}}),t("vxe-table-column",{attrs:{field:"startTime",title:"计划开始",width:"100"}}),t("vxe-table-column",{attrs:{field:"planName",title:"列计划","min-width":"140",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"orderStatus_dictText",title:"工单状态",width:"80"}})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1)])],1)},i=[],n=a("3bcd"),l=a("c1df"),s=a.n(l),o={name:"WorkRecord",props:["trainNo"],data:function(){return{date:null,queryParam:{searchText:"",status:"",workOrderDate:"",trainNo:this.trainNo,pageNo:1,pageSize:10},totalResult:0,allAlign:"center",tableData:[],loading:!1}},created:function(){this.findList()},methods:{findList:function(){var e=this;this.loading=!0,this.date?this.queryParam.workOrderDate=s()(this.date).format("YYYY-MM-DD"):this.queryParam.workOrderDate="",Object(n["L"])(this.queryParam).then((function(t){t.success&&(e.totalResult=t.result.total,e.tableData=t.result.records)})).finally((function(){return e.loading=!1}))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()}}},c=o,d=a("2877"),u=Object(d["a"])(c,r,i,!1,null,"34494231",null);t["default"]=u.exports},"4f27":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,width:800,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:20,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"整改项目"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["changeName",e.validatorRules.changeName],expression:"['changeName', validatorRules.changeName]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入整改项目"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:20,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"整改内容描述"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["changeDesc",e.validatorRules.changeDesc],expression:"['changeDesc', validatorRules.changeDesc]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入整改内容描述"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:20,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"责任部门"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["dept",e.validatorRules.dept],expression:"['dept', validatorRules.dept]",modifiers:{trim:!0}}],attrs:{placeholder:"请选择责任部门",triggerChange:!0,dictCode:"sys_depart,depart_name,id"},on:{select:e.deptChange}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:20,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"责任人"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["dutyManName",e.validatorRules.dutyManName],expression:"['dutyManName', validatorRules.dutyManName]",modifiers:{trim:!0}}],ref:"userSelect",attrs:{placeholder:"请选择责任人",open:!1},on:{focus:e.openUserSelectModal}},[t("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:20,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"整改日期"}},[t("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["changeDate",e.validatorRules.changeDate],expression:"['changeDate', validatorRules.changeDate]",modifiers:{trim:!0}}],attrs:{placeholder:"请选择整改日期"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:20,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"检查日期"}},[t("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["checkDate"],expression:"['checkDate']",modifiers:{trim:!0}}],attrs:{placeholder:"请选择检查日期"}})],1)],1)],1)],1),t("user-list",{ref:"userModalForm",attrs:{multiple:!1},on:{ok:e.addTarget}})],1)],1)},i=[],n=(a("b47d"),a("ca00")),l=a("b245"),s=a("c1df"),o=a.n(s),c={name:"RectifyModal",components:{UserList:l["default"]},props:["exchangeId"],data:function(){return{title:"操作",visible:!1,activeIndex:null,model:{},labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}},dutyMan:"",confirmLoading:!1,form:this.$form.createForm(this),validatorRules:{changeName:{rules:[{required:!0,message:"请输入整改项目名称!"},{max:64,message:"输入长度不能超过64字符!"}]},changeDesc:{rules:[{required:!0,message:"请输入整改内容描述!"},{max:500,message:"输入长度不能超过500字符!"}]},dept:{rules:[{required:!0,message:"请选择责任部门!"}]},dutyManName:{rules:[{required:!0,message:"请选择责任人!"}]},changeDate:{rules:[{required:!0,message:"请选择整改日期!"}]}}}},created:function(){},methods:{deptChange:function(e,t){e&&(this.model.deptName=t.text)},openUserSelectModal:function(){this.$refs.userModalForm.showModal(),this.$refs.userSelect.blur()},addTarget:function(e){Object(n["e"])(e)||(this.dutyMan=e[0].id,this.form.setFieldsValue({dutyManName:e[0].realname}))},add:function(){this.edit({})},edit:function(e,t){var a=this;this.activeIndex=t,this.form.resetFields(),this.model=Object.assign({},e),this.visible=!0,e.id&&(this.dutyMan=e.dutyMan),this.$nextTick((function(){a.form.setFieldsValue({changeName:a.model.changeName,changeDesc:a.model.changeDesc,dept:a.model.dept,deptName:a.model.deptName,dutyManName:a.model.dutyManName,changeDate:o()(a.model.changeDate||void 0),checkDate:o()(a.model.checkDate||void 0)})}))},handleOk:function(){var e=this,t=this;t.form.validateFields((function(a,r){if(!a){e.confirmLoading=!0;var i=Object.assign(t.model,r,{dutyMan:e.dutyMan,changeDate:o()(r.changeDate).format("YYYY-MM-DD"),checkDate:o()(r.checkDate).format("YYYY-MM-DD")});e.$emit("addItem",i,e.activeIndex),e.$message.success("添加成功！"),e.$emit("ok"),e.close(),e.activeIndex=null,e.confirmLoading=!1}}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},d=c,u=a("2877"),m=Object(u["a"])(d,r,i,!1,null,"c5a90dee",null);t["default"]=m.exports},5265:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"bodyWrapper"},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"故障"}},[t("a-input",{attrs:{placeholder:"故障编号或描述",allowClear:""},model:{value:e.queryParam.searchText,callback:function(t){e.$set(e.queryParam,"searchText",t)},expression:"queryParam.searchText"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"发现日期"}},[t("a-date-picker",{model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)],1),t("a-col",{attrs:{md:6,sm:8}},[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-space",[t("a-button",{on:{click:e.findList}},[e._v("查询")])],1)],1)])],1)],1)],1),t("a-spin",{attrs:{spinning:e.loading}},[t("div",{staticStyle:{height:"calc(100vh - 290px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(100vh - 340px)"},attrs:{border:"","max-height":"80%",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","edit-config":{trigger:"manual",mode:"row"}}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),t("vxe-table-column",{attrs:{field:"faultSn",title:"故障编号",width:"140"}}),t("vxe-table-column",{attrs:{field:"fromType_dictText",title:"来源",width:"120"}}),t("vxe-table-column",{attrs:{field:"sysName",title:"故障系统",width:"120"}}),t("vxe-table-column",{attrs:{field:"faultAssetName",title:"故障部件",width:"120"}}),t("vxe-table-column",{attrs:{field:"faultDesc",title:"故障描述","min-width":"120","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{field:"handleTime",title:"处理日期","min-width":"80"}}),t("vxe-table-column",{attrs:{field:"reportUserId",title:"提报人员",width:"120"}}),t("vxe-table-column",{attrs:{field:"reportTime",title:"提报日期","min-width":"80"}}),t("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",width:"80"}})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1)])],1)},i=[],n=a("3bcd"),l=a("c1df"),s=a.n(l),o={name:"FaultRecord",props:["trainNo"],data:function(){return{date:null,queryParam:{trainNo:this.trainNo,searchText:"",happenTime:"",pageNo:1,pageSize:10},totalResult:0,allAlign:"center",tableData:[],loading:!1}},created:function(){this.findList()},methods:{findList:function(){var e=this;this.loading=!0,this.date?this.queryParam.happenTime=s()(this.date).format("YYYY-MM-DD"):this.queryParam.happenTime="",Object(n["k"])(this.queryParam).then((function(t){t.success&&(e.totalResult=t.result.total,e.tableData=t.result.records)})).finally((function(){return e.loading=!1}))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()}}},c=o,d=a("2877"),u=Object(d["a"])(c,r,i,!1,null,"263cd19c",null);t["default"]=u.exports},7237:function(e,t,a){},"7d2a":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-tabs",{attrs:{activeKey:e.activeKey},on:{change:e.changeTab}},[t("a-tab-pane",{key:"1",attrs:{tab:"基本信息"}},[t("train-resume-basic-info",{attrs:{"train-no":e.trainNo,"accept-mileage":e.acceptMileage}})],1),t("a-tab-pane",{key:"2",attrs:{tab:"部件信息"}},[t("train-asset-info",{attrs:{"train-no":e.trainNo}})],1),t("a-tab-pane",{key:"3",attrs:{tab:"测量信息"}},[t("measurement-record",{attrs:{"train-no":e.trainNo}})],1),t("a-tab-pane",{key:"4",attrs:{tab:"故障信息"}},[t("fault-record",{attrs:{"train-no":e.trainNo}})],1),t("a-tab-pane",{key:"5",attrs:{tab:"部件更换"}},[t("replace-record",{attrs:{"train-no":e.trainNo}})],1),t("a-tab-pane",{key:"6",attrs:{tab:"作业表单"}},[t("work-record",{attrs:{"train-no":e.trainNo}})],1)],1)},i=[],n=a("91e6"),l=a("3793"),s=a("5265"),o=a("9c1f"),c=a("4929"),d=a("085d"),u={name:"TrainResumeTab",components:{TrainResumeBasicInfo:n["default"],MeasurementRecord:l["default"],FaultRecord:s["default"],ReplaceRecord:o["default"],WorkRecord:c["default"],TrainAssetInfo:d["default"]},props:["trainNo","acceptMileage"],data:function(){return{activeKey:"1"}},methods:{changeTab:function(e){this.activeKey=e}}},m=u,h=a("2877"),f=Object(h["a"])(m,r,i,!1,null,"eddb653a",null);t["default"]=f.exports},"91e6":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-descriptions",{attrs:{bordered:"",column:3}},[t("a-descriptions-item",{attrs:{label:"车号"}},[e._v(" "+e._s(e.trainInfo.trainNo)+" ")]),t("a-descriptions-item",{attrs:{label:"线路"}},[e._v(" "+e._s(e.trainInfo.lineName)+" ")]),t("a-descriptions-item",{attrs:{label:"车型名称"}},[e._v(" "+e._s(e.trainInfo.trainTypeName)+" ")]),t("a-descriptions-item",{attrs:{label:"编组数"}},[e._v(" "+e._s(e.trainInfo.groupNum)+" ")]),t("a-descriptions-item",{attrs:{label:"走行公里数"}},[e._v(" "+e._s(e.acceptMileage||e.trainInfo.mileage)+"/万公里 ")]),t("a-descriptions-item",{attrs:{label:"厂商名称"}},[e._v(" "+e._s(e.trainInfo.supplierName)+" ")]),t("a-descriptions-item",{attrs:{label:"投入运营日期"}},[e._v(" "+e._s(e.trainInfo.useDate)+" ")]),t("a-descriptions-item",{attrs:{label:"最新更新时间"}},[e._v(" "+e._s(e.trainInfo.updateTime)+" ")]),t("a-descriptions-item",{attrs:{label:"合同编号"}},[e._v(" "+e._s(e.trainInfo.contractNo)+" ")]),t("a-descriptions-item",{attrs:{label:"合同名称"}},[e._v(" "+e._s(e.trainInfo.contractName)+" ")]),t("a-descriptions-item",{attrs:{label:"架大修时间",span:2}},[t("a-steps",{attrs:{"progress-dot":"",current:e.currentStepIndex},scopedSlots:e._u([{key:"progressDot",fn:function(a){var r=a.index,i=a.status,n=a.prefixCls;return t("a-popover",{},[t("template",{slot:"content"},[t("span",[e._v("step "+e._s(r)+" status: "+e._s(i))])]),t("span",{class:"".concat(n,"-icon-dot")})],2)}}])},e._l(e.trainPeriodList,(function(e,a){return t("a-step",{key:a,attrs:{title:e.date,description:e.description}})})),1)],1)],1)},i=[],n=a("3bcd"),l={name:"TrainResumeBasicInfo",props:["trainNo","acceptMileage"],data:function(){return{trainInfo:"",queryParam:{trainNo:this.trainNo},trainPeriodList:[],currentStepIndex:0}},watch:{trainNo:{immediate:!1,handler:function(e){this.queryParam.trainNo=e,this.findTrainInfo()}}},created:function(){this.findTrainInfo()},methods:{findTrainInfo:function(){var e=this;Object(n["F"])(this.queryParam).then((function(t){e.trainInfo=t.result,e.trainInfo.trainNo&&Object(n["J"])({trainNo:e.trainInfo.trainNo}).then((function(t){t.success&&t.result&&(e.trainPeriodList=t.result,e.trainPeriodList.length>0&&e.trainPeriodList.map((function(t,a){t.isCurrent&&!0===t.isCurrent&&(e.currentStepIndex=a)})))}))}))}}},s=l,o=a("2877"),c=Object(o["a"])(s,r,i,!1,null,"ebcc4d26",null);t["default"]=c.exports},9527:function(e,t,a){},9589:function(e,t,a){"use strict";a("7237")},"9c1f":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"bodyWrapper"},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"部件"}},[t("a-input",{attrs:{placeholder:"名称",allowClear:""},model:{value:e.queryParam.assetName,callback:function(t){e.$set(e.queryParam,"assetName",t)},expression:"queryParam.assetName"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"系统"}},[t("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_train_asset_type,name,id"},model:{value:e.queryParam.sysId,callback:function(t){e.$set(e.queryParam,"sysId",t)},expression:"queryParam.sysId"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"更换日期"}},[t("a-date-picker",{model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)],1),t("a-col",{attrs:{md:6,sm:8}},[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-space",[t("a-button",{on:{click:e.findList}},[e._v("查询")])],1)],1)])],1)],1)],1),t("a-spin",{attrs:{spinning:e.loading}},[t("div",{staticStyle:{height:"calc(100vh - 290px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(100vh - 340px)"},attrs:{border:"","max-height":"80%",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","edit-config":{trigger:"manual",mode:"row"}}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),t("vxe-table-column",{attrs:{field:"downAssetName",title:"更换部件名称","min-width":"120"}}),t("vxe-table-column",{attrs:{field:"sysName",title:"所属系统",width:"120"}}),t("vxe-table-column",{attrs:{field:"downAssetSn",title:"原部件序列号",width:"120"}}),t("vxe-table-column",{attrs:{field:"upAssetSn",title:"换上件序列号",width:"120"}}),t("vxe-table-column",{attrs:{field:"brand",title:"更换原因","min-width":"140","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{field:"exchangeTime",title:"更换时间",width:"100"}}),t("vxe-table-column",{attrs:{field:"workUser",title:"更换人员",width:"100"}}),t("vxe-table-column",{attrs:{field:"alertDescribe",title:"更换阶段",width:"100"}})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1)])],1)},i=[],n=a("3bcd"),l=a("c1df"),s=a.n(l),o={name:"ReplaceRecord",props:{trainNo:{type:String,default:""}},data:function(){return{date:null,queryParam:{trainNo:this.trainNo,assetId:"",assetName:"",sysId:"",changeDate:"",pageNo:1,pageSize:10},totalResult:0,allAlign:"center",tableData:[],loading:!1}},created:function(){this.findList()},methods:{findList:function(){var e=this;this.loading=!0,this.date?this.queryParam.changeDate=s()(this.date).format("YYYY-MM-DD"):this.queryParam.changeDate="",Object(n["a"])(this.queryParam).then((function(t){t.success&&(e.totalResult=t.result.total,e.tableData=t.result.records)})).finally((function(){return e.loading=!1}))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()}}},c=o,d=a("2877"),u=Object(d["a"])(c,r,i,!1,null,"7a6b79a6",null);t["default"]=u.exports},af67:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,width:800,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:20,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"暂缓项目内容"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["leaveContent",e.validatorRules.leaveContent],expression:"['leaveContent', validatorRules.leaveContent]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入暂缓项目内容"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:20,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"专业系统"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["assetTypeName",e.validatorRules.assetTypeName],expression:"['assetTypeName', validatorRules.assetTypeName]",modifiers:{trim:!0}}],ref:"myAssetTypeSelect",attrs:{placeholder:"请选择",open:!1,showArrow:!0},on:{focus:e.openAssetTypeModal}},[t("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:20,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"工序名称"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["operation",e.validatorRules.operation],expression:"['operation', validatorRules.operation]",modifiers:{trim:!0}}],staticStyle:{width:"100%"},attrs:{placeholder:"请输入工序名称"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:20,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"暂缓原因"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["reason",e.validatorRules.reason],expression:"['reason', validatorRules.reason]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入暂缓原因"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:20,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"计划处理措施"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["planHandle",e.validatorRules.planHandle],expression:"['planHandle', validatorRules.planHandle]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入计划处理措施"}})],1)],1)],1)],1),t("train-asset-type",{ref:"assetTypeForm",attrs:{multiple:!1,"train-type-id":e.trainTypeId},on:{ok:e.addTarget}})],1)],1)},i=[],n=(a("b47d"),a("2cb5")),l=a("ca00"),s={name:"OpenItemModal",components:{TrainAssetType:n["default"]},props:["trainTypeId","exchangeId"],data:function(){return{title:"操作",visible:!1,activeIndex:null,model:{},labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}},assetTypeId:"",confirmLoading:!1,form:this.$form.createForm(this),validatorRules:{leaveContent:{rules:[{required:!0,message:"请输入暂缓项目内容!"},{max:255,message:"输入长度不能超过255字符!"}]},assetTypeName:{rules:[{required:!0,message:"请选择专业系统!"}]},operation:{rules:[{required:!0,message:"请输入工序名称!"},{max:64,message:"输入长度不能超过64字符!"}]},reason:{rules:[{required:!0,message:"请输入暂缓原因!"},{max:255,message:"输入长度不能超过255字符!"}]},planHandle:{rules:[{max:500,message:"输入长度不能超过500字符!"}]}}}},created:function(){},methods:{openAssetTypeModal:function(){this.$refs.assetTypeForm.showModal(),this.$refs.myAssetTypeSelect.blur()},addTarget:function(e){Object(l["e"])(e)||(this.assetTypeId=e[0].id,this.form.setFieldsValue({assetTypeName:e[0].name}))},add:function(){this.edit({})},edit:function(e,t){var a=this;this.activeIndex=t,this.form.resetFields(),this.model=Object.assign({},e),this.visible=!0,e.id&&(this.assetTypeId=e.assetTypeId),this.$nextTick((function(){a.form.setFieldsValue({leaveContent:a.model.leaveContent,assetTypeName:a.model.assetTypeName,operation:a.model.operation,reason:a.model.reason,planHandle:a.model.planHandle})}))},handleOk:function(){var e=this;this.form.validateFields((function(t,a){if(!t){e.confirmLoading=!0;var r=Object.assign(e.model,a,{assetTypeId:e.assetTypeId});e.$emit("addItem",r,e.activeIndex),e.$message.success("添加成功！"),e.$emit("ok"),e.close(),e.activeIndex=null,e.confirmLoading=!1}}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},o=s,c=a("2877"),d=Object(c["a"])(o,r,i,!1,null,"3a122558",null);t["default"]=d.exports},b245:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"85%",title:"人员选择",visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",bodyStyle:{height:"70vh"},destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-row",[t("a-col",{attrs:{md:4,sm:24}},[t("div",{staticStyle:{height:"calc(70vh - 20px)","border-right":"1px solid #e3e1e1","margin-right":"15px"}},[e.treeData&&e.treeData.length>0?t("a-tree",{staticClass:"limitHeight",attrs:{defaultSelectedKeys:[e.queryParam.depId],defaultExpandAll:!0,"tree-data":e.treeData},on:{select:e.onSelect}}):e._e()],1)]),t("a-col",{attrs:{md:20,sm:24}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.findList.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"账号"}},[t("a-input",{attrs:{placeholder:"请输入用户账号"},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"真实名字"}},[t("a-input",{attrs:{placeholder:"请输入真实名字"},model:{value:e.queryParam.realname,callback:function(t){e.$set(e.queryParam,"realname",t)},expression:"queryParam.realname"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"手机号码"}},[t("a-input",{attrs:{placeholder:"请输入手机号码"},model:{value:e.queryParam.phone,callback:function(t){e.$set(e.queryParam,"phone",t)},expression:"queryParam.phone"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"角色"}},[t("j-dict-select-tag",{attrs:{triggerChange:!0,dictCode:"sys_role,role_name,id",placeholder:"选择角色"},model:{value:e.queryParam.roleId,callback:function(t){e.$set(e.queryParam,"roleId",t)},expression:"queryParam.roleId"}})],1)],1),t("a-col",{attrs:{md:2,sm:8}},[t("a-button",{on:{click:e.findList}},[e._v("查询")])],1)],1)],1)],1),t("div",{staticStyle:{height:"calc(70vh - 130px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(70vh - 130px)"},attrs:{border:"",align:e.allAlign,data:e.tableData,"max-height":"100%","show-overflow":"tooltip","radio-config":e.multiple?{}:{trigger:"row"},"checkbox-config":e.multiple?{trigger:"row",highlight:!0,range:!0}:{},"edit-config":{trigger:"manual",mode:"row"}}},[e.multiple?t("vxe-table-column",{attrs:{type:"checkbox",width:"5%"}}):t("vxe-table-column",{attrs:{type:"radio",width:"5%"}}),t("vxe-table-column",{attrs:{field:"workNo",title:"工号",width:"100",align:"center"}}),t("vxe-table-column",{attrs:{field:"username",title:"用户账号",width:"150",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"realname",title:"用户名字",width:"100",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"roleNames",title:"角色","min-width":"180",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"sex_dictText",title:"性别",width:"80"}}),t("vxe-table-column",{attrs:{field:"phone",title:"手机号码",width:"120"}}),t("vxe-table-column",{attrs:{field:"orgCode",title:"部门",width:"120",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",width:"80"}})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1)])],1)],1)},i=[],n=a("8fad"),l={name:"UserList",props:{multiple:{type:Boolean,default:!0},depId:{type:String,default:""}},data:function(){return{queryParam:{username:"",realname:"",phone:"",orgCode:"",roleId:void 0,pageNo:1,pageSize:10},allAlign:"center",totalResult:0,tableData:[],visible:!1,confirmLoading:!1,treeData:[]}},watch:{depId:function(e){this.$set(this.queryParam,"depId",e||"")}},mounted:function(){this.$set(this.queryParam,"depId",this.depId||"")},methods:{showModal:function(){this.visible=!0,this.findList(),this.getTreeList()},getTreeList:function(){var e=this;Object(n["yb"])().then((function(t){t.success&&(e.treeData=t.result)}))},onSelect:function(e,t){if(e.length){var a=t.node.dataRef;this.queryParam.depId=a.id,this.findList()}else this.queryParam.orgCode="",this.findList()},findList:function(){var e=this;this.loading=!0,Object(n["uc"])(this.queryParam).then((function(t){e.loading=!1,t.success?(e.totalResult=t.result.total,e.tableData=t.result.records):e.$message.error("加载用户数据失败")})).catch((function(t){e.$message.error("加载用户数据异常")})).finally((function(){}))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()},handleOk:function(){var e=[];this.multiple?e=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&e.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",e),this.visible=!1},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,Object.assign(this.$data,this.$options.data())}}},s=l,o=(a("f76d"),a("2877")),c=Object(o["a"])(s,r,i,!1,null,"4aa7956f",null);t["default"]=c.exports},c0c5:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"bodyWrapper"},[e.isReadonly?e._e():t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:5,sm:8}},[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-space",[t("a-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增")]),t("a-button",{on:{click:e.handleDel}},[e._v("删除")])],1)],1)])],1)],1)],1),t("div",{style:"height: calc(100vh - ".concat(e.isReadonly?"134":"240","px)")},[t("vxe-table",{ref:"listTable",style:"height: calc(100vh - ".concat(e.isReadonly?"134":"239","px)"),attrs:{border:"","auto-resize":"","max-height":"90%",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","checkbox-config":{trigger:"row",highlight:!0,range:!0},"edit-config":{trigger:"manual",mode:"row"}},on:{"checkbox-all":e.selectAllRowsIds,"checkbox-change":e.selectRowsIds}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),t("vxe-table-column",{attrs:{type:"seq",title:"序号",width:"80"}}),t("vxe-table-column",{attrs:{field:"changeName",title:"整改项目","min-width":"100",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"changeDesc",title:"整改内容描述","min-width":"120"}}),t("vxe-table-column",{attrs:{field:"deptName",title:"责任部门","min-width":"100"}}),t("vxe-table-column",{attrs:{field:"dutyManName",title:"责任人",width:"100"}}),t("vxe-table-column",{attrs:{field:"changeDate",title:"整改日期",width:"100"}}),t("vxe-table-column",{attrs:{field:"checkDate",title:"检查日期",width:"100"}}),t("vxe-table-column",{attrs:{field:"annex",title:"附件下载","min-width":"140",align:"left","header-align":"center"}}),e.isReadonly?e._e():t("vxe-table-column",{attrs:{title:"操作",width:"80",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row,i=a.rowIndex;return[t("a",{on:{click:function(t){return t.stopPropagation(),e.handleEdit(r,i)}}},[e._v("编辑")])]}}],null,!1,2479697564)})],1)],1),t("rectify-modal",{ref:"rectifyModal",attrs:{exchangeId:e.exchangeId},on:{ok:function(t){e.loading=!1},addItem:e.addItem}})],1)},i=[],n=a("b47d"),l=a("4f27"),s=a("ca00"),o={name:"ReceiveCarRectify",components:{RectifyModal:l["default"]},props:["exchangeId","isReadonly"],data:function(){return{queryParam:{exchangeId:"",pageNo:1,pageSize:999},totalResult:0,allAlign:"center",tableData:[],multipleSelection:[]}},created:function(){this.findList()},methods:{findList:function(){var e=this;Object(s["e"])(this.exchangeId)||(this.queryParam.exchangeId=this.exchangeId,Object(n["lb"])(this.queryParam).then((function(t){e.totalResult=t.result.total,e.loading=!1,e.tableData=t.result.records,e.$bus.$emit("setReceiveCarRectifyData",e.tableData)})))},selectAllRowsIds:function(e){var t=this;e.records.length?e.records.map((function(e,a){t.multipleSelection.push(e._XID)})):t.multipleSelection=[]},selectRowsIds:function(e){this.multipleSelection.includes(e.rowid)?this.multipleSelection.splice(this.multipleSelection.indexOf(e.rowid),1):this.multipleSelection.push(e.rowid)},addItem:function(e,t){if(t||0==t)for(var a in e)this.$set(this.tableData[t],a,e[a]),this.$forceUpdate();else this.tableData.unshift(e),this.$refs.listTable.clearCheckboxRow(),this.multipleSelection=[];this.$bus.$emit("setReceiveCarRectifyData",this.tableData)},handleAdd:function(){this.$refs.rectifyModal.title="新增",this.$refs.rectifyModal.add()},handleEdit:function(e,t){this.$refs.rectifyModal.title="编辑",this.$refs.rectifyModal.edit(e,t)},handleDel:function(){var e=this,t=this;t.multipleSelection.length>0?t.$confirm({content:"是否删除选中".concat(t.multipleSelection.length,"数据？"),onOk:function(){t.multipleSelection.map((function(e,a){for(var r=0;r<t.tableData.length;r++){var i=t.tableData[r];if(i._XID==e)return void t.tableData.splice(r,1)}})),e.$refs.listTable.clearCheckboxRow(),e.multipleSelection=[],e.$bus.$emit("setReceiveCarRectifyData",e.tableData)}}):t.$message.error("尚未选中任何数据!")},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()}}},c=o,d=a("2877"),u=Object(d["a"])(c,r,i,!1,null,"3071c07b",null);t["default"]=u.exports},cd04:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"bodyWrapper"},[e.isReadonly?e._e():t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:5,sm:8}},[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-space",[t("a-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增")]),t("a-button",{on:{click:e.handleDel}},[e._v("删除")])],1)],1)])],1)],1)],1),t("div",{style:"height: calc(100vh - ".concat(e.isReadonly?"134":"240","px)")},[t("vxe-table",{ref:"listTable",style:"height: calc(100vh - ".concat(e.isReadonly?"134":"239","px)"),attrs:{border:"","auto-resize":"","max-height":"90%",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","checkbox-config":{trigger:"row",highlight:!0,range:!0},"edit-config":{trigger:"manual",mode:"row"}},on:{"checkbox-all":e.selectAllRowsIds,"checkbox-change":e.selectRowsIds}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),t("vxe-table-column",{attrs:{type:"seq",title:"序号",width:"80"}}),t("vxe-table-column",{attrs:{field:"leaveContent",title:"暂缓项目内容","min-width":"100",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"assetTypeName",title:"专业系统","min-width":"100"}}),t("vxe-table-column",{attrs:{field:"operation",title:"工序名称","min-width":"100",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"reason",title:"暂缓原因","min-width":"120",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"planHandle",title:"计划处理措施","min-width":"140",align:"left","header-align":"center"}}),e.isReadonly?e._e():t("vxe-table-column",{attrs:{title:"操作",width:"80",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row,i=a.rowIndex;return[t("a",{on:{click:function(t){return t.stopPropagation(),e.handleEdit(r,i)}}},[e._v("编辑")])]}}],null,!1,2479697564)})],1)],1),t("open-item-modal",{ref:"openItemModal",attrs:{trainTypeId:e.trainTypeId,exchangeId:e.exchangeId},on:{ok:function(t){e.loading=!1},addItem:e.addItem}})],1)},i=[],n=a("b47d"),l=a("af67"),s=a("ca00"),o={name:"ReceiveCarOpenItem",components:{OpenItemModal:l["default"]},props:["trainTypeId","exchangeId","isReadonly"],data:function(){return{queryParam:{exchangeId:"",pageNo:1,pageSize:999},totalResult:0,allAlign:"center",tableData:[],multipleSelection:[]}},mounted:function(){this.findList()},methods:{findList:function(){var e=this;Object(s["e"])(this.exchangeId)||(this.queryParam.exchangeId=this.exchangeId,Object(n["V"])(this.queryParam).then((function(t){e.totalResult=t.result.total,e.loading=!1,e.tableData=t.result.records,e.$bus.$emit("setReceiveCarOpenItemData",e.tableData)})))},selectAllRowsIds:function(e){var t=this;e.records.length?e.records.map((function(e,a){t.multipleSelection.push(e._XID)})):t.multipleSelection=[]},selectRowsIds:function(e){this.multipleSelection.includes(e.rowid)?this.multipleSelection.splice(this.multipleSelection.indexOf(e.rowid),1):this.multipleSelection.push(e.rowid)},addItem:function(e,t){if(t||0==t)for(var a in e)this.$set(this.tableData[t],a,e[a]),this.$forceUpdate();else this.tableData.unshift(e),this.$refs.listTable.clearCheckboxRow(),this.multipleSelection=[];this.$bus.$emit("setReceiveCarOpenItemData",this.tableData)},handleAdd:function(){this.$refs.openItemModal.title="新增",this.$refs.openItemModal.add()},handleEdit:function(e,t){this.$refs.openItemModal.title="编辑",this.$refs.openItemModal.edit(e,t)},handleDel:function(){var e=this,t=this;t.multipleSelection.length>0?t.$confirm({content:"是否删除选中".concat(t.multipleSelection.length,"数据？"),onOk:function(){t.multipleSelection.map((function(e,a){for(var r=0;r<t.tableData.length;r++){var i=t.tableData[r];if(i._XID==e)return void t.tableData.splice(r,1)}})),e.$refs.listTable.clearCheckboxRow(),e.multipleSelection=[],e.$bus.$emit("setReceiveCarOpenItemData",e.tableData)}}):t.$message.error("尚未选中任何数据!")},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()}}},c=o,d=a("2877"),u=Object(d["a"])(c,r,i,!1,null,"934c7562",null);t["default"]=u.exports},f76d:function(e,t,a){"use strict";a("9527")}}]);