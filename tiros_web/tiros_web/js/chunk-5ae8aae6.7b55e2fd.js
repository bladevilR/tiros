(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ae8aae6","chunk-4fded5ff","chunk-9fd19682","chunk-0f12fa96","chunk-2b5af2f5","chunk-6028c54e","chunk-5730732a","chunk-ce23dd1e","chunk-e67564ce","chunk-2bc23118","chunk-42391c95","chunk-535429be","chunk-7b75ea18","chunk-2d0df437","chunk-2d0df437"],{"03a6":function(e,t,a){"use strict";a("8617")},"0655":function(e,t,a){},"161b":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,width:"100%",dialogClass:"fullDialog",visible:e.visible,confirmLoading:e.confirmLoading,destroyOnClose:!0,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},["2"==e.reguTypeId?t("a-tabs",{model:{value:e.curTabKey,callback:function(t){e.curTabKey=t},expression:"curTabKey"}},[t("a-tab-pane",{key:"0",staticClass:"tabPaneBox",attrs:{tab:"基本信息"}},[t("a-form",{attrs:{form:e.form}},[t("a-row",{staticStyle:{width:"100%"}},[t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"规程序号"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["no",e.validatorRules.no],expression:"['no', validatorRules.no]"}],staticStyle:{width:"100%"},attrs:{min:1,max:999999,placeholder:"规程序号"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"名称"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",e.validatorRules.title],expression:"['title', validatorRules.title]"}],attrs:{placeholder:"规程名称"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"类型"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",e.validatorRules.type],expression:"['type', validatorRules.type]"}],attrs:{triggerChange:!0,dictCode:"bu_regu_type"},on:{change:e.handleChangeType}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"上级"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["parentName",e.validatorRules.parentName],expression:"['parentName', validatorRules.parentName]",modifiers:{trim:!0}}],ref:"mySelect",attrs:{placeholder:"请选择",open:!1,showArrow:!0},on:{focus:e.openModal}},[t("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)],1)],1),t("a-row",[t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol2,wrapperCol:e.wrapperCol2,label:"安全提示"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["safeNotice",e.validatorRules.safeNotice],expression:"['safeNotice', validatorRules.safeNotice]"}],attrs:{placeholder:"请输入内容"}})],1)],1)],1),t("a-row",[t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol2,wrapperCol:e.wrapperCol2,label:"备注描述"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark",e.validatorRules.remark],expression:"['remark', validatorRules.remark]"}],attrs:{placeholder:"请输入内容"}})],1)],1)],1)],1),t("a-form",{attrs:{form:e.form2}},[t("a-row",{staticStyle:{width:"100%"}},[t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"维保手段"}},[t("j-multi-select-tag",{directives:[{name:"decorator",rawName:"v-decorator",value:["method",e.validatorRules2.method],expression:"['method', validatorRules2.method]"}],attrs:{triggerChange:!0,dictCode:"bu_regu_method"},on:{change:e.handleChangeMethod}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"质量等级"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator",value:["qualityLevel",e.validatorRules2.qualityLevel],expression:"['qualityLevel', validatorRules2.qualityLevel]"}],attrs:{triggerChange:!0,dictCode:"bu_regu_quality_level"},on:{change:e.handleChangeQualityLevel}})],1)],1)],1),t("a-row",{staticStyle:{width:"100%"}},[t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"关联设备"}},[t("a-select",{ref:"mySelect2",attrs:{placeholder:"请选择关联设备",open:!1,showArrow:!0},on:{focus:e.openModal2},model:{value:e.trainTypeSysName,callback:function(t){e.trainTypeSysName=t},expression:"trainTypeSysName"}},[t("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"所需工时"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["workTime",e.validatorRules2.workTime],expression:"['workTime', validatorRules2.workTime]"}],staticStyle:{width:"100%"},attrs:{min:0,max:999999},on:{change:e.handleChangeWorkTime}})],1)],1)],1),t("a-row",[t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol4,wrapperCol:e.wrapperCol4,label:"是否委外"}},[t("a-switch",{on:{change:e.handleChangeOutsource},model:{value:e.outsourceSwitch,callback:function(t){e.outsourceSwitch=t},expression:"outsourceSwitch"}})],1)],1),t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol4,wrapperCol:e.wrapperCol4,label:"重要工序"}},[t("a-switch",{on:{change:e.handleChangeImportant},model:{value:e.importantSwitch,callback:function(t){e.importantSwitch=t},expression:"importantSwitch"}})],1)],1),t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol4,wrapperCol:e.wrapperCol4,label:"是否必换"}},[t("a-switch",{on:{change:e.handleChangeMustReplace},model:{value:e.mustReplaceSwitch,callback:function(t){e.mustReplaceSwitch=t},expression:"mustReplaceSwitch"}})],1)],1),t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol4,wrapperCol:e.wrapperCol4,label:"是否测量"}},[t("a-switch",{on:{change:e.handleChangeMeasure},model:{value:e.measureSwitch,callback:function(t){e.measureSwitch=t},expression:"measureSwitch"}})],1)],1)],1),t("a-row",[t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol2,wrapperCol:e.wrapperCol2,label:"技术要求"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["requirement",e.validatorRules2.requirement],expression:"['requirement', validatorRules2.requirement]"}],attrs:{placeholder:"请输入内容"},on:{change:e.handleChangeRequirement}})],1)],1)],1)],1)],1),t("a-tab-pane",{key:"1",staticClass:"tabPaneBox",attrs:{tab:"额定物料"}},[t("div",{staticStyle:{"padding-bottom":"5px"}},[t("a-space",[t("a-button",{on:{click:function(t){return e.openAddModal(1)}}},[e._v("添加")]),t("a-button",{on:{click:function(t){return e.delTableData(1)}}},[e._v("删除")])],1)],1),t("div",{staticClass:"tableBox"},[t("vxe-table",{ref:"reguMaterialslistTable",attrs:{border:"","edit-rules":e.validRules,align:e.allAlign,data:e.detail.reguMaterials,height:"auto","keep-source":!0,"show-overflow":"tooltip","checkbox-config":{trigger:"cell",highlight:!0},"edit-config":{key:"id",trigger:"manual",mode:"row",autoClear:!1,showStatus:!0}}},[t("vxe-table-column",{attrs:{type:"seq",width:"40"}}),t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),t("vxe-table-column",{attrs:{field:"code",title:"物料编码",width:"150"}}),t("vxe-table-column",{attrs:{field:"name",title:"物料名称",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"useCategory_dictText",title:"类别","edit-render":{name:"input"}},scopedSlots:e._u([{key:"edit",fn:function(a){var r=a.row;return[t("j-dict-select-tag",{staticStyle:{width:"100%"},attrs:{dictCode:"bu_material_type",hiddenArray:[-1],allowClear:!1},on:{select:e.onCategoryChange,blur:function(t){return e.$refs.reguMaterialslistTable.clearValidate()}},model:{value:r.useCategory,callback:function(t){e.$set(r,"useCategory",t)},expression:"row.useCategory"}})]}}],null,!1,354984789)}),t("vxe-table-column",{attrs:{field:"amount",title:"所需数量","edit-render":{name:"input"}},scopedSlots:e._u([{key:"edit",fn:function(a){var r=a.row;return[t("a-input-number",{staticStyle:{width:"100%"},attrs:{defaultValue:1,min:0,max:999999},model:{value:r.amount,callback:function(t){e.$set(r,"amount",t)},expression:"row.amount"}})]}}],null,!1,4050415892)}),t("vxe-table-column",{attrs:{field:"unit",title:"单位",width:"100"}}),t("vxe-table-column",{attrs:{title:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[e.$refs.reguMaterialslistTable.isActiveByRow(r)?[t("a-space",[t("a-button",{attrs:{type:"dashed",size:"small"},on:{click:function(t){return t.stopPropagation(),e.saveRowEvent(r,1)}}},[e._v("保存")]),t("a-button",{attrs:{type:"dashed",size:"small"},on:{click:function(t){return t.stopPropagation(),e.cancelRowEvent(r,1)}}},[e._v("取消")])],1)]:[t("a-button",{attrs:{type:"dashed",size:"small"},on:{click:function(t){return t.stopPropagation(),e.editRowEvent(r,1)}}},[e._v("编辑")])]]}}],null,!1,2340624522)})],1)],1)]),t("a-tab-pane",{key:"2",staticClass:"tabPaneBox",attrs:{tab:"所需工器具"}},[t("div",{staticStyle:{"padding-bottom":"5px"}},[t("a-space",[t("a-button",{on:{click:function(t){return e.openAddModal(2)}}},[e._v("添加")]),t("a-button",{on:{click:function(t){return e.delTableData(2)}}},[e._v("删除")])],1)],1),t("div",{staticClass:"tableBox"},[t("vxe-table",{ref:"reguToolslistTable",attrs:{border:"","edit-rules":e.validRules2,align:e.allAlign,data:e.detail.reguTools,height:"auto","show-overflow":"tooltip","checkbox-all":"","keep-source":!0,"edit-config":{key:"id",trigger:"manual",mode:"row",autoClear:!1,showStatus:!0},"checkbox-config":{trigger:"row",highlight:!0}}},[t("vxe-table-column",{attrs:{type:"seq",width:"40"}}),t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),t("vxe-table-column",{attrs:{field:"code",title:"工器具类型编码",width:"150"}}),t("vxe-table-column",{attrs:{field:"name",title:"工器具名称",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"category1_dictText",title:"工器具分类",width:"150"}}),t("vxe-table-column",{attrs:{field:"amount",title:"所需数量","edit-render":{name:"input"}},scopedSlots:e._u([{key:"edit",fn:function(a){var r=a.row;return[t("a-input-number",{staticStyle:{width:"100%"},attrs:{defaultValue:1,min:0,max:999999},model:{value:r.amount,callback:function(t){e.$set(r,"amount",t)},expression:"row.amount"}})]}}],null,!1,4050415892)}),t("vxe-table-column",{attrs:{field:"unit",title:"单位",width:"100"}}),t("vxe-table-column",{attrs:{title:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[e.$refs.reguToolslistTable.isActiveByRow(r)?[t("a-space",[t("a-button",{attrs:{type:"dashed",size:"small"},on:{click:function(t){return t.stopPropagation(),e.saveRowEvent(r,2)}}},[e._v("保存")]),t("a-button",{attrs:{type:"dashed",size:"small"},on:{click:function(t){return t.stopPropagation(),e.cancelRowEvent(r,2)}}},[e._v("取消")])],1)]:[t("a-button",{attrs:{type:"dashed",size:"small"},on:{click:function(t){return t.stopPropagation(),e.editRowEvent(r,2)}}},[e._v("编辑")])]]}}],null,!1,3054431578)})],1)],1)]),t("a-tab-pane",{key:"5",staticClass:"tabPaneBox",attrs:{tab:"作业指导"}},[t("div",{staticStyle:{"padding-bottom":"5px"}},[t("a-space",[t("a-button",{on:{click:function(t){return e.openAddModal(5)}}},[e._v("添加")]),t("a-button",{on:{click:function(t){return e.delTableData(5)}}},[e._v("删除")])],1)],1),t("div",{staticClass:"tableBox"},[t("vxe-table",{ref:"reguSopsListTable",attrs:{border:"",align:e.allAlign,height:"auto","checkbox-all":"",data:e.detail.techBookDetails,"show-overflow":"tooltip","checkbox-config":{trigger:"row",highlight:!0}}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),t("vxe-table-column",{attrs:{field:"op",title:"",width:"60"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("a",{on:{click:function(t){return t.stopPropagation(),e.showSopDeatil(r)}}},[e._v(" 查看")])]}}],null,!1,1759710141)}),t("vxe-table-column",{attrs:{field:"bookStepNo",title:"步骤",width:"60"}}),t("vxe-table-column",{attrs:{field:"bootStepTitle",title:"步骤标题",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"requireCertificate",title:"所属作业指导书","max-width":"200"}})],1)],1)]),t("a-tab-pane",{key:"3",staticClass:"tabPaneBox",attrs:{tab:"所需人员"}},[t("div",{staticStyle:{"padding-bottom":"5px"}},[t("a-space",[t("a-button",{on:{click:function(t){return e.openAddModal(3)}}},[e._v("添加")]),t("a-button",{on:{click:function(t){return e.delTableData(3)}}},[e._v("删除")])],1)],1),t("div",{staticClass:"tableBox"},[t("vxe-table",{ref:"reguPersonsListTable",attrs:{border:"",align:e.allAlign,"checkbox-all":"",height:"auto",data:e.detail.reguPersons,"show-overflow":"tooltip","edit-config":{trigger:"manual",mode:"row"},"checkbox-config":{trigger:"row",highlight:!0}}},[t("vxe-table-column",{attrs:{type:"seq",width:"40"}}),t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),t("vxe-table-column",{attrs:{field:"requirePostion",title:"人员岗位"}}),t("vxe-table-column",{attrs:{field:"requireTech",title:"技术要求"}}),t("vxe-table-column",{attrs:{field:"requireCertificate",title:"证书要求"}}),t("vxe-table-column",{attrs:{field:"amount",title:"所需人数",width:"100"}})],1)],1)])],1):t("a-form",{attrs:{form:e.form}},[t("a-row",{staticStyle:{width:"100%"}},[t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"规程序号"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["no",e.validatorRules.no],expression:"['no', validatorRules.no]"}],staticStyle:{width:"100%"},attrs:{min:1,max:999999,placeholder:"规程序号"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"名称"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",e.validatorRules.title],expression:"['title', validatorRules.title]"}],attrs:{placeholder:"规程名称"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"类型"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",e.validatorRules.type],expression:"['type', validatorRules.type]"}],attrs:{triggerChange:!0,dictCode:"bu_regu_type"},on:{change:e.handleChangeType}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"上级"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["parentName",e.validatorRules.parentName],expression:"['parentName', validatorRules.parentName]",modifiers:{trim:!0}}],ref:"mySelect",attrs:{placeholder:"请选择",open:!1,showArrow:!0},on:{focus:e.openModal}},[t("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)],1)],1),t("a-row",[t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol2,wrapperCol:e.wrapperCol2,label:"安全提示"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["safeNotice",e.validatorRules.safeNotice],expression:"['safeNotice', validatorRules.safeNotice]"}],attrs:{placeholder:"请输入内容"}})],1)],1)],1),t("a-row",[t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol2,wrapperCol:e.wrapperCol2,label:"备注描述"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark",e.validatorRules.remark],expression:"['remark', validatorRules.remark]"}],attrs:{placeholder:"请输入内容"}})],1)],1)],1)],1),t("regulation-list",{ref:"regulationModalForm",attrs:{"regu-id":e.reguId,"train-type-id":e.trainTypeId,"only-project":!0},on:{ok:e.addTarget}}),t("train-asset-type",{ref:"selectForm",attrs:{multiple:!1,trainTypeId:e.trainTypeId},on:{ok:e.selectTrainSys}}),t("material-list",{ref:"MaterialModalForm",attrs:{multiple:!0},on:{ok:e.addMaterialList}}),t("ToolTypeSelect",{ref:"ToolsModalForm",attrs:{multiple:!0,canSelectType:[4,5]},on:{ok:e.addToolTypeSelect}}),t("SopDetailList",{ref:"sopDetailModalForm",attrs:{multiple:!0},on:{ok:e.addSopDetailList}}),t("WorkSopView",{ref:"workSopViewModal"}),t("PersonRequirement",{ref:"PersonModalForm",on:{ok:e.addPersonRequirement}})],1)],1)},i=[],n=a("8fad"),o=a("ca00"),l=a("500a"),s=a("db9b"),c=a("7164"),u=a("f680"),d=a("2cb5"),h=a("a4db"),f=a("85df"),p=a("4501"),m=a("91cb");function g(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",i=a.toStringTag||"@@toStringTag";function n(a,r,i,n){var s=r&&r.prototype instanceof l?r:l,c=Object.create(s.prototype);return v(c,"_invoke",function(a,r,i){var n,l,s,c=0,u=i||[],d=!1,h={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,a){return n=t,l=0,s=e,h.n=a,o}};function f(a,r){for(l=a,s=r,t=0;!d&&c&&!i&&t<u.length;t++){var i,n=u[t],f=h.p,p=n[2];a>3?(i=p===r)&&(s=n[(l=n[4])?5:(l=3,3)],n[4]=n[5]=e):n[0]<=f&&((i=a<2&&f<n[1])?(l=0,h.v=r,h.n=n[1]):f<p&&(i=a<3||n[0]>r||r>p)&&(n[4]=a,n[5]=r,h.n=p,l=0))}if(i||a>1)return o;throw d=!0,r}return function(i,u,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,p),l=u,s=p;(t=l<2?e:s)||!d;){n||(l?l<3?(l>1&&(h.n=-1),f(l,s)):h.n=s:h.v=s);try{if(c=2,n){if(l||(i="next"),t=n[i]){if(!(t=t.call(n,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,l<2&&(l=0)}else 1===l&&(t=n.return)&&t.call(n),l<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),l=1);n=e}else if((t=(d=h.n<0)?s:a.call(r,h))!==o)break}catch(t){n=e,l=1,s=t}finally{c=1}}return{value:t,done:d}}}(a,i,n),!0),c}var o={};function l(){}function s(){}function c(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(v(t={},r,(function(){return this})),t),d=c.prototype=l.prototype=Object.create(u);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,v(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return s.prototype=c,v(d,"constructor",c),v(c,"constructor",s),s.displayName="GeneratorFunction",v(c,i,"GeneratorFunction"),v(d),v(d,i,"Generator"),v(d,r,(function(){return this})),v(d,"toString",(function(){return"[object Generator]"})),(g=function(){return{w:n,m:h}})()}function v(e,t,a,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}v=function(e,t,a,r){function n(t,a){v(e,t,(function(e){return this._invoke(t,a,e)}))}t?i?i(e,t,{value:a,enumerable:!r,configurable:!r,writable:!r}):e[t]=a:(n("next",0),n("throw",1),n("return",2))},v(e,t,a,r)}function b(e,t,a,r,i,n,o){try{var l=e[n](o),s=l.value}catch(e){return void a(e)}l.done?t(s):Promise.resolve(s).then(r,i)}function y(e){return function(){var t=this,a=arguments;return new Promise((function(r,i){var n=e.apply(t,a);function o(e){b(n,r,i,o,l,"next",e)}function l(e){b(n,r,i,o,l,"throw",e)}o(void 0)}))}}var w={components:{ItemForm:s["default"],RegulationList:l["default"],MaterialList:c["default"],JMultiSelectTag:u["default"],TrainAssetType:d["default"],ToolTypeSelect:h["default"],SopDetailList:f["default"],WorkSopView:p["default"],PersonRequirement:m["default"]},name:"ReguAddModal",props:["reguId","trainTypeId"],data:function(){return{curTabKey:"0",curEditMode:0,curEditMode2:0,title:"操作",confirmLoading:!1,visible:!1,outsourceSwitch:!1,importantSwitch:!1,mustReplaceSwitch:!1,measureSwitch:!1,allAlign:"center",parent:{},detail:{},trainTypeSysName:"",validRules:{code:[{required:!0,message:"请选择物料"}],useCategory_dictText:[{required:!0,message:"请选择类别"}],amount:[{required:!0,message:"数量必须填写"}],remark:[{max:200,type:"string",message:"备注不能超过200个字符"}]},validRules2:{amount:[{required:!0,message:"数量必须填写"}]},form:null,form2:null,itemFormData:{},reguTypeId:"",parentId:"",parentName:"",itemFormField:!0,validatorRules:{no:{rules:[{required:!0,message:"请输入规程序号!"}]},title:{rules:[{required:!0,message:"请输入规程名称!"},{max:128,message:"输入长度不能超过32字符!"}]},type:{rules:[{required:!0,message:"请选择类型!"}]},parentId:{rules:[]},safeNotice:{rules:[{max:255,message:"输入长度不能超过255字符!"}]},remark:{rules:[{max:255,message:"输入长度不能超过255字符!"}]}},validatorRules2:{method:{rules:[{required:!0,message:"请选择维保手段!"}]},qualityLevel:{rules:[{required:!0,message:"请选择质量等级!"}]},workTime:{rules:[{required:!0,message:"输入所需工时!"}]},requirement:{rules:[{max:450,message:"输入长度不能超过450字符!"}]}},selectTreeNode:[],labelCol1:{xs:{span:24},sm:{span:4}},wrapperCol1:{xs:{span:24},sm:{span:16}},labelCol2:{xs:{span:24},sm:{span:2}},wrapperCol2:{xs:{span:24},sm:{span:20}},labelCol4:{xs:{span:24},sm:{span:8}},wrapperCol4:{xs:{span:24},sm:{span:12}}}},created:function(){this.findSelectList()},methods:{validAllEvent:function(){var e=this;return new Promise((function(t,a){e.$refs.reguMaterialslistTable.validate(!0).then((function(e){t()})).catch((function(e){a()}))}))},validAllEvent2:function(){var e=this;return new Promise((function(t,a){e.$refs.reguToolslistTable.validate(!0).then((function(e){t()})).catch((function(e){a()}))}))},saveRowEvent:function(e,t){var a=this;1==t?this.$refs.reguMaterialslistTable.validate(e,(function(t){if(t)for(var r in t){var i=t[r];i.forEach((function(e){e.rule&&a.$message.error(e.rule.message)}))}else 1===a.curEditMode&&a.detail.reguMaterials.push(e),a.$refs.reguMaterialslistTable.clearActived(),a.curEditMode=0})):2==t&&this.$refs.reguToolslistTable.validate(e,(function(t){if(t)for(var r in t){var i=t[r];i.forEach((function(e){e.rule&&a.$message.error(e.rule.message)}))}else 1===a.curEditMode2&&a.detail.reguTools.push(e),a.$refs.reguToolslistTable.clearActived(),a.curEditMode2=0}))},cancelRowEvent:function(e,t){1==t?(this.$refs.reguMaterialslistTable.clearActived(),1===this.curEditMode?this.$refs.reguMaterialslistTable.remove(e):2===this.curEditMode&&this.$refs.reguMaterialslistTable.revertData(e),this.curEditMode=0):2==t&&(this.$refs.reguToolslistTable.clearActived(),1===this.curEditMode2?this.$refs.reguToolslistTable.remove(e):2===this.curEditMode2&&this.$refs.reguToolslistTable.revertData(e),this.curEditMode2=0)},editRowEvent:function(e,t){1==t?(this.curEditMode=2,this.$refs.reguMaterialslistTable.setActiveRow(e)):(this.curEditMode2=2,this.$refs.reguToolslistTable.setActiveRow(e))},onCategoryChange:function(e,t){var a=this.$refs.reguMaterialslistTable.getActiveRecord();a.row.useCategory_dictText=t?t.title:void 0,this.$forceUpdate()},handleChangeMethod:function(e){this.detail.method=e},handleChangeQualityLevel:function(e){this.detail.qualityLevel=e},openModal2:function(){this.$refs.selectForm.showModal(),this.$refs.mySelect2.blur()},selectTrainSys:function(e){e.length&&(this.detail.assetTypeId=e[0].id,this.trainTypeSysName=e[0].name)},handleChangeWorkTime:function(e){this.detail.workTime=e},handleChangeOutsource:function(e){this.outsourceSwitch=e;var t=e?1:0;this.detail.outsource=t},handleChangeImportant:function(e){this.importantSwitch=e;var t=e?1:0;this.detail.important=t},handleChangeMustReplace:function(e){this.mustReplaceSwitch=e;var t=e?1:0;this.detail.mustReplace=t},handleChangeMeasure:function(e){this.measureSwitch=e;var t=e?1:0;this.detail.measure=t},handleChangeRequirement:function(e){this.detail.requirement=e.target.value},openAddModal:function(e){switch(e){case 1:this.$refs.MaterialModalForm.showModal();break;case 2:this.$refs.ToolsModalForm.showModal();break;case 3:this.$refs.PersonModalForm.add();break;case 5:this.$refs.sopDetailModalForm.showModal();break}},delTableData:function(e){var t=this;switch(e){case 1:var a=this.$refs.reguMaterialslistTable.getCheckboxRecords();a.map((function(e,a){t.detail.reguMaterials.map((function(a,r){e.id===a.id&&t.detail.reguMaterials.splice(r,1)}))}));break;case 2:var r=this.$refs.reguToolslistTable.getCheckboxRecords();r.map((function(e,a){t.detail.reguTools.map((function(a,r){e.id===a.id&&t.detail.reguTools.splice(r,1)}))}));break;case 3:var i=this.$refs.reguPersonsListTable.getCheckboxRecords();i.map((function(e,a){t.detail.reguPersons.map((function(a,r){e.id===a.id&&t.detail.reguPersons.splice(r,1)}))}));break;case 5:var n=this.$refs.reguSopsListTable.getCheckboxRecords();n.map((function(e,a){t.detail.techBookDetails.map((function(a,r){e.id===a.id&&t.detail.techBookDetails.splice(r,1)}))}));break}},addMaterialList:function(e){var t=this;if(e&&e.length>0){this.curEditMode=1;var a=this.detail.reguMaterials;e.forEach((function(r,i){if(-1==r.useCategory&&(r.useCategory_dictText=""),a.find((function(e){return e.materialTypeId===r.id})))t.$message.warn("你选择的".concat(r.name,"已经在列表中存在"));else{var n=t.transformMaterialToReguMaterial(r);1==e.length?t.$refs.reguMaterialslistTable.insertAt(n,-1).then((function(e){var a=e.row;t.$refs.reguMaterialslistTable.setActiveCell(a,"amount")})):(t.$refs.reguMaterialslistTable.insertAt(n,-1),t.detail.reguMaterials.push(n))}}))}},transformMaterialToReguMaterial:function(e){var t={};return t.id=Object(o["p"])(),t.reguDetailId=this.reguDetailId,t.materialTypeId=e.id,t.amount=e.num,t.code=e.code,t.name=e.name,t.unit=e.unit,t.category1=e.category1,t.category1_dictText=e.category1_dictText,t.category2=e.category2,t.category2_dictText=e.category2_dictText,t.useCategory=-1==e.useCategory?"":e.useCategory,t.useCategory_dictText=-1==e.useCategory?"":e.useCategory_dictText,t},addToolTypeSelect:function(e){var t=this;e&&e.length>0&&(this.curEditMode2=1,e.map((function(a){var r=t.detail.reguTools.findIndex((function(e){return e.toolTypeId===a.id}));if(r<0){var i=t.transformToolToReguTool(a);1==e.length?t.$refs.reguToolslistTable.insertAt(i,-1).then((function(e){var a=e.row;t.$refs.reguToolslistTable.setActiveCell(a,"amount")})):(t.$refs.reguToolslistTable.insertAt(i,-1),t.detail.reguTools.push(i))}else t.$message.error("此工器具已添加")})))},transformToolToReguTool:function(e){var t={};return t.id=Object(o["p"])(),t.reguDetailId=this.reguDetailId,t.toolTypeId=e.id,t.amount=e.num,t.code=e.code,t.name=e.name,t.unit=e.unit,t.category1=e.category1,t.category1_dictText=e.category1_dictText,t.category2=e.category2,t.category2_dictText=e.category2_dictText,t},addSopDetailList:function(e){var t=this;e.forEach((function(e){t.detail.techBookDetails.find((function(t){return t.bookDetailId===e.id}))?t.$message.error("".concat(e.stepTitle,"步骤已经添加了")):t.detail.techBookDetails.push(t.transformFileToReguSop(e))}))},transformFileToReguSop:function(e){var t={};return t.id=Object(o["p"])(),t.reguDetailId=this.reguDetailId,t.bookDetailId=e.id,t.bookStepNo=e.stepNum,t.bootStepContent=e.stepContent,t.bootStepTitle=e.stepTitle,t.techBookId=e.bookId,t},showSopDeatil:function(e){this.$refs.workSopViewModal.showSopDetail([e.bookDetailId])},addPersonRequirement:function(e){e&&this.detail.reguPersons.push(e)},handleOk:function(){var e=this;this.form.validateFields((function(t,a){t?e.curTabKey="0":y(g().m((function t(){var r,i,o;return g().w((function(t){while(1)switch(t.n){case 0:if("2"!=e.reguTypeId){t.n=2;break}if(e.form2.validateFields((function(t,a){e.itemFormField=!t})),i=e.$refs.reguMaterialslistTable,!i){t.n=1;break}return t.n=1,e.validAllEvent().then((function(t){e.itemFormField=!0})).catch((function(t){e.curEditMode=2,e.itemFormField=!1,e.curTabKey="1",e.$message.warning("额定物料输入验证失败，请检查")}));case 1:if(1!=e.itemFormField){t.n=2;break}if(o=e.$refs.reguToolslistTable,!o){t.n=2;break}return t.n=2,e.validAllEvent2().then((function(t){e.itemFormField=!0})).catch((function(t){e.curEditMode2=2,e.itemFormField=!1,e.curTabKey="2",e.$message.warning("所需工器具输入验证失败，请检查")}));case 2:e.itemFormField&&(r=Object.assign({},e.detail,a,{reguId:e.reguId,parentId:e.parent.id||""}),e.confirmLoading=!0,delete r.type_dictText,Object(n["Vc"])(r).then((function(t){t.success?(r.id||e.parent&&e.parent.id?e.$emit("reloadTreeChilds",e.parent.id):e.$emit("ok"),e.$message.success(t.message),e.close()):e.$message.error(t.message)})).finally((function(){e.confirmLoading=!1})));case 3:return t.a(2)}}),t)})))()}))},openModal:function(){this.$refs.regulationModalForm.showModal(),this.$refs.mySelect.blur()},addTarget:function(e){this.model.id&&e[0].id==this.model.id?this.$message.warn("上级不能是自身!"):(this.form.setFieldsValue({parentName:e[0].title}),this.parent.name=e[0].title,this.parent.id=e[0].id)},add:function(e){this.parent=e,this.edit({reguMaterials:[],reguPersons:[],reguTechFiles:[],reguTools:[],techBookDetails:[],method:null,method_dictText:null,qualityLevel:null,qualityLevel_dictText:null,assetTypeId:null,assetTypeName:null,workTime:0,important:0,outsource:0,measure:0,mustReplace:0,requirement:null})},edit:function(e){var t=this;this.visible=!0,this.form=this.$form.createForm(this),this.form2=this.$form.createForm(this),this.form.resetFields(),this.model=Object.assign({},e),this.reguTypeId=this.model.type,Object(o["e"])(e)||(this.parent={id:e.parentId,name:e.parentName},this.detail=e,this.trainTypeSysName=this.detail.assetTypeName,this.importantSwitch=!!this.detail.important,this.outsourceSwitch=!!this.detail.outsource,this.measureSwitch=!!this.detail.measure,this.mustReplaceSwitch=!!this.detail.mustReplace,2==this.reguTypeId&&(this.form2.resetFields(),this.$nextTick((function(){t.form2.setFieldsValue({method:t.detail.method,qualityLevel:t.detail.qualityLevel,workTime:t.detail.workTime,requirement:t.detail.requirement})})))),this.$nextTick((function(){t.form.setFieldsValue({no:t.model.no,title:t.model.title,type:t.model.type,parentName:t.parent.name||"",safeNotice:t.model.safeNotice,remark:t.model.remark})}))},handleChangeType:function(e){var t=this,a=this.form.getFieldsValue();a.type=e,this.reguTypeId=e,Object.assign(this.detail,{reguMaterials:[],reguPersons:[],reguTechFiles:[],reguTools:[],techBookDetails:[],method:null,method_dictText:null,qualityLevel:null,qualityLevel_dictText:null,assetTypeId:null,assetTypeName:null,workTime:0,important:0,outsource:0,measure:0,mustReplace:0,requirement:null}),this.$nextTick((function(){t.form.setFieldsValue(a)}))},findSelectList:function(){var e=this,t={reguId:this.reguId,type:1};Object(n["Kb"])(t).then((function(t){t.success&&(e.loading=!1,e.tableData=t.result,e.selectTreeNode=t.result.map((function(t){return e.genSelectTreeNode(t)})))}))},loadSelectNodeMethod:function(e){var t=this,a={reguId:this.reguId,parentId:e.dataRef.id,type:this.reguTypeId};return new Promise((function(e){Object(n["Kb"])(a).then((function(e){if(e.success)e.result.map((function(e){t.selectTreeNode=t.selectTreeNode.concat(t.genSelectTreeNode(e))}));else t.$message.warning(e.message)})),e()}))},genSelectTreeNode:function(e){return{id:e.id,pId:e.parentId,value:e.id,title:e.title,isLeaf:!e.hasChildren}},handleBack:function(){var e={reguId:this.reguId,trainTypeId:this.trainTypeId};this.$router.push({name:"tiros-basic-regulation",params:{value:e}})},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,Object.assign(this.$data,this.$options.data())}}},C=w,k=(a("03a6"),a("2877")),x=Object(k["a"])(C,r,i,!1,null,null,null);t["default"]=x.exports},1763:function(e,t,a){},"260f":function(e,t,a){},"2b2c":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:"选择作业项目",width:"80%",visible:e.visible,cancelText:"关闭",destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.findList.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:12}},[t("a-col",{attrs:{md:7,sm:24}},[t("a-form-item",{attrs:{label:"名称"}},[t("a-input",{attrs:{placeholder:"名称",allowClear:""},model:{value:e.queryParam.title,callback:function(t){e.$set(e.queryParam,"title",t)},expression:"queryParam.title"}})],1)],1),t("a-col",{attrs:{md:7,sm:24}},[t("a-form-item",{attrs:{label:"规程"}},[t("a-select",{attrs:{"show-search":"",allowClear:"",placeholder:"Select a person","option-filter-prop":"children","filter-option":e.filterOption},model:{value:e.queryParam.reguId,callback:function(t){e.$set(e.queryParam,"reguId",t)},expression:"queryParam.reguId"}},[t("a-select-option",{attrs:{value:void 0}},[e._v(" 请选择 ")]),e._l(e.treeData,(function(a,r){return t("a-select-option",{key:r,attrs:{value:a.id}},[e._v(" "+e._s(a.title)+" ")])}))],2)],1)],1),t("a-col",{attrs:{md:7,sm:24}},[t("span",{staticClass:"table-page-search-submitButtons"},[t("a-space",[t("a-button",{on:{click:e.findList}},[e._v("查询")])],1)],1)])],1)],1)],1),t("div",{staticClass:"tableHeight",staticStyle:{height:"calc(100vh - 350px)"}},[t("vxe-table",{ref:"listTableRadio",staticStyle:{},attrs:{border:"",resizable:"","row-id":"id",align:"center",data:e.tableData,"show-overflow":"tooltip","max-height":"100%","edit-config":{trigger:"manual",mode:"row"},"radio-config":{trigger:"row",highlight:!0,checkMethod:e.checkMethod},"tree-config":{lazy:!0,children:"children",hasChild:"hasChildren",loadMethod:e.loadChildrenMethod},"keep-source":!0}},[t("vxe-table-column",{attrs:{type:"radio",width:"40"}}),t("vxe-table-column",{attrs:{field:"no",title:"序号",width:"60"}}),t("vxe-table-column",{attrs:{field:"title",title:"名称","tree-node":"",align:"left","header-align":"center","min-width":"140"}}),t("vxe-table-column",{attrs:{field:"type_dictText",title:"类型",width:"100"}}),t("vxe-table-column",{attrs:{field:"method_dictText",title:"维保手段",width:"100"}}),t("vxe-table-column",{attrs:{field:"qualityLevel_dictText",title:"质保等级",width:"80"}}),t("vxe-table-column",{attrs:{field:"outsource_dictText",title:"是否委外",width:"80"}}),t("vxe-table-column",{attrs:{field:"safeNotice",title:"安全提示","min-width":"140",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"remark",title:"备注","min-width":"120",align:"left","header-align":"center"}})],1)],1)])},i=[],n=a("8fad"),o={data:function(){return{visible:!1,selectIds:[],queryParam:{reguId:void 0,title:""},tableData:[],treeData:[]}},methods:{show:function(e,t){e&&(this.queryParam.reguId=e),this.visible=!0,this.selectIds=t,this.queryTreeData(),this.findList()},queryTreeData:function(){var e=this;Object(n["Lb"])().then((function(t){if(t.success){var a=t.result;Array.from(a,(function(e,t){e.title=e.name&&JSON.parse(JSON.stringify(e.name)),e.version&&(e.title+=".".concat(e.version))})),e.treeData=a}}))},checkMethod:function(e){var t=e.row;return 2==t.type},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},findList:function(){var e=this;this.loading=!0,Object(n["Kb"])(this.queryParam).then((function(t){t.success&&(e.loading=!1,e.tableData=t.result)}))},handleOk:function(){var e=this,t=this.$refs.listTableRadio.getRadioRecord();t?this.$confirm({content:"导入操作将覆盖原有的指导书数据，确认继续？",onOk:function(){var a={targetReguItemId:t.id,toReguItemIds:e.selectIds};return Object(n["pc"])(a).then((function(t){t.success?(e.$message.success(t.message),e.$emit("ok"),e.handleCancel()):e.$message.warning(t.message)}))}}):this.$message.warning("请选择作业项目")},handleCancel:function(){this.visible=!1,this.selectIds=[],Object.assign(this.queryParam,this.$options.data().queryParam)},loadChildrenMethod:function(e){var t=this,a=e.row,r={reguId:this.queryParam.reguId,parentId:a.id};return new Promise((function(e){Object(n["Kb"])(r).then((function(r){r.success?(r.result.length||(a.hasChildren=!1),e(r.result)):t.$message.error("".concat(r.msg))}))}))}}},l=o,s=a("2877"),c=Object(s["a"])(l,r,i,!1,null,"263b8320",null);t["default"]=c.exports},"2cb5":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"90%",centered:"",title:e.title,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",destroyOnClose:!0,bodyStyle:{height:"80vh"}},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchQuery.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:7,sm:24}},[t("a-form-item",{attrs:{label:"名称"}},[t("a-input",{attrs:{placeholder:"名称或编码","allow-clear":""},model:{value:e.queryParam.searchText,callback:function(t){e.$set(e.queryParam,"searchText",t)},expression:"queryParam.searchText"}})],1)],1),t("a-col",{attrs:{md:7,sm:24}},[t("a-form-item",{attrs:{label:"状态"}},[t("j-dict-select-tag",{attrs:{dictCode:"bu_enable"},model:{value:e.queryParam.status,callback:function(t){e.$set(e.queryParam,"status",t)},expression:"queryParam.status"}})],1)],1),t("a-col",{attrs:{md:3,sm:12}},[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-button",{on:{click:e.searchQuery}},[e._v("查询")])],1)])],1)],1)],1),t("div",{staticStyle:{height:"calc(80vh - 85px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(80vh - 85px)"},attrs:{border:"","max-height":"100%","row-id":"id",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","radio-config":e.multiple?{}:{trigger:"row",checkMethod:e.checkRadioMethod},"checkbox-config":e.multiple?{trigger:"row",highlight:!0,checkMethod:e.checkRadioMethod}:{},"tree-config":{lazy:!0,children:"children",hasChild:"hasChildren",loadMethod:e.loadChildrenMethod}}},[e.multiple?t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}):t("vxe-table-column",{attrs:{type:"radio",width:"40"}}),t("vxe-table-column",{attrs:{field:"name",title:"名称","tree-node":"",align:"left"}}),t("vxe-table-column",{attrs:{align:"left","header-align":"center",field:"code",title:"编码",width:"15%"}}),t("vxe-table-column",{attrs:{field:"structType_dictText",title:"类型",width:"10%"}}),t("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",width:"10%"}}),t("vxe-table-column",{attrs:{field:"placeCode",title:"位置编码",width:"15%"}}),t("vxe-table-column",{attrs:{field:"placeDesc",title:"位置描述",width:"15%"}})],1)],1)])},i=[],n=a("8fad"),o={name:"TrainAssetType",props:{trainTypeId:{type:String,default:""},parentId:{type:String,default:null},multiple:{type:Boolean,default:!0},title:{type:String,default:"设备类型选择"},canSelectType:{type:Array,default:function(){return[1,2,3,4]}}},data:function(){return{queryParam:{trainTypeId:"",id:"",searchText:"",status:null,structType:null},allAlign:"center",tableData:[],treeData:[],selectParent:"",visible:!1,confirmLoading:!1}},mounted:function(){},methods:{showModal:function(){this.visible=!0,this.queryParam.trainTypeId=this.trainTypeId,this.findList()},handleOk:function(){var e=[];this.multiple?e=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&e.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",e),this.visible=!1},handleCancel:function(){this.$emit("cancel"),this.close()},close:function(){this.$emit("close"),this.visible=!1},findList:function(){var e=this;this.loading=!0,this.parentId&&(this.queryParam.id=this.parentId),this.selectParent&&(this.queryParam.id=this.selectParent),Object(n["gd"])(this.queryParam).then((function(t){t.success&&(e.loading=!1,e.tableData=t.result)}))},findSelectList:function(){var e=this,t={id:this.parentId,trainTypeId:this.trainTypeId};this.parentId&&(t.id=this.parentId),Object(n["gd"])(t).then((function(t){t.success&&(e.loading=!1,e.treeData=t.result.map((function(t){return e.genSelectTreeNode(t)})))}))},loadChildrenMethod:function(e){var t=this,a=e.row,r={trainTypeId:this.trainTypeId,id:a.id};return new Promise((function(e){Object(n["gd"])(r).then((function(a){a.success?e(a.result):t.$message.error("".concat(a.msg))}))}))},loadSelectNodeMethod:function(e){var t=this,a={trainTypeId:this.trainTypeId,id:e.dataRef.id,searchText:this.queryParam.searchText,status:this.queryParam.status,structType:this.queryParam.structType};return new Promise((function(e){Object(n["gd"])(a).then((function(e){e.success?e.result.map((function(e){t.treeData=t.treeData.concat(t.genSelectTreeNode(e))})):t.$message.warning(e.message)})),e()}))},genSelectTreeNode:function(e){return{id:e.id,pId:e.parentId,value:e.id,title:e.name,isLeaf:!e.hasChildren}},searchQuery:function(){this.findList()},checkRadioMethod:function(e){var t=e.row;return this.canSelectType.indexOf(t.structType)>-1}}},l=o,s=(a("9589"),a("2877")),c=Object(s["a"])(l,r,i,!1,null,"52968c59",null);t["default"]=c.exports},"2f2f":function(e,t,a){},"353a":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"80%",visible:e.visible,title:e.title,centered:"",bodyStyle:{height:"80vh"},confirmLoading:e.confirmLoading,destroyOnClose:!0,footer:null},on:{cancel:e.handleCancel}},[t("div",[t("iframe",{staticClass:"filename",staticStyle:{height:"calc(80vh - 25px)"},attrs:{src:e.filePath,width:"100%",frameborder:"0"}})])])},i=[],n=a("e2aa"),o={name:"DocPreviewModal",props:{title:{type:String,default:"文件预览"}},data:function(){return{visible:!1,confirmLoading:!1,filePath:""}},methods:{handleFilePath:function(e){var t=this;Object(n["c"])(e).then((function(e){if(e.success){var a=e.result;t.visible=!0,t.filePath=window._CONFIG["onlinePreviewDomainURL"]+"?url="+encodeURIComponent(a)}else t.$message.warning("查看文件失败")}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},l=o,s=(a("9216"),a("2877")),c=Object(s["a"])(l,r,i,!1,null,"484795fd",null);t["default"]=c.exports},3737:function(e,t,a){"use strict";a("2f2f")},37582:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"90%",title:e.title,centered:"",bodyStyle:{height:"80vh"},visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("na-splitter",{staticStyle:{height:"calc(80vh - 15px)"},attrs:{defaultSize:200}},[t("div",{staticStyle:{"overflow-y":"auto","overflow-x":"hidden","padding-right":"2px"},attrs:{slot:"left-panel"},slot:"left-panel"},[t("a-menu",{attrs:{mode:"inline","default-selected-keys":e.defaultSelect},on:{click:e.handleMenuClick}},[t("a-menu-item",{key:1},[t("a-icon",{attrs:{type:"pie-chart"}}),t("span",[e._v("数据记录表")])],1),t("a-menu-item",{key:3},[t("a-icon",{attrs:{type:"pie-chart"}}),t("span",[e._v("作业记录表【新】")])],1),t("a-menu-item",{key:4},[t("a-icon",{attrs:{type:"pie-chart"}}),t("span",[e._v("检查记录表")])],1)],1)],1),t("div",{staticStyle:{"padding-left":"5px","padding-right":"3px"},attrs:{slot:"right-panel"},slot:"right-panel"},[t("div",[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline","label-col":e.formItemLayout.labelCol,"wrapper-col":e.formItemLayout.wrapperCol},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.findList.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:7,sm:24}},[t("a-form-item",{attrs:{label:"表单名称"}},[t("a-input",{attrs:{placeholder:"请输入表单名称"},model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,"name",t)},expression:"queryParam.name"}})],1)],1),t("a-col",{attrs:{md:4,sm:24}},[t("a-form-item",{attrs:{"label-col":e.formItemLayout.labelCol,"wrapper-col":e.formItemLayout.wrapperCol,label:"线路"}},[t("line-select-list",{model:{value:e.queryParam.lineId,callback:function(t){e.$set(e.queryParam,"lineId",t)},expression:"queryParam.lineId"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{"label-col":e.formItemLayout.labelCol,"wrapper-col":e.formItemLayout.wrapperCol,label:"所属修程"}},[t("j-dict-select-tag",{attrs:{triggerChange:"",dictCode:"bu_repair_program,name,id"},model:{value:e.queryParam.repairProId,callback:function(t){e.$set(e.queryParam,"repairProId",t)},expression:"queryParam.repairProId"}})],1)],1),t("a-col",{attrs:{md:3,sm:8}},[t("a-form-item",[t("a-button",{on:{click:e.findList}},[e._v("查询")])],1)],1)],1)],1)],1),t("div",{staticStyle:{height:"calc(80vh - 135px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(80vh - 135px)"},attrs:{border:"","max-height":"100%",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","edit-config":{trigger:"manual",mode:"row"},"radio-config":e.multiple?{}:{trigger:"row"},"checkbox-config":e.multiple?{trigger:"row",highlight:!0,range:!0}:{}}},[e.multiple?t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}):t("vxe-table-column",{attrs:{type:"radio",width:"40"}}),t("vxe-table-column",{attrs:{title:"-",width:"80"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("span",[t("a",{on:{click:function(t){return t.stopPropagation(),e.handleSeeing(r)}}},[e._v("预览")])])]}}])}),t("vxe-table-column",{attrs:{field:"title",title:3===e.formType?"作业记录表名称":1===e.formType?"数据记录表":4===e.formType?"检查记录表":"",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{width:"100",align:"left","header-align":"center",field:"code",title:"编码"}}),t("vxe-table-column",{attrs:{field:"lineName",title:"线路",width:"100"}}),4===e.formType?t("vxe-table-column",{attrs:{field:"repairProName",title:"修程",width:"100"}}):e._e(),1===e.formType||3===e.formType?t("vxe-table-column",{attrs:{field:"repairProgramName",title:"修程",width:"100"}}):e._e(),t("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("div",{style:{backgroundColor:e.statusColor[r.status+""],borderRadius:"4px"}},[e._v(" "+e._s(r.status_dictText)+" ")])]}}])}),t("vxe-table-column",{attrs:{field:"reguName",title:"所属规程",width:"120"}}),t("vxe-table-column",{attrs:{field:"reguVersion",title:"规程版本",width:"100"}}),t("vxe-table-column",{attrs:{field:"remark",title:"备注",align:"left","header-align":"center"}})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1)]),t("RecordTableView",{ref:"recordTableView"}),t("JobCheckTableView",{ref:"jobCheckTableView"}),t("FormViewModal",{ref:"formViewModal"})],1)])],1)},i=[],n=a("b7b4"),o=a("8fad"),l=a("4ec3"),s=a("e18e"),c=a("7e9e"),u=a("aaa8"),d=a("3dbe"),h=a("5633"),f={name:"FormsList",components:{NaSplitter:s["default"],RecordTableView:c["default"],FormViewModal:d["default"],LineSelectList:h["default"],JobCheckTableView:u["default"]},props:{title:{type:String,default:"表单选择"},multiple:{type:Boolean,default:!0}},data:function(){return{fileName:"",formItemLayout:{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}},statusColor:{0:"#dedede",1:"#bad795"},queryParam:{name:"",workstationId:"",lineId:"",repairProId:"",status:1,pageNo:1,pageSize:10},formType:3,workRecordType:2,defaultSelect:[3],dictCode:"bu_mtr_workstation,name,id",allAlign:"center",totalResult:0,tableData:[],visible:!1,confirmLoading:!1,stationData:[],isShowPlan:!1}},methods:{handleSeeing:function(e){var t=this;3===this.formType&&1===this.workRecordType&&this.$refs.recordTableView.show(e.id),(1===this.formType||3===this.formType&&2===this.workRecordType)&&this.$refs.formViewModal.showModal(e.id),4===this.formType&&Object(n["y"])({id:e.id}).then((function(e){if(e.success&&e.result){var a=e.result;t.$refs.jobCheckTableView.show(a)}else t.$message.error("加载记录数据异常")}))},showModal:function(e){e&&e.lineId&&(this.queryParam.lineId=e.lineId),e&&e.repairProgramId&&(this.queryParam.repairProId=e.repairProgramId),this.visible=!0,this.isShowPlan=!1,this.formType=3,this.workRecordType=2,this.defaultSelect=[3],this.findList()},showModalByPlan:function(e){this.visible=!0,this.isShowPlan=!0,this.formType=3,this.workRecordType=2,this.defaultSelect=[3],this.queryParam.planId=e,this.findList()},initDictData:function(){var e=this;Object(l["u"])(this.dictCode)?this.stationData=Object(l["u"])(this.dictCode):Object(l["f"])(this.dictCode).then((function(t){t.success&&(e.stationData=t.result)}))},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},initParamByFormType:function(){3===this.formType&&(this.queryParam.category="1328995639249358850",this.queryParam.type=1,this.workRecordType=2),1===this.formType&&(this.queryParam.category="1328995580210335746",this.queryParam.type=1,this.workRecordType=0)},findList:function(){var e=this;this.loading=!0,this.initParamByFormType(),(1===this.formType||3===this.formType&&2===this.workRecordType)&&Object(o["Dc"])(this.queryParam).then((function(t){t.success&&(e.totalResult=t.result.total,e.loading=!1,e.tableData=t.result.records)})),4===this.formType&&Object(o["mc"])(this.queryParam).then((function(t){t.success&&(e.totalResult=t.result.total,e.loading=!1,e.tableData=t.result.records)}))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()},handleOk:function(){var e=[];this.multiple?e=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&e.push(this.$refs.listTable.getRadioRecord());var t="";1===this.formType&&(t="数据记录表"),3===this.formType&&(1===this.workRecordType&&(t="作业记录表(老)"),2===this.workRecordType&&(t="作业记录表(新)")),4===this.formType&&(t="检查记录表"),this.$emit("ok",{formType:this.formType,workRecordType:this.workRecordType,formTypeName:t,forms:e}),this.visible=!1},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1},handleMenuClick:function(e){this.formType!==e.key&&(this.formType=e.key,this.queryParam.name="",this.initParamByFormType(),this.findList())}}},p=f,m=(a("3737"),a("2877")),g=Object(m["a"])(p,r,i,!1,null,"1ecb454d",null);t["default"]=g.exports},"39ff7":function(e,t,a){},"3ab9":function(e,t,a){},"3c2d":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{width:"100%","overflow-x":"hidden"}},[t("a-button",{attrs:{"na-btn-type":"print",type:"primary"},on:{click:e.exportPrint}},[e._v("导出打印")]),t("div",{staticStyle:{margin:"0px",padding:"0px",width:"100%",height:"calc(100vh - 85px)"},attrs:{id:"luckysheet"}}),e.showLoading?t("div",{staticStyle:{width:"100%","text-align":"center",position:"absolute",top:"0px",height:"100%","font-size":"16px","z-index":"1000000000",background:"#fff"}},[e._m(0)]):e._e()],1)},i=[function(){var e=this,t=e._self._c;return t("div",{staticStyle:{position:"relative",top:"45%",width:"100%"}},[t("div",{staticClass:"luckysheetLoaderGif"}),t("span",[e._v("加载中...")])])}],n=a("8fad"),o=a("2410"),l=a.n(o),s=a("e24e"),c={name:"view",props:["customId","formName"],data:function(){return{showLoading:!1,defaultOptions:{container:"luckysheet",title:"sheet",column:26,row:50,lang:"zh",allowEdit:!0,showinfobar:!1,sheetFormulaBar:!1,showsheetbar:!1,showstatisticBar:!0,enableAddRow:!1,enableAddCol:!1,showtoolbar:!1}}},beforeDestroy:function(){luckysheet.destroy()},mounted:function(){var e=this,t=l()(this.defaultOptions);t.data=[{name:"Sheet1",color:"",status:"1",order:"0",index:0,ch_width:2044,rh_height:1080}],this.customId?Object(n["ub"])(this.customId).then((function(e){if(e.success){var a=JSON.parse(e.result);a.scrollLeft=0,a.scrollTop=0,t.showtoolbarConfig={},a.config.authority={sheet:1,hintText:"禁止编辑",allowRangeList:[]},t.data=[a],luckysheet.destroy(),luckysheet.create(t)}})).catch((function(a){e.$message.error("加载表单内容异常"),luckysheet.destroy(),luckysheet.create(t)})):(luckysheet.destroy(),luckysheet.create(t))},methods:{exportPrint:function(){try{var e=this.formName;e||(e="export"),Object(s["a"])(luckysheet.getAllSheets(),e)}catch(t){}}}},u=c,d=a("2877"),h=Object(d["a"])(u,r,i,!1,null,"22edf2fe",null);t["default"]=h.exports},"3cf2":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div")},i=[],n=a("e8ae"),o=a("21a6"),l=a("b7b4"),s="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",c={name:"JobCheckTableExport",data:function(){return{}},props:{},created:function(){},mounted:function(){},methods:{sortArray:function(e){return e.sort(this.compare("sortNo")),e},compare:function(e){return function(t,a){return t[e]-a[e]}},printByRow:function(e){e.itemList=this.sortArray(e.itemList),this.initWorkBook(e)},printById:function(e){var t=this;Object(l["y"])({id:e}).then((function(e){e.success&&(e.result.itemList=t.sortArray(e.result.itemList),t.initWorkBook(e.result))}))},initWorkBook:function(e){var t=new n["Workbook"];t.creator="GY",t.lastModifiedBy="2021-10-28",t.created=new Date,t.modified=new Date,t.lastPrinted=new Date;var a=t.addWorksheet("Sheet1",{properties:{defaultRowHeight:30,defaultColWidth:22},pageSetup:{paperSize:9}});a.addRows([["车辆连挂作业过程检查项点"]]),a.getCell("A2").value="车号："+(e.trainNo||""),a.getCell("D2").value="部件名称："+(e.assetName||""),a.getCell("G2").value="作业周期："+(e.period||""),a.getCell("A3").value="部件编号："+(e.assetNo||""),a.getCell("D3").value="作业位置："+(e.location||""),a.getCell("G3").value="作业班组："+(e.groupName||""),a.getColumn("A").width=15,a.getColumn("B").width=30,a.getColumn("C").width=60,a.mergeCells("A1:J1"),a.mergeCells("A2:C2"),a.mergeCells("D2:F2"),a.mergeCells("G2:J2"),a.mergeCells("A3:C3"),a.mergeCells("D3:F3"),a.mergeCells("G3:J3"),a.addRows([["序号","项点","检查内容","等级","检查情况","结果","作业时间","检查方式","检查人","检查时间"]]);var r=[];(e.itemList||[]).forEach((function(e,t,a){for(var i="",n=0,o=5;n<o;n++)e.checkLevel>n?i+="★":i+="☆";r.push([e.sortNo||"",e.title||"",e.content||"",i,e.checkDesc||"",e.checkUserName?e.checkResult_dictText:"",e.workTime||"",e.checkMethod||"",e.checkUserName||"",e.checkTime||""])})),a.addRows(r);var i=4+(e.itemList||[]).length+1;a.mergeCells("A".concat(i,":J").concat(i)),a.getCell("A".concat(i+1)).value="参考工艺文件",a.mergeCells("A".concat(i+1,":B").concat(i+1)),a.mergeCells("C".concat(i+1,":J").concat(i+1));var l="";(e.techLinkList||[]).forEach((function(e,t,a){l+="".concat(t+1,"、").concat(e.teckBookName).concat(t<a.length-1?"\n":"")})),a.getCell("C".concat(i+1)).value=l;var c=12*((e.techLinkList||[]).length||1)+18,u=i+2;a.mergeCells("A".concat(u,":J").concat(u)),a.mergeCells("A".concat(u+1,":G").concat(u+1)),a.getCell("A".concat(u+1)).value="不合格项汇总",a.getCell("H".concat(u+1)).value="整改情况",a.getCell("I".concat(u+1)).value="复查时间",a.getCell("J".concat(u+1)).value="复查人",(e.rectifyList||[]).forEach((function(e,t,r){a.mergeCells("A".concat(u+t+2,":G").concat(u+t+2)),a.getCell("A".concat(u+t+2)).value=e.itemInfo,a.getCell("H".concat(u+t+2)).value=e.rectifyDesc,a.getCell("I".concat(u+t+2)).value=e.reviewTime,a.getCell("J".concat(u+t+2)).value=e.reviewUserName}));var d=u+(e.rectifyList||[]).length+2;a.mergeCells("A".concat(d,":J").concat(d)),a.getCell("A".concat(d+1)).value="评定",a.mergeCells("A".concat(d+1,":B").concat(d+1)),a.mergeCells("C".concat(d+1,":J").concat(d+1));var h="";(e.judgeList||[]).forEach((function(e,t,a){h+="评定人：".concat(e.jdUserName,"；评定时间：").concat(e.jdTime,"；评定内容：").concat(e.jdContent,"；").concat(t<a.length-1?"\n":"")})),a.getCell("C".concat(d+1)).value=h;var f=12*((e.judgeList||[]).length||1)+18,p=d+2;a.mergeCells("A".concat(p,":J").concat(p));var m=["表中只列出关键项点，检查人员在检查时参照工艺文件标准执行。","检查人员必须对当天作业内容进行检查。","表中所有内容全部现场检查时填写完成，并悬挂于部件上，随部件流转。","作业时间由作业班组填写，其余由检查人员填写。“检查情况”一栏详细记录检查情况；“结果”一栏对检查合格的画“√”不合格的画“×”；“检查方式”一栏写明检查手段，如：目视、测量、操作等。","检查人员对不合格项视情节严重情况开具整改单，及时提出整改意见，并督促整改，整改完成后及时进行复查。","由检查人员、质量工程师及专业工程师对整体作业质量做出最终判定。"];a.getCell("A".concat(p+1)).value="说明",a.mergeCells("A".concat(p+1,":B").concat(p+1)),a.mergeCells("C".concat(p+1,":J").concat(p+1));var g="";m.forEach((function(e,t,a){g+="".concat(t+1,"、").concat(e).concat(t<a.length-1?"\n":"")})),a.getCell("C".concat(p+1)).value=g;var v=12*(m.length||1)+18;a._rows.forEach((function(t,r){a.getRow(r+1).height=i==r?c:d==r?f:p==r?v:30,t._cells.forEach((function(t,n){var o=a.getCell(t._address);o.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},[1,2].indexOf(r)>-1||r-3>=0&&r-3<=e.itemList.length&&[1,2,4].indexOf(n)>-1||i==r&&n>=2||d>r&&u<r&&n<7||d==r&&n>=2||p==r&&n>=2?o.alignment={vertical:"middle",horizontal:"left",wrapText:!0}:o.alignment={vertical:"middle",horizontal:"center",wrapText:!0},[0,1,2,3,u].indexOf(r)>-1?(o.fill={type:"pattern",pattern:"darkGray",fgColor:{argb:"FFe9e9e9"}},o.font={name:"黑体",family:4,size:14,underline:!1,bold:!0}):o.font=r<i&&3==n?{name:"黑体",family:4,size:18,underline:!1,bold:!1}:{name:"黑体",family:4,size:12,underline:!1,bold:!1}}))})),t.xlsx.writeBuffer().then((function(t){var a=new Blob([t],{type:s});o["saveAs"](a,"".concat(e.title,".xlsx"))}))}}},u=c,d=a("2877"),h=Object(d["a"])(u,r,i,!1,null,"188fb66a",null);t["default"]=h.exports},"3dbe":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:"表单查看",width:"100%",dialogClass:"fullDialog no-footer",visible:e.visible,footer:null,destroyOnClose:!0},on:{cancel:function(t){e.visible=!1}}},[t("FormView",{attrs:{"custom-id":e.customId,"form-name":e.formName}})],1)},i=[],n=a("3c2d"),o={name:"FormViewModal",components:{FormView:n["default"]},props:["formName"],data:function(){return{visible:!1,customId:null}},methods:{showModal:function(e){e&&(this.customId=e,this.visible=!0)}}},l=o,s=a("2877"),c=Object(s["a"])(l,r,i,!1,null,"65a9461c",null);t["default"]=c.exports},"3ff1":function(e,t,a){},4501:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:"作业指导书",width:"100%",dialogClass:"fullDialog no-footer",visible:e.visible,footer:null},on:{cancel:e.handleCancel}},[t("div",{staticClass:"sop-body"},[t("div",{staticStyle:{display:"flex","align-content":"center","flex-wrap":"wrap"}},[e.loading?t("a-spin",{attrs:{tip:"下载中..."}}):e._e()],1),e.loading?e._e():t("div",{ref:"mainDom",staticClass:"sop-body-page"})])])},i=[],n=a("8fad"),o={name:"WorkSopView",components:{},data:function(){return{visible:!1,tableData:[],queryParam:{bookId:""},loading:!1}},created:function(){},methods:{findList:function(){},handleCancel:function(){this.visible=!1},showBook:function(e){var t=this;this.visible=!0,this.loading=!0,Object(n["Pb"])({bookId:e}).then((function(e){if(e.success){var a=[];e.result.forEach((function(e){a.push(Object(n["Qb"])({detailId:e.id}).then((function(e){if(e.success){var a=JSON.parse(JSON.stringify(e.result));return a}return t.$message.error(e.message),null})))})),Promise.all(a).then((function(e){e.sort((function(e,t){return e.stepNum-t.stepNum}));var a="";e.forEach((function(e){e&&(a+="<h2>".concat(e.stepNum,'<span style="margin-left:15px;margin-top: 24px;">').concat(e.stepTitle,"</span></h2>"),a+=e.stepContent||"")})),t.loading=!1,t.$nextTick.call(t,(function(){t.$refs.mainDom.innerHTML=a}))}))}}))},showSopDetail:function(e){var t=this;this.visible=!0;var a=[];e.forEach((function(e){a.push(Object(n["Qb"])({detailId:e}).then((function(e){return e.success?e.result:""})))})),Promise.all(a).then((function(e){var a="";e.forEach((function(e){a+="<h2>".concat(e.stepNum,'<span style="margin-left:15px;">').concat(e.stepTitle,"</span></h2>"),a+=e.stepContent})),t.$refs.mainDom.innerHTML=a}))}}},l=o,s=(a("a9f9"),a("bca7"),a("2877")),c=Object(s["a"])(l,r,i,!1,null,"7e7655fc",null);t["default"]=c.exports},"45ff":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{ref:"calcHeight"})},i=[],n=a("e8ae"),o=a("21a6"),l=a("8fad"),s="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",c={name:"TableExport",data:function(){return{}},mounted:function(){},methods:{printById:function(e){var t=this;Object(l["Ab"])({id:e}).then((function(e){e.success?t.initWorkBook(e.result):t.$message.error("获取记录表详情失败")})).catch((function(e){t.$message.error("获取记录表详情异常")}))},printByData:function(e){this.initWorkBook(e)},initWorkBook:function(e){var t=new n["Workbook"];t.creator="GY",t.lastModifiedBy="2021-10-28",t.created=new Date,t.modified=new Date,t.lastPrinted=new Date;var a=t.addWorksheet("Sheet1",{properties:{defaultColWidth:22,alignment:{vertical:"middle",horizontal:"left",wrapText:!0}},pageSetup:{paperSize:9}}),r=[];a.mergeCells("A1:C1"),a.getCell("A1").value="车号："+(e.trainNo||""),r.push({cell:"A1",horizontal:"left",fill:!0,size:14,bold:!0}),0===e.updown?(a.mergeCells("A2:C2"),a.getCell("A2").value="部件号："+(e.manufNo||""),r.push({cell:"A2",horizontal:"left",fill:!0,size:14,bold:!0})):1===e.updown?(a.mergeCells("A2:C2"),a.getCell("A2").value="原部件序列号："+(e.manufNo||""),r.push({cell:"A2",horizontal:"left",fill:!0,size:14,bold:!0}),a.mergeCells("A3:C3"),a.getCell("A3").value="新部件序列号："+(e.manufNoUp||""),r.push({cell:"A3",horizontal:"left",fill:!0,size:14,bold:!0})):a.mergeCells("A1:C2"),1===e.updown?a.mergeCells("D1:F3"):a.mergeCells("D1:F2"),a.getCell("D1").value=e.title||e.workRecName||"",r.push({cell:"D1",fill:!0,size:14,bold:!0}),a.mergeCells("G1:H1"),a.getCell("G1").value="作业日期："+(e.workDate||""),r.push({cell:"G1",fill:!0,horizontal:"left",size:14,bold:!0}),a.mergeCells("I1:J1"),a.getCell("I1").value="完工日期："+(e.finishDate||""),r.push({cell:"I1",fill:!0,horizontal:"left",size:14,bold:!0}),1===e.updown?a.mergeCells("G2:J3"):a.mergeCells("G2:J2"),a.getCell("G2").value="作业班组："+(e.workGroupName||""),r.push({cell:"G2",fill:!0,horizontal:"left",size:14,bold:!0}),a.getColumn("A").width=15,a.getColumn("B").width=30,a.getColumn("C").width=60,a.getColumn("D").width=15,a.getColumn("E").width=60,a.getColumn("F").width=60,a.getRow(1).height=30,a.getRow(2).height=30,a.getRow(3).height=30,1===e.updown&&(a.getRow(4).height=30);var i={A:"序号",B:"项目",C:"作业内容",D:"控制点",E:"技术要求",F:"作业情况",G:"结果",H:"自检",I:"互检",J:"专检"};for(var l in i)a.getCell(l+(1===e.updown?4:3)).value=i[l],r.push({cell:l+(1===e.updown?4:3),fill:!0,size:14,bold:!0});var c=1===e.updown?5:4,u=0;e.categoryList.forEach((function(e,t){a.getCell("A".concat(c+t)).value=e.recIndex,r.push({cell:"A".concat(c+t)}),a.mergeCells("A".concat(c+t,":A").concat(c+t+e.detailList.length-1)),a.getCell("B".concat(c+t)).value=e.reguTitle,r.push({cell:"B".concat(c+t),horizontal:"left"}),a.mergeCells("B".concat(c+t,":B").concat(c+t+e.detailList.length-1)),e.detailList.forEach((function(e,i){a.getCell("C".concat(c+t+i)).value="\n".concat(e.workContent||"","\n"),r.push({cell:"C".concat(c+t+i),horizontal:"left"}),a.getCell("D".concat(c+t+i)).value=e.checkLevel_dictText||"",r.push({cell:"D".concat(c+t+i)}),a.getCell("E".concat(c+t+i)).value="\n".concat(e.techRequire||"","\n"),r.push({cell:"E".concat(c+t+i),horizontal:"left"}),a.getCell("F".concat(c+t+i)).value=0==e.isIgnore?e.workInfo:e.ignoreDesc,r.push({cell:"F".concat(c+t+i),horizontal:"left"}),a.getCell("G".concat(c+t+i)).value=e.result?"√":"□",r.push({cell:"G".concat(c+t+i)}),a.getCell("H".concat(c+t+i)).value=e.selfCheck||"",r.push({cell:"H".concat(c+t+i)}),a.getCell("I".concat(c+t+i)).value=e.guarderCheck||"",r.push({cell:"I".concat(c+t+i)}),a.getCell("J".concat(c+t+i)).value=e.monitorCheck||"",r.push({cell:"J".concat(c+t+i)})})),c+=e.detailList.length-1,u+=e.detailList.length})),u+=1===e.updown?5:4,a.mergeCells("A".concat(u,":J").concat(u)),a.getRow(u).height=30,r.push({cell:"A".concat(u),bold:!0}),u+=1;var d=e.measureToolList||[];d.length&&(a.mergeCells("A".concat(u,":B").concat(u+d.length-1)),a.getCell("A".concat(u)).value="计量器具使用",r.push({cell:"A".concat(u)}),d.forEach((function(e,t,i){a.mergeCells("C".concat(u+t,":D").concat(u+t)),a.getCell("C".concat(u+t)).value=" \n名称："+(e.name||"")+"\n",r.push({cell:"C".concat(u+t),horizontal:"left"}),a.getCell("E".concat(u+t)).value=" \n规格型号："+(e.model||"")+"\n",r.push({cell:"E".concat(u+t),horizontal:"left"}),a.getCell("F".concat(u+t)).value=" \n出厂编号："+(e.serialNo||"")+"\n",r.push({cell:"F".concat(u+t),horizontal:"left"}),a.mergeCells("G".concat(u+t,":H").concat(u+t)),a.getCell("G".concat(u+t)).value=" \n上次检验时间："+(e.lastCheckTime||"")+"\n",r.push({cell:"G".concat(u+t),horizontal:"left"}),a.mergeCells("I".concat(u+t,":J").concat(u+t)),a.getCell("I".concat(u+t)).value=" \n下次检验时间："+(e.nextCheckTime||"")+"\n",r.push({cell:"I".concat(u+t),horizontal:"left"})})),u+=d.length,a.mergeCells("A".concat(u,":J").concat(u)),a.getRow(u).height=30,r.push({cell:"A".concat(u),bold:!0}),u+=1);var h=["控制点分为H点和W点，“H”点为该项工序操作过程必须经过专业工程师现场检查确认的工序，“W”点为班组长可在工序完工后确认的工序。","“自检”栏为作业者本人进行签字；“互检”栏由作业监护人员进行检查签字；“专检”栏由班组长进行检查签字。“质量负责人”由相关专业工程师进行签字。","“作业情况”需根据实际情况填写。若该项工序无异常则由作业者在框中填入√；若该项工序存在异常，则将实际故障情况填入框内。","“结果”栏方框在完成该项作业及检查后，由工班长进行填写。若无异常则在方框内填入√，若有异常，工班长需对故障情况进行确认，在方框内填入×，并将故障在“备注”栏进行汇总。","作业内容中有数据要求的一并填入“作业情况”栏。"];a.mergeCells("A".concat(u,":J").concat(u));var f="";h.forEach((function(e,t,a){f+="".concat(t+1,"、").concat(e).concat(t<a.length-1?"\n":"")})),f="说明：\n"+f+"\n",f="\n检查结果：".concat(0===e.checkResult?"未通过":"通过","                                        检查日期：").concat(e.checkDate||"            ","                                        质量负责人：").concat(e.checkUserName||"            ","\n\n")+f,a.getCell("A".concat(u)).value=f,r.push({cell:"A".concat(u),horizontal:"left",border:top});var p=12*(h.length+4)+18;a.getRow(u).height=p,r.forEach((function(e,t,r){var i=a.getCell(e.cell);i.alignment={vertical:"middle",horizontal:e.horizontal||"center",wrapText:!0},e.fill&&(i.fill={type:"pattern",pattern:"darkGray",fgColor:{argb:"FFe9e9e9"}}),i.font={name:"黑体",family:4,size:e.size||12,underline:!1,bold:e.bold||!1},i.padding={top:10,left:10,bottom:10,right:10},i.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}})),t.xlsx.writeBuffer().then((function(t){var a=new Blob([t],{type:s});o["saveAs"](a,"".concat(e.title||e.workRecName,".xlsx"))}))}}},u=c,d=a("2877"),h=Object(d["a"])(u,r,i,!1,null,"dac1198a",null);t["default"]=h.exports},"4eb4":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,width:800,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:10,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"所属修程"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator",value:["repairProId",e.validatorRules.repairProId],expression:"['repairProId', validatorRules.repairProId]"}],attrs:{triggerChange:"",dictCode:"bu_repair_program,name,id"}})],1)],1),t("a-col",{attrs:{md:10,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"所属线路"}},[t("line-select-list",{directives:[{name:"decorator",rawName:"v-decorator",value:["lineId",e.validatorRules.lineId],expression:"['lineId', validatorRules.lineId]"}],attrs:{"trigger-change":!0},on:{change:e.handlerLine}})],1)],1),t("a-col",{attrs:{md:10,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"所属车间"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator",value:["workshopId",e.validatorRules.workshopId],expression:"['workshopId', validatorRules.workshopId]"}],attrs:{triggerChange:"",dictCode:"bu_mtr_workshop,name,id"}})],1)],1),t("a-col",{attrs:{md:14,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-upload",{attrs:{multiple:!1,"file-list":e.fileList,accept:".xlsx,.xls",remove:e.handleRemove,"before-upload":e.beforeUpload}},[t("a-button",{attrs:{type:"primary"}},[e._v("添加文件")])],1)],1)],1)],1)],1)],1)],1)},i=[],n=(a("c1df"),a("cf74")),o=(a("ca00"),a("e2aa"),a("8fad")),l=(a("d214"),a("5633")),s={name:"ImportModal",components:{JUpload:n["default"],LineSelectList:l["default"]},data:function(){return{title:"",visible:!1,confirmLoading:!1,fileList:[],form:this.$form.createForm(this),trainTypeId:"",validatorRules:{repairProId:{rules:[{required:!0,message:"请选择所属修程!"}]},lineId:{rules:[{required:!0,message:"请所属线路!"}]},workshopId:{rules:[{required:!0,message:"请选择所属车间!"}]}},labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:15}}}},methods:{handlerLine:function(e,t){t&&(this.trainTypeId=t.trainTypeId)},handleRemove:function(e){var t=this.fileList.indexOf(e),a=this.fileList.slice();a.splice(t,1),this.fileList=a},beforeUpload:function(e){var t=e.size/1024/1024<10;if(t){var a="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===e.type||"application/vnd.ms-excel application/x-excel"===e.type;if(a)return this.$set(this.fileList,0,e),!1;this.$message.error("只支持Excel文件导入!")}else this.$message.error("文件不得大于10MB!")},customRequest:function(e){var t=this,a=this.fileList;a.forEach((function(a){var r=new FormData;r.append("file",a),r.append("repairProId",e.repairProId),r.append("lineId",e.lineId),r.append("workshopId",e.workshopId),r.append("trainTypeId",t.trainTypeId),t.confirmLoading=!0,Object(o["oc"])(r).then((function(e){e.success?(t.$message.success(e.message),t.close(),t.$emit("ok")):t.$message.error(e.message)})).finally((function(){t.confirmLoading=!1}))}))},showModal:function(){this.visible=!0},handleOk:function(){var e=this;this.form.validateFields((function(t,a){if(!t)if(e.fileList.length<1)e.$message.warn("请添加文件!");else{var r=Object.assign({},a);e.params=r,e.customRequest(r)}}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,this.fileList=[]}}},c=s,u=a("2877"),d=Object(u["a"])(c,r,i,!1,null,"04549754",null);t["default"]=d.exports},"500a":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"90%",title:"选择规程",centered:"",visible:e.visible,bodyStyle:{height:"70vh"},confirmLoading:e.confirmLoading,cancelText:"关闭",destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-row",[t("a-col",{staticStyle:{"border-right":"1px dotted #D3E1F1",height:"calc(70vh - 20px)","margin-right":"8px",padding:"0px"},attrs:{md:4,sm:24}},[t("a-menu",{attrs:{mode:"inline","default-selected-keys":e.defaultKey},on:{click:e.handleMenuClick}},e._l(e.treeData,(function(a){return t("a-menu-item",{key:a.id},[t("a-icon",{attrs:{type:"container"}}),t("span",[e._v(e._s(a.name))])],1)})),1)],1),t("a-col",{attrs:{md:19,sm:24}},[this.planId?t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline","label-col":e.formItemLayout.labelCol,"wrapper-col":e.formItemLayout.wrapperCol},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.findList.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:4,sm:24}},[t("a-form-item",{attrs:{label:"是否已关联"}},[t("j-dict-select-tag",{attrs:{dictCode:"bu_state","allow-clear":""},model:{value:e.tpPlanRelated,callback:function(t){e.tpPlanRelated=t},expression:"tpPlanRelated"}})],1)],1),t("a-col",{attrs:{md:3,sm:8}},[t("a-form-item",[t("a-button",{on:{click:e.findList}},[e._v("查询")])],1)],1)],1)],1)],1):e._e(),t("div",{staticStyle:{height:"calc(70vh - 20px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(70vh - 20px)"},attrs:{border:"","row-id":"id","max-height":"100%",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","edit-config":{trigger:"manual",mode:"row"},"radio-config":e.multiple?{}:{trigger:"row",checkMethod:e.checkRadioMethod},"checkbox-config":e.multiple?{checkStrictly:e.checkStrictly,trigger:"row",highlight:!0}:{},"tree-config":{lazy:!0,children:"children",hasChild:"hasChildren",loadMethod:e.loadChildrenMethod}}},[e.multiple?t("vxe-table-column",{attrs:{type:"checkbox",width:"40",fixed:"left"}}):t("vxe-table-column",{attrs:{type:"radio",width:"40"}}),t("vxe-table-column",{attrs:{field:"title",title:"名称","tree-node":"",align:"left"}}),t("vxe-table-column",{attrs:{field:"no",title:"序号",width:"80"}}),t("vxe-table-column",{attrs:{field:"type_dictText",title:"类型",width:"100"}}),t("vxe-table-column",{attrs:{field:"method_dictText",title:"维保手段",width:"120"}}),t("vxe-table-column",{attrs:{field:"qualityLevel",title:"质保等级",width:"80"}}),t("vxe-table-column",{attrs:{field:"safeNotice",title:"安全提示",width:"160"}}),t("vxe-table-column",{attrs:{field:"remark",title:"备注",width:"120"}}),this.planId?t("vxe-table-column",{attrs:{field:"tpPlanRelatedInfo",title:"模板已关联",width:"120"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("div",{style:{backgroundColor:e.statusColor[r.tpPlanRelated+""],borderRadius:"4px"}},[e._v(" "+e._s(r.tpPlanRelatedInfo)+" ")])]}}],null,!1,2972306538)}):e._e()],1)],1)])],1)],1)},i=[],n=a("8fad"),o={name:"RegulationList",props:{multiple:{type:Boolean,default:!1},checkStrictly:{type:Boolean,default:!0},reguId:{type:String,default:""},planId:{type:String,default:""},trainTypeId:{type:String,default:""},onlyProject:{type:Boolean,default:!1}},data:function(){return{visible:!1,confirmLoading:!1,statusColor:{0:"#dedede",1:"#bad795"},treeData:[],curReguId:"",tableData:[],allAlign:"center",defaultKey:[],tpPlanRelated:"",formItemLayout:{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}}}},methods:{showModal:function(){this.visible=!0,this.getTreeList()},checkRadioMethod:function(e){var t=e.row;return!this.onlyProject||1===t.type},getTreeList:function(){var e=this;this.reguId?Object(n["Ib"])(this.reguId).then((function(t){t.success?(e.curReguId=e.reguId,e.treeData=[t.result],e.getReguDetailList(e.curReguId)):e.$message.error("获取规程信息失败")})).catch((function(t){e.$message.error("获取规程信息异常")})):Object(n["Lb"])({trainTypeId:this.trainTypeId}).then((function(t){t.success?(e.defaultKey[0]=t.result[0].id,e.curReguId=t.result[0].id,e.treeData=t.result,e.getReguDetailList(e.curReguId)):e.$message.error("获取规程信息失败")})).catch((function(t){e.$message.error("获取规程信息异常")}))},findList:function(){var e=this,t={reguId:this.reguId,tpPlanId:this.planId,tpPlanRelated:this.tpPlanRelated};Object(n["Kb"])(t).then((function(t){e.tableData=t.result}))},getReguDetailList:function(e){var t=this,a={reguId:e,tpPlanId:this.planId,tpPlanRelated:this.tpPlanRelated};Object(n["Kb"])(a).then((function(e){t.tableData=e.result}))},loadChildrenMethod:function(e){var t=this,a={reguId:this.reguId,parentId:e.row.id,tpPlanId:this.planId,tpPlanRelated:this.tpPlanRelated};return new Promise((function(e){Object(n["Kb"])(a).then((function(a){a.success?e(a.result):t.$message.error("".concat(a.msg))}))}))},onSelect:function(e,t){var a=t.node.dataRef;e.length>0&&(this.curReguId=a.id,this.getReguDetailList(a.id))},handleMenuClick:function(e){this.getReguDetailList(e.key)},handleOk:function(){var e=[];this.multiple?e=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&e.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",e),this.close()},handleCancel:function(){this.close()},close:function(){this.visible=!1}}},l=o,s=(a("5125"),a("2877")),c=Object(s["a"])(l,r,i,!1,null,"210f6b5e",null);t["default"]=c.exports},5125:function(e,t,a){"use strict";a("d059")},"5bbd":function(e,t,a){},"61ca":function(e,t,a){"use strict";a("c35c")},7237:function(e,t,a){},7268:function(e,t,a){"use strict";var r=a("b7b4");function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",i=a.toStringTag||"@@toStringTag";function l(a,r,i,n){var l=r&&r.prototype instanceof c?r:c,u=Object.create(l.prototype);return o(u,"_invoke",function(a,r,i){var n,o,l,c=0,u=i||[],d=!1,h={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,a){return n=t,o=0,l=e,h.n=a,s}};function f(a,r){for(o=a,l=r,t=0;!d&&c&&!i&&t<u.length;t++){var i,n=u[t],f=h.p,p=n[2];a>3?(i=p===r)&&(l=n[(o=n[4])?5:(o=3,3)],n[4]=n[5]=e):n[0]<=f&&((i=a<2&&f<n[1])?(o=0,h.v=r,h.n=n[1]):f<p&&(i=a<3||n[0]>r||r>p)&&(n[4]=a,n[5]=r,h.n=p,o=0))}if(i||a>1)return s;throw d=!0,r}return function(i,u,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,p),o=u,l=p;(t=o<2?e:l)||!d;){n||(o?o<3?(o>1&&(h.n=-1),f(o,l)):h.n=l:h.v=l);try{if(c=2,n){if(o||(i="next"),t=n[i]){if(!(t=t.call(n,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,o<2&&(o=0)}else 1===o&&(t=n.return)&&t.call(n),o<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),o=1);n=e}else if((t=(d=h.n<0)?l:a.call(r,h))!==s)break}catch(t){n=e,o=1,l=t}finally{c=1}}return{value:t,done:d}}}(a,i,n),!0),u}var s={};function c(){}function u(){}function d(){}t=Object.getPrototypeOf;var h=[][r]?t(t([][r]())):(o(t={},r,(function(){return this})),t),f=d.prototype=c.prototype=Object.create(h);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,o(e,i,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=d,o(f,"constructor",d),o(d,"constructor",u),u.displayName="GeneratorFunction",o(d,i,"GeneratorFunction"),o(f),o(f,i,"Generator"),o(f,r,(function(){return this})),o(f,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:l,m:p}})()}function o(e,t,a,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}o=function(e,t,a,r){function n(t,a){o(e,t,(function(e){return this._invoke(t,a,e)}))}t?i?i(e,t,{value:a,enumerable:!r,configurable:!r,writable:!r}):e[t]=a:(n("next",0),n("throw",1),n("return",2))},o(e,t,a,r)}function l(e,t,a,r,i,n,o){try{var l=e[n](o),s=l.value}catch(e){return void a(e)}l.done?t(s):Promise.resolve(s).then(r,i)}function s(e){return function(){var t=this,a=arguments;return new Promise((function(r,i){var n=e.apply(t,a);function o(e){l(n,r,i,o,s,"next",e)}function s(e){l(n,r,i,o,s,"throw",e)}o(void 0)}))}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function d(e,t,a){return t&&u(e.prototype,t),a&&u(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e){var t=f(e,"string");return"symbol"==i(t)?t:t+""}function f(e,t){if("object"!=i(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var p=function(){function e(){c(this,e)}return d(e,[{key:"getDefaultOptions",value:function(){return{container:"luckysheet",title:"sheet",column:26,row:150,lang:"zh",allowEdit:!0,showinfobar:!1,sheetFormulaBar:!1,showsheetbar:!1,showstatisticBar:!0,enableAddRow:!1,enableAddCol:!1,showtoolbar:!0,showtoolbarConfig:{undoRedo:!0,paintFormat:!0,currencyFormat:!0,percentageFormat:!0,numberDecrease:!0,numberIncrease:!0,moreFormats:!0,font:!0,fontSize:!0,bold:!0,italic:!0,strikethrough:!0,underline:!0,textColor:!0,fillColor:!0,border:!0,mergeCell:!0,horizontalAlignMode:!0,verticalAlignMode:!0,textWrapMode:!0,textRotateMode:!1,image:!1,link:!1,chart:!1,postil:!1,pivotTable:!1,function:!1,frozenMode:!1,sortAndFilter:!1,conditionalFormat:!1,dataVerification:!1,splitColumn:!1,screenshot:!1,findAndReplace:!1,protection:!1,print:!1},cellRightClickConfig:{copy:!1,copyAs:!1,paste:!1,insertRow:!1,insertColumn:!1,deleteRow:!1,deleteColumn:!1,deleteCell:!1,hideRow:!1,hideColumn:!1,rowHeight:!1,columnWidth:!1,clear:!1,matrix:!1,sort:!1,filter:!1,chart:!1,image:!1,link:!1,data:!1,cellFormat:!1},hook:{}}}},{key:"getDevlovperOptions",value:function(){return{container:"luckysheet",title:"sheet",column:13,row:30,lang:"zh"}}},{key:"getSelectRange",value:function(){var e=luckysheet.getRange();if(!(e&&e.length>0))return null;e=e[0];var t={r1:e.row[0],r2:e.row[1],c1:e.column[0],c2:e.column[1]};return t}},{key:"checkProperty",value:function(e,t){var a=t in e&&null!=e[t]&&void 0!=e[t];return a}},{key:"getCell",value:function(e,t,a){return a[e][t]}},{key:"getCellText",value:function(e){var t=this,a="";if(this.checkProperty(e,"m"))a=e.m;else if(this.checkProperty(e,"v"))a=e.v;else if(this.checkProperty(e,"ct")&&this.checkProperty(e.ct,"s")){var r=e.ct.s;r.forEach((function(e,r){t.checkProperty(e,"m")?a+=e.m:t.checkProperty(e,"v")&&(a+=e.v)}))}return a}},{key:"searchCellByText",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(!t)return null;if(-1===a)for(var r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++){var n=t[r][i];if(n){var o=this.getCellText(n);if(o&&o.indexOf(e)>-1)return{r:r,c:i,mc:n.mc,cell:n}}}else for(var l=0;l<t[a].length;l++){var s=t[a][l];if(s){var c=this.getCellText(s);if(c&&c.indexOf(e)>-1)return{r:a,c:l,mc:s.mc,cell:s}}}return null}},{key:"findCellRightIndex",value:function(e){if(!this.checkProperty(e,"mc"))return e.c+1;var t=e.mc;return this.checkProperty(t,"r")&&this.checkProperty(t,"c")&&this.checkProperty(t,"rs")&&this.checkProperty(t,"cs")?e.mc.c+e.mc.cs:this.checkProperty(t,"r")&&this.checkProperty(t,"c")?-1:void 0}},{key:"getCellLocation",value:function(e,t,a){var r={rowIndex:e,rowIndexTo:e,colIndex:t,colIndexTo:t};if(this.checkProperty(a,"mc")){var i=a.mc;this.checkProperty(i,"r")&&this.checkProperty(i,"c")&&this.checkProperty(i,"rs")&&this.checkProperty(i,"cs")&&(r.rowIndex=a.mc.r,r.colIndex=a.mc.c,r.rowIndexTo=a.mc.r+a.mc.rs-1,r.colIndexTo=a.mc.c+a.mc.cs-1)}return r}},{key:"char2Index",value:function(e){var t=0;if(e.length<2&&(t=e.charCodeAt()-65),2===e.length){var a=e[0],r=e[1],i=a.charCodeAt()-65;i=25*(i+1),t=i+r.charCodeAt()-64}return t}},{key:"index2Chart",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t=e+1;if(t<=26)return String.fromCharCode(64+t);var a=parseInt(t/26),r=parseInt(t%26);0==r&&(a-=1);var i=a+64,n=t-26*a,o=String.fromCharCode(i),l=index2Chart(n);return o+""+l}))},{key:"mcToRange",value:function(e){if(!e)return"";this.checkProperty(e,"rs")&&this.checkProperty(e,"cs")}},{key:"setCellValue",value:function(e,t,a){luckysheet.setCellValue(e,t,a,{success:function(){}})}},{key:"setBorder",value:function(e,t,a,r){for(var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#000000",n=this.char2Index(t),o=this.char2Index(r),l=e;l<=a;l++)for(var s=n;s<=o;s++)luckysheet.setCellFormat(l,s,"bd",{borderType:"border-all",style:"1",color:i}),this.addBorderInfo(l,s)}},{key:"addBorderInfo",value:function(e,t){var a={rangeType:"cell",value:{row_index:e,col_index:t,l:{style:1,color:"#000000"},r:{style:1,color:"#000000"},t:{style:1,color:"#000000"},b:{style:1,color:"#000000"}}};luckysheet.getLuckysheetfile()[0].config.borderInfo.push(a)}},{key:"setRangeFormat",value:function(e,t,a,r,i,n){for(var o=this.char2Index(r),l=this.char2Index(n),s=a;s<=i;s++)for(var c=o;c<=l;c++)try{luckysheet.setCellFormat(s,c,e,t)}catch(u){}}},{key:"setRangeCellValue",value:function(e,t,a,r,i){for(var n=this.char2Index(a),o=this.char2Index(i),l=t;l<=r;l++)for(var s=n;s<=o;s++)try{luckysheet.setCellValue(l,s,e)}catch(c){}}},{key:"setCellValueByTemplate",value:function(e,t,a){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;e.forEach((function(e){if(1===i){var n=t.replaceAll(a,e.row+1);r.setCellValue(e.row,r.char2Index(e.col),n)}if(2===i){var o=t.replaceAll(a,e.col);r.setCellValue(e.row,r.char2Index(e.col),o)}}))}},{key:"setCellValueByObjectValue",value:function(e,t,a){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;e.forEach((function(e){1===i&&(e.value[t]=e.value[t].replaceAll(a,e.row+1),r.setCellValue(e.row,r.char2Index(e.col),e.value)),2===i&&(e.value[t]=e.value[t].replaceAll(a,e.col),r.setCellValue(e.row,r.char2Index(e.col),e.value))}))}},{key:"setCellValueByArrayData",value:function(e,t,a,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},n={};for(var o in i)n[o]=i[o];return i["ct"]||(n["ct"]={fa:"General",t:"n"}),i["fs"]||(n["fs"]="10"),i["ht"]||(n["ht"]=0),i["vt"]||(n["vt"]=0),n["m"]=r,n["v"]=r,e.push({r:t,c:this.char2Index(a),v:n})}},{key:"setCellMergeByValue",value:function(e,t,a){var r=Number(/[0-9].*/.exec(t)[0]),i=this.char2Index(/^[A-Z]{1,2}/.exec(t)[0]),n=/[0-9].*/.exec(a)[0],o=this.char2Index(/^[A-Z]{1,2}/.exec(a)[0]);(e.config["merge"]||(e.config["merge"]={}))["".concat(r-1,"_").concat(i)]={r:r-1,c:i,rs:n-r+1,cs:o-i+1}}},{key:"setRangeConditionalOncell",value:function(){var e=s(n().m((function e(t){var a,i,o,l=arguments;return n().w((function(e){while(1)switch(e.n){case 0:a=l.length>1&&void 0!==l[1]?l[1]:"",[];try{i=function(e,t,a){var r=[];switch(t){case 1:r=["equal"],o(e,r,a);break;case 2:r=["greaterThan","equal"],o(e,r,a);break;case 3:r=["greaterThan"],o(e,r,a);break;case 4:r=["lessThan","equal"],o(e,r,a);break;case 5:r=["lessThan"],o(e,r,a);break;case 6:luckysheet.setCellFormat(e.row1,e.col1,"bg","#ff0000"),luckysheet.setRangeConditionalFormatDefault("equal",[a],{format:{cellColor:"#ffffff",textColor:null},cellrange:{row:[e.row1,e.row2],column:[e.col1,e.col2]}});break}},o=function(e,t,a){t.forEach((function(t){luckysheet.setRangeConditionalFormatDefault(t,[a],{format:{cellColor:"#ff0000",textColor:null},cellrange:{row:[e.row1,e.row2],column:[e.col1,e.col2]},success:function(e){}})}))},Object(r["p"])(t).then((function(e){if(e.success){var t=e.result;t&&t.length>0&&(t.forEach((function(e){e.operator&&i(e,e.operator,e.threshold),e.operator2&&i(e,e.operator2,e.threshold2)})),Object(r["o"])(a).then((function(e){e.result.forEach((function(e){if(e.fixedValue){var t=e.linkDomain.split("$"),a=t[1],r=t[2];luckysheet.setCellFormat(a,r,"bg","#ffff00"),luckysheet.setCellFormat(a,r,"ps",{left:92,top:0,width:91,height:12,value:"修复前预警值：".concat(e.alertValue),isshow:!1})}}))})))}}))}catch(n){}case 1:return e.a(2)}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getAttrKeyByName",value:function(e){switch(e){case"自检":return"zijian";case"互检":return"hujian";case"专检":return"zhuanjian";default:return""}}}])}();t["a"]=new p},7279:function(e,t,a){"use strict";a("95ba")},"7ba1":function(e,t,a){"use strict";a("5bbd")},"7e9e":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,centered:"",width:"100%",dialogClass:"fullDialog no-footer",visible:e.visible,confirmLoading:e.loading,footer:null,cancelText:"关闭",destroyOnClose:!0},on:{ok:e.close,cancel:e.close}},[t("a-button",{attrs:{"na-btn-type":"print",type:"primary"},on:{click:e.print}},[e._v("导出")]),t("RecordSheetTable",{directives:[{name:"show",rawName:"v-show",value:e.recordSheet,expression:"recordSheet"}],ref:"recordTable"}),t("div",{staticStyle:{height:"20px"}}),t("TableExport",{ref:"tablePrintRef"})],1)},i=[],n=a("8fad"),o=a("958d"),l=a("45ff"),s={name:"RecordTableView",components:{RecordSheetTable:o["default"],TableExport:l["default"]},props:{},data:function(){return{title:"记录表查看",visible:!1,loading:!1,recordId:"",recordSheet:{}}},mounted:function(){},methods:{show:function(e){this.recordId=e,this.loadData(),this.visible=!0},close:function(){this.$emit("close"),this.visible=!1},loadData:function(){var e=this;Object(n["Ab"])({id:this.recordId}).then((function(t){t.success?(e.recordSheet=t.result,e.$refs.recordTable.loadData(e.recordSheet)):e.$message.error("获取记录表详情失败")})).catch((function(t){e.$message.error("获取记录表详情异常")}))},print:function(){this.$refs.tablePrintRef.printById(this.recordId)}}},c=s,u=a("2877"),d=Object(u["a"])(c,r,i,!1,null,"a8b3abda",null);t["default"]=d.exports},"7ea5":function(e,t,a){"use strict";a("0655")},"85df":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"90%",visible:e.visible,title:"作业指导步骤选择",centered:"",bodyStyle:{height:"80vh"},confirmLoading:e.confirmLoading,cancelText:"关闭",destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("na-splitter",{staticClass:"booksetp-body",staticStyle:{},attrs:{defaultSize:300}},[t("div",{staticStyle:{"overflow-y":"auto","overflow-x":"hidden","padding-right":"2px",height:"100%"},attrs:{slot:"left-panel"},slot:"left-panel"},[t("a-card",{attrs:{id:"bookStepsContent",height:"100%"}},[t("div",{staticClass:"typeTitle"},[e._v("作业指导书")]),t("a-input-search",{staticStyle:{margin:"8px 0",width:"90%"},attrs:{placeholder:"输入名称"},model:{value:e.serchValue,callback:function(t){e.serchValue=t},expression:"serchValue"}}),t("div",{staticStyle:{width:"70%",margin:"0 auto","min-height":"100%"}},[t("a-tree",{attrs:{showLine:"",selectedKeys:e.selectedKeys,"tree-data":e.showTreeData,replaceFields:{title:"fileName",key:"id"}},on:{select:e.onSelect}})],1)],1)],1),t("div",{staticStyle:{"padding-left":"5px","padding-right":"3px"},attrs:{slot:"right-panel"},slot:"right-panel"},[t("div",{staticStyle:{height:"100%"}},[t("vxe-table",{ref:"listTable",staticStyle:{},attrs:{border:"","row-id":"id",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","radio-config":{trigger:"row"},"checkbox-config":{trigger:"row",highlight:!0,range:!0}}},[e.multiple?t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}):t("vxe-table-column",{attrs:{type:"radio",width:"40"}}),t("vxe-table-column",{attrs:{field:"stepNum",title:"步骤",width:"120px"}}),t("vxe-table-column",{attrs:{field:"stepTitle",title:"标题",align:"left","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.stepTitle)+" ")]}}])})],1)],1)])])],1)},i=[],n=a("8fad"),o={name:"SopDetailList",props:{multiple:{type:Boolean,default:!0},id:{type:String,default:""}},data:function(){return{fileType:[],queryParam:{bookId:""},allAlign:"center",totalResult:0,treeKey:0,tableData:[],visible:!1,confirmLoading:!1,treeData:[],showTreeData:[],serchValue:"",selectedKeys:[]}},watch:{serchValue:function(){var e=this;this.showTreeData=this.treeData.map((function(t){return t.fileName.indexOf(e.serchValue)>-1?t:null})).filter((function(e){return e}))}},methods:{selectTree:function(){var e=this;Object(n["Rb"])({pageNo:1,pageSize:1e3,searchText:""}).then((function(t){t.success&&(e.treeData=t.result.records,e.showTreeData=t.result.records,e.treeData.length>0&&(e.queryParam.bookId=e.treeData[0].id,e.selectedKeys[0]=e.treeData[0].id,e.selectData=e.treeData[0],e.findList()))}))},showModal:function(){this.visible=!0,this.selectTree()},onSelect:function(e,t){if(e.length){var a=t.node.dataRef;this.queryParam.bookId=a.id,this.selectedKeys[0]=a.id,this.selectData=a,this.findList()}},findList:function(){var e=this;Object(n["Pb"])(this.queryParam).then((function(t){e.tableData=t.result}))},handleOk:function(){var e=this,t=[];this.multiple?t=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&t.push(this.$refs.listTable.getRadioRecord()),Array.from(t,(function(t){t.bookName=e.selectData.fileName})),this.$emit("ok",t),this.visible=!1},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},l=o,s=(a("61ca"),a("2877")),c=Object(s["a"])(l,r,i,!1,null,null,null);t["default"]=c.exports},8617:function(e,t,a){},"88bc":function(e,t,a){(function(t){var a=1/0,r=9007199254740991,i="[object Arguments]",n="[object Function]",o="[object GeneratorFunction]",l="[object Symbol]",s="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,u=s||c||Function("return this")();function d(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)}function h(e,t){var a=-1,r=e?e.length:0,i=Array(r);while(++a<r)i[a]=t(e[a],a,e);return i}function f(e,t){var a=-1,r=t.length,i=e.length;while(++a<r)e[i+a]=t[a];return e}var p=Object.prototype,m=p.hasOwnProperty,g=p.toString,v=u.Symbol,b=p.propertyIsEnumerable,y=v?v.isConcatSpreadable:void 0,w=Math.max;function C(e,t,a,r,i){var n=-1,o=e.length;a||(a=S),i||(i=[]);while(++n<o){var l=e[n];t>0&&a(l)?t>1?C(l,t-1,a,r,i):f(i,l):r||(i[i.length]=l)}return i}function k(e,t){return e=Object(e),x(e,t,(function(t,a){return a in e}))}function x(e,t,a){var r=-1,i=t.length,n={};while(++r<i){var o=t[r],l=e[o];a(l,o)&&(n[o]=l)}return n}function T(e,t){return t=w(void 0===t?e.length-1:t,0),function(){var a=arguments,r=-1,i=w(a.length-t,0),n=Array(i);while(++r<i)n[r]=a[t+r];r=-1;var o=Array(t+1);while(++r<t)o[r]=a[r];return o[t]=n,d(e,this,o)}}function S(e){return I(e)||j(e)||!!(y&&e&&e[y])}function _(e){if("string"==typeof e||$(e))return e;var t=e+"";return"0"==t&&1/e==-a?"-0":t}function j(e){return O(e)&&m.call(e,"callee")&&(!b.call(e,"callee")||g.call(e)==i)}var I=Array.isArray;function P(e){return null!=e&&q(e.length)&&!R(e)}function O(e){return L(e)&&P(e)}function R(e){var t=D(e)?g.call(e):"";return t==n||t==o}function q(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}function D(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function L(e){return!!e&&"object"==typeof e}function $(e){return"symbol"==typeof e||L(e)&&g.call(e)==l}var M=T((function(e,t){return null==e?{}:k(e,h(C(t,1),_))}));e.exports=M}).call(this,a("c8ba"))},"8a3e":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-card",{attrs:{id:"reguRightContent"}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchQuery.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:12}},[t("a-col",{attrs:{md:7,sm:24}},[t("a-form-item",{attrs:{label:"名称"}},[t("a-input",{attrs:{placeholder:"名称",allowClear:""},model:{value:e.queryParam.title,callback:function(t){e.$set(e.queryParam,"title",t)},expression:"queryParam.title"}})],1)],1),t("a-col",{attrs:{md:7,sm:24}},[t("span",{staticClass:"table-page-search-submitButtons"},[t("a-space",[t("a-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增")]),t("a-button",{attrs:{disabled:1!=e.records.length,loading:e.editLoading},on:{click:function(t){return t.stopPropagation(),e.handleEdit(e.records[0])}}},[e._v("编辑")]),t("a-button",{attrs:{disabled:e.importBtn},on:{click:e.importRegulation}},[e._v("从其他项导入指导书")]),t("a-button",{directives:[{name:"has",rawName:"v-has",value:"regulation:detail:delete",expression:"'regulation:detail:delete'"}],attrs:{disabled:e.records.length<1},on:{click:e.handleDel}},[e._v("删除")]),t("a-button",{on:{click:e.searchQuery}},[e._v("查询")])],1)],1)])],1)],1)],1),t("div",{staticClass:"tableHeight",staticStyle:{height:"calc(100vh - 207px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(100vh - 207px)"},attrs:{border:"",resizable:"","row-id":"id",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","max-height":"100%","edit-config":{trigger:"manual",mode:"row"},"checkbox-config":{trigger:"row",highlight:!0,checkStrictly:!0},"tree-config":{lazy:!0,children:"children",hasChild:"hasChildren",loadMethod:e.loadChildrenMethod},"keep-source":!0},on:{"checkbox-change":e.checkboxChange,"checkbox-all":e.checkboxChange}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),t("vxe-table-column",{attrs:{field:"no",title:"序号",width:"60"}}),t("vxe-table-column",{attrs:{field:"title",title:"名称","tree-node":"",align:"left","header-align":"center","min-width":"140"}}),t("vxe-table-column",{attrs:{field:"type_dictText",title:"类型",width:"100"}}),t("vxe-table-column",{attrs:{field:"method_dictText",title:"维保手段",width:"100"}}),t("vxe-table-column",{attrs:{field:"qualityLevel_dictText",title:"质保等级",width:"80"}}),t("vxe-table-column",{attrs:{field:"outsource_dictText",title:"是否委外",width:"80"}}),t("vxe-table-column",{attrs:{field:"safeNotice",title:"安全提示","min-width":"140",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"remark",title:"备注","min-width":"120",align:"left","header-align":"center"}})],1)],1),t("tech-file-list",{ref:"TechFileModalForm",attrs:{multiple:!0},on:{ok:e.addTarget}}),t("regu-add-modal",{ref:"reguAddModalForm",attrs:{reguId:e.reguId,trainTypeId:e.trainTypeId},on:{ok:function(t){return e.loadData()},reloadTreeChilds:function(t){return e.reloadTreeChild()}}}),t("import-modal",{ref:"importModal",on:{ok:e.loadLeft}}),t("ImportRegulationModal",{ref:"regulationModal"})],1)},i=[],n=a("8fad"),o=a("161b"),l=a("da42"),s=a("ca00"),c=(a("c695"),a("4eb4")),u=a("2b2c"),d={components:{TechFileList:l["default"],ReguAddModal:o["default"],ImportModal:c["default"],ImportRegulationModal:u["default"]},name:"RightPage",props:["value","trainTypeId"],data:function(){return{editLoading:!1,records:[],queryParam:{reguId:"",title:"",parentId:null},reguId:"",allAlign:"center",tableData:[],selectTreeNode:[],selectPid:"",loadChild:[],curParentId:null}},watch:{value:{immediate:!0,handler:function(e){this.queryParam.parentId="",this.queryParam.reguId=e,this.reguId=e,null!=e&&this.findList()}}},beforeMount:function(){},computed:{importBtn:function(){var e=!this.records.length||!!this.records.filter((function(e){return 2!=e.type})).length;return e}},methods:{importRegulation:function(){var e=this.records.map((function(e){return e.id}));this.$refs.regulationModal.show(this.queryParam.reguId,e)},checkboxChange:function(e){this.records=e.records},findList:function(){var e=this;this.loading=!0,Object(n["Kb"])(this.queryParam).then((function(t){t.success&&(e.loading=!1,e.records=[],e.tableData=t.result)}))},findSelectList:function(){var e=this,t={reguId:this.queryParam.reguId};Object(n["Kb"])(t).then((function(t){t.success&&(e.loading=!1,e.selectTreeNode=t.result.map((function(t){return e.genSelectTreeNode(t)})))}))},reloadTreeChild:function(e){var t=this;if(this.curParentId){var a={reguId:this.queryParam.reguId,parentId:this.curParentId};Object(n["Kb"])(a).then((function(e){if(e.success){var a=e.result;t.findSetChild(t.curParentId,t.tableData,a),t.$forceUpdate()}}))}else this.loadData()},findSetChild:function(e,t,a){for(var r=0;r<t.length;r++){var i=t[r];if(i.id===e){i.children=a;break}i.children&&i.children.length>0&&this.findSetChild(e,i.children,a)}},loadChildrenMethod:function(e){var t=this,a=e.row,r={reguId:this.queryParam.reguId,parentId:a.id};return new Promise((function(e){Object(n["Kb"])(r).then((function(r){r.success?(r.result.length||(a.hasChildren=!1),e(r.result)):t.$message.error("".concat(r.msg))}))}))},loadSelectNodeMethod:function(e){var t=this,a={reguId:this.queryParam.reguId,parentId:e.dataRef.id};return new Promise((function(e){Object(n["Kb"])(a).then((function(e){if(e.success)e.result.map((function(e){t.selectTreeNode=t.selectTreeNode.concat(t.genSelectTreeNode(e))}));else t.$message.warning(e.message)})),e()}))},genSelectTreeNode:function(e){return{id:e.id,pId:e.parentId,value:e.id,title:e.title,isLeaf:!e.hasChildren}},searchQuery:function(){this.findList()},handleAdd:function(){var e=this.$refs.listTable.getCheckboxRecords(),t={};if(e.length>0){if(1!==e.length)return void this.$message.warning("只能选择一个上级！");if(2===e[0].type)return void this.$message.warning("作业项下不能创建子节点！");t={id:e[0].id,name:e[0].title},this.curParentId=t.id}Object(s["e"])(this.reguId)?this.$message.warning("请选择一个规程项！"):(this.$refs.reguAddModalForm.add(t),this.$refs.reguAddModalForm.title="新增")},handleEdit:function(e){var t=this;this.curParentId=e.parentId,this.editLoading=!0,Object(n["Jb"])({id:e.id}).then((function(e){e.success&&(t.$refs.reguAddModalForm.edit(e.result),t.$refs.reguAddModalForm.title="编辑"),t.editLoading=!1})).catch((function(e){t.editLoading=!1}))},handleDel:function(){var e=this,t=this.$refs.listTable.getCheckboxRecords();t.length>0?this.$confirm({content:"此操作将删除当前选中记录及其子级数据，是否继续？",okText:"确认",cancelText:"取消",onOk:function(){var a=t.map((function(e,t){return e.id})).join(",");Object(n["D"])({ids:a}).then((function(t){t.success?(e.$message.success(t.message),e.loadData()):e.$message.warning(t.message)}))}}):this.$message.error("尚未选中任何数据!")},linkFile:function(){var e=this.$refs.listTable.getCheckboxRecords();1==e.length?this.$refs.TechFileModalForm.showModal():this.$message.error("请选择1条数据!")},addTarget:function(e){},loadData:function(){this.queryParam.id="",this.findList(this.queryParam)},loadLeft:function(){this.$emit("ok")},importData:function(){this.$refs.importModal.title="规程导入",this.$refs.importModal.showModal()}}},h=d,f=(a("e034"),a("2877")),p=Object(f["a"])(h,r,i,!1,null,null,null);t["default"]=p.exports},"91cb":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,width:800,visible:e.visible,cancelText:"关闭",destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-form",{attrs:{form:e.form}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"岗位要求"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["requirePostion",e.validatorRules.requirePostion],expression:"[ 'requirePostion', validatorRules.requirePostion]",modifiers:{trim:!0}}]})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"证书要求"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["requireCertificate",e.validatorRules.requireCertificate],expression:"[ 'requireCertificate', validatorRules.requireCertificate]"}]})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"技能要求"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["requireTech",e.validatorRules.requireTech],expression:"[ 'requireTech', validatorRules.requireTech]"}]})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"所需人数"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["amount",e.validatorRules.amount],expression:"[ 'amount', validatorRules.amount]"}],staticStyle:{width:"100%"},attrs:{min:0,max:99999}})],1)],1)],1)},i=[],n=(a("88bc"),a("8fad"),{name:"PersonRequirement",data:function(){return{value:1,title:"操作",visible:!1,model:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},form:this.$form.createForm(this),validatorRules:{requirePostion:{rules:[{required:!0,message:"请输入岗位要求!"},{max:450,message:"输入长度不能超过500字符!"}]},requireCertificate:{rules:[{required:!0,message:"请输入证书要求!"},{max:450,message:"输入长度不能超过500字符!"}]},requireTech:{rules:[{required:!0,message:"请输入技能要求!"},{max:450,message:"输入长度不能超过500字符!"}]},amount:{rules:[{required:!0,message:"请输入所需人数!"}]}}}},created:function(){},methods:{add:function(){this.edit({})},edit:function(e){var t=this;e.id?this.visiblekey=!0:this.visiblekey=!1,this.form.resetFields(),this.model=Object.assign({},e),this.visible=!0,this.$nextTick((function(){t.form.setFieldsValue({requirePostion:t.model.requirePostion,requireCertificate:t.model.requireCertificate,requireTech:t.model.requireTech,amount:t.model.amount})}))},handleOk:function(){var e=this;e.form.validateFields((function(t,a){if(!t){var r=Object.assign(e.model,a);e.model.id||(r["id"]=Date.parse(new Date)),e.$emit("ok",r),e.close()}}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}}),o=n,l=a("2877"),s=Object(l["a"])(o,r,i,!1,null,null,null);t["default"]=s.exports},9216:function(e,t,a){"use strict";a("260f")},9527:function(e,t,a){},9589:function(e,t,a){"use strict";a("7237")},"958d":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",[t("table",{staticClass:"table"},[t("thead",[t("tr",[t("td",{staticStyle:{padding:"0"},attrs:{colspan:"4",rowspan:"2"}},[e.recordSheet.assetTypeId?e._e():t("span",{staticStyle:{"padding-left":"5px"}},[e._v("车号："+e._s(e.recordSheet.trainNo))]),e.recordSheet.assetTypeId&&0===e.recordSheet.updown?t("table",{staticClass:"innerTable"},[t("tr",[t("td",{staticClass:"bottom"},[e._v("车号："+e._s(e.recordSheet.trainNo))])]),t("tr",[t("td",[e._v("部件号："+e._s(e.recordSheet.manufNo))])])]):e._e(),e.recordSheet.assetTypeId&&1===e.recordSheet.updown?t("table",{staticClass:"innerTable"},[t("tr",[t("td",{staticClass:"bottom"},[e._v("车号："+e._s(e.recordSheet.trainNo))])]),t("tr",[t("td",{staticClass:"bottom"},[e._v("原部件序列号："+e._s(e.recordSheet.manufNo))])]),t("tr",[t("td",[e._v("新部件序列号："+e._s(e.recordSheet.manufNoUp))])])]):e._e()]),t("td",{staticStyle:{"text-align":"center","font-weight":"bold"},attrs:{colspan:"3",rowspan:"2"}},[e._v(" "+e._s(e.recordSheet.title||e.recordSheet.workRecName)+" ")]),t("td",{attrs:{colspan:"3"}},[e._v("作业日期："+e._s(e.recordSheet.workDate)+" 完工日期: "+e._s(e.recordSheet.finishDate))])]),t("tr",[t("td",{attrs:{colspan:"3"}},[e._v("作业班组："+e._s(e.recordSheet.workGroupName))])]),e._m(0)]),e._l(e.recordSheet.categoryList,(function(a){return t("tbody",{key:a.id},e._l(a.detailList,(function(r,i){return t("tr",{key:r.id},[0===i?t("td",{attrs:{rowspan:a.detailList.length}},[e._v(" "+e._s(a.recIndex)+" ")]):e._e(),0===i?t("td",{attrs:{rowspan:a.detailList.length}},[e._v(" "+e._s(a.reguTitle)+" ")]):e._e(),t("td",[e._v(" "+e._s(r.workContent)+" ")]),t("td",{staticStyle:{"text-align":"center"}},[e._v(" "+e._s(r.checkLevel_dictText)+" ")]),t("td",[e._v(" "+e._s(r.techRequire)+" ")]),t("td",[e._v(" "+e._s(0==r.isIgnore?r.workInfo:r.ignoreDesc)+" ")]),t("td",{staticStyle:{"text-align":"center"}},[1===r.result?t("a-checkbox",{attrs:{checked:"",disabled:""}}):e._e(),0===r.result?t("a-checkbox",{attrs:{disabled:""}}):e._e()],1),t("td",[e._v(" "+e._s(r.selfCheck)+" ")]),t("td",[e._v(" "+e._s(r.guarderCheck)+" ")]),t("td",[e._v(" "+e._s(r.monitorCheck)+" ")])])})),0)})),e._l(e.recordSheet.measureToolList,(function(a,r){return t("tr",{key:r},[0===r?t("td",{attrs:{colspan:"2",rowspan:e.recordSheet.measureToolList.length}},[e._v("计量器具使用")]):e._e(),t("td",{attrs:{colspan:"2"}},[e._v("名称: "+e._s(a.name))]),t("td",[e._v("规格型号："+e._s(a.model))]),t("td",[e._v("出厂编号："+e._s(a.serialNo))]),t("td",{attrs:{colspan:"2"}},[e._v("上次检验时间："+e._s(a.lastCheckTime))]),t("td",{attrs:{colspan:"2"}},[e._v("下次检验时间："+e._s(a.nextCheckTime))])])})),t("tr",[t("td",{staticStyle:{height:"80px"},attrs:{colspan:"10"}},[e._v("情况说明："+e._s(e.recordSheet.remark))])]),t("tr",[t("td",{staticStyle:{height:"80px"},attrs:{colspan:"10"}},[t("span",{staticStyle:{"margin-left":"5%"}},[e._v("检查结果："+e._s(0===e.recordSheet.checkResult?"未通过":"通过")+" ")]),t("span",{staticStyle:{"margin-left":"30%"}},[e._v("检查日期："+e._s(e.recordSheet.checkDate)+" ")]),t("span",{staticStyle:{"margin-left":"30%"}},[e._v("质量负责人："+e._s(e.recordSheet.checkUserName)+" ")]),e._m(1)])])],2)])},i=[function(){var e=this,t=e._self._c;return t("tr",[t("th",{staticStyle:{width:"60px"}},[e._v("序号")]),t("th",{staticStyle:{width:"100px"}},[e._v("项目")]),t("th",{staticStyle:{width:"200px"}},[e._v("作业内容")]),t("th",{staticStyle:{width:"60px"}},[e._v("控制点")]),t("th",{staticStyle:{width:"200px"}},[e._v("技术要求")]),t("th",{staticStyle:{width:"200px"}},[e._v("作业情况")]),t("th",{staticStyle:{width:"80px"}},[e._v("结果")]),t("th",{staticStyle:{width:"60px"}},[e._v("自检")]),t("th",{staticStyle:{width:"60px"}},[e._v("互检")]),t("th",{staticStyle:{width:"60px"}},[e._v("专检")])])},function(){var e=this,t=e._self._c;return t("div",{staticStyle:{"padding-top":"15px"}},[e._v(" 说明："),t("br"),e._v(" 1. 控制点分为H点和W点，“H”点为该项工序操作过程必须经过专业工程师现场检查确认的工序，“W”点为班组长可在工序完工后确认的工序。"),t("br"),e._v(" 2. “自检”栏为作业者本人进行签字；“互检”栏由作业监护人员进行检查签字；“专检”栏由班组长进行检查签字。“质量负责人”由相关专业工程师进行签字。"),t("br"),e._v(" 3. “作业情况”需根据实际情况填写。若该项工序无异常则由作业者在框中填入√；若该项工序存在异常，则将实际故障情况填入框内。"),t("br"),e._v(" 4. “结果”栏方框在完成该项作业及检查后，由工班长进行填写。若无异常则在方框内填入√，若有异常，工班长需对故障情况进行确认，在方框内填入×，并将故障在“备注”栏进行汇总。"),t("br"),e._v(" 5. 作业内容中有数据要求的一并填入“作业情况”栏 。 ")])}],n={name:"RecordSheetTable",data:function(){return{recordSheet:{}}},methods:{loadData:function(e){this.recordSheet=e}}},o=n,l=(a("d88b"),a("2877")),s=Object(l["a"])(o,r,i,!1,null,"197d5722",null);t["default"]=s.exports},"95ba":function(e,t,a){},a4db:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"90%",title:e.title,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",centered:"",destroyOnClose:!0,bodyStyle:{height:"80vh"}},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.findList.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:7,sm:24}},[t("a-form-item",{attrs:{label:"搜索"}},[t("a-input",{attrs:{placeholder:"请输入工器具名称或编码"},model:{value:e.queryParam.searchText,callback:function(t){e.$set(e.queryParam,"searchText",t)},expression:"queryParam.searchText"}})],1)],1),t("a-col",{attrs:{md:7,sm:24}},[t("a-form-item",{attrs:{label:"分类"}},[t("j-dict-select-tag",{attrs:{dictCode:"bu_tools_type",disabledArray:e.canSelectType},model:{value:e.queryParam.category1,callback:function(t){e.$set(e.queryParam,"category1",t)},expression:"queryParam.category1"}})],1)],1),t("a-col",{attrs:{md:3,sm:8}},[t("a-button",{on:{click:e.findList}},[e._v("查询")])],1)],1)],1)],1),t("div",{staticStyle:{height:"calc(80vh - 130px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(80vh - 130px)"},attrs:{border:"","max-height":"100%",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","radio-config":e.multiple?{}:{trigger:"row",checkMethod:e.checkRadioMethod},"checkbox-config":e.multiple?{trigger:"row",highlight:!0,range:!0,checkMethod:e.checkRadioMethod}:{},"edit-config":{trigger:"click",mode:"cell",showIcon:"true"}},on:{"cell-click":e.onCellClick}},[e.multiple?t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}):t("vxe-table-column",{attrs:{type:"radio",width:"40"}}),t("vxe-table-column",{attrs:{field:"code",title:"编码",width:"150"}}),t("vxe-table-column",{attrs:{field:"name",title:"名称",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"category1_dictText",title:"类别",width:"150"}}),t("vxe-table-column",{attrs:{field:"unit",title:"单位",width:"150"}}),e.batch?t("vxe-table-column",{attrs:{field:"num",title:"所需数量",width:"200","edit-render":{name:"$input",immediate:!0,props:{type:"number",Min:0}}}}):e._e()],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1)])},i=[],n=a("c54ca"),o={name:"ToolTypeSelect",props:{multiple:{type:Boolean,default:!0},canSelectType:{type:Array,default:function(){return[4,5,6]}},batch:{type:Boolean,default:!1}},data:function(){return{title:"工器具类型选择",queryParam:{type:"2",searchText:"",category1:null,pageNo:1,pageSize:10},allAlign:"center",totalResult:0,tableData:[],visible:!1,confirmLoading:!1}},methods:{showModal:function(){this.visible=!0,this.canSelectType&&this.canSelectType.length>0&&(this.queryParam.category1=this.canSelectType[0]),this.findList()},findList:function(){var e=this;this.loading=!0,Object(n["Cb"])(this.queryParam).then((function(t){e.totalResult=t.result.total,e.loading=!1,e.tableData=t.result.records,e.tableData.forEach((function(t){e.$set(t,"num",1)}))}))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()},handleOk:function(){var e=[];this.multiple?e=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&e.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",e),this.visible=!1},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1},checkRadioMethod:function(e){var t=e.row;return!this.canSelectType||-1!==this.canSelectType.indexOf(t.category1)},onCellClick:function(e){var t=e.row,a=e.column;"num"===a.property&&this.$refs.listTable.setCheckboxRow([t],!0)}}},l=o,s=(a("7ba1"),a("2877")),c=Object(s["a"])(l,r,i,!1,null,"df2d4508",null);t["default"]=c.exports},a9f9:function(e,t,a){"use strict";a("d392")},aaa8:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,centered:"",width:"100%",dialogClass:"fullDialog no-footer",visible:e.visible,confirmLoading:e.loading,footer:null,cancelText:"关闭",destroyOnClose:!0},on:{ok:e.close,cancel:e.close}},[t("a-button",{attrs:{"na-btn-type":"print",type:"primary"},on:{click:e.print}},[e._v("导出打印")]),t("JobCheckSheetTable",{ref:"jobCheckTable",attrs:{fromData:e.fromData,qualityEvaluation:e.qualityEvaluation,data:e.sheetData},on:{brush:function(t){return e.$emit("brush")},judgeChange:e.onJudgeChange}}),t("JobCheckTableExport",{ref:"tablePrintRef"}),t("div",{staticStyle:{height:"20px"}})],1)},i=[],n=a("e0ce"),o=a("3cf2"),l={name:"JobCheckTableView",components:{JobCheckSheetTable:n["default"],JobCheckTableExport:o["default"]},props:{qualityEvaluation:{type:Boolean,default:!1},fromData:{type:Object,default:function(){}}},data:function(){return{title:"作业检查表查看",visible:!1,loading:!1,sheetData:{}}},mounted:function(){},methods:{show:function(e){this.visible=!0,this.sheetData=e},close:function(){this.$emit("close"),this.visible=!1},print:function(){this.$refs.tablePrintRef.printByRow(this.sheetData)},onJudgeChange:function(e){this.sheetData=e}}},s=l,c=a("2877"),u=Object(c["a"])(s,r,i,!1,null,"0613ba03",null);t["default"]=u.exports},b245:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"85%",title:"人员选择",visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",bodyStyle:{height:"70vh"},destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-row",[t("a-col",{attrs:{md:4,sm:24}},[t("div",{staticStyle:{height:"calc(70vh - 20px)","border-right":"1px solid #e3e1e1","margin-right":"15px"}},[e.treeData&&e.treeData.length>0?t("a-tree",{staticClass:"limitHeight",attrs:{defaultSelectedKeys:[e.queryParam.depId],defaultExpandAll:!0,"tree-data":e.treeData},on:{select:e.onSelect}}):e._e()],1)]),t("a-col",{attrs:{md:20,sm:24}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.findList.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"账号"}},[t("a-input",{attrs:{placeholder:"请输入用户账号"},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"真实名字"}},[t("a-input",{attrs:{placeholder:"请输入真实名字"},model:{value:e.queryParam.realname,callback:function(t){e.$set(e.queryParam,"realname",t)},expression:"queryParam.realname"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"手机号码"}},[t("a-input",{attrs:{placeholder:"请输入手机号码"},model:{value:e.queryParam.phone,callback:function(t){e.$set(e.queryParam,"phone",t)},expression:"queryParam.phone"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"角色"}},[t("j-dict-select-tag",{attrs:{triggerChange:!0,dictCode:"sys_role,role_name,id",placeholder:"选择角色"},model:{value:e.queryParam.roleId,callback:function(t){e.$set(e.queryParam,"roleId",t)},expression:"queryParam.roleId"}})],1)],1),t("a-col",{attrs:{md:2,sm:8}},[t("a-button",{on:{click:e.findList}},[e._v("查询")])],1)],1)],1)],1),t("div",{staticStyle:{height:"calc(70vh - 130px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(70vh - 130px)"},attrs:{border:"",align:e.allAlign,data:e.tableData,"max-height":"100%","show-overflow":"tooltip","radio-config":e.multiple?{}:{trigger:"row"},"checkbox-config":e.multiple?{trigger:"row",highlight:!0,range:!0}:{},"edit-config":{trigger:"manual",mode:"row"}}},[e.multiple?t("vxe-table-column",{attrs:{type:"checkbox",width:"5%"}}):t("vxe-table-column",{attrs:{type:"radio",width:"5%"}}),t("vxe-table-column",{attrs:{field:"workNo",title:"工号",width:"100",align:"center"}}),t("vxe-table-column",{attrs:{field:"username",title:"用户账号",width:"150",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"realname",title:"用户名字",width:"100",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"roleNames",title:"角色","min-width":"180",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"sex_dictText",title:"性别",width:"80"}}),t("vxe-table-column",{attrs:{field:"phone",title:"手机号码",width:"120"}}),t("vxe-table-column",{attrs:{field:"orgCode",title:"部门",width:"120",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",width:"80"}})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1)])],1)],1)},i=[],n=a("8fad"),o={name:"UserList",props:{multiple:{type:Boolean,default:!0},depId:{type:String,default:""}},data:function(){return{queryParam:{username:"",realname:"",phone:"",orgCode:"",roleId:void 0,pageNo:1,pageSize:10},allAlign:"center",totalResult:0,tableData:[],visible:!1,confirmLoading:!1,treeData:[]}},watch:{depId:function(e){this.$set(this.queryParam,"depId",e||"")}},mounted:function(){this.$set(this.queryParam,"depId",this.depId||"")},methods:{showModal:function(){this.visible=!0,this.findList(),this.getTreeList()},getTreeList:function(){var e=this;Object(n["pb"])().then((function(t){t.success&&(e.treeData=t.result)}))},onSelect:function(e,t){if(e.length){var a=t.node.dataRef;this.queryParam.depId=a.id,this.findList()}else this.queryParam.orgCode="",this.findList()},findList:function(){var e=this;this.loading=!0,Object(n["jc"])(this.queryParam).then((function(t){e.loading=!1,t.success?(e.totalResult=t.result.total,e.tableData=t.result.records):e.$message.error("加载用户数据失败")})).catch((function(t){e.$message.error("加载用户数据异常")})).finally((function(){}))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()},handleOk:function(){var e=[];this.multiple?e=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&e.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",e),this.visible=!1},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,Object.assign(this.$data,this.$options.data())}}},l=o,s=(a("f76d"),a("2877")),c=Object(s["a"])(l,r,i,!1,null,"4aa7956f",null);t["default"]=c.exports},b7b4:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"i",(function(){return n})),a.d(t,"l",(function(){return o})),a.d(t,"c",(function(){return s})),a.d(t,"t",(function(){return c})),a.d(t,"v",(function(){return l})),a.d(t,"n",(function(){return d})),a.d(t,"C",(function(){return h})),a.d(t,"D",(function(){return f})),a.d(t,"p",(function(){return p})),a.d(t,"m",(function(){return g})),a.d(t,"j",(function(){return v})),a.d(t,"w",(function(){return b})),a.d(t,"a",(function(){return y})),a.d(t,"h",(function(){return w})),a.d(t,"k",(function(){return k})),a.d(t,"q",(function(){return x})),a.d(t,"z",(function(){return T})),a.d(t,"r",(function(){return S})),a.d(t,"e",(function(){return _})),a.d(t,"s",(function(){return j})),a.d(t,"B",(function(){return R})),a.d(t,"x",(function(){return I})),a.d(t,"y",(function(){return P})),a.d(t,"d",(function(){return C})),a.d(t,"f",(function(){return O})),a.d(t,"o",(function(){return m})),a.d(t,"A",(function(){return q})),a.d(t,"E",(function(){return D})),a.d(t,"g",(function(){return L})),a.d(t,"u",(function(){return u}));var r=a("0fea"),i=function(e){return Object(r["j"])("/quality/rectify/add",e)},n=function(e){return Object(r["j"])("/quality/rectify/delete",e)},o=function(e){return Object(r["j"])("/quality/rectify/edit",e)},l=function(e){return Object(r["d"])("/quality/rectify/page",e)},s=function(e){return Object(r["j"])("/quality/rectify/close",e)},c=function(e){return Object(r["d"])("/quality/rectify/get",e)},u=function(e){return Object(r["d"])("/quality/rectify/getCode",e)},d=function(e){return Object(r["d"])("/quality/measurealert/page",e)},h=function(e){return Object(r["d"])("/quality/measurethreshold/form/page-data-form",e)},f=function(e){return Object(r["j"])("/quality/measurethreshold/threshold/save",e)},p=function(e){return Object(r["d"])("/quality/measurethreshold/threshold/list/".concat(e))},m=function(e){return Object(r["d"])("/serialPlan/plan/forms/online-form/alert-records",{dataRecordId:e})},g=function(e){return Object(r["j"])("/quality/measurethreshold/threshold/edit",e)},v=function(e){return Object(r["j"])("/quality/measurethreshold/threshold/delete",e)},b=function(e){return Object(r["d"])("/quality/measurethreshold/threshold/get",e)},y=function(e){return Object(r["j"])("/quality/leaverecord/add",e)},w=function(e){return Object(r["j"])("/quality/leaverecord/delete",e)},C=function(e){return Object(r["j"])("/quality/leaverecord/close",e)},k=function(e){return Object(r["j"])("/quality/leaverecord/edit",e)},x=function(e){return Object(r["d"])("/quality/leaverecord/page",e)},T=function(e,t){return Object(r["c"])("/quality/leaverecord/workLeaveRecordExport",e,t)},S=function(e){return Object(r["d"])("/quality/record-confirm/list",e)},_=function(e){return Object(r["j"])("/quality/record-confirm/confirm",e)},j=function(e){return Object(r["d"])("/quality/record-confirm/work-record/get",e)},I=function(e){return Object(r["d"])("/serialPlan/plan/forms/check-record/get",e)},P=function(e){return Object(r["d"])("/workcheck/get",e)},O=function(e){return Object(r["j"])("/quality/record-confirm/confirm",e)},R=function(e){return Object(r["d"])("/quality/record-confirm/page",e)},q=function(e){return Object(r["d"])("/quality/record-confirm/page/check-record",e)},D=function(e){return Object(r["j"])("/serialPlan/plan/forms/judge/save",e)},L=function(e){return Object(r["j"])("/serialPlan/plan/forms/judge/delete",e)}},bca7:function(e,t,a){"use strict";a("39ff7")},bd18:function(e,t,a){"use strict";a("3ab9")},c35c:function(e,t,a){},cf74:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{position:"relative"},attrs:{id:e.containerId}},[t("div",{staticClass:"movety-container",staticStyle:{padding:"0 8px",position:"absolute","z-index":"91",height:"32px",width:"104px","text-align":"center"},style:{top:e.top+"px",left:e.left+"px",display:e.moveDisplay}},[t("div",{class:e.showMoverTask?"uploadty-mover-mask":"movety-opt",staticStyle:{"margin-top":"12px"},attrs:{id:e.containerId+"-mover"}},[t("a",{staticStyle:{margin:"0 5px"},on:{click:e.moveLast}},[t("a-icon",{staticStyle:{color:"#fff","font-size":"16px"},attrs:{type:"arrow-left"}})],1),t("a",{staticStyle:{margin:"0 5px"},on:{click:e.moveNext}},[t("a-icon",{staticStyle:{color:"#fff","font-size":"16px"},attrs:{type:"arrow-right"}})],1)])]),t("a-upload",{class:{"uploadty-disabled":e.disabled},attrs:{name:"file",multiple:!0,action:e.uploadAction,headers:e.headers,data:{biz:e.bizPath},fileList:e.fileList,beforeUpload:e.beforeUpload,disabled:e.disabled,returnUrl:e.returnUrl,listType:e.complistType},on:{change:e.handleChange,preview:e.handlePreview}},[[e.isImageComp?t("div",[t("a-icon",{attrs:{type:"plus"}}),t("div",{staticClass:"ant-upload-text"},[e._v(e._s(e.text))])],1):e.buttonVisible?t("a-button",[t("a-icon",{attrs:{type:"upload"}}),e._v(e._s(e.text)+" ")],1):e._e()]],2),t("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[t("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1)},i=[],n=a("2b0e"),o=a("9fb0"),l=a("0fea"),s="all",c="image",u=function(){return"-"+parseInt(1e4*Math.random()+1,10)},d=function(e){if(e.lastIndexOf("\\")>=0){var t=new RegExp("\\\\","g");e=e.replace(t,"/")}return e.substring(e.lastIndexOf("/")+1)},h={name:"JUpload",data:function(){return{uploadAction:window._CONFIG["domianURL"]+"/sys/common/upload",headers:{},fileList:[],newFileList:[],uploadGoOn:!0,previewVisible:!1,previewImage:"",containerId:"",top:"",left:"",moveDisplay:"none",showMoverTask:!1,moverHold:!1,currentImg:""}},props:{text:{type:String,required:!1,default:"点击上传"},fileType:{type:String,required:!1,default:s},bizPath:{type:String,required:!1,default:"temp"},value:{type:[String,Array],required:!1},disabled:{type:Boolean,required:!1,default:!1},triggerChange:{type:Boolean,required:!1,default:!1},returnUrl:{type:Boolean,required:!1,default:!0},number:{type:Number,required:!1,default:0},buttonVisible:{type:Boolean,required:!1,default:!0}},watch:{value:{immediate:!0,handler:function(){var e=this.value;e instanceof Array?this.returnUrl?this.initFileList(e.join(",")):this.initFileListArr(e):this.initFileList(e)}}},computed:{isImageComp:function(){return this.fileType===c},complistType:function(){return this.fileType===c?"picture-card":"text"}},created:function(){var e=n["default"].ls.get(o["a"]);this.headers={"X-Access-Token":e},this.containerId="container-ty-"+(new Date).getTime()},methods:{initFileListArr:function(e){if(e&&0!=e.length){for(var t=[],a=0;a<e.length;a++){var r=Object(l["e"])(e[a].filePath);t.push({uid:u(),name:e[a].fileName,status:"done",url:r,response:{status:"history",message:e[a].filePath}})}this.fileList=t}else this.fileList=[]},initFileList:function(e){if(e&&0!=e.length){for(var t=[],a=e.split(","),r=0;r<a.length;r++){var i=Object(l["e"])(a[r]);t.push({uid:u(),name:d(a[r]),status:"done",url:i,response:{status:"history",message:a[r]}})}this.fileList=t}else this.fileList=[]},handlePathChange:function(){var e=this.fileList,t="";e&&0!=e.length||(t="");for(var a=[],r=0;r<e.length;r++)a.push(e[r].response.message);a.length>0&&(t=a.join(",")),this.$emit("change",t)},beforeUpload:function(e){this.uploadGoOn=!0;var t=e.type;return!(this.fileType===c&&t.indexOf("image")<0)||(this.$message.warning("请上传图片"),this.uploadGoOn=!1,!1)},handleChange:function(e){e.file.status||!1!==this.uploadGoOn||e.fileList.pop();var t=e.fileList;if("done"===e.file.status?(this.number>0&&(t=t.slice(-this.number)),e.file.response.success&&(t=t.map((function(e){if(e.response){var t=e.response.message;e.url=Object(l["e"])(t)}return e})))):"error"===e.file.status?this.$message.error("".concat(e.file.name," 上传失败.")):"removed"===e.file.status&&this.handleDelete(e.file),this.fileList=t,"done"===e.file.status||"removed"===e.file.status)if(this.returnUrl)this.handlePathChange();else{this.newFileList=[];for(var a=0;a<t.length;a++){var r={fileName:t[a].name,filePath:t[a].response.message,fileSize:t[a].size};this.newFileList.push(r)}this.$emit("change",this.newFileList)}},handleDelete:function(e){},handlePreview:function(e){this.fileType===c?(this.previewImage=e.url||e.thumbUrl,this.previewVisible=!0):location.href=e.url},handleCancel:function(){this.previewVisible=!1},moveLast:function(){var e=this.getIndexByUrl();if(0==e)this.$message.warn("未知的操作");else{for(var t=this.fileList[e].url,a=this.fileList[e-1].url,r=[],i=0;i<this.fileList.length;i++)i==e-1?r.push(t):i==e?r.push(a):r.push(this.fileList[i].url);this.currentImg=a,this.$emit("change",r.join(","))}},moveNext:function(){var e=this.getIndexByUrl();if(e==this.fileList.length-1)this.$message.warn("已到最后~");else{for(var t=this.fileList[e].url,a=this.fileList[e+1].url,r=[],i=0;i<this.fileList.length;i++)i==e+1?r.push(t):i==e?r.push(a):r.push(this.fileList[i].url);this.currentImg=a,this.$emit("change",r.join(","))}},getIndexByUrl:function(){for(var e=0;e<this.fileList.length;e++)if(this.fileList[e].url===this.currentImg||encodeURI(this.fileList[e].url)===this.currentImg)return e;return-1}},mounted:function(){var e=this,t=document.getElementById(this.containerId+"-mover");t.addEventListener("mouseover",(function(){e.moverHold=!0,e.moveDisplay="block"})),t.addEventListener("mouseout",(function(){e.moverHold=!1,e.moveDisplay="none"}));var a=document.getElementById(this.containerId)?document.getElementById(this.containerId).getElementsByClassName("ant-upload-list-picture-card"):[];a&&a.length>0&&(a[0].addEventListener("mouseover",(function(t){t=t||window.event;var a=t.target||t.srcElement;if("ant-upload-list-item-info"==a.className){e.showMoverTask=!1;var r=a.parentElement;e.left=r.offsetLeft,e.top=r.offsetTop+r.offsetHeight-50,e.moveDisplay="block",e.currentImg=a.getElementsByTagName("img")[0].src}})),a[0].addEventListener("mouseout",(function(t){t=t||window.event;var a=t.target||t.srcElement;"ant-upload-list-item-info"==a.className&&(e.showMoverTask=!0,setTimeout((function(){!1===e.moverHold&&(e.moveDisplay="none")}),100)),"ant-upload-list-item ant-upload-list-item-done"!=a.className&&"ant-upload-list ant-upload-list-picture-card"!=a.className||(e.moveDisplay="none")})))},model:{prop:"value",event:"change"}},f=h,p=(a("7279"),a("2877")),m=Object(p["a"])(f,r,i,!1,null,null,null);t["default"]=m.exports},d059:function(e,t,a){},d214:function(e,t,a){"use strict";a.d(t,"h",(function(){return i})),a.d(t,"D",(function(){return n})),a.d(t,"eb",(function(){return o})),a.d(t,"r",(function(){return l})),a.d(t,"b",(function(){return s})),a.d(t,"w",(function(){return c})),a.d(t,"H",(function(){return u})),a.d(t,"I",(function(){return m})),a.d(t,"k",(function(){return d})),a.d(t,"c",(function(){return g})),a.d(t,"x",(function(){return v})),a.d(t,"l",(function(){return y})),a.d(t,"K",(function(){return b})),a.d(t,"a",(function(){return w})),a.d(t,"v",(function(){return C})),a.d(t,"j",(function(){return x})),a.d(t,"F",(function(){return k})),a.d(t,"J",(function(){return h})),a.d(t,"G",(function(){return f})),a.d(t,"t",(function(){return p})),a.d(t,"Q",(function(){return T})),a.d(t,"u",(function(){return S})),a.d(t,"db",(function(){return P})),a.d(t,"q",(function(){return O})),a.d(t,"bb",(function(){return R})),a.d(t,"cb",(function(){return q})),a.d(t,"C",(function(){return I})),a.d(t,"g",(function(){return j})),a.d(t,"P",(function(){return _})),a.d(t,"X",(function(){return $})),a.d(t,"ab",(function(){return N})),a.d(t,"f",(function(){return F})),a.d(t,"p",(function(){return M})),a.d(t,"jb",(function(){return L})),a.d(t,"kb",(function(){return D})),a.d(t,"Z",(function(){return E})),a.d(t,"e",(function(){return z})),a.d(t,"A",(function(){return B})),a.d(t,"n",(function(){return V})),a.d(t,"m",(function(){return G})),a.d(t,"O",(function(){return K})),a.d(t,"Y",(function(){return H})),a.d(t,"V",(function(){return Z})),a.d(t,"gb",(function(){return Y})),a.d(t,"hb",(function(){return X})),a.d(t,"L",(function(){return ee})),a.d(t,"ib",(function(){return te})),a.d(t,"B",(function(){return A})),a.d(t,"y",(function(){return U})),a.d(t,"d",(function(){return W})),a.d(t,"z",(function(){return Q})),a.d(t,"W",(function(){return ae})),a.d(t,"o",(function(){return J})),a.d(t,"fb",(function(){return re})),a.d(t,"i",(function(){return ie})),a.d(t,"E",(function(){return ne})),a.d(t,"s",(function(){return oe})),a.d(t,"M",(function(){return le})),a.d(t,"N",(function(){return se})),a.d(t,"S",(function(){return ce})),a.d(t,"T",(function(){return ue})),a.d(t,"U",(function(){return de})),a.d(t,"R",(function(){return he}));var r=a("0fea"),i=function(e){return Object(r["j"])("/outsource/supplier/add",e)},n=function(e){return Object(r["j"])("/outsource/supplier/edit",e)},o=function(e){return Object(r["d"])("/outsource/supplier/page",e)},l=function(e){return Object(r["j"])("/outsource/supplier/delete",e)},s=function(e){return Object(r["j"])("/outsource/contractInfo/add",e)},c=function(e){return Object(r["j"])("/outsource/contractInfo/edit",e)},u=function(e){return Object(r["d"])("/outsource/contractInfo/page",e)},d=function(e){return Object(r["j"])("/outsource/contractInfo/delete",e)},h=function(e){return Object(r["d"])("/outsource/contractInfo/monitor",e)},f=function(e){return Object(r["d"])("/outsource/contract/annex/list",e)},p=function(e){return Object(r["j"])("/outsource/contract/annex/delete",e)},m=function(e){return Object(r["d"])("/outsource/contractInfo/price",e)},g=function(e){return Object(r["j"])("/outsource/contractPay/add",e)},v=function(e){return Object(r["j"])("/outsource/contractPay/edit",e)},b=function(e){return Object(r["d"])("/outsource/contractPay/page",e)},y=function(e){return Object(r["j"])("/outsource/contractPay/delete",e)},w=function(e){return Object(r["j"])("/outsource/contractBakMoney/add",e)},C=function(e){return Object(r["j"])("/outsource/contractBakMoney/edit",e)},k=function(e){return Object(r["d"])("/outsource/contractBakMoney/page",e)},x=function(e){return Object(r["j"])("/outsource/contractBakMoney/delete",e)},T=function(e){return Object(r["d"])("/outsource/outin/page",e)},S=function(e){return Object(r["j"])("/outsource/outin/delete",e)},_=function(e){return Object(r["d"])("/outsource/outin/page/detail",e)},j=function(e){return Object(r["j"])("/outsource/supervise/add",e)},I=function(e){return Object(r["j"])("/outsource/supervise/edit",e)},P=function(e){return Object(r["d"])("/outsource/supervise/page",e)},O=function(e){return Object(r["j"])("/outsource/supervise/delete",e)},R=function(e){return Object(r["d"])("/outsource/supervise/get",{id:e})},q=function(e){return Object(r["d"])("/outsource/supervise/get-by-order",e)},D=function(e){return Object(r["d"])("/outsource/perform/vendor/tree",e)},L=function(e){return Object(r["j"])("/outsource/perform/delayReason",e)},$=function(e){return Object(r["d"])("/outsource/perform/page",e)},M=function(e){return Object(r["j"])("/outsource/perform/delete/resource",e)},N=function(e){return Object(r["d"])("/outsource/perform/resource",e)},F=function(e){return Object(r["j"])("/outsource/perform/resource/add",e)},A=function(e){return Object(r["j"])("/outsource/perform/resource/edit",e)},E=function(e){return Object(r["d"])("/outsource/rateing/page",e)},z=function(e){return Object(r["j"])("/outsource/rateing/add",e)},B=function(e){return Object(r["j"])("/outsource/rateing/edit",e)},V=function(e){return Object(r["j"])("/outsource/rateing/delete",e)},J=function(e){return Object(r["j"])("/outsource/rateing/delete/attachment",e)},G=function(e){return Object(r["j"])("/outsource/otherSource/delete",e)},U=function(e){return Object(r["j"])("/outsource/otherSource/edit",e)},W=function(e){return Object(r["j"])("/outsource/otherSource/add",e)},K=function(e){return Object(r["d"])("/outsource/otherSource/page",e)},H=function(e){return Object(r["d"])("/outsource/quality/page",e)},Q=function(e){return Object(r["j"])("/outsource/quality/edit",e)},Z=function(e){return Object(r["d"])("/outsource/part/page",e)},Y=function(e){return Object(r["d"])("/outsource/fault/countFault",e)},X=function(e){return Object(r["d"])("/outsource/fault/countFaultGroupBySystem",e)},ee=function(e){return Object(r["d"])("/outsource/fault/page",e)},te=function(e){return Object(r["j"])("/outsource/fault/countFaultGroupByPhaseAndSystem",e)},ae=function(e){return Object(r["d"])("/outsource/contractPay/page",e)},re=function(e){return Object(r["d"])("/training/record/page",e)},ie=function(e){return Object(r["j"])("/training/record/add",e)},ne=function(e){return Object(r["j"])("/training/record/edit",e)},oe=function(e){return Object(r["j"])("/training/record/delete",e)},le=function(e){return Object(r["d"])("/base/finance/project/list",e)},se=function(e){return Object(r["d"])("/base/finance/task/list",e)},ce=function(e){return Object(r["d"])("/outsource/cost/listCost",e)},ue=function(e){return Object(r["d"])("/outsource/cost/detail",e)},de=function(e){return Object(r["d"])("/outsource/cost/part",e)},he=function(e){return Object(r["d"])("/outsource/cost/asset",e)}},d392:function(e,t,a){},d88b:function(e,t,a){"use strict";a("3ff1")},da42:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"90%",visible:e.visible,title:"文件选择",centered:"",bodyStyle:{height:"80vh"},confirmLoading:e.confirmLoading,cancelText:"关闭",destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("na-splitter",{staticStyle:{height:"calc(80vh - 15px)"},attrs:{defaultSize:300}},[t("div",{staticStyle:{"overflow-y":"auto","overflow-x":"hidden","padding-right":"2px"},attrs:{slot:"left-panel"},slot:"left-panel"},[t("a-directory-tree",{attrs:{defaultExpandAll:"","tree-data":e.treeData,replaceFields:{title:"name",key:"id"}},on:{select:e.onSelect}})],1),t("div",{staticStyle:{"padding-left":"5px","padding-right":"3px"},attrs:{slot:"right-panel"},slot:"right-panel"},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.findList.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:7,sm:24}},[t("a-form-item",{attrs:{label:"文件名称"}},[t("a-input",{attrs:{placeholder:"请输入文件名称",allowClear:!0},model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,"name",t)},expression:"queryParam.name"}})],1)],1),t("a-col",{attrs:{md:7,sm:24}},[t("a-form-item",{attrs:{label:"文件类型"}},[t("a-select",{attrs:{placeholder:"请选择",allowClear:!0},model:{value:e.queryParam.type,callback:function(t){e.$set(e.queryParam,"type",t)},expression:"queryParam.type"}},[t("a-select-option",{attrs:{value:void 0}},[e._v("请选择")]),t("a-select-option",{attrs:{value:""}},[e._v("所有文件")]),e._l(e.fileType,(function(a){return t("a-select-option",{key:a,attrs:{alue:a}},[e._v(" "+e._s(a)+" ")])}))],2)],1)],1),t("a-col",{attrs:{md:3,sm:8}},[t("a-button",{on:{click:e.findList}},[e._v("查询")])],1)],1)],1)],1),t("div",{staticStyle:{height:"calc(80vh - 130px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(80vh - 130px)"},attrs:{border:"","row-id":"id",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","edit-config":{trigger:"manual",mode:"row"},"radio-config":{trigger:"row"},"checkbox-config":{trigger:"row",highlight:!0,range:!0}}},[e.multiple?t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}):t("vxe-table-column",{attrs:{type:"radio",width:"40"}}),t("vxe-table-column",{attrs:{field:"name",title:"名称",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"type",title:"类型",width:"150",align:"center"}}),t("vxe-table-column",{attrs:{field:"size",title:"大小(kb)",width:"180",align:"right","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"uploadDate",title:"上传日期",width:"150"}}),t("vxe-table-column",{attrs:{field:"remark",title:"备注",width:"200",align:"left","header-align":"center"}})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1)])])],1)},i=[],n=a("8fad"),o={name:"TechFileList",props:{multiple:{type:Boolean,default:!0},id:{type:String,default:""}},data:function(){return{fileType:[],queryParam:{id:"",name:"",showType:2,type:null,pageNo:1,pageSize:10},allAlign:"center",totalResult:0,tableData:[],visible:!1,confirmLoading:!1,treeData:[]}},methods:{getFileType:function(){var e=this;Object(n["tb"])().then((function(t){e.fileType=t.result}))},selectTree:function(){var e=this;Object(n["sb"])({id:this.id}).then((function(t){t.success&&(e.treeData=t.result)}))},showModal:function(){this.visible=!0,this.selectTree(),this.getFileType(),this.findList()},onSelect:function(e,t){if(e.length){var a=t.node.dataRef;this.queryParam.id=a.id}this.findList()},findList:function(){var e=this;Object(n["rb"])(this.queryParam).then((function(t){e.totalResult=t.result.total,e.loading=!1,e.tableData=t.result.records}))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()},handleOk:function(){var e=[];this.multiple?e=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&e.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",e),this.visible=!1},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},l=o,s=a("2877"),c=Object(s["a"])(l,r,i,!1,null,null,null);t["default"]=c.exports},db9b:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",[t("a-form",{attrs:{form:e.form}},[t("a-row",{staticStyle:{width:"100%"}},[t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"维保手段"}},[t("j-multi-select-tag",{directives:[{name:"decorator",rawName:"v-decorator",value:["method",e.validatorRules.method],expression:"['method', validatorRules.method]"}],attrs:{triggerChange:!0,dictCode:"bu_regu_method"},on:{change:e.handleChangeMethod}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"质量等级"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator",value:["qualityLevel",e.validatorRules.qualityLevel],expression:"['qualityLevel', validatorRules.qualityLevel]"}],attrs:{triggerChange:!0,dictCode:"bu_regu_quality_level"},on:{change:e.handleChangeQualityLevel}})],1)],1)],1),t("a-row",{staticStyle:{width:"100%"}},[t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"关联设备"}},[t("a-select",{ref:"mySelect",attrs:{placeholder:"请选择关联设备",open:!1,showArrow:!0},on:{focus:e.openModal},model:{value:e.trainTypeSysName,callback:function(t){e.trainTypeSysName=t},expression:"trainTypeSysName"}},[t("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"所需工时"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["workTime",e.validatorRules.workTime],expression:"['workTime', validatorRules.workTime]"}],staticStyle:{width:"100%"},attrs:{min:0,max:999999},on:{change:e.handleChangeWorkTime}})],1)],1)],1),t("a-row",[t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol2,wrapperCol:e.wrapperCol2,label:"是否委外"}},[t("a-switch",{on:{change:e.handleChangeOutsource},model:{value:e.outsourceSwitch,callback:function(t){e.outsourceSwitch=t},expression:"outsourceSwitch"}})],1)],1),t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol2,wrapperCol:e.wrapperCol2,label:"重要工序"}},[t("a-switch",{on:{change:e.handleChangeImportant},model:{value:e.importantSwitch,callback:function(t){e.importantSwitch=t},expression:"importantSwitch"}})],1)],1),t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol2,wrapperCol:e.wrapperCol2,label:"是否必换"}},[t("a-switch",{on:{change:e.handleChangeMustReplace},model:{value:e.mustReplaceSwitch,callback:function(t){e.mustReplaceSwitch=t},expression:"mustReplaceSwitch"}})],1)],1),t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol2,wrapperCol:e.wrapperCol2,label:"是否测量"}},[t("a-switch",{on:{change:e.handleChangeMeasure},model:{value:e.measureSwitch,callback:function(t){e.measureSwitch=t},expression:"measureSwitch"}})],1)],1)],1),t("a-row",[t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol3,wrapperCol:e.wrapperCol3,label:"技术要求"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["requirement",e.validatorRules.requirement],expression:"['requirement', validatorRules.requirement]"}],attrs:{placeholder:"请输入内容"},on:{change:e.handleChangeRequirement}})],1)],1)],1),t("a-row",[t("a-col",{attrs:{offset:2,span:22}},[t("a-form-item",[t("a-tabs",{attrs:{"default-active-key":e.activeTab},on:{change:e.callback}},[t("a-tab-pane",{key:"1",attrs:{tab:"额定物料"}},[t("vxe-table",{ref:"reguMaterialslistTable",attrs:{border:"",align:e.allAlign,data:e.reguMaterials,"show-overflow":"tooltip","edit-config":{trigger:"manual",mode:"row"},"checkbox-config":{trigger:"row",highlight:!0,checkStrictly:!0}}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),t("vxe-table-column",{attrs:{field:"code",title:"物料编码",width:"150"}}),t("vxe-table-column",{attrs:{field:"name",title:"物料名称",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"category1_dictText",title:"物料分类",width:"150"}}),t("vxe-table-column",{attrs:{field:"amount",title:"所需数量",width:"100"}}),t("vxe-table-column",{attrs:{field:"unit",title:"单位",width:"100"}})],1)],1),t("a-tab-pane",{key:"2",attrs:{tab:"所需工器具"}},[t("vxe-table",{ref:"reguToolslistTable",attrs:{border:"",align:e.allAlign,data:e.reguTools,"show-overflow":"tooltip","edit-config":{trigger:"manual",mode:"row"},"checkbox-config":{trigger:"row",highlight:!0,checkStrictly:!0}}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),t("vxe-table-column",{attrs:{field:"code",title:"工器具类型编码",width:"150"}}),t("vxe-table-column",{attrs:{field:"name",title:"工器具名称",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"category1_dictText",title:"工器具分类",width:"150"}}),t("vxe-table-column",{attrs:{field:"amount",title:"所需数量",width:"100"}}),t("vxe-table-column",{attrs:{field:"unit",title:"单位",width:"100"}})],1)],1),t("a-tab-pane",{key:"5",attrs:{tab:"作业指导"}},[t("vxe-table",{ref:"reguSopsListTable",attrs:{border:"",align:e.allAlign,data:e.techBookDetails,"show-overflow":"tooltip","checkbox-config":{trigger:"row",highlight:!0,checkStrictly:!0}}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),t("vxe-table-column",{attrs:{field:"op",title:"",width:"60"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("a",{on:{click:function(t){return t.stopPropagation(),e.showSopDeatil(r)}}},[e._v(" 查看")])]}}])}),t("vxe-table-column",{attrs:{field:"bookStepNo",title:"步骤",width:"60"}}),t("vxe-table-column",{attrs:{field:"bootStepTitle",title:"步骤标题",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"requireCertificate",title:"所属作业指导书","max-width":"200"}})],1)],1),t("a-tab-pane",{key:"3",attrs:{tab:"所需人员"}},[t("vxe-table",{ref:"reguPersonsListTable",attrs:{border:"",align:e.allAlign,data:e.reguPersons,"show-overflow":"tooltip","edit-config":{trigger:"manual",mode:"row"},"checkbox-config":{trigger:"row",highlight:!0,checkStrictly:!0}}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),t("vxe-table-column",{attrs:{field:"requirePostion",title:"人员岗位"}}),t("vxe-table-column",{attrs:{field:"requireTech",title:"技术要求"}}),t("vxe-table-column",{attrs:{field:"requireCertificate",title:"证书要求"}}),t("vxe-table-column",{attrs:{field:"amount",title:"所需人数",width:"100"}})],1)],1)],1)],1),t("div",{staticClass:"extraDiv"},[t("a-icon",{staticClass:"iconBtn",attrs:{type:"plus-circle",theme:"filled"},on:{click:e.openAddModal}}),t("a-icon",{staticClass:"iconBtn",attrs:{type:"close-circle",theme:"filled"},on:{click:e.delTableData}})],1)],1)],1)],1),t("material-list",{ref:"MaterialModalForm",attrs:{multiple:!0},on:{ok:e.addTarget}}),t("ToolTypeSelect",{ref:"ToolsModalForm",attrs:{multiple:!0,canSelectType:[4,5]},on:{ok:e.addTarget}}),t("user-list",{ref:"UserModalForm",attrs:{multiple:!0},on:{ok:e.addTarget}}),t("forms-list",{ref:"FromsModalForm",attrs:{multiple:!0},on:{ok:e.addTarget}}),t("tech-file-list",{ref:"techFileModalForm",attrs:{multiple:!0,id:"4"},on:{ok:e.addTarget}}),t("SopDetailList",{ref:"sopDetailModalForm",attrs:{multiple:!0},on:{ok:e.addTarget}}),t("WorkSopView",{ref:"workSopViewModal"}),t("train-asset-type",{ref:"selectForm",attrs:{multiple:!1,trainTypeId:e.trainTypeId},on:{ok:e.selectTrainSys}}),t("person-requirement",{ref:"PersonModalForm",on:{ok:e.addTarget}}),t("doc-preview-modal",{ref:"docPreview"})],1)},i=[],n=a("7164"),o=a("a4db"),l=a("b245"),s=a("37582"),c=a("2cb5"),u=a("91cb"),d=a("da42"),h=a("353a"),f=a("f680"),p=a("85df"),m=a("4501"),g=a("ca00"),v={name:"ItemForm",components:{JMultiSelectTag:f["default"],MaterialList:n["default"],ToolTypeSelect:o["default"],UserList:l["default"],FormsList:s["default"],TrainAssetType:c["default"],PersonRequirement:u["default"],TechFileList:d["default"],DocPreviewModal:h["default"],SopDetailList:p["default"],WorkSopView:m["default"]},props:{method:{type:String,default:""},qualityLevel:{type:String,default:""},important:{type:Number},measure:{type:Number},mustReplace:{type:Number},workTime:{type:Number},outsource:{type:Number},requirement:{type:String,default:""},reguMaterials:{type:Array,default:function(){return[]}},reguTools:{type:Array,default:function(){return[]}},reguPersons:{type:Array,default:function(){return[]}},techBookDetails:{type:Array,default:function(){return[]}},reguForms:{type:Array,default:function(){return[]}},techFiles:{type:Array,default:function(){return[]}},assetTypeId:{type:String,default:""},assetTypeName:{type:String,default:""},trainTypeId:{type:String,default:""},reguDetailId:{type:String,default:""}},data:function(){return{activeTab:"1",form:this.$form.createForm(this),importantSwitch:!1,outsourceSwitch:!1,mustReplaceSwitch:!1,measureSwitch:!1,trainTypeSysId:"",trainTypeSysName:"",filedRight:!1,validatorRules:{method:{rules:[{required:!0,message:"请选择维保手段!"}]},qualityLevel:{rules:[{required:!0,message:"请选择质量等级!"}]},workTime:{rules:[{required:!0,message:"输入所需工时!"}]},requirement:{rules:[{max:450,message:"输入长度不能超过450字符!"}]}},labelCol1:{xs:{span:24},sm:{span:4}},wrapperCol1:{xs:{span:24},sm:{span:16}},labelCol2:{xs:{span:24},sm:{span:8}},wrapperCol2:{xs:{span:24},sm:{span:12}},labelCol3:{xs:{span:24},sm:{span:2}},wrapperCol3:{xs:{span:24},sm:{span:22}},allAlign:"center"}},created:function(){var e=this;this.importantSwitch=!!this.important,this.outsourceSwitch=!!this.outsource,this.measureSwitch=!!this.measure,this.mustReplaceSwitch=!!this.mustReplace,this.trainTypeSysName=this.assetTypeName,this.form.resetFields(),this.$nextTick((function(){e.form.setFieldsValue({method:e.method,qualityLevel:e.qualityLevel,workTime:e.workTime,requirement:e.requirement})}))},methods:{callback:function(e){this.activeTab=e},openModal:function(){this.$refs.selectForm.showModal(),this.$refs.mySelect.blur()},selectTrainSys:function(e){e.length&&(this.$emit("update:assetTypeId",e[0].id),this.trainTypeSysName=e[0].name)},openAddModal:function(){switch(this.activeTab){case"1":this.$refs.MaterialModalForm.showModal();break;case"2":this.$refs.ToolsModalForm.showModal();break;case"3":this.$refs.PersonModalForm.add();break;case"4":this.$refs.techFileModalForm.showModal();break;case"5":this.$refs.sopDetailModalForm.showModal();break;default:break}},delTableData:function(){var e=this;switch(this.activeTab){case"1":var t=this.$refs.reguMaterialslistTable.getCheckboxRecords();t.map((function(t,a){e.reguMaterials.map((function(a,r){t.id===a.id&&e.reguMaterials.splice(r,1)}))}));break;case"2":var a=this.$refs.reguToolslistTable.getCheckboxRecords();a.map((function(t,a){e.reguTools.map((function(a,r){t.id===a.id&&e.reguTools.splice(r,1)}))}));break;case"3":var r=this.$refs.reguPersonsListTable.getCheckboxRecords();r.map((function(t,a){e.reguPersons.map((function(a,r){t.id===a.id&&e.reguPersons.splice(r,1)}))}));break;case"4":var i=this.$refs.techFileListTable.getCheckboxRecords();i.map((function(t,a){e.techFiles.map((function(a,r){t.id===a.id&&e.techFiles.splice(r,1)}))}));break;case"5":var n=this.$refs.reguSopsListTable.getCheckboxRecords();n.map((function(t,a){e.techBookDetails.map((function(a,r){t.id===a.id&&e.techBookDetails.splice(r,1)}))}));break;default:break}},addTarget:function(e){var t=this;switch(this.activeTab){case"1":e.map((function(e){var a=t.reguMaterials.findIndex((function(t){return t.materialTypeId===e.id}));a<0?t.reguMaterials.push(t.transformMaterialToReguMaterial(e)):t.$message.error("此物料已添加")})),this.$emit("update:reguMaterials",this.reguMaterials);break;case"2":e.map((function(e){var a=t.reguTools.findIndex((function(t){return t.toolTypeId===e.id}));a<0?t.reguTools.push(t.transformToolToReguTool(e)):t.$message.error("此工器具已添加")})),this.$emit("update:reguTools",this.reguTools);break;case"3":e&&this.reguPersons.push(e),this.$emit("update:reguPersons",this.reguPersons);break;case"4":e.map((function(e){var a=t.techFiles.findIndex((function(t){return t.fileId===e.id}));a<0?t.techFiles.push(t.transformFileToReguFile(e)):t.$message.error("此工艺文件已添加")})),this.$emit("update:techFiles",this.techFiles);break;case"5":e.forEach((function(e){t.techBookDetails.find((function(t){return t.bookDetailId===e.id}))?t.$message.error("".concat(e.stepTitle,"步骤已经添加了")):t.techBookDetails.push(t.transformFileToReguSop(e))})),this.$emit("update:techBookDetails",this.techBookDetails);break;default:break}},transformMaterialToReguMaterial:function(e){var t={};return t.id=Object(g["p"])(),t.reguDetailId=this.reguDetailId,t.materialTypeId=e.id,t.amount=e.num,t.code=e.code,t.name=e.name,t.unit=e.unit,t.category1=e.category1,t.category1_dictText=e.category1_dictText,t.category2=e.category2,t.category2_dictText=e.category2_dictText,t},transformToolToReguTool:function(e){var t={};return t.id=Object(g["p"])(),t.reguDetailId=this.reguDetailId,t.toolTypeId=e.id,t.amount=e.num,t.code=e.code,t.name=e.name,t.unit=e.unit,t.category1=e.category1,t.category1_dictText=e.category1_dictText,t.category2=e.category2,t.category2_dictText=e.category2_dictText,t},transformFileToReguFile:function(e){var t={};return t.id=Object(g["p"])(),t.reguDetailId=this.reguDetailId,t.fileId=e.id,t.savepath=e.savepath,t.name=e.name,t.type=e.type,t.size=e.size,t.uploadDate=e.uploadDate,t.remark=e.remark,t},transformFileToReguSop:function(e){var t={};return t.id=Object(g["p"])(),t.reguDetailId=this.reguDetailId,t.bookDetailId=e.id,t.bookStepNo=e.stepNum,t.bootStepContent=e.stepContent,t.bootStepTitle=e.stepTitle,t.techBookId=e.bookId,t},handleCheckFiled:function(){var e=this;this.form.validateFields((function(t,a){e.filedRight=t}))},handleChangeMethod:function(e){this.$emit("update:method",e)},handleChangeQualityLevel:function(e){this.$emit("update:qualityLevel",e)},handleChangeWorkTime:function(e){this.$emit("update:workTime",e)},handleChangeRequirement:function(e){this.$emit("update:requirement",e.target.value)},handleChangeOutsource:function(e){this.outsourceSwitch=e;var t=e?1:0;this.$emit("update:outsource",t)},handleChangeImportant:function(e){this.importantSwitch=e;var t=e?1:0;this.$emit("update:important",t)},handleChangeMustReplace:function(e){this.mustReplaceSwitch=e;var t=e?1:0;this.$emit("update:mustReplace",t)},handleChangeMeasure:function(e){this.measureSwitch=e;var t=e?1:0;this.$emit("update:measure",t)},handleSeeing:function(e){this.$refs.docPreview.handleFilePath(e.savepath)},showSopDeatil:function(e){this.$refs.workSopViewModal.showSopDetail([e.bookDetailId])}}},b=v,y=(a("7ea5"),a("2877")),w=Object(y["a"])(b,r,i,!1,null,null,null);t["default"]=w.exports},e034:function(e,t,a){"use strict";a("1763")},e0ce:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("table",{staticClass:"table"},[t("thead",[t("tr",[t("th",{staticClass:"tg-d1f0",attrs:{colspan:"10"}},[e._v(e._s(e.sheetData.title))])])]),t("tbody",[t("tr",[t("td",{staticClass:"tg-ld8d",attrs:{colspan:"3"}},[t("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[e._v("车号："+e._s(e.sheetData.trainNo))])]),t("td",{staticClass:"tg-ld8d",attrs:{colspan:"3"}},[t("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[e._v("部件名称："+e._s(e.sheetData.assetName))])]),t("td",{staticClass:"tg-ld8d",attrs:{colspan:"4"}},[e._v("作业周期："+e._s(e.sheetData.period))])]),t("tr",[t("td",{staticClass:"tg-ld8d",attrs:{colspan:"3"}},[t("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[e._v("部件编号："+e._s(e.sheetData.assetNo))])]),t("td",{staticClass:"tg-ld8d",attrs:{colspan:"3"}},[t("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[e._v("作业位置："+e._s(e.sheetData.location))])]),t("td",{staticClass:"tg-ld8d",attrs:{colspan:"4"}},[e._v("作业班组："+e._s(e.sheetData.groupName))])]),e._m(0),e._l(e.sheetData.itemList,(function(a,r){return t("tr",{key:r},[t("td",{staticClass:"tg-0pky tg-9wq8"},[e._v(e._s(a.sortNo))]),t("td",{staticClass:"tg-0pky"},[e._v(e._s(a.title))]),t("td",{staticClass:"tg-0pky"},[e._v(e._s(a.content))]),t("td",{staticClass:"tg-0pky tg-9wq8"},[t("a-rate",{attrs:{disabled:"",count:3},model:{value:a.checkLevel,callback:function(t){e.$set(a,"checkLevel",t)},expression:"item.checkLevel"}})],1),t("td",{staticClass:"tg-0pky"},[e._v(e._s(a.checkDesc))]),t("td",{staticClass:"tg-0pky tg-9wq8"},[e._v(e._s(a.checkUserName?a.checkResult_dictText:""))]),t("td",{staticClass:"tg-0pky tg-9wq8"},[e._v(e._s(a.workTime))]),t("td",{staticClass:"tg-0pky tg-9wq8"},[e._v(e._s(a.checkMethod_dictText))]),t("td",{staticClass:"tg-0pky tg-9wq8"},[e._v(e._s(a.checkUserName))]),t("td",{staticClass:"tg-0pky tg-9wq8"},[e._v(e._s(a.checkTime))])])})),e._m(1),t("tr",[t("td",{staticClass:"tg-9wq8",attrs:{colspan:"2"}},[e._v("参考工艺文件")]),t("td",{staticClass:"tg-0pky",attrs:{colspan:"8"}},e._l(e.sheetData.techLinkList,(function(a,r){return t("p",{key:r,staticStyle:{margin:"0","font-size":"12px","line-height":"18px"}},[e._v(" "+e._s(a.teckBookName)+" ")])})),0)]),e._m(2),e._m(3),e._l(e.sheetData.rectifyList,(function(a,r){return t("tr",{key:r},[t("td",{staticClass:"tg-0pky",attrs:{colspan:"7"}},[e._v(e._s(a.itemInfo))]),t("td",{staticClass:"tg-0pky"},[e._v(e._s(a.rectifyDesc))]),t("td",{staticClass:"tg-0pky"},[e._v(e._s(a.reviewTime))]),t("td",{staticClass:"tg-0pky"},[e._v(e._s(a.reviewUserName))])])})),e._m(4),t("tr",[t("td",{staticClass:"tg-9wq8",attrs:{colspan:"2"}},[e._v("评定：")]),t("td",{staticClass:"tg-0pky",attrs:{colspan:"8"}},[e._l(e.sheetData.judgeList,(function(a){return t("div",{key:a.id,staticClass:"qualityBox"},[t("div",{staticClass:"flex1",style:e.qualityEvaluation&&"padding-right: 20px;"},[t("span",[e._v(e._s("评定人：".concat(a.jdUserName)))]),t("span",[e._v(e._s("评定时间：".concat(a.jdTime)))]),t("span",[e._v(e._s("评定内容：".concat(a.jdContent)))])]),e.qualityEvaluation&&a.jdUserId===e.$store.getters.userInfo.id?t("div",[t("a-button",{directives:[{name:"has",rawName:"v-has",value:"jobchekc:evaluation:add",expression:"'jobchekc:evaluation:add'"}],attrs:{type:"link"},on:{click:e.openJudgeModal}},[e._v("质量评定")]),t("a-button",{directives:[{name:"has",rawName:"v-has",value:"jobchekc:evaluation:del",expression:"'jobchekc:evaluation:del'"}],attrs:{type:"link"},on:{click:function(t){return e.delJudge(a.id)}}},[e._v("删除")])],1):e._e()])})),e.sheetData.judgeList&&0!==e.sheetData.judgeList.length&&e.isJudge?e._e():t("div",{staticClass:"qualityBox"},[t("div",{staticClass:"flex1",style:e.qualityEvaluation&&"padding-right: 20px;"}),t("div",[e.fromData?t("a-button",{directives:[{name:"has",rawName:"v-has",value:"jobchekc:evaluation:add",expression:"'jobchekc:evaluation:add'"}],attrs:{type:"link"},on:{click:e.openJudgeModal}},[e._v("质量评定")]):e._e()],1)])],2)]),e._m(5),t("tr",[t("td",{staticClass:"tg-9wq8",attrs:{colspan:"2"}},[e._v("说明："+e._s(e.sheetData.remark))]),e._m(6)])],2),t("a-modal",{attrs:{title:"作业质量评定",width:800,visible:e.visible,centered:"",cancelText:"关闭",destroyOnClose:!0},on:{ok:e.handleOk,cancel:function(t){e.visible=!1}}},[t("a-form",{ref:"initForm",attrs:{form:e.form}},[t("a-form-item",[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["jdContent",e.validatorRules.jdContent],expression:"['jdContent', validatorRules.jdContent]"}],attrs:{"auto-size":{minRows:8,maxRows:8}}})],1)],1)],1)],1)},i=[function(){var e=this,t=e._self._c;return t("tr",[t("td",{staticClass:"tg-87ij",staticStyle:{width:"6%"}},[t("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[e._v("序号")])]),t("td",{staticClass:"tg-87ij",staticStyle:{width:"12%"}},[t("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[e._v("项点")])]),t("td",{staticClass:"tg-87ij",staticStyle:{width:"18%"}},[t("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[e._v("检查内容")])]),t("td",{staticClass:"tg-87ij",staticStyle:{width:"8%"}},[t("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[e._v("等级")])]),t("td",{staticClass:"tg-87ij",staticStyle:{width:"8%"}},[t("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[e._v("检查情况")])]),t("td",{staticClass:"tg-87ij",staticStyle:{width:"8%"}},[t("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[e._v("结果")])]),t("td",{staticClass:"tg-87ij",staticStyle:{width:"10%"}},[t("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[e._v("作业时间")])]),t("td",{staticClass:"tg-87ij",staticStyle:{width:"10%"}},[t("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[e._v("检查方式")])]),t("td",{staticClass:"tg-87ij",staticStyle:{width:"10%"}},[t("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[e._v("检查人")])]),t("td",{staticClass:"tg-87ij",staticStyle:{width:"10%"}},[t("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[e._v("检查时间")])])])},function(){var e=this,t=e._self._c;return t("tr",[t("td",{staticClass:"tg-0pky",attrs:{colspan:"10"}})])},function(){var e=this,t=e._self._c;return t("tr",[t("td",{staticClass:"tg-0pky",attrs:{colspan:"10"}})])},function(){var e=this,t=e._self._c;return t("tr",[t("td",{staticClass:"tg-87ij",attrs:{colspan:"7"}},[t("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[e._v("不合格项汇总")])]),t("td",{staticClass:"tg-87ij"},[t("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[e._v("整改情况")])]),t("td",{staticClass:"tg-87ij"},[t("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[e._v("复查时间")])]),t("td",{staticClass:"tg-87ij"},[t("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[e._v("复查人")])])])},function(){var e=this,t=e._self._c;return t("tr",[t("td",{staticClass:"tg-0pky",attrs:{colspan:"10"}})])},function(){var e=this,t=e._self._c;return t("tr",[t("td",{staticClass:"tg-0pky",attrs:{colspan:"10"}})])},function(){var e=this,t=e._self._c;return t("td",{staticClass:"tg-0pky",attrs:{colspan:"8"}},[e._v(" 1、表中只列出关键项点，检查人员在检查时参照工艺文件标准执行。"),t("br"),e._v(" 2、检查人员必须对当天作业内容进行检查。"),t("br"),e._v(" 3、表中所有内容全部现场检查时填写完成，并悬挂于部件上，随部件流转。"),t("br"),e._v(" 4、作业时间由作业班组填写，其余由检查人员填写。“检查情况”一栏详细记录检查情况；“结果”一栏对检查合格的画“√”不合格的画“×”；“检查方式”一栏写明检查手段，如：目视、测量、操作等。"),t("br"),e._v(" 5、检查人员对不合格项视情节严重情况开具整改单，及时提出整改意见，并督促整改，整改完成后及时进行复查。"),t("br"),e._v(" 6、由检查人员、质量工程师及专业工程师对整体作业质量做出最终判定。 ")])}],n=a("b7b4");function o(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",i=a.toStringTag||"@@toStringTag";function n(a,r,i,n){var o=r&&r.prototype instanceof c?r:c,u=Object.create(o.prototype);return l(u,"_invoke",function(a,r,i){var n,o,l,c=0,u=i||[],d=!1,h={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,a){return n=t,o=0,l=e,h.n=a,s}};function f(a,r){for(o=a,l=r,t=0;!d&&c&&!i&&t<u.length;t++){var i,n=u[t],f=h.p,p=n[2];a>3?(i=p===r)&&(l=n[(o=n[4])?5:(o=3,3)],n[4]=n[5]=e):n[0]<=f&&((i=a<2&&f<n[1])?(o=0,h.v=r,h.n=n[1]):f<p&&(i=a<3||n[0]>r||r>p)&&(n[4]=a,n[5]=r,h.n=p,o=0))}if(i||a>1)return s;throw d=!0,r}return function(i,u,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,p),o=u,l=p;(t=o<2?e:l)||!d;){n||(o?o<3?(o>1&&(h.n=-1),f(o,l)):h.n=l:h.v=l);try{if(c=2,n){if(o||(i="next"),t=n[i]){if(!(t=t.call(n,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,o<2&&(o=0)}else 1===o&&(t=n.return)&&t.call(n),o<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),o=1);n=e}else if((t=(d=h.n<0)?l:a.call(r,h))!==s)break}catch(t){n=e,o=1,l=t}finally{c=1}}return{value:t,done:d}}}(a,i,n),!0),u}var s={};function c(){}function u(){}function d(){}t=Object.getPrototypeOf;var h=[][r]?t(t([][r]())):(l(t={},r,(function(){return this})),t),f=d.prototype=c.prototype=Object.create(h);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,l(e,i,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=d,l(f,"constructor",d),l(d,"constructor",u),u.displayName="GeneratorFunction",l(d,i,"GeneratorFunction"),l(f),l(f,i,"Generator"),l(f,r,(function(){return this})),l(f,"toString",(function(){return"[object Generator]"})),(o=function(){return{w:n,m:p}})()}function l(e,t,a,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}l=function(e,t,a,r){function n(t,a){l(e,t,(function(e){return this._invoke(t,a,e)}))}t?i?i(e,t,{value:a,enumerable:!r,configurable:!r,writable:!r}):e[t]=a:(n("next",0),n("throw",1),n("return",2))},l(e,t,a,r)}function s(e,t,a,r,i,n,o){try{var l=e[n](o),s=l.value}catch(e){return void a(e)}l.done?t(s):Promise.resolve(s).then(r,i)}function c(e){return function(){var t=this,a=arguments;return new Promise((function(r,i){var n=e.apply(t,a);function o(e){s(n,r,i,o,l,"next",e)}function l(e){s(n,r,i,o,l,"throw",e)}o(void 0)}))}}var u={name:"JobCheckSheetTable",data:function(){return{jdContentText:"",form:this.$form.createForm(this),validatorRules:{jdContent:{rules:[{required:!0,message:"请输入评定内容!"}]}},judgeQueryParam:{id:null,checkInstId:"",checkInstName:"",jdContent:"",jdTime:null,jdUserId:this.$store.getters.userInfo.id,jdUserName:this.$store.getters.userInfo.username},visible:!1,sheetData:{}}},props:{data:{type:Object,default:function(){return{}}},qualityEvaluation:{type:Boolean,default:!1},fromData:{type:Object,default:function(){}}},created:function(){this.sheetData=Object.assign({},this.data),this.sheetData.itemList=this.sortArray(this.sheetData.itemList)},mounted:function(){},computed:{isJudge:function(){var e=this;return!(!this.sheetData||!this.sheetData.judgeList||this.sheetData.judgeList.length<1)&&!!this.sheetData.judgeList.find((function(t){return t.jdUserId===e.$store.getters.userInfo.id}))}},methods:{getWorkCheckForm:function(){var e=c(o().m((function e(){var t,a=this;return o().w((function(e){while(1)switch(e.n){case 0:return t=this.fromData,e.a(2,Object(n["x"])({task2InstId:t.task2InstId,formInstId:t.id}).then((function(e){return e.success&&e.result&&(e.result.itemList=a.sortArray(e.result.itemList),a.sheetData=e.result),a.sheetData})))}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),openJudgeModal:function(){var e=this,t=this.fromData;this.judgeQueryParam.checkInstId=t.id,this.judgeQueryParam.checkInstName=t.name,this.visible=!0;var a=t.judgeList.find((function(t){return t.jdUserId===e.$store.getters.userInfo.id}));a?(this.judgeQueryParam.jdContent=a.jdContent,this.judgeQueryParam.id=a.id,this.form.getFieldDecorator("jdContent"),this.$nextTick((function(){e.form.setFieldsValue({jdContent:e.jdContentText||e.judgeQueryParam.jdContent})}))):(this.judgeQueryParam.jdContent="",this.judgeQueryParam.id=null,this.form.getFieldDecorator("jdContent"),this.$nextTick((function(){e.form.setFieldsValue({jdContent:""})})))},handleOk:function(){var e=this;this.form.validateFields((function(t,a){t||(Object.assign(e.judgeQueryParam,a),Object(n["E"])(e.judgeQueryParam).then((function(t){t.success?(e.jdContentText=a.jdContent,e.$message.success("保存成功"),e.$emit("brush"),e.getWorkCheckForm().then((function(t){e.$emit("judgeChange",e.sheetData)}))):e.$message.error(t.message)})),e.visible=!1)}))},sortArray:function(e){return e.sort(this.compare("sortNo")),e},compare:function(e){return function(t,a){return t[e]-a[e]}},delJudge:function(e){var t=this;this.$confirm({content:"是否删除作业质量评定？",okText:"确定",cancelText:"取消",onOk:function(){var a=new FormData;a.append("ids",e),Object(n["g"])(a).then((function(e){e.success?(t.$message.success("执行成功"),t.$emit("brush"),t.getWorkCheckForm().then((function(e){t.$emit("judgeChange",t.sheetData)}))):t.$message.error(e.message)}))}})}}},d=u,h=(a("bd18"),a("2877")),f=Object(h["a"])(d,r,i,!1,null,"3c8c4fbe",null);t["default"]=f.exports},e24e:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var r=a("e8ae"),i=a.n(r),n=a("21a6"),o=a.n(n),l=(a("7268"),"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"),s=function(e,t){var a=new i.a.Workbook;"[object Object]"===Object.prototype.toString.call(e)&&(e=[e]),e.forEach((function(e){if(0===e.data.length)return!0;var t=a.addWorksheet(e.name),r=e.config&&e.config.merge||{},i=e.config&&e.config.borderInfo||{},n=e.config&&e.config.columnlen||{},o=e.images||{};return d(o,a,t),u(n,t),c(e.config,t),p(e.data,t),h(r,t),f(i,t),!0}));var r=a.xlsx.writeBuffer().then((function(e){var a=new Blob([e],{type:l});o.a.saveAs(a,"".concat(t,".xlsx"))}));return r},c=function(e,t){if(e&&e.rowlen)for(var a in e.rowlen){var r=parseInt(a),i=parseInt(e.rowlen[a]),n=t.getRow(r+1);n.height=i}},u=function(e,t){for(var a in e){var r=parseInt(a),i=parseInt(e[a]);t.getColumn(r+1).width=parseInt(i/7)}},d=function(e,t,a){for(var r in e){var i=e[r],n=i.src.split(";base64,"),o=n[0].replaceAll("data:image/",""),l=t.addImage({base64:i.src,extension:o}),s=luckysheet.location(i.default.left,i.default.top);a.addImage(l,{tl:{col:s.col,row:s.row},ext:{width:i.default.width,height:i.default.height}})}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=Object.values(e);a.forEach((function(e){t.mergeCells(e.r+1,e.c+1,e.r+e.rs,e.c+e.cs)}))},f=function(e,t){Array.isArray(e)&&e.forEach((function(e){if("range"===e.rangeType)for(var a=b(e.borderType,e.style,e.color),r=e.range[0],i=r.row,n=r.column,o=i[0]+1;o<i[1]+2;o++)for(var l=n[0]+1;l<n[1]+2;l++)t.getCell(o,l).border=a;if("cell"===e.rangeType){var s=e.value,c=s.col_index,u=s.row_index,d=Object.assign({},e.value);delete d.col_index,delete d.row_index;var h=y(d,u,c);t.getCell(u+1,c+1).border=h}}))},p=function(e,t){Array.isArray(e)&&e.forEach((function(e,a){e.every((function(e,r){if(!e)return!0;var i=m(e.bg),n=g(e.ff,e.fc,e.bl,e.it,e.fs,e.cl,e.ul),o=v(e.vt,e.ht,e.tb,e.tr),l="";e.f?l={formula:e.f,result:e.v}:!e.v&&e.ct&&e.ct.s?e.ct.s.forEach((function(e){l+=e.v})):l=e.v;var s=w(r),c=t.getCell(s+(a+1));for(var u in i){c.fill=i;break}return c.font=n,c.alignment=o,c.value=l,!0}))}))},m=function(e){if(!e)return{};var t={type:"pattern",pattern:"solid",fgColor:{argb:e.replace("#","")}};return t},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#000000",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:10,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l={0:"微软雅黑",1:"宋体（Song）",2:"黑体（ST Heiti）",3:"楷体（ST Kaiti）",4:"仿宋（ST FangSong）",5:"新宋体（ST Song）",6:"华文新魏",7:"华文行楷",8:"华文隶书",9:"Arial",10:"Times New Roman ",11:"Tahoma ",12:"Verdana",num2bl:function(e){return 0!==e}},s={name:"number"===typeof e?l[e]:e,family:1,size:i,color:{argb:t.replace("#","")},bold:l.num2bl(a),italic:l.num2bl(r),underline:l.num2bl(o),strike:l.num2bl(n)};return s},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"default",i={vertical:{0:"middle",1:"top",2:"bottom",default:"top"},horizontal:{0:"center",1:"left",2:"right",default:"left"},wrapText:{0:!1,1:!1,2:!0,default:!1},textRotation:{0:0,1:45,2:-45,3:"vertical",4:90,5:-90,default:0}},n={vertical:i.vertical[e],horizontal:i.horizontal[t],wrapText:i.wrapText[a],textRotation:i.textRotation[r]};return n},b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#000";if(!e)return{};var r={type:{"border-all":"all","border-top":"top","border-right":"right","border-bottom":"bottom","border-left":"left"},style:{0:"none",1:"thin",2:"hair",3:"dotted",4:"dashDot",5:"dashDot",6:"dashDotDot",7:"double",8:"medium",9:"mediumDashed",10:"mediumDashDot",11:"mediumDashDotDot",12:"slantDashDot",13:"thick"}},i={style:r.style[t],color:{argb:a.replace("#","")}},n={};return"all"===r.type[e]?(n["top"]=i,n["right"]=i,n["bottom"]=i,n["left"]=i):n[r.type[e]]=i,n};function y(e,t,a){var r={},i={type:{l:"left",r:"right",b:"bottom",t:"top"},style:{0:"none",1:"thin",2:"hair",3:"dotted",4:"dashDot",5:"dashDot",6:"dashDotDot",7:"double",8:"medium",9:"mediumDashed",10:"mediumDashDot",11:"mediumDashDotDot",12:"slantDashDot",13:"thick"}};for(var n in e)-1===e[n].color.indexOf("rgb")?r[i.type[n]]={style:i.style[e[n].style],color:{argb:e[n].color.replace("#","")}}:r[i.type[n]]={style:i.style[e[n].style],color:{argb:e[n].color}};return r}function w(e){var t="A".charCodeAt(0),a="Z".charCodeAt(0),r=a-t+1,i="";while(e>=0)i=String.fromCharCode(e%r+t)+i,e=Math.floor(e/r)-1;return i}},f680:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return"checkbox"==e.tagType?t("a-checkbox-group",{attrs:{value:e.arrayValue,disabled:e.disabled},on:{change:e.onChange}},e._l(e.dictOptions,(function(a,r){return t("a-checkbox",{key:r,attrs:{value:a.value}},[e._v(e._s(a.text||a.label))])})),1):"select"==e.tagType?t("a-select",{attrs:{value:e.arrayValue,disabled:e.disabled,mode:"multiple",placeholder:e.placeholder,getPopupContainer:function(e){return e.parentNode},allowClear:""},on:{change:e.onChange}},e._l(e.dictOptions,(function(a,r){return t("a-select-option",{key:r,attrs:{value:a.value}},[t("span",{staticStyle:{display:"inline-block",width:"100%"},attrs:{title:a.text||a.label}},[e._v(" "+e._s(a.text||a.label)+" ")])])})),1):e._e()},i=[],n=a("4ec3");function o(e){return u(e)||c(e)||s(e)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(e){if("string"==typeof e)return d(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?d(e,t):void 0}}function c(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function u(e){if(Array.isArray(e))return d(e)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}var h={name:"JMultiSelectTag",props:{dictCode:String,placeholder:String,disabled:Boolean,value:String,type:String,options:Array},data:function(){return{dictOptions:[],tagType:"",arrayValue:this.value?this.value.split(","):[]}},created:function(){this.type&&"list_multi"!==this.type?this.tagType=this.type:this.tagType="select"},watch:{options:function(e){this.setCurrentDictOptions(e)},dictCode:{immediate:!0,handler:function(){this.initDictData()}},value:function(e){this.arrayValue=e?this.value.split(","):[]}},methods:{initDictData:function(){var e=this;if(this.options&&this.options.length>0)this.dictOptions=o(this.options);else{if(Object(n["u"])(this.dictCode))return void(this.dictOptions=Object(n["u"])(this.dictCode));Object(n["f"])(this.dictCode,null).then((function(t){t.success&&(e.dictOptions=t.result)}))}},onChange:function(e){this.$emit("change",e.join(","))},setCurrentDictOptions:function(e){this.dictOptions=e},getCurrentDictOptions:function(){return this.dictOptions}},model:{prop:"value",event:"change"}},f=h,p=a("2877"),m=Object(p["a"])(f,r,i,!1,null,null,null);t["default"]=m.exports},f76d:function(e,t,a){"use strict";a("9527")}}]);