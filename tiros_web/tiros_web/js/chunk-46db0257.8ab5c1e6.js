(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-46db0257","chunk-1906d08a","chunk-1afbcb84","chunk-2d0c89b7"],{2427:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("div",[e("a-modal",{attrs:{title:t.title,centered:"",width:"80%",visible:t.visible,confirmLoading:t.confirmLoading,cancelText:"关闭",destroyOnClose:!0},on:{ok:t.handleOk,cancel:t.handleCancel}},[e("a-spin",{attrs:{spinning:t.confirmLoading}},[e("div",{staticStyle:{"max-height":"80vh"}},[e("a-form",{attrs:{form:t.form}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{span:12}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"任务类型"}},[e("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["taskType",t.validatorRules.taskType],expression:"['taskType', validatorRules.taskType]",modifiers:{trim:!0}}],ref:"taskTypeSelect",attrs:{triggerChange:!0,dictCode:"bu_task_type",disabled:t.disableTaskType},on:{change:t.onTaskTypeChange}})],1)],1),5==t.taskType||-1==t.taskType||isNaN(t.taskType)?e("a-col",{staticStyle:{height:"50px"},attrs:{span:12}}):t._e(),1===t.taskType?e("a-col",{attrs:{span:12}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"计划任务选择"}},[e("a-select",{ref:"planTaskSelect",attrs:{placeholder:"请选择计划任务","allow-clear":"",open:!1,showArrow:!0},on:{focus:t.selectPlanTask},model:{value:t.taskName,callback:function(e){t.taskName=e},expression:"taskName"}},[e("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)],1):t._e(),2===t.taskType?e("a-col",{attrs:{span:12}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"故障选择"}},[e("a-select",{ref:"faultSelect",attrs:{placeholder:"请选择故障记录","allow-clear":"",open:!1,showArrow:!0},on:{focus:t.selectFault},model:{value:t.taskName,callback:function(e){t.taskName=e},expression:"taskName"}},[e("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)],1):t._e(),3===t.taskType?e("a-col",{attrs:{span:12}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"整改选择"}},[e("a-select",{ref:"rectifySelect",attrs:{placeholder:"请选择整改记录","allow-clear":"",open:!1,showArrow:!0},on:{focus:t.selectRectify},model:{value:t.taskName,callback:function(e){t.taskName=e},expression:"taskName"}},[e("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)],1):t._e(),4===t.taskType?e("a-col",{attrs:{span:12}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"作业项选择"}},[e("a-select",{ref:"regulationSelect",attrs:{placeholder:"请选择作业项","allow-clear":"",open:!1,showArrow:!0},on:{focus:t.selectRegulation},model:{value:t.taskName,callback:function(e){t.taskName=e},expression:"taskName"}},[e("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)],1):t._e(),6===t.taskType?e("a-col",{attrs:{span:12}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"送修设备选择"}},[e("div",{on:{click:t.selectStructure}},[e("a-select",{ref:"structureSelect",attrs:{placeholder:"请选择送修设备","allow-clear":"",open:!1,showArrow:!0},model:{value:t.trainAssetName,callback:function(e){t.trainAssetName=e},expression:"trainAssetName"}},[e("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)])],1):t._e(),7===t.taskType?e("a-col",{attrs:{span:12}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"接收设备选择"}},[e("div",{on:{click:t.selectStructure}},[e("a-select",{ref:"structureSelect",attrs:{placeholder:"请选择接收设备","allow-clear":"",open:!1,showArrow:!0},model:{value:t.trainAssetName,callback:function(e){t.trainAssetName=e},expression:"trainAssetName"}},[e("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)])],1):t._e(),8===t.taskType?e("a-col",{attrs:{span:12}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"监修设备选择"}},[e("div",{on:{click:t.selectStructure}},[e("a-select",{ref:"structureSelect",attrs:{placeholder:"请选择监修设备","allow-clear":"",open:!1,showArrow:!0},model:{value:t.trainAssetName,callback:function(e){t.trainAssetName=e},expression:"trainAssetName"}},[e("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)])],1):t._e(),e("a-col",{attrs:{span:12}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"任务名称"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["taskName",t.validatorRules.taskName],expression:"['taskName', validatorRules.taskName]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入内容"}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"维护手段"}},[e("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["method",t.validatorRules.method],expression:"['method', validatorRules.method]",modifiers:{trim:!0}}],ref:"methodSelect",attrs:{dictCode:"bu_regu_method",triggerChange:!0}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"预计工时"}},[e("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["workTime",t.validatorRules.workTime],expression:"['workTime', validatorRules.workTime]",modifiers:{trim:!0}}],staticStyle:{width:"100%"},attrs:{placeholder:"请输入内容",max:99999999,min:0}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"作业工位"}},[e("div",{on:{click:t.showStationList}},[e("a-select",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["stationName",t.validatorRules.stationName],expression:"['stationName', validatorRules.stationName]",modifiers:{trim:!0}}],ref:"stationName",attrs:{placeholder:"请选择工位","allow-clear":"",open:!1,showArrow:!0}},[e("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)])],1),e("a-col",{attrs:{span:12}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"任务要求"}},[e("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["taskContent",t.validatorRules.taskContent],expression:"['taskContent', validatorRules.taskContent]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入内容"}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"备注"}},[e("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark",t.validatorRules.remark],expression:"['remark',validatorRules.remark]"}],attrs:{placeholder:"请输入内容"}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"是否重要"}},[e("a-switch",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["importantV",t.validatorRules.importantV],expression:"['importantV', validatorRules.importantV]",modifiers:{trim:!0}}],on:{change:t.onImportantChange}})],1)],1)],1),1==t.operator?e("a-row",[e("a-col",{attrs:{span:12}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"安全预想"}},[e("a-button",{attrs:{type:"primary"},on:{click:t.setSafeNptice}},[t._v("设置安全预想")])],1)],1)],1):t._e()],1),e("br"),e("div",{staticClass:"info-wrapper info-top-wrapper"},[e("h4",[t._v("目标设备")]),e("TargetDeviceList",{attrs:{orderTaskId:t.model.id,equipments:t.equipments,trainNo:t.trainNo,lineId:t.lineId},on:{"update:equipments":function(e){t.equipments=e}}})],1)],1)]),e("work-station-list",{ref:"modalForm",on:{ok:t.onStationSelected}}),e("regulation-list",{ref:"regulationModal",attrs:{onlyProject:!0},on:{ok:t.onSelectRegulation}}),e("train-plan-task-list",{ref:"planTaskModal",on:{ok:t.onSelectPlanTask}}),e("fault-select-list",{ref:"faultSelectModal",on:{ok:t.onSelectFault}}),e("rectify-select",{ref:"rectifySelectModal",on:{ok:t.onSelectRectify}}),e("train-asset-type",{ref:"structureSelectModal",attrs:{"can-select-type":[2,3,4],multiple:!1},on:{ok:t.onSelectStructure}})],1),e("a-modal",{attrs:{title:"设置安全预想",centered:"",width:"80%",visible:t.visible2,cancelText:"关闭",destroyOnClose:!0},on:{ok:t.handleOk2,cancel:t.handleCancel2}},[t.visible2?e("j-editor",{attrs:{plugins:"lists link table textcolor wordcount contextmenu fullscreen",triggerChange:""},on:{change:function(e){t.safeNotice=e}},model:{value:t.safeNotice,callback:function(e){t.safeNotice=e},expression:"safeNotice"}}):t._e()],1)],1)},i=[],n=a("a061"),o=a("48fc"),l=a("1158"),s=a("500a"),c=a("d823"),u=a("db0c"),d=a("fb5e"),f=a("2cb5"),m=a("ab812"),h={name:"TaskItemModal",components:{WorkStationList:l["default"],JEditor:n["default"],TargetDeviceList:m["default"],RegulationList:s["default"],TrainPlanTaskList:c["default"],FaultSelectList:u["default"],RectifySelect:d["default"],TrainAssetType:f["default"]},props:["lineId","trainNo","groupId","structureId","orderType","operator"],data:function(){return{safeNotice:"",taskType:-1,value:1,title:"操作",visible:!1,visible2:!1,model:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,stationDetail:null,form:this.$form.createForm(this),validatorRules:{taskName:{rules:[{required:!0,message:"请输入任务名称!"},{max:50,message:"输入长度不能超过50字符!"}]},workTime:{rules:[{required:!0,message:"请输入预计工时!"}]},taskType:{rules:[{required:!0,message:"请选择任务类型!"}]},taskContent:{rules:[{required:!0,message:"请输入任务要求!"},{max:255,message:"输入长度不能超过255字符!"}]},stationName:{rules:[{required:!1,message:"请选择工位!"}]},remark:{rules:[{max:255,message:"输入长度不能超过255字符!"}]},importantV:{valuePropName:"checked"}},taskObjId:"",taskName:"",assetTypeId:"",structDetailId:"",trainAssetId:"",trainAssetName:"",disableTaskType:!1,equipments:[]}},methods:{setSafeNptice:function(){var t=this;this.safeNotice=this.model.safeNotice?JSON.parse(JSON.stringify(this.model.safeNotice)):"",this.$nextTick((function(){t.visible2=!0}))},add:function(){this.model={id:Object(o["a"])()},this.edit({important:!1},!0)},edit:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(this.equipments=t.equipments||[],this.form.resetFields(),this.clearData(),Object.assign(this.model,t,{isAdd:a}),this.visible=!0,this.taskName=t.taskName,this.taskObjId=t.taskObjId,this.taskType=parseInt(t.taskType),this.disableTaskType=!1,this.assetTypeId=t.assetTypeId,this.structDetailId=t.structDetailId,this.trainAssetId=t.trainAssetId,this.trainAssetName=t.trainAssetName||t.assetTypeName,this.orderType+""){case"1":this.taskType=1,this.model.taskType="1",this.disableTaskType=!0;break;case"2":this.taskType=2,this.model.taskType="2",this.disableTaskType=!0;break}t.stationDetail&&(this.stationDetail=t.stationDetail),this.$nextTick((function(){e.form.setFieldsValue({stationName:e.stationDetail?e.stationDetail.name:"",taskName:e.model.taskName,workTime:e.model.workTime,taskType:e.model.taskType,taskContent:e.model.taskContent,remark:e.model.remark,method:e.model.method,importantV:1===e.model.important,trainAssetName:e.trainAssetName})}))},onImportantChange:function(t){this.model.important=t?1:0},clearData:function(){this.stationDetail=null},handleOk:function(){var t=this,e=this;e.form.validateFields((function(a,r){if(!a){var i=0;if(6===t.taskType?i=1:7===t.taskType&&(i=2),e.confirmLoading=!0,!t.model.taskType_dictText){var n=t.$refs.taskTypeSelect.getSelectItem();n&&(t.model.taskType_dictText=n.text)}var o=Object.assign(e.model,r);o.stationDetail=e.stationDetail,Object.assign(o,{taskObjId:t.taskObjId,assetTypeId:t.assetTypeId,structDetailId:t.structDetailId,trainAssetId:t.trainAssetId,trainAssetName:t.trainAssetName,important:!0===t.model.important||1===t.model.important?1:0,outTask:i}),o.important_dictText=1===o.important?"是":"否",o.method_dictText=t.$refs.methodSelect.getSelectItemText(),o.equipments=t.equipments,e.model.isAdd?e.$emit("addTask",o):e.$emit("editTask",o),e.stationDetail&&(e.stationDetail.orderTaskId=o.id,e.stationDetail.taskName=o.taskName,e.$emit("addStation",e.stationDetail)),e.confirmLoading=!1,e.close()}}))},handleOk2:function(){this.model.safeNotice=JSON.parse(JSON.stringify(this.safeNotice)),this.visible2=!1,this.safeNotice=""},handleCancel:function(){this.close()},handleCancel2:function(){this.visible2=!1,this.safeNotice=""},close:function(){this.$emit("close"),this.visible=!1},showStationList:function(){this.$refs.modalForm.showModal(),this.$refs.stationName.blur()},onStationSelected:function(t){t&&t.length>0?(this.form.setFieldsValue({stationName:t[0].name}),this.stationDetail=t[0]):(this.stationDetail=null,this.form.setFieldsValue({stationName:""}))},onTaskTypeChange:function(t,e){this.taskObjId="",this.taskName="",this.assetTypeId="",this.structDetailId="",this.trainAssetId="",this.trainAssetName="",e?(this.taskType=parseInt(t),this.model.taskType_dictText=e.text):(this.taskType=-1,this.model.taskType_dictText="")},selectRegulation:function(){this.$refs.regulationModal.showModal(),this.$refs.regulationSelect.blur()},onSelectRegulation:function(t){var e=this;if(t&&t.length>0){var a=t[0];this.taskObjId=a.id,this.taskName=a.title,this.$nextTick((function(){e.form.setFieldsValue({taskName:a.title,workTime:a.workTime,taskContent:a.requirement,importantV:1===a.important}),e.model.important=a.important}))}},selectPlanTask:function(){this.$refs.planTaskModal.showModal(this.lineId),this.$refs.planTaskSelect.blur()},onSelectPlanTask:function(t){var e=this;t&&(this.taskObjId=t.UID,this.taskName=t.Name,this.$nextTick((function(){e.form.setFieldsValue({taskName:t.Name})})))},selectFault:function(){this.$refs.faultSelectModal.showModal(this.lineId,this.trainNo,this.groupId),this.$refs.faultSelect.blur()},onSelectFault:function(t){var e=this;if(t&&t.length>0){var a=t[0];this.taskObjId=a.id,this.taskName=a.faultDesc,this.assetTypeId="",this.structDetailId=a.trainStructureId,this.trainAssetId=a.faultAssetId,this.trainAssetName=a.faultAssetName,this.$nextTick((function(){e.form.setFieldsValue({taskName:a.faultDesc})}))}},selectRectify:function(){this.$refs.rectifySelectModal.showModal(),this.$refs.rectifySelect.blur()},onSelectRectify:function(t){var e=this;if(t&&t.length>0){var a=t[0];this.taskObjId=a.id,this.taskName=a.title,this.$nextTick((function(){e.form.setFieldsValue({taskName:a.title})}))}},selectStructure:function(){this.$refs.structureSelectModal.showModal(this.structureId),this.$refs.structureSelect.blur()},onSelectStructure:function(t){var e=this;if(t&&t.length>0){var a=t[0];this.assetTypeId=a.id,this.structDetailId="",this.trainAssetId="",this.trainAssetName=a.name;var r=6==this.taskType?"送修":"接收";8==this.taskType&&(r="监修"),this.$nextTick((function(){e.form.setFieldsValue({taskName:e.trainAssetName+"--"+r})}))}},openAssetSelectModal:function(){this.$refs.trainAssetSelectModal.showModal()},onTrainAssetSelect:function(t){},onCancelTrainAssetSelect:function(){}}},p=h,b=(a("8d8e"),a("2877")),g=Object(b["a"])(p,r,i,!1,null,null,null);e["default"]=g.exports},"2cb5":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{width:"90%",centered:"",title:t.title,visible:t.visible,confirmLoading:t.confirmLoading,cancelText:"关闭",destroyOnClose:!0,bodyStyle:{height:"80vh"}},on:{ok:t.handleOk,cancel:t.handleCancel}},[e("div",{staticClass:"table-page-search-wrapper"},[e("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchQuery.apply(null,arguments)}}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:7,sm:24}},[e("a-form-item",{attrs:{label:"名称"}},[e("a-input",{attrs:{placeholder:"名称或编码","allow-clear":""},model:{value:t.queryParam.searchText,callback:function(e){t.$set(t.queryParam,"searchText",e)},expression:"queryParam.searchText"}})],1)],1),e("a-col",{attrs:{md:7,sm:24}},[e("a-form-item",{attrs:{label:"状态"}},[e("j-dict-select-tag",{attrs:{dictCode:"bu_enable"},model:{value:t.queryParam.status,callback:function(e){t.$set(t.queryParam,"status",e)},expression:"queryParam.status"}})],1)],1),e("a-col",{attrs:{md:3,sm:12}},[e("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[e("a-button",{on:{click:t.searchQuery}},[t._v("查询")])],1)])],1)],1)],1),e("div",{staticStyle:{height:"calc(80vh - 85px)"}},[e("vxe-table",{ref:"listTable",staticStyle:{height:"calc(80vh - 85px)"},attrs:{border:"","max-height":"100%","row-id":"id",align:t.allAlign,data:t.tableData,"show-overflow":"tooltip","radio-config":t.multiple?{}:{trigger:"row",checkMethod:t.checkRadioMethod},"checkbox-config":t.multiple?{trigger:"row",highlight:!0,checkMethod:t.checkRadioMethod}:{},"tree-config":{lazy:!0,children:"children",hasChild:"hasChildren",loadMethod:t.loadChildrenMethod}}},[t.multiple?e("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}):e("vxe-table-column",{attrs:{type:"radio",width:"40"}}),e("vxe-table-column",{attrs:{field:"name",title:"名称","tree-node":"",align:"left"}}),e("vxe-table-column",{attrs:{align:"left","header-align":"center",field:"code",title:"编码",width:"15%"}}),e("vxe-table-column",{attrs:{field:"structType_dictText",title:"类型",width:"10%"}}),e("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",width:"10%"}}),e("vxe-table-column",{attrs:{field:"placeCode",title:"位置编码",width:"15%"}}),e("vxe-table-column",{attrs:{field:"placeDesc",title:"位置描述",width:"15%"}})],1)],1)])},i=[],n=a("8fad"),o={name:"TrainAssetType",props:{trainTypeId:{type:String,default:""},parentId:{type:String,default:null},multiple:{type:Boolean,default:!0},title:{type:String,default:"设备类型选择"},canSelectType:{type:Array,default:function(){return[1,2,3,4]}}},data:function(){return{queryParam:{trainTypeId:"",id:"",searchText:"",status:null,structType:null},allAlign:"center",tableData:[],treeData:[],selectParent:"",visible:!1,confirmLoading:!1}},mounted:function(){},methods:{showModal:function(){this.visible=!0,this.queryParam.trainTypeId=this.trainTypeId,this.findList()},handleOk:function(){var t=[];this.multiple?t=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&t.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",t),this.visible=!1},handleCancel:function(){this.$emit("cancel"),this.close()},close:function(){this.$emit("close"),this.visible=!1},findList:function(){var t=this;this.loading=!0,this.parentId&&(this.queryParam.id=this.parentId),this.selectParent&&(this.queryParam.id=this.selectParent),Object(n["Zc"])(this.queryParam).then((function(e){e.success&&(t.loading=!1,t.tableData=e.result)}))},findSelectList:function(){var t=this,e={id:this.parentId,trainTypeId:this.trainTypeId};this.parentId&&(e.id=this.parentId),Object(n["Zc"])(e).then((function(e){e.success&&(t.loading=!1,t.treeData=e.result.map((function(e){return t.genSelectTreeNode(e)})))}))},loadChildrenMethod:function(t){var e=this,a=t.row,r={trainTypeId:this.trainTypeId,id:a.id};return new Promise((function(t){Object(n["Zc"])(r).then((function(a){a.success?t(a.result):e.$message.error("".concat(a.msg))}))}))},loadSelectNodeMethod:function(t){var e=this,a={trainTypeId:this.trainTypeId,id:t.dataRef.id,searchText:this.queryParam.searchText,status:this.queryParam.status,structType:this.queryParam.structType};return new Promise((function(t){Object(n["Zc"])(a).then((function(t){t.success?t.result.map((function(t){e.treeData=e.treeData.concat(e.genSelectTreeNode(t))})):e.$message.warning(t.message)})),t()}))},genSelectTreeNode:function(t){return{id:t.id,pId:t.parentId,value:t.id,title:t.name,isLeaf:!t.hasChildren}},searchQuery:function(){this.findList()},checkRadioMethod:function(t){var e=t.row;return this.canSelectType.indexOf(e.structType)>-1}}},l=o,s=(a("9589"),a("2877")),c=Object(s["a"])(l,r,i,!1,null,"52968c59",null);e["default"]=c.exports},"310d":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("div",[e("a-modal",{attrs:{title:"车辆设备选择",width:"80%",bodyStyle:{height:"83vh"},visible:t.visible,confirmLoading:t.confirmLoading,closable:!0,centered:"",destroyOnClose:!0},on:{ok:t.handleOk,cancel:t.close}},[e("div",{staticClass:"table-page-search-wrapper"},[e("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchQuery.apply(null,arguments)}}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:5,sm:24}},[e("a-form-item",{attrs:{label:"名称"}},[e("a-input",{attrs:{placeholder:"名称或编码"},model:{value:t.queryParam.title,callback:function(e){t.$set(t.queryParam,"title",e)},expression:"queryParam.title"}})],1)],1),e("a-col",{attrs:{md:5,sm:24}},[e("a-form-item",{attrs:{label:"线路"}},[e("j-dict-select-tag",{attrs:{triggerChange:!0,dictCode:"bu_mtr_line,line_name,line_id"},on:{change:t.changeLine},model:{value:t.lineId_A,callback:function(e){t.lineId_A=e},expression:"lineId_A"}})],1)],1),e("a-col",{attrs:{md:5,sm:24}},[e("a-form-item",{attrs:{label:"车辆"}},[e("j-dict-select-seach-tag",{attrs:{triggerChange:!0,dictCode:t.dictTrainStr},model:{value:t.trainNo_A,callback:function(e){t.trainNo_A=e},expression:"trainNo_A"}})],1)],1),e("a-col",{attrs:{md:5,sm:24}},[e("a-form-item",{attrs:{label:"状态"}},[e("j-dict-select-tag",{attrs:{triggerChange:!0,placeholder:"请选择状态",dictCode:"bu_valid_status"},model:{value:t.queryParam.status,callback:function(e){t.$set(t.queryParam,"status",e)},expression:"queryParam.status"}})],1)],1),e("a-col",{attrs:{md:5,sm:24}},[e("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[e("a-space",[e("a-button",{on:{click:t.searchQuery}},[t._v("查询")])],1)],1)])],1)],1)],1),e("div",{staticClass:"tableHeight"},[e("vxe-table",{ref:"listTable",attrs:{border:"",resizable:"","row-id":"id",align:t.allAlign,height:"auto",data:t.tableData,"show-overflow":"tooltip","max-height":"100%","radio-config":{trigger:t.multiple?"default":"row",highlight:!0,checkMethod:t.checkRadioMethod},"checkbox-config":{trigger:t.multiple?"row":"default",highlight:!0,checkStrictly:!0,checkMethod:t.checkRadioMethod},"tree-config":{lazy:!0,children:"children",hasChild:"hasChildren",loadMethod:t.loadChildrenMethod}}},[t.multiple?e("vxe-table-column",{attrs:{type:"checkbox",width:"40",fixed:"left"}}):e("vxe-table-column",{attrs:{type:"radio",width:"40",fixed:"left"}}),e("vxe-table-column",{attrs:{field:"name",title:"名称","tree-node":"",align:"left","header-align":"center"}}),e("vxe-table-column",{attrs:{align:"left","header-align":"center",field:"code",title:"编码",width:"180"}}),e("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",align:"center","header-align":"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(a){var r=a.row;return[e("div",{style:{backgroundColor:t.statusColor[r.status+""],borderRadius:"4px"}},[t._v(" "+t._s(r.status_dictText)+" ")])]}}])}),e("vxe-table-column",{attrs:{field:"maximoAssetType",title:"maximo设备类型",width:"150",align:"left","header-align":"center"}}),e("vxe-table-column",{attrs:{field:"locationName",title:"位置",width:"400",align:"left","header-align":"center"}})],1)],1)])],1)},i=[],n=a("8fad"),o={props:{multiple:{type:Boolean,default:!0},trainNo:{type:[Number,String]},lineId:{type:[Number,String]}},data:function(){return{statusColor:{0:"#dedede",1:"#bad795"},dictTrainStr:"",trainNo_A:void 0,lineId_A:void 0,allAlign:"center",tableData:[],visible:!1,confirmLoading:!1,queryParam:{trainNo:"",searchText:"",status:1}}},created:function(){},methods:{changeLine:function(t,e){this.dictTrainStr="",t&&(this.dictTrainStr="bu_train_info,train_no,train_no,line_id="+t+"|train_struct_id")},checkRadioMethod:function(t){t.row;return!0},searchQuery:function(){this.findList()},loadChildrenMethod:function(t){var e=this,a=t.row,r={trainNo:this.trainNo_A,parentId:a.id,searchText:this.queryParam.searchText,status:this.queryParam.status};return new Promise((function(t){Object(n["Wb"])(r).then((function(a){a.success?t(a.result):e.$message.error("".concat(a.msg))}))}))},handleOk:function(){var t=[];this.multiple?t=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&t.push(this.$refs.listTable.getRadioRecord()),Array.from(t,(function(t,e){t.assetName=t.name})),this.$emit("ok",t),this.visible=!1},showModal:function(){this.visible=!0,this.lineId_A=this.lineId,this.trainNo_A=this.trainNo,this.findList()},close:function(){this.visible=!1},findList:function(){var t=this;this.queryParam.trainNo=this.trainNo_A,this.loading=!0,Object(n["Wb"])(this.queryParam).then((function(e){e.success&&(t.loading=!1,t.tableData=e.result)}))}}},l=o,s=(a("4677"),a("2877")),c=Object(s["a"])(l,r,i,!1,null,"3967f3d4",null);e["default"]=c.exports},"412f":function(t,e,a){},4677:function(t,e,a){"use strict";a("412f")},"48fc":function(t,e,a){"use strict";function r(t){t=t||32;for(var e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",a=e.length,r="",i=0;i<t;i++)r+=e.charAt(Math.floor(Math.random()*a));return r}a.d(e,"a",(function(){return r}))},"500a":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{width:"90%",title:"选择规程",centered:"",visible:t.visible,bodyStyle:{height:"70vh"},confirmLoading:t.confirmLoading,cancelText:"关闭",destroyOnClose:!0},on:{ok:t.handleOk,cancel:t.handleCancel}},[e("a-row",[e("a-col",{staticStyle:{"border-right":"1px dotted #D3E1F1",height:"calc(70vh - 20px)","margin-right":"8px",padding:"0px"},attrs:{md:4,sm:24}},[e("a-menu",{attrs:{mode:"inline","default-selected-keys":t.defaultKey},on:{click:t.handleMenuClick}},t._l(t.treeData,(function(a){return e("a-menu-item",{key:a.id},[e("a-icon",{attrs:{type:"container"}}),e("span",[t._v(t._s(a.name))])],1)})),1)],1),e("a-col",{attrs:{md:19,sm:24}},[this.planId?e("div",{staticClass:"table-page-search-wrapper"},[e("a-form",{attrs:{layout:"inline","label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.findList.apply(null,arguments)}}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:4,sm:24}},[e("a-form-item",{attrs:{label:"是否已关联"}},[e("j-dict-select-tag",{attrs:{dictCode:"bu_state","allow-clear":""},model:{value:t.tpPlanRelated,callback:function(e){t.tpPlanRelated=e},expression:"tpPlanRelated"}})],1)],1),e("a-col",{attrs:{md:3,sm:8}},[e("a-form-item",[e("a-button",{on:{click:t.findList}},[t._v("查询")])],1)],1)],1)],1)],1):t._e(),e("div",{staticStyle:{height:"calc(70vh - 20px)"}},[e("vxe-table",{ref:"listTable",staticStyle:{height:"calc(70vh - 20px)"},attrs:{border:"","row-id":"id","max-height":"100%",align:t.allAlign,data:t.tableData,"show-overflow":"tooltip","edit-config":{trigger:"manual",mode:"row"},"radio-config":t.multiple?{}:{trigger:"row",checkMethod:t.checkRadioMethod},"checkbox-config":t.multiple?{checkStrictly:t.checkStrictly,trigger:"row",highlight:!0}:{},"tree-config":{lazy:!0,children:"children",hasChild:"hasChildren",loadMethod:t.loadChildrenMethod}}},[t.multiple?e("vxe-table-column",{attrs:{type:"checkbox",width:"40",fixed:"left"}}):e("vxe-table-column",{attrs:{type:"radio",width:"40"}}),e("vxe-table-column",{attrs:{field:"title",title:"名称","tree-node":"",align:"left"}}),e("vxe-table-column",{attrs:{field:"no",title:"序号",width:"80"}}),e("vxe-table-column",{attrs:{field:"type_dictText",title:"类型",width:"100"}}),e("vxe-table-column",{attrs:{field:"method_dictText",title:"维保手段",width:"120"}}),e("vxe-table-column",{attrs:{field:"qualityLevel",title:"质保等级",width:"80"}}),e("vxe-table-column",{attrs:{field:"safeNotice",title:"安全提示",width:"160"}}),e("vxe-table-column",{attrs:{field:"remark",title:"备注",width:"120"}}),this.planId?e("vxe-table-column",{attrs:{field:"tpPlanRelatedInfo",title:"模板已关联",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){var r=a.row;return[e("div",{style:{backgroundColor:t.statusColor[r.tpPlanRelated+""],borderRadius:"4px"}},[t._v(" "+t._s(r.tpPlanRelatedInfo)+" ")])]}}],null,!1,2972306538)}):t._e()],1)],1)])],1)],1)},i=[],n=a("8fad"),o={name:"RegulationList",props:{multiple:{type:Boolean,default:!1},checkStrictly:{type:Boolean,default:!0},reguId:{type:String,default:""},planId:{type:String,default:""},trainTypeId:{type:String,default:""},onlyProject:{type:Boolean,default:!1}},data:function(){return{visible:!1,confirmLoading:!1,statusColor:{0:"#dedede",1:"#bad795"},treeData:[],curReguId:"",tableData:[],allAlign:"center",defaultKey:[],tpPlanRelated:"",formItemLayout:{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}}}},methods:{showModal:function(){this.visible=!0,this.getTreeList()},checkRadioMethod:function(t){var e=t.row;return!this.onlyProject||1===e.type},getTreeList:function(){var t=this;this.reguId?Object(n["Fb"])(this.reguId).then((function(e){e.success?(t.curReguId=t.reguId,t.treeData=[e.result],t.getReguDetailList(t.curReguId)):t.$message.error("获取规程信息失败")})).catch((function(e){t.$message.error("获取规程信息异常")})):Object(n["Ib"])({trainTypeId:this.trainTypeId}).then((function(e){e.success?(t.defaultKey[0]=e.result[0].id,t.curReguId=e.result[0].id,t.treeData=e.result,t.getReguDetailList(t.curReguId)):t.$message.error("获取规程信息失败")})).catch((function(e){t.$message.error("获取规程信息异常")}))},findList:function(){var t=this,e={reguId:this.reguId,tpPlanId:this.planId,tpPlanRelated:this.tpPlanRelated};Object(n["Hb"])(e).then((function(e){t.tableData=e.result}))},getReguDetailList:function(t){var e=this,a={reguId:t,tpPlanId:this.planId,tpPlanRelated:this.tpPlanRelated};Object(n["Hb"])(a).then((function(t){e.tableData=t.result}))},loadChildrenMethod:function(t){var e=this,a={reguId:this.reguId,parentId:t.row.id,tpPlanId:this.planId,tpPlanRelated:this.tpPlanRelated};return new Promise((function(t){Object(n["Hb"])(a).then((function(a){a.success?t(a.result):e.$message.error("".concat(a.msg))}))}))},onSelect:function(t,e){var a=e.node.dataRef;t.length>0&&(this.curReguId=a.id,this.getReguDetailList(a.id))},handleMenuClick:function(t){this.getReguDetailList(t.key)},handleOk:function(){var t=[];this.multiple?t=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&t.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",t),this.close()},handleCancel:function(){this.close()},close:function(){this.visible=!1}}},l=o,s=(a("5125"),a("2877")),c=Object(s["a"])(l,r,i,!1,null,"210f6b5e",null);e["default"]=c.exports},5125:function(t,e,a){"use strict";a("d059")},5633:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("span",[e("a-select",{key:t.key,attrs:{"allow-clear":"",value:t.getValueSting,disabled:t.disabled,placeholder:"线路"},on:{change:t.handleChange,select:t.onSelect}},[e("a-select-option",{attrs:{value:void 0}},[t._v("请选择")]),t._l(t.optionData,(function(a,r){return e("a-select-option",{key:r,attrs:{value:a.lineId}},[e("span",{staticStyle:{display:"inline-block",width:"100%"},attrs:{title:a.lineName}},[t._v(" "+t._s(a.lineName)+" ")])])}))],2)],1)},i=[],n=a("8fad"),o={name:"LineSelectList",props:{value:[String],triggerChange:Boolean,disabled:Boolean,defaultFirst:Boolean},data:function(){return{optionData:[],selectValue:"",key:0}},created:function(){this.findList()},computed:{getValueSting:function(){return null!=this.value?this.value.toString():void 0}},methods:{findList:function(){var t=this;Object(n["wb"])().then((function(e){e.success&&(t.optionData=e.result,t.defaultFirst&&t.optionData&&t.optionData.length>0&&setTimeout((function(){t.$emit("change",t.optionData[0].lineId),t.$emit("input",t.optionData[0].lineId)}),500))}))},handleChange:function(t,e){var a="";if(e&&e.componentOptions.children[0].data&&(a=e.componentOptions.children[0].data.attrs.title),this.$emit("change",t),this.$emit("input",t),this.$emit("changeName",a),this.triggerChange)if(t){var r=this.optionData[e.key];this.$emit("change",t,r)}else this.$emit("change",t,null)},onSelect:function(t,e){if(t){var a=this.optionData[e.data.key];this.$emit("select",t,a)}else this.$emit("select","",null)}}},l=o,s=a("2877"),c=Object(s["a"])(l,r,i,!1,null,"77265147",null);e["default"]=c.exports},7237:function(t,e,a){},"8d8e":function(t,e,a){"use strict";a("b93f")},9589:function(t,e,a){"use strict";a("7237")},ab812:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("div",[t.readOnly?t._e():e("a-form",{attrs:{layout:"inline"}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:6,sm:8}},[e("a-form-item",[e("a-space",[e("a-button",{staticClass:"primary-color",attrs:{type:"dashed"},on:{click:function(e){return t.$refs.trainAssetSelectModal.showModal()}}},[t._v("添加")]),e("a-button",{attrs:{type:"dashed"},on:{click:t.handleDel}},[t._v("删除")])],1)],1)],1)],1)],1),e("div",{staticStyle:{height:"208px"}},[e("vxe-table",{ref:"listTable",attrs:{border:"",align:t.allAlign,height:"auto","show-overflow":"tooltip",data:t.targetDeviceList,"checkbox-config":{trigger:"row",highlight:!0}}},[e("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),e("vxe-table-column",{attrs:{type:"seq",width:"50"}}),e("vxe-table-column",{attrs:{field:"trainAssetName",title:"名称","tree-node":"",align:"left","header-align":"center"}}),e("vxe-table-column",{attrs:{align:"left","header-align":"center",field:"trainAssetNo",title:"编码",width:"12%"}}),e("vxe-table-column",{attrs:{field:"trainAssetStructType_dictText",title:"类型",width:"10%"}})],1)],1),e("CarDeviceSelectNew",{ref:"trainAssetSelectModal",attrs:{trainNo:t.trainNo,lineId:t.lineId,multiple:!0},on:{ok:t.addAsset}})],1)},i=[],n=a("310d");function o(t){return u(t)||c(t)||s(t)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t,e){if(t){if("string"==typeof t)return d(t,e);var a={}.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?d(t,e):void 0}}function c(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function u(t){if(Array.isArray(t))return d(t)}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=Array(e);a<e;a++)r[a]=t[a];return r}var f={name:"TargetDeviceList",components:{CarDeviceSelectNew:n["default"]},props:{orderTaskId:{default:""},equipments:{type:Array,default:function(){return[]}},readOnly:{type:Boolean,default:!1},lineId:{type:[String,Number],default:""},trainNo:{type:[String,Number],default:""}},data:function(){return{allAlign:"center",targetDeviceList:[]}},watch:{equipments:{handler:function(t){this.targetDeviceList=t},deep:!0,immediate:!0}},methods:{handleDel:function(){var t=this,e=this.$refs.listTable.getCheckboxRecords();e.length<1?this.$message.warn("请选择要删除的数据"):this.$confirm({content:"确认删除选中的数据？",onOk:function(){e.map((function(e){t.targetDeviceList.map((function(a,r){e.id==a.id&&t.targetDeviceList.splice(r,1)}))})),t.$emit("update:equipments",t.targetDeviceList)}})},addAsset:function(t){var e=this,a=[];t.forEach((function(t){e.targetDeviceList.filter((function(e){return e.trainAssetId==t.id})).length?e.$message.warning("".concat(t.name,"-").concat(t.code,"已存在列表中")):a.push({orderTaskId:e.orderTaskId,trainAssetName:t.name,trainAssetId:t.id,trainAssetNo:t.code,trainAssetStructType_dictText:t.maximoAssetType})})),this.targetDeviceList=[].concat(o(this.targetDeviceList),a),this.$emit("update:equipments",this.targetDeviceList)}}},m=f,h=a("2877"),p=Object(h["a"])(m,r,i,!1,null,null,null);e["default"]=p.exports},b7b4:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"i",(function(){return n})),a.d(e,"l",(function(){return o})),a.d(e,"c",(function(){return s})),a.d(e,"t",(function(){return c})),a.d(e,"v",(function(){return l})),a.d(e,"n",(function(){return d})),a.d(e,"C",(function(){return f})),a.d(e,"D",(function(){return m})),a.d(e,"p",(function(){return h})),a.d(e,"m",(function(){return b})),a.d(e,"j",(function(){return g})),a.d(e,"w",(function(){return y})),a.d(e,"a",(function(){return k})),a.d(e,"h",(function(){return v})),a.d(e,"k",(function(){return x})),a.d(e,"q",(function(){return j})),a.d(e,"z",(function(){return T})),a.d(e,"r",(function(){return C})),a.d(e,"e",(function(){return P})),a.d(e,"s",(function(){return I})),a.d(e,"B",(function(){return _})),a.d(e,"x",(function(){return O})),a.d(e,"y",(function(){return S})),a.d(e,"d",(function(){return w})),a.d(e,"f",(function(){return q})),a.d(e,"o",(function(){return p})),a.d(e,"A",(function(){return N})),a.d(e,"E",(function(){return D})),a.d(e,"g",(function(){return R})),a.d(e,"u",(function(){return u}));var r=a("0fea"),i=function(t){return Object(r["j"])("/quality/rectify/add",t)},n=function(t){return Object(r["j"])("/quality/rectify/delete",t)},o=function(t){return Object(r["j"])("/quality/rectify/edit",t)},l=function(t){return Object(r["d"])("/quality/rectify/page",t)},s=function(t){return Object(r["j"])("/quality/rectify/close",t)},c=function(t){return Object(r["d"])("/quality/rectify/get",t)},u=function(t){return Object(r["d"])("/quality/rectify/getCode",t)},d=function(t){return Object(r["d"])("/quality/measurealert/page",t)},f=function(t){return Object(r["d"])("/quality/measurethreshold/form/page-data-form",t)},m=function(t){return Object(r["j"])("/quality/measurethreshold/threshold/save",t)},h=function(t){return Object(r["d"])("/quality/measurethreshold/threshold/list/".concat(t))},p=function(t){return Object(r["d"])("/serialPlan/plan/forms/online-form/alert-records",{dataRecordId:t})},b=function(t){return Object(r["j"])("/quality/measurethreshold/threshold/edit",t)},g=function(t){return Object(r["j"])("/quality/measurethreshold/threshold/delete",t)},y=function(t){return Object(r["d"])("/quality/measurethreshold/threshold/get",t)},k=function(t){return Object(r["j"])("/quality/leaverecord/add",t)},v=function(t){return Object(r["j"])("/quality/leaverecord/delete",t)},w=function(t){return Object(r["j"])("/quality/leaverecord/close",t)},x=function(t){return Object(r["j"])("/quality/leaverecord/edit",t)},j=function(t){return Object(r["d"])("/quality/leaverecord/page",t)},T=function(t,e){return Object(r["c"])("/quality/leaverecord/workLeaveRecordExport",t,e)},C=function(t){return Object(r["d"])("/quality/record-confirm/list",t)},P=function(t){return Object(r["j"])("/quality/record-confirm/confirm",t)},I=function(t){return Object(r["d"])("/quality/record-confirm/work-record/get",t)},O=function(t){return Object(r["d"])("/serialPlan/plan/forms/check-record/get",t)},S=function(t){return Object(r["d"])("/workcheck/get",t)},q=function(t){return Object(r["j"])("/quality/record-confirm/confirm",t)},_=function(t){return Object(r["d"])("/quality/record-confirm/page",t)},N=function(t){return Object(r["d"])("/quality/record-confirm/page/check-record",t)},D=function(t){return Object(r["j"])("/serialPlan/plan/forms/judge/save",t)},R=function(t){return Object(r["j"])("/serialPlan/plan/forms/judge/delete",t)}},b93f:function(t,e,a){},b9c3:function(t,e,a){"use strict";a.d(e,"lb",(function(){return o})),a.d(e,"f",(function(){return l})),a.d(e,"i",(function(){return s})),a.d(e,"v",(function(){return c})),a.d(e,"b",(function(){return f})),a.d(e,"l",(function(){return m})),a.d(e,"p",(function(){return h})),a.d(e,"G",(function(){return p})),a.d(e,"c",(function(){return d})),a.d(e,"B",(function(){return g})),a.d(e,"k",(function(){return k})),a.d(e,"A",(function(){return y})),a.d(e,"x",(function(){return v})),a.d(e,"g",(function(){return w})),a.d(e,"E",(function(){return x})),a.d(e,"C",(function(){return j})),a.d(e,"M",(function(){return C})),a.d(e,"kb",(function(){return P})),a.d(e,"O",(function(){return O})),a.d(e,"N",(function(){return S})),a.d(e,"jb",(function(){return q})),a.d(e,"t",(function(){return N})),a.d(e,"d",(function(){return D})),a.d(e,"W",(function(){return R})),a.d(e,"X",(function(){return $})),a.d(e,"e",(function(){return A})),a.d(e,"o",(function(){return L})),a.d(e,"V",(function(){return F})),a.d(e,"R",(function(){return Y})),a.d(e,"Q",(function(){return z})),a.d(e,"K",(function(){return J})),a.d(e,"L",(function(){return Q})),a.d(e,"fb",(function(){return gt})),a.d(e,"bb",(function(){return H})),a.d(e,"Y",(function(){return K})),a.d(e,"J",(function(){return U})),a.d(e,"hb",(function(){return nt})),a.d(e,"U",(function(){return ot})),a.d(e,"eb",(function(){return Z})),a.d(e,"cb",(function(){return X})),a.d(e,"a",(function(){return tt})),a.d(e,"j",(function(){return ut})),a.d(e,"nb",(function(){return dt})),a.d(e,"gb",(function(){return ft})),a.d(e,"m",(function(){return mt})),a.d(e,"H",(function(){return yt})),a.d(e,"T",(function(){return V})),a.d(e,"S",(function(){return M})),a.d(e,"mb",(function(){return G})),a.d(e,"z",(function(){return ht})),a.d(e,"db",(function(){return pt})),a.d(e,"y",(function(){return bt})),a.d(e,"u",(function(){return u})),a.d(e,"F",(function(){return b})),a.d(e,"ob",(function(){return _})),a.d(e,"q",(function(){return I})),a.d(e,"D",(function(){return T})),a.d(e,"ib",(function(){return et})),a.d(e,"n",(function(){return at})),a.d(e,"I",(function(){return W})),a.d(e,"P",(function(){return B})),a.d(e,"s",(function(){return lt})),a.d(e,"Z",(function(){return st})),a.d(e,"ab",(function(){return ct})),a.d(e,"h",(function(){return rt})),a.d(e,"w",(function(){return it})),a.d(e,"r",(function(){return E}));var r=a("0fea"),i=a("4328"),n=a.n(i),o=function(t){return Object(r["j"])("/group/fault/info/submit",t)},l=function(t){return Object(r["j"])("/group/fault/info/cancel",t)},s=function(t){return Object(r["j"])("/group/fault/info/delete",t)},c=function(t){return Object(r["d"])("/group/fault/info/page",t)},u=function(t){return Object(r["d"])("/group/fault/info/get",t)},d=function(t){return Object(r["j"])("/group/safeassume/read/add",t)},f=function(t){return Object(r["j"])("/group/safeassume/add",t)},m=function(t){return Object(r["j"])("/group/safeassume/delete",t)},h=function(t){return Object(r["j"])("/group/safeassume/edit",t)},p=function(t){return Object(r["d"])("/group/safeassume/page",t)},b=function(t){return Object(r["d"])("/group/safeassume/get",t)},g=function(t){return Object(r["d"])("/group/turnoverchange/page",t)},y=function(t){return Object(r["d"])("/material/spare-part/get",t)},k=function(t){return Object(r["j"])("/group/turnoverchange/delete",t)},v=function(t){return Object(r["d"])("/group/measurealert/page",t)},w=function(t){return Object(r["j"])("/group/measurealert/close",t)},x=function(t){return Object(r["d"])("/group/spare-part/page",t)},j=function(t){return Object(r["d"])("/group/spare-part/get",t)},T=function(t){return Object(r["d"])("/produce/train/history/asset/use/page",t)},C=function(t){return Object(r["d"])("/group/toolequipment/page",t)},P=function(t){return Object(r["j"])("/group/toolequipment/setStatus",t)},I=function(t){return Object(r["d"])("/group/toolequipment/usage",t)},O=function(t){return Object(r["d"])("/group/tool/page",t)},S=function(t){return Object(r["d"])("/group/tool/get",t)},q=function(t){return Object(r["j"])("/group/tool/setDutyUser",t)},_=function(t){return Object(r["d"])("/group/tool/usage",t)},N=function(t){return Object(r["d"])("/group/information/basic",t)},D=function(t){return Object(r["j"])("/group/information/tools/add",t)},R=function(t){return Object(r["d"])("/group/information/workstation/page-related",t)},$=function(t){return Object(r["d"])("/group/information/workstation/page-unrelated",t)},A=function(t){return Object(r["j"])("/group/information/workstation/add",t)},L=function(t){return Object(r["j"])("/group/information/workstation/delete",t)},M=function(t){return Object(r["d"])("/workGroup/workOrder/relevanceInfo/".concat(t))},G=function(t){return Object(r["j"])("/workGroup/workOrder/submit-to-dispatcher",n.a.stringify(t))},F=function(t){return Object(r["d"])("/workGroup/workRecord/list",t)},z=function(t){return Object(r["d"])("/serialPlan/plan/forms/online-form/get",t)},Y=function(t){return Object(r["d"])("/serialPlan/plan/forms/work-record/get",t)},B=function(t){return Object(r["d"])("/serialPlan/plan/forms/check-record/get",t)},V=function(t){return Object(r["d"])("/workGroup/workOrder/page",t)},E=function(t){return Object(r["d"])("/workGroup/workOrder/apply/page",t)},J=function(t){return Object(r["d"])("/workGroup/workRecord/recordForm",t)},Q=function(t){return Object(r["d"])("/workGroup/workRecord/relevanceInfo/".concat(t))},W=function(t){return Object(r["d"])("/workGroup/workRecord/relevanceInfo/bookSteps/".concat(t))},H=function(t){return Object(r["j"])("/workGroup/workRecord/save/form-result",t)},K=function(t){return Object(r["j"])("/workGroup/workRecord/check",t)},U=function(t){return Object(r["j"])("/workGroup/workRecord/getTaskQRCode",t)},Z=function(t){return Object(r["j"])("/workGroup/workRecord/work-record/save-manufNo",n.a.stringify(t))},X=function(t){return Object(r["j"])("/workGroup/workRecord/save/material",t)},tt=function(t){return Object(r["j"])("/workGroup/workRecord/save/actMaterial",t)},et=function(t){return Object(r["j"])("/workGroup/workRecord/save/work-time",t)},at=function(t){return Object(r["j"])("/workGroup/workRecord/arrange/delete",t)},rt=function(t){return Object(r["j"])("/workGroup/workOrder/material/commit-temp-apply",t)},it=function(t){return Object(r["d"])("/workGroup/workOrder/material/apply/list",t)},nt=function(t){return Object(r["j"])("/workGroup/workRecord/check/saveExcelData",t)},ot=function(t){return Object(r["d"])("/workGroup/workRecord/get/excelData/".concat(t))},lt=function(t){return Object(r["d"])("/serialPlan/plan/forms/check-record/item/list",t)},st=function(t){return Object(r["j"])("/workGroup/workRecord/check-record/set-check",t)},ct=function(t){return Object(r["j"])("/workGroup/workRecord/check-record/set-time",t)},ut=function(t){return Object(r["j"])("/workGroup/workRecord/delete/material",n.a.stringify(t))},dt=function(t){return Object(r["j"])("/workGroup/workRecord/submit-task",t)},ft=function(t){return Object(r["j"])("/workGroup/workRecord/save/tool",t)},mt=function(t){return Object(r["j"])("/workGroup/workRecord/delete/tool",n.a.stringify(t))},ht=function(t){return Object(r["d"])("/workGroup/workRecord/outsourceOutin",t)},pt=function(t){return Object(r["j"])("/workGroup/workRecord/save/outsourceOutin",t)},bt=function(t){return Object(r["d"])("/workGroup/workRecord/outin/not-returns",t)},gt=function(t){return Object(r["j"])("/group/safeassume/read/add",n.a.stringify(t))},yt=function(t){return Object(r["d"])("/serialPlan/plan/page",t)}},d059:function(t,e,a){},d823:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{width:"90%",title:"列计划任务选择",centered:"",visible:t.visible,bodyStyle:{height:"80vh"},cancelText:"关闭",destroyOnClose:!0},on:{ok:t.handleOk,cancel:t.handleCancel}},[e("a-row",[e("a-col",{staticStyle:{"border-right":"1px dotted #D3E1F1",height:"calc(80vh - 20px)","margin-right":"8px",padding:"0px"},attrs:{md:4,sm:24}},[e("div",{staticStyle:{height:"calc(80vh - 40px)",overflow:"auto"}},[e("a-menu",{attrs:{mode:"inline","default-selected-keys":t.defaultKey},on:{click:t.handleMenuClick}},t._l(t.planList,(function(a){return e("a-menu-item",{key:a.id},[e("a-icon",{attrs:{type:"pie-chart"}}),e("span",[t._v(t._s(a.planName))])],1)})),1)],1)]),e("a-col",{attrs:{md:19,sm:24}},[e("a-spin",{attrs:{spinning:t.spinning}},[e("div",{staticStyle:{width:"100%",height:"calc(80vh - 20px)","padding-top":"8px"},attrs:{id:"viewProject"}})])],1)],1)],1)},i=[],n=a("b9c3"),o=a("b47d"),l={name:"TrainPlanTaskList",data:function(){return{spinning:!1,defaultKey:[],planList:[],curPlan:null,visible:!1,projectData:{},queryParam:{searchText:"",lineId:"",status:"2",pageNo:1,pageSize:1e4}}},methods:{showModal:function(t){t&&(this.queryParam.lineId=t),this.visible=!0,this.loadPlanList()},loadPlanList:function(){var t=this;Object(n["H"])(this.queryParam).then((function(e){e.success?(t.planList=e.result.records,t.planList&&t.planList.length>0&&(t.defaultKey.push(t.planList[0].id),t.initGantt(),t.loadPlanTask(t.planList[0].id))):t.$message.error("加载列计划失败")})).catch((function(e){t.$message.error("加载列计划异常")}))},handleMenuClick:function(t){this.loadPlanTask(t.key)},loadPlanTask:function(t){var e=this;this.spinning=!0,Object(o["rb"])(t).then((function(t){t.success?(e.projectData=t.result,e.projectData.StartDate=new Date(e.projectData.StartDate),e.projectData.FinishDate=new Date(e.projectData.FinishDate),e.projectData.Tasks=mini.arrayToTree(e.projectData.Tasks,"children","UID","ParentId"),e.project.loadData(e.projectData)):e.$message.error("加载计划明细失败",t.message)})).catch((function(t){e.$message.error("加载计划明细异常",t)})).finally((function(){e.spinning=!1}))},handleOk:function(){var t=this.project.getSelected();this.$emit("ok",t),this.close()},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1},initGantt:function(){mini.parse(),this.project=new PlusProject,this.project.setStyle("width:100%;height:100%"),this.project.setBorderStyle("border:1px dotted #cdcdcd");var t=[new PlusProject.IDColumn,new PlusProject.NameColumn,new PlusProject.DurationColumn,new PlusProject.StartColumn,new PlusProject.FinishColumn,new PlusProject.WorkColumn];t.push({name:"dayIndex",header:"第几天？<br/>String",field:"dayIndex",width:150}),this.project.setColumns(t),this.project.render(document.getElementById("viewProject")),this.project.enableManualSchedule=!0,this.project.setReadOnly(!0),this.project.setShowDirty(!1),this.project.allowOrderProject=!1,this.project.setTimeLines([{date:new Date,text:"当前时间",position:"bottom",style:"width:2px;background:red;"}]),this.project.setTopTimeScale("month"),this.project.setBottomTimeScale("day"),this.project.setRowHeight(28),this.project.setGanttViewExpanded(!1)}}},s=l,c=a("2877"),u=Object(c["a"])(s,r,i,!1,null,"3bab6384",null);e["default"]=u.exports},db0c:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{width:"90%",title:"故障记录选择",centered:"",visible:t.visible,bodyStyle:{height:"80vh"},cancelText:"关闭",destroyOnClose:!0},on:{ok:t.handleOk,cancel:t.handleCancel}},[e("div",{staticClass:"table-page-search-wrapper"},[e("a-form",{attrs:{layout:"inline",form:t.form}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:3,sm:24}},[e("a-form-item",{attrs:{label:"来源"}},[e("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"fault_from_type"},model:{value:t.queryParam.fromType,callback:function(e){t.$set(t.queryParam,"fromType",e)},expression:"queryParam.fromType"}})],1)],1),e("a-col",{attrs:{md:3,sm:24}},[e("a-form-item",{attrs:{label:"线路"}},[e("line-select-list",{model:{value:t.lineId,callback:function(e){t.lineId=e},expression:"lineId"}})],1)],1),e("a-col",{attrs:{md:3,sm:24}},[e("a-form-item",{attrs:{label:"车辆"}},[e("j-dict-select-seach-tag",{attrs:{dictCode:t.dictCodeStr},model:{value:t.queryParam.trainNo,callback:function(e){t.$set(t.queryParam,"trainNo",e)},expression:"queryParam.trainNo"}})],1)],1),e("a-col",{attrs:{md:3,sm:12}},[e("a-form-item",{attrs:{label:"时间"}},[e("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_date_type"},model:{value:t.queryParam.dateType,callback:function(e){t.$set(t.queryParam,"dateType",e)},expression:"queryParam.dateType"}})],1)],1),"1"===t.queryParam.dateType||1===t.queryParam.dateType||"2"===t.queryParam.dateType?e("a-col",{attrs:{md:3,sm:12}},[e("a-form-item",[e("a-date-picker",{staticStyle:{width:"100%"},attrs:{mode:"year",placeholder:"请选择年份",format:"YYYY",open:t.yearPickShow},on:{panelChange:t.handlePanelChange,openChange:t.handleOpenChange},model:{value:t.year,callback:function(e){t.year=e},expression:"year"}})],1)],1):t._e(),"2"===t.queryParam.dateType?e("a-col",{attrs:{md:3,sm:12}},[e("a-form-item",[e("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_quarter_type"},model:{value:t.queryParam.quarter,callback:function(e){t.$set(t.queryParam,"quarter",e)},expression:"queryParam.quarter"}})],1)],1):t._e(),"3"===t.queryParam.dateType?e("a-col",{attrs:{md:3,sm:12}},[e("a-form-item",[e("a-month-picker",{attrs:{placeholder:"选择月份"},model:{value:t.queryParam.month,callback:function(e){t.$set(t.queryParam,"month",e)},expression:"queryParam.month"}})],1)],1):t._e(),"4"===t.queryParam.dateType?e("a-col",{attrs:{md:4,sm:12}},[e("a-form-item",[e("a-range-picker",{attrs:{defaultPickerValue:t.defaultDateRange},model:{value:t.rangeDate,callback:function(e){t.rangeDate=e},expression:"rangeDate"}})],1)],1):t._e(),e("a-col",{attrs:{md:7,sm:8}},[e("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[e("a-space",[e("a-button",{on:{click:t.findList}},[t._v("查询")]),e("a-button",[e("a",{style:{fontSize:"12px"},on:{click:t.toggle}},[t._v(" 更多条件 "),e("a-icon",{attrs:{type:t.expand?"up":"down"}})],1)])],1)],1)])],1),e("a-row",{style:{display:t.expand?"block":"none"},attrs:{gutter:24}},[e("a-col",{attrs:{md:5,sm:24}},[e("a-form-item",{attrs:{label:"工班"}},[e("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:t.dictGroupStr},model:{value:t.reportGroupId,callback:function(e){t.reportGroupId=e},expression:"reportGroupId"}})],1)],1),e("a-col",{attrs:{md:5,sm:24}},[e("a-form-item",{attrs:{label:"系统"}},[e("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_train_asset_type,name,id,struct_type=1 and parent_id is null"},model:{value:t.queryParam.sysId,callback:function(e){t.$set(t.queryParam,"sysId",e)},expression:"queryParam.sysId"}})],1)],1),e("a-col",{attrs:{md:5,sm:24}},[e("a-form-item",{attrs:{label:"部件"}},[e("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_tools_status"},model:{value:t.queryParam.faultAssetId,callback:function(e){t.$set(t.queryParam,"faultAssetId",e)},expression:"queryParam.faultAssetId"}})],1)],1),e("a-col",{attrs:{md:5,sm:24}},[e("a-form-item",{attrs:{label:"工位"}},[e("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:t.dictCodeStrWork},model:{value:t.queryParam.workstationId,callback:function(e){t.$set(t.queryParam,"workstationId",e)},expression:"queryParam.workstationId"}})],1)],1),e("a-col",{attrs:{md:5,sm:24}},[e("a-form-item",{attrs:{label:"位置"}},[e("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_train_place,place_name,id"},model:{value:t.queryParam.placeId,callback:function(e){t.$set(t.queryParam,"placeId",e)},expression:"queryParam.placeId"}})],1)],1),e("a-col",{attrs:{md:5,sm:24}},[e("a-form-item",{attrs:{label:"等级"}},[e("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_fault_level"},model:{value:t.queryParam.level,callback:function(e){t.$set(t.queryParam,"level",e)},expression:"queryParam.level"}})],1)],1),e("a-col",{attrs:{md:5,sm:24}},[e("a-form-item",{attrs:{label:"完成"}},[e("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_fault_status"},model:{value:t.queryParam.status,callback:function(e){t.$set(t.queryParam,"status",e)},expression:"queryParam.status"}})],1)],1),e("a-col",{attrs:{md:5,sm:24}},[e("a-form-item",{attrs:{label:"阶段"}},[e("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_fault_phase"},model:{value:t.queryParam.phase,callback:function(e){t.$set(t.queryParam,"phase",e)},expression:"queryParam.phase"}})],1)],1),e("a-col",{attrs:{md:9,sm:24}},[e("a-col",{attrs:{md:8,sm:24}},[e("a-form-item",{attrs:{label:"是否正线"}},[e("a-switch",{attrs:{dictCode:"bu_state"},on:{change:t.handleState1},model:{value:t.online,callback:function(e){t.online=e},expression:"online"}})],1)],1),e("a-col",{attrs:{md:8,sm:24}},[e("a-form-item",{attrs:{label:"是否有责"}},[e("a-switch",{attrs:{dictCode:"bu_state"},on:{change:t.handleState2},model:{value:t.hasDuty,callback:function(e){t.hasDuty=e},expression:"hasDuty"}})],1)],1),e("a-col",{attrs:{md:8,sm:24}},[e("a-form-item",{attrs:{label:"是否委外"}},[e("a-switch",{attrs:{dictCode:"bu_state"},on:{change:t.handleState3},model:{value:t.outsource,callback:function(e){t.outsource=e},expression:"outsource"}})],1)],1)],1)],1)],1)],1),e("div",{staticStyle:{height:"calc(80vh - 130px)"}},[e("vxe-table",{ref:"listTable",staticStyle:{height:"calc(80vh - 130px)"},attrs:{border:"","max-height":"100%",align:t.allAlign,data:t.tableData,"show-overflow":"tooltip","radio-config":t.multiple?{}:{trigger:"row"},"checkbox-config":t.multiple?{trigger:"row",highlight:!0,range:!0}:{},"edit-config":{trigger:"click",mode:"cell",showIcon:"true"}}},[t.multiple?e("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}):e("vxe-table-column",{attrs:{type:"radio",width:"40"}}),e("vxe-table-column",{attrs:{field:"faultSn",title:"故障编号",width:"140"}}),e("vxe-table-column",{attrs:{field:"fromType_dictText",title:"来源",width:"120"}}),e("vxe-table-column",{attrs:{field:"lineName",title:"线路",width:"100"}}),e("vxe-table-column",{attrs:{field:"trainNo",title:"车号",width:"80"}}),e("vxe-table-column",{attrs:{field:"sysName",title:"故障系统",width:"180"}}),e("vxe-table-column",{attrs:{field:"faultAssetName",title:"故障部件",width:"180"}}),e("vxe-table-column",{attrs:{field:"faultDesc",title:"故障描述",align:"left"}}),e("vxe-table-column",{attrs:{field:"happenTime",title:"发现时间",width:"120"}}),e("vxe-table-column",{attrs:{field:"reportUserName",title:"提报人员",width:"100"}}),e("vxe-table-column",{attrs:{field:"reportTime",title:"提报时间",width:"120"}}),e("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",width:"100"}})],1),e("vxe-pager",{attrs:{perfect:"","current-page":t.queryParam.pageNo,"page-size":t.queryParam.pageSize,total:t.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(e){return t.$set(t.queryParam,"pageNo",e)},"update:current-page":function(e){return t.$set(t.queryParam,"pageNo",e)},"update:pageSize":function(e){return t.$set(t.queryParam,"pageSize",e)},"update:page-size":function(e){return t.$set(t.queryParam,"pageSize",e)},"page-change":t.handlePageChange}})],1)])},i=[],n=a("c1df"),o=a.n(n),l=a("b47d"),s=a("5633"),c={name:"FaultSelectList",components:{LineSelectList:s["default"]},props:{multiple:{type:Boolean,default:!1}},data:function(){return{dictGroupStr:"bu_mtr_workshop_group,group_name,id,workshop_id='"+this.$store.getters.userInfo.workshopId+"'|workshop_id",visible:!1,dictCodeStr:"bu_train_info,train_no,train_no,status=1",dictCodeStrWork:"bu_mtr_workstation,name,id",year:null,queryParam:{fromType:1,trainNo:"",lineId:"",faultAssetId:"",reportGroupId:"",placeId:"",online:0,hasDuty:0,outsource:0,phase:"",status:"",level:"",sysId:"",quarter:"",year:"",month:"",endDate:"",startDate:"",dateType:"",workstationId:"",pageNo:1,pageSize:10},online:!1,hasDuty:!1,outsource:!1,totalResult:0,allAlign:"center",tableData:[],expand:!1,yearPick:null,yearPickShow:!1,form:this.$form.createForm(this),lineId:"",reportGroupId:"",rangeDate:[]}},watch:{lineId:function(t,e){this.dictCodeStr=t?"bu_train_info,train_no,train_no,line_id="+t:"bu_train_info,train_no,train_no"},reportGroupId:function(t,e){this.dictCodeStrWork=t?"bu_mtr_workstation,name,id,id in (select workstation_id from bu_group_workstation where group_id='".concat(t,"')"):"bu_mtr_workstation,name,id"}},methods:{showModal:function(t,e,a){t&&(this.queryParam.lineId=t),e&&(this.queryParam.trainNo=e),a&&(this.queryParam.reportGroupId=a),this.visible=!0,this.findList()},handleOk:function(){var t=[];this.multiple?t=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&t.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",t),this.close()},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1},findList:function(){var t=this;this.loading=!0,this.rangeDate.length>0&&"4"===this.queryParam.dateType&&(this.queryParam.startDate=o()(this.rangeDate[0]).format("YYYY-MM-DD"),this.queryParam.endDate=o()(this.rangeDate[1]).format("YYYY-MM-DD")),this.queryParam.month&&"3"===this.queryParam.dateType&&(this.queryParam.year=o()(this.queryParam.month).year(),this.queryParam.month=o()(this.queryParam.month).month()+1),this.queryParam.lineId=this.lineId,this.queryParam.reportGroupId=this.reportGroupId,this.queryParam.status=0,Object(l["Q"])(this.queryParam).then((function(e){t.totalResult=e.result.total,t.loading=!1,t.tableData=e.result.records}))},handleOpenChange:function(t){this.yearPickShow=t},handlePanelChange:function(t){this.year=t,this.queryParam.year=o()(t).format("YYYY"),this.yearPickShow=!1},handlePageChange:function(t){var e=t.currentPage,a=t.pageSize;this.queryParam.pageNo=e,this.queryParam.pageSize=a,this.findList()},handleState1:function(t){this.queryParam.online=t?1:0},handleState2:function(t){this.queryParam.hasDuty=t?1:0},handleState3:function(t){this.queryParam.outsource=t?1:0},toggle:function(){this.expand=!this.expand}}},u=c,d=a("2877"),f=Object(d["a"])(u,r,i,!1,null,"1f8ff92c",null);e["default"]=f.exports},fb5e:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{width:"90%",title:"整改记录选择",centered:"",visible:t.visible,bodyStyle:{height:"80vh"},cancelText:"关闭",destroyOnClose:!0},on:{ok:t.handleOk,cancel:t.handleCancel}},[e("div",{staticClass:"table-page-search-wrapper"},[e("a-form",{attrs:{layout:"inline"}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:4,sm:24}},[e("a-form-item",{attrs:{label:"整改"}},[e("a-input",{attrs:{placeholder:"请输入名称或编码"},model:{value:t.queryParam.searchText,callback:function(e){t.$set(t.queryParam,"searchText",e)},expression:"queryParam.searchText"}})],1)],1),e("a-col",{attrs:{md:4,sm:24}},[e("a-form-item",{attrs:{label:"状态"}},[e("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_work_rectify_status"},model:{value:t.queryParam.status,callback:function(e){t.$set(t.queryParam,"status",e)},expression:"queryParam.status"}})],1)],1),e("a-col",{attrs:{md:4,sm:24}},[e("a-form-item",{attrs:{label:"下发日期"}},[e("a-date-picker",{model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)],1),e("a-col",{attrs:{md:4,sm:24}},[e("a-form-item",{attrs:{label:"类型"}},[e("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_work_rectify_type"},model:{value:t.queryParam.rectifyType,callback:function(e){t.$set(t.queryParam,"rectifyType",e)},expression:"queryParam.rectifyType"}})],1)],1),e("a-col",{attrs:{md:6,sm:8}},[e("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[e("a-button",{on:{click:t.findList}},[t._v("查询")])],1)])],1)],1)],1),e("div",{staticStyle:{height:"calc(80vh - 130px)"}},[e("vxe-table",{ref:"listTable",staticStyle:{height:"calc(80vh - 130px)"},attrs:{border:"","max-height":"100%",align:t.allAlign,data:t.tableData,"show-overflow":"ellipsis","radio-config":t.multiple?{}:{trigger:"row"},"checkbox-config":t.multiple?{trigger:"row",highlight:!0,range:!0}:{},"edit-config":{trigger:"click",mode:"cell",showIcon:"true"}}},[t.multiple?e("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}):e("vxe-table-column",{attrs:{type:"radio",width:"40"}}),e("vxe-table-column",{attrs:{field:"rectifyNo",title:"编号","min-width":"120"}}),e("vxe-table-column",{attrs:{field:"title",title:"整改名称",align:"left","min-width":"120","header-align":"center"}}),e("vxe-table-column",{attrs:{field:"rectifyType_dictText",title:"整改类型",width:"80"}}),e("vxe-table-column",{attrs:{field:"groupName",title:"责任工班",width:"100"}}),e("vxe-table-column",{attrs:{field:"dutyUserName",title:"责任人",width:"100"}}),e("vxe-table-column",{attrs:{field:"lineName",title:"所属线路",width:"100"}}),e("vxe-table-column",{attrs:{field:"depotName",title:"所属车辆段",width:"120"}}),e("vxe-table-column",{attrs:{field:"sendDate",title:"下达日期",width:"100"}}),e("vxe-table-column",{attrs:{field:"finishDate",title:"完成时间",width:"100"}}),e("vxe-table-column",{attrs:{field:"status_dictText",title:"整改状态",width:"80"}}),e("vxe-table-column",{attrs:{title:"附件描述",width:"200",align:"left","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(a){var r=a.row;return t._l(r.annexList,(function(a){return e("a",{on:{click:function(t){t.stopPropagation()}}},[t._v(t._s(a.title))])}))}}])})],1),e("vxe-pager",{attrs:{perfect:"","current-page":t.queryParam.pageNo,"page-size":t.queryParam.pageSize,total:t.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(e){return t.$set(t.queryParam,"pageNo",e)},"update:current-page":function(e){return t.$set(t.queryParam,"pageNo",e)},"update:pageSize":function(e){return t.$set(t.queryParam,"pageSize",e)},"update:page-size":function(e){return t.$set(t.queryParam,"pageSize",e)},"page-change":t.handlePageChange}})],1)])},i=[],n=a("c1df"),o=a.n(n),l=a("b7b4"),s={name:"RectifySelect",props:{multiple:{type:Boolean,default:!1}},data:function(){return{visible:!1,date:null,queryParam:{searchText:"",rectifyType:"",status:"",sendDate:null,pageNo:1,pageSize:10},totalResult:0,allAlign:"center",tableData:[],count:""}},methods:{showModal:function(){this.visible=!0,this.findList()},findList:function(){var t=this;this.date?this.queryParam.sendDate=o()(this.date).format("YYYY-MM-DD"):this.queryParam.sendDate="",Object(l["v"])(this.queryParam).then((function(e){t.totalResult=e.result.total,t.tableData=e.result.records}))},handlePageChange:function(t){var e=t.currentPage,a=t.pageSize;this.queryParam.pageNo=e,this.queryParam.pageSize=a,this.findList()},handleOk:function(){var t=[];this.multiple?t=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&t.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",t),this.close()},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},c=s,u=a("2877"),d=Object(u["a"])(c,r,i,!1,null,"5051b3d9",null);e["default"]=d.exports}}]);