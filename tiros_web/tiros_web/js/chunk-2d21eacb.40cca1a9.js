(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21eacb"],{d724:function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e._self._c;return a("a-modal",{attrs:{title:e.title,width:600,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{md:24,sm:24}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"托盘编码"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["code",e.validatorRules.code],expression:"['code', validatorRules.code]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入托盘编码"}})],1)],1)],1),a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{md:24,sm:24}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"托盘名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["name",e.validatorRules.name],expression:"['name', validatorRules.name]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入托盘名称"}})],1)],1)],1),a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{md:24,sm:24}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"物资类型"}},[a("a-select",{ref:"mymaterSelect",attrs:{placeholder:"请选择物资类型",open:!1,showArrow:!0,mode:"multiple","option-label-prop":"label"},on:{focus:e.openmaterModal,deselect:e.onDeselect},model:{value:e.materNameList,callback:function(a){e.materNameList=a},expression:"materNameList"}},[a("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)],1)],1),a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{md:24,sm:24}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"尺寸大小"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["palletSize",e.validatorRules.palletSize],expression:"['palletSize', validatorRules.palletSize]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入尺寸大小"}})],1)],1)],1),a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{md:24,sm:24}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"材质描述"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["texture",e.validatorRules.texture],expression:"['texture', validatorRules.texture]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入材质描述"}})],1)],1)],1),a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{md:10,sm:24,offset:4}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"使用状态"}},[a("a-switch",{on:{change:e.changeUserStatus},model:{value:e.useStatus,callback:function(a){e.useStatus=a},expression:"useStatus"}})],1)],1)],1),a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{md:10,sm:24,offset:4}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"是否可用"}},[a("a-switch",{on:{change:e.changeStatus},model:{value:e.state,callback:function(a){e.state=a},expression:"state"}})],1)],1),a("a-col",{attrs:{md:10,sm:24,hidden:e.showBatch}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-checkbox",{model:{value:e.isBatchAdd,callback:function(a){e.isBatchAdd=a},expression:"isBatchAdd"}},[e._v("批量新增")])],1)],1)],1),a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{md:24,sm:24,hidden:!e.isBatchAdd}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"编码序号"}},[a("a-input-number",{attrs:{min:1,max:e.batchAddEndNum},model:{value:e.batchAddStartNum,callback:function(a){e.batchAddStartNum=a},expression:"batchAddStartNum"}}),e._v(" ~ "),a("a-input-number",{attrs:{min:e.batchAddStartNum+1},model:{value:e.batchAddEndNum,callback:function(a){e.batchAddEndNum=a},expression:"batchAddEndNum"}})],1)],1)],1),a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{md:24,sm:24,hidden:!e.isBatchAdd}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"提示"}},[a("span",{staticStyle:{color:"#f00"}},[e._v("*批量新增时，编码和名称只要输入前缀")])])],1)],1),a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{md:24,sm:24}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"备注"}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark",e.validatorRules.remark],expression:"['remark', validatorRules.remark]"}]})],1)],1)],1)],1)],1),a("material-list",{ref:"materModalForm",attrs:{multiple:!0},on:{ok:e.selectmater}})],1)},r=[],l=t("c54ca"),o=t("4ec3"),i=t("ca00"),m=t("7164"),d={name:"PalletItemModal",components:{MaterialList:m["default"]},data:function(){return{showBatch:!1,isBatchAdd:!1,state:!0,useStatus:!1,batchStateOptions:[{label:"批量新增",value:!0}],batchAddStartNum:1,batchAddEndNum:10,title:"操作",visible:!1,model:{},labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:15}},confirmLoading:!1,form:this.$form.createForm(this),validatorRules:{name:{rules:[{required:!0,message:"请输入托盘名称!"},{max:32,message:"输入长度不能超过32字符!"}]},code:{rules:[{required:!0,message:"请输入托盘编码!"},{validator:this.validateCode},{max:32,message:"输入长度不能超过32字符!"}]},texture:{rules:[{max:16,message:"输入长度不能超过16字符!"}]},palletSize:{rules:[{max:16,message:"输入长度不能超过16字符!"}]},remark:{rules:[{max:255,message:"输入长度不能超过255字符!"}]}},materNameList:[],materTypeList:[]}},created:function(){},methods:{validateCode:function(e,a,t){var s={tableName:"bu_material_pallet",fieldName:"code",fieldVal:a,dataId:this.model.id};Object(i["e"])(a)?t():Object(o["m"])(s).then((function(e){e.success?t():t(e.message)}))},add:function(){this.edit({})},edit:function(e){var a=this;this.form.resetFields(),this.isBatchAdd=!1,e.id?(this.state=!(!e["status"]||1!==e["status"]),this.useStatus=!(!e["useStatus"]||1!==e["useStatus"]),this.materTypeList=e.materialTypes?e.materialTypes.split(","):[],this.materNameList=e.materialTypeNames?e.materialTypeNames.split(","):[]):(this.state=!0,this.useStatus=!1,this.materTypeList=[],this.materNameList=[]),this.model=Object.assign({},e),this.visible=!0,this.$nextTick((function(){a.form.setFieldsValue({code:a.model.code,name:a.model.name,palletSize:a.model.palletSize,texture:a.model.texture,remark:a.model.remark})}))},changeStatus:function(e){this.state=e},changeUserStatus:function(e){this.useStatus=e},handleOk:function(){var e=this,a=this;a.form.validateFields((function(t,s){if(!t){var r,o=Object.assign(a.model,s);o["materialTypes"]=e.materTypeList.join(","),o["materialTypeNames"]=e.materNameList.join(","),o["status"]=a.state?1:0,o["useStatus"]=a.useStatus?1:0,o["isBatchAdd"]=a.isBatchAdd,a.isBatchAdd&&(o["batchAddStartNum"]=a.batchAddStartNum,o["batchAddEndNum"]=a.batchAddEndNum),r=a.model.id?Object(l["J"])(o):Object(l["f"])(o),r.then((function(e){e.success?(a.$message.success(e.message),a.$emit("ok"),a.close()):a.$message.warning(e.message)})).finally((function(){a.confirmLoading=!1}))}}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1},openmaterModal:function(){this.$refs.materModalForm.showModal(),this.$refs.mymaterSelect.blur()},selectmater:function(e){var a=this;e.forEach((function(e){a.materNameList.push(e.name),a.materTypeList.push(e.id)}))},onDeselect:function(e){this.materTypeList.splice(this.materNameList.indexOf(e),1)}}},c=d,n=t("2877"),u=Object(n["a"])(c,s,r,!1,null,null,null);a["default"]=u.exports}}]);