(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7d43f8f7","chunk-2832b4d1","chunk-340cec1b","chunk-04d5036b","chunk-4975f6d9","chunk-72e72170","chunk-3150034c","chunk-541e9f02","chunk-2d0d3e68"],{"0d29":function(e,t,a){},"2cb5":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"90%",centered:"",title:e.title,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",destroyOnClose:!0,bodyStyle:{height:"80vh"}},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchQuery.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:7,sm:24}},[t("a-form-item",{attrs:{label:"名称"}},[t("a-input",{attrs:{placeholder:"名称或编码","allow-clear":""},model:{value:e.queryParam.searchText,callback:function(t){e.$set(e.queryParam,"searchText",t)},expression:"queryParam.searchText"}})],1)],1),t("a-col",{attrs:{md:7,sm:24}},[t("a-form-item",{attrs:{label:"状态"}},[t("j-dict-select-tag",{attrs:{dictCode:"bu_enable"},model:{value:e.queryParam.status,callback:function(t){e.$set(e.queryParam,"status",t)},expression:"queryParam.status"}})],1)],1),t("a-col",{attrs:{md:3,sm:12}},[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-button",{on:{click:e.searchQuery}},[e._v("查询")])],1)])],1)],1)],1),t("div",{staticStyle:{height:"calc(80vh - 85px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(80vh - 85px)"},attrs:{border:"","max-height":"100%","row-id":"id",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","radio-config":e.multiple?{}:{trigger:"row",checkMethod:e.checkRadioMethod},"checkbox-config":e.multiple?{trigger:"row",highlight:!0,checkMethod:e.checkRadioMethod}:{},"tree-config":{lazy:!0,children:"children",hasChild:"hasChildren",loadMethod:e.loadChildrenMethod}}},[e.multiple?t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}):t("vxe-table-column",{attrs:{type:"radio",width:"40"}}),t("vxe-table-column",{attrs:{field:"name",title:"名称","tree-node":"",align:"left"}}),t("vxe-table-column",{attrs:{align:"left","header-align":"center",field:"code",title:"编码",width:"15%"}}),t("vxe-table-column",{attrs:{field:"structType_dictText",title:"类型",width:"10%"}}),t("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",width:"10%"}}),t("vxe-table-column",{attrs:{field:"placeCode",title:"位置编码",width:"15%"}}),t("vxe-table-column",{attrs:{field:"placeDesc",title:"位置描述",width:"15%"}})],1)],1)])},i=[],n=a("8fad"),o={name:"TrainAssetType",props:{trainTypeId:{type:String,default:""},parentId:{type:String,default:null},multiple:{type:Boolean,default:!0},title:{type:String,default:"设备类型选择"},canSelectType:{type:Array,default:function(){return[1,2,3,4]}}},data:function(){return{queryParam:{trainTypeId:"",id:"",searchText:"",status:null,structType:null},allAlign:"center",tableData:[],treeData:[],selectParent:"",visible:!1,confirmLoading:!1}},mounted:function(){},methods:{showModal:function(){this.visible=!0,this.queryParam.trainTypeId=this.trainTypeId,this.findList()},handleOk:function(){var e=[];this.multiple?e=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&e.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",e),this.visible=!1},handleCancel:function(){this.$emit("cancel"),this.close()},close:function(){this.$emit("close"),this.visible=!1},findList:function(){var e=this;this.loading=!0,this.parentId&&(this.queryParam.id=this.parentId),this.selectParent&&(this.queryParam.id=this.selectParent),Object(n["gd"])(this.queryParam).then((function(t){t.success&&(e.loading=!1,e.tableData=t.result)}))},findSelectList:function(){var e=this,t={id:this.parentId,trainTypeId:this.trainTypeId};this.parentId&&(t.id=this.parentId),Object(n["gd"])(t).then((function(t){t.success&&(e.loading=!1,e.treeData=t.result.map((function(t){return e.genSelectTreeNode(t)})))}))},loadChildrenMethod:function(e){var t=this,a=e.row,r={trainTypeId:this.trainTypeId,id:a.id};return new Promise((function(e){Object(n["gd"])(r).then((function(a){a.success?e(a.result):t.$message.error("".concat(a.msg))}))}))},loadSelectNodeMethod:function(e){var t=this,a={trainTypeId:this.trainTypeId,id:e.dataRef.id,searchText:this.queryParam.searchText,status:this.queryParam.status,structType:this.queryParam.structType};return new Promise((function(e){Object(n["gd"])(a).then((function(e){e.success?e.result.map((function(e){t.treeData=t.treeData.concat(t.genSelectTreeNode(e))})):t.$message.warning(e.message)})),e()}))},genSelectTreeNode:function(e){return{id:e.id,pId:e.parentId,value:e.id,title:e.name,isLeaf:!e.hasChildren}},searchQuery:function(){this.findList()},checkRadioMethod:function(e){var t=e.row;return this.canSelectType.indexOf(t.structType)>-1}}},l=o,s=(a("9589"),a("2877")),c=Object(s["a"])(l,r,i,!1,null,"52968c59",null);t["default"]=c.exports},"39ff7":function(e,t,a){},4501:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:"作业指导书",width:"100%",dialogClass:"fullDialog no-footer",visible:e.visible,footer:null},on:{cancel:e.handleCancel}},[t("div",{staticClass:"sop-body"},[t("div",{staticStyle:{display:"flex","align-content":"center","flex-wrap":"wrap"}},[e.loading?t("a-spin",{attrs:{tip:"下载中..."}}):e._e()],1),e.loading?e._e():t("div",{ref:"mainDom",staticClass:"sop-body-page"})])])},i=[],n=a("8fad"),o={name:"WorkSopView",components:{},data:function(){return{visible:!1,tableData:[],queryParam:{bookId:""},loading:!1}},created:function(){},methods:{findList:function(){},handleCancel:function(){this.visible=!1},showBook:function(e){var t=this;this.visible=!0,this.loading=!0,Object(n["Pb"])({bookId:e}).then((function(e){if(e.success){var a=[];e.result.forEach((function(e){a.push(Object(n["Qb"])({detailId:e.id}).then((function(e){if(e.success){var a=JSON.parse(JSON.stringify(e.result));return a}return t.$message.error(e.message),null})))})),Promise.all(a).then((function(e){e.sort((function(e,t){return e.stepNum-t.stepNum}));var a="";e.forEach((function(e){e&&(a+="<h2>".concat(e.stepNum,'<span style="margin-left:15px;margin-top: 24px;">').concat(e.stepTitle,"</span></h2>"),a+=e.stepContent||"")})),t.loading=!1,t.$nextTick.call(t,(function(){t.$refs.mainDom.innerHTML=a}))}))}}))},showSopDetail:function(e){var t=this;this.visible=!0;var a=[];e.forEach((function(e){a.push(Object(n["Qb"])({detailId:e}).then((function(e){return e.success?e.result:""})))})),Promise.all(a).then((function(e){var a="";e.forEach((function(e){a+="<h2>".concat(e.stepNum,'<span style="margin-left:15px;">').concat(e.stepTitle,"</span></h2>"),a+=e.stepContent})),t.$refs.mainDom.innerHTML=a}))}}},l=o,s=(a("a9f9"),a("bca7"),a("2877")),c=Object(s["a"])(l,r,i,!1,null,"7e7655fc",null);t["default"]=c.exports},"4a04":function(e,t,a){"use strict";a("b286")},5371:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",[t("a-row",{staticStyle:{"padding-bottom":"10px"},attrs:{gutter:24}},[t("a-col",{attrs:{md:24,sm:24}},[t("a-upload",{attrs:{multiple:!0,"file-list":e.fileList,remove:e.handleRemove,"before-upload":e.beforeUpload,"default-file-list":e.defaultFileList}},[t("a-button",{staticClass:"border-primary-4"},[e._v("添加文件")])],1)],1)],1),t("a-row",[e.showUpload?t("a-col",{attrs:{span:5}},[t("a-button",{attrs:{type:"primary",loading:e.isLoading},on:{click:e.beginUpload}},[e._v("上传至服务器")])],1):e._e(),t("a-col",{staticStyle:{color:"#cccccc"},attrs:{span:19}},[e._v("一次最多上传"+e._s(e.fileSize)+"个文件，且单个文件不能超过10MB")])],1)],1)},i=[],n=a("e2aa");function o(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",i=a.toStringTag||"@@toStringTag";function n(a,r,i,n){var o=r&&r.prototype instanceof c?r:c,d=Object.create(o.prototype);return l(d,"_invoke",function(a,r,i){var n,o,l,c=0,d=i||[],u=!1,f={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,a){return n=t,o=0,l=e,f.n=a,s}};function m(a,r){for(o=a,l=r,t=0;!u&&c&&!i&&t<d.length;t++){var i,n=d[t],m=f.p,h=n[2];a>3?(i=h===r)&&(l=n[(o=n[4])?5:(o=3,3)],n[4]=n[5]=e):n[0]<=m&&((i=a<2&&m<n[1])?(o=0,f.v=r,f.n=n[1]):m<h&&(i=a<3||n[0]>r||r>h)&&(n[4]=a,n[5]=r,f.n=h,o=0))}if(i||a>1)return s;throw u=!0,r}return function(i,d,h){if(c>1)throw TypeError("Generator is already running");for(u&&1===d&&m(d,h),o=d,l=h;(t=o<2?e:l)||!u;){n||(o?o<3?(o>1&&(f.n=-1),m(o,l)):f.n=l:f.v=l);try{if(c=2,n){if(o||(i="next"),t=n[i]){if(!(t=t.call(n,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,o<2&&(o=0)}else 1===o&&(t=n.return)&&t.call(n),o<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),o=1);n=e}else if((t=(u=f.n<0)?l:a.call(r,f))!==s)break}catch(t){n=e,o=1,l=t}finally{c=1}}return{value:t,done:u}}}(a,i,n),!0),d}var s={};function c(){}function d(){}function u(){}t=Object.getPrototypeOf;var f=[][r]?t(t([][r]())):(l(t={},r,(function(){return this})),t),m=u.prototype=c.prototype=Object.create(f);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,l(e,i,"GeneratorFunction")),e.prototype=Object.create(m),e}return d.prototype=u,l(m,"constructor",u),l(u,"constructor",d),d.displayName="GeneratorFunction",l(u,i,"GeneratorFunction"),l(m),l(m,i,"Generator"),l(m,r,(function(){return this})),l(m,"toString",(function(){return"[object Generator]"})),(o=function(){return{w:n,m:h}})()}function l(e,t,a,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}l=function(e,t,a,r){function n(t,a){l(e,t,(function(e){return this._invoke(t,a,e)}))}t?i?i(e,t,{value:a,enumerable:!r,configurable:!r,writable:!r}):e[t]=a:(n("next",0),n("throw",1),n("return",2))},l(e,t,a,r)}function s(e,t,a,r,i,n,o){try{var l=e[n](o),s=l.value}catch(e){return void a(e)}l.done?t(s):Promise.resolve(s).then(r,i)}function c(e){return function(){var t=this,a=arguments;return new Promise((function(r,i){var n=e.apply(t,a);function o(e){s(n,r,i,o,l,"next",e)}function l(e){s(n,r,i,o,l,"throw",e)}o(void 0)}))}}var d={name:"DocUpload",props:{path:{type:String,default:""},fileSize:{type:Number,default:5},defaultFileList:{type:Array,default:[]},showUpload:{type:Boolean,default:!0},isFileEmpty:{type:Boolean,default:!1}},watch:{uploadFiles:{immediate:!1,handler:function(){var e=c(o().m((function e(t){return o().w((function(e){while(1)switch(e.n){case 0:if(t.length!==this.fileList.length){e.n=1;break}return e.n=1,this.$emit("uploaded",this.uploadFiles);case 1:return e.a(2)}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},data:function(){return{fileList:[],uploadFiles:[],isLoading:!1}},methods:{beforeUpload:function(e){var t=e.size/1024/1024<10;return t?(this.fileList.push(e),this.$emit("fileNum",this.fileList.length),this.$emit("setBforeUploadStatus",!1),!1):(this.$message.error("文件不得大于10MB!"),!1)},handleRemove:function(e){var t=this.fileList.indexOf(e),a=this.fileList.slice();a.splice(t,1),this.fileList=a,this.$emit("fileNum",this.fileList.length),this.$emit("removed",e)},beginUpload:function(){var e=this;return new Promise((function(t,a){var r=e.fileList,i=e.fileSize;if(!e.isFileEmpty&&0===r.length)return e.$emit("upLoadingEnd"),e.$message.warning("请选择要上传的文件"),void a();r.length>i?(e.$message.error("一次最多上传"+i+"个文件!"),a()):e.customRequest().then((function(){t()})).catch((function(e){a()}))}))},customRequest:function(){var e=this,t=this.fileList;if(t.length<1)return this.$emit("uploaded",[]),this.$emit("upLoadingEnd"),Promise.resolve();this.isLoading=!0;var a=[];return t.forEach((function(t){var r=new FormData;r.append("file",t),a.push(e.saveFile(r,t))})),Promise.all(a).finally((function(){e.isLoading=!1,e.$emit("upLoadingEnd")}))},saveFile:function(){var e=c(o().m((function e(t,a){var r=this;return o().w((function(e){while(1)switch(e.n){case 0:return e.a(2,Object(n["d"])(t,this.path).then((function(e){e.success?(r.getUploadData(a,e),r.$emit("setUpLoadingEndStatus",!0)):(r.$message.error(e.message),r.$emit("uploadFail",a))})))}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}(),getUploadData:function(e,t){var a=this.uploadFiles,r={name:e.name,type:this.handleFileName(e),fileSize:Math.round(e.size/1024),savepath:t.result};a.push(r)},handleFileName:function(e){var t=e.name.lastIndexOf("."),a=e.name.length,r=e.name.substring(t+1,a);return r}}},u=d,f=(a("9615"),a("2877")),m=Object(f["a"])(u,r,i,!1,null,"69990be1",null);t["default"]=m.exports},5464:function(e,t,a){"use strict";a("0d29")},"5f78":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,width:450,visible:e.visible,confirmLoading:e.confirmLoading,bodyStyle:{minHeight:"300px"},destroyOnClose:!0,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"序号"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["sortNo",e.validatorRules.sortNo],expression:"['sortNo', validatorRules.sortNo]",modifiers:{trim:!0}}],staticStyle:{width:"100%"},attrs:{placeholder:"输入序号",min:0,max:999999999}})],1)],1),t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"项点名称"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["title",e.validatorRules.title],expression:"['title', validatorRules.title]",modifiers:{trim:!0}}],staticStyle:{width:"100%"},attrs:{maxLength:65,placeholder:"输入项点名称"}})],1)],1),t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"检查等级"}},[t("a-rate",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["checkLevel",e.validatorRules.checkLevel],expression:"['checkLevel', validatorRules.checkLevel]",modifiers:{trim:!0}}],attrs:{allowClear:!1,count:"3"}})],1)],1),t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"检查内容"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["content",e.validatorRules.content],expression:"['content', validatorRules.content]",modifiers:{trim:!0}}],staticStyle:{width:"100%"},attrs:{maxLength:201,placeholder:"输入检查内容","auto-size":{minRows:3,maxRows:5}}})],1)],1)],1)],1)],1)],1)},i=[],n={name:"CheckItemModel",components:{},data:function(){return{title:"操作",visible:!1,model:{},labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:14}},confirmLoading:!1,form:this.$form.createForm(this),deptId:"",validatorRules:{sortNo:{rules:[{required:!0,message:"请输入序号!"}]},title:{rules:[{required:!0,message:"请输入项点名称!"},{max:64,message:"不能超过64个字符"}]},checkLevel:{rules:[{required:!0,message:"请选择等级!"}]},content:{rules:[{required:!0,message:"请输入检查内容!"},{max:200,message:"不能超过200个字符"}]}}}},created:function(){},methods:{add:function(){this.edit({})},edit:function(e){var t=this;this.form.resetFields(),this.visible=!0,this.model=Object.assign({},e),e._XID&&this.$nextTick((function(){t.form.setFieldsValue({sortNo:t.model.sortNo,title:t.model.title,checkLevel:t.model.checkLevel,content:t.model.content})}))},handleOk:function(){var e=this;e.form.validateFields((function(t,a){if(!t){e.confirmLoading=!0;var r=Object.assign(e.model,a);e.$emit("ok",r),e.close(),e.confirmLoading=!1}}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},o=n,l=a("2877"),s=Object(l["a"])(o,r,i,!1,null,null,null);t["default"]=s.exports},"5fab":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,width:450,visible:e.visible,confirmLoading:e.confirmLoading,destroyOnClose:!0,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"作业指导书"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["teckBookName",e.validatorRules.teckBookName],expression:"['teckBookName', validatorRules.teckBookName]",modifiers:{trim:!0}}],ref:"mySelect",attrs:{placeholder:"请选择关联设备",open:!1,showArrow:!0},on:{focus:e.openModal}},[t("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)],1)],1)],1),t("TechBookList",{ref:"selectForm",attrs:{multiple:!1},on:{ok:e.selectBook}})],1)],1)},i=[],n=a("7dc0"),o={name:"FileItemModel",components:{TechBookList:n["default"]},data:function(){return{title:"操作",visible:!1,teckBookId:"",teckBookName:"",model:{},labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:14}},confirmLoading:!1,form:this.$form.createForm(this),deptId:"",validatorRules:{teckBookName:{rules:[{required:!0,message:"请选择作业指导书!"}]}}}},created:function(){},methods:{openModal:function(){this.$refs.selectForm.showModal(),this.$refs.mySelect.blur()},selectBook:function(e){e.length&&(this.teckBookId=e[0].id,this.teckBookName=e[0].fileName),this.form.setFieldsValue({teckBookName:this.teckBookName})},add:function(){this.edit({})},edit:function(e){var t=this;this.form.resetFields(),this.visible=!0,this.model=Object.assign({},e),e._XID&&this.$nextTick((function(){t.form.setFieldsValue({})}))},handleOk:function(){var e=this,t=this;t.form.validateFields((function(a,r){if(!a){t.confirmLoading=!0;var i=Object.assign(t.model,r,{teckBookId:e.teckBookId});t.$emit("ok",i),t.close(),t.confirmLoading=!1}}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},l=o,s=a("2877"),c=Object(s["a"])(l,r,i,!1,null,null,null);t["default"]=c.exports},7237:function(e,t,a){},"7dc0":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"80%",title:"作业指导书选择",visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",centered:"",destroyOnClose:!0,bodyStyle:{height:"80vh"}},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"名称"}},[t("a-input",{attrs:{placeholder:"请输入指导书名称"},model:{value:e.queryParam.formName,callback:function(t){e.$set(e.queryParam,"formName",t)},expression:"queryParam.formName"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"修程类型"}},[t("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_repair_program,name,id"},model:{value:e.queryParam.repairProgramId,callback:function(t){e.$set(e.queryParam,"repairProgramId",t)},expression:"queryParam.repairProgramId"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"所属线路"}},[t("line-select-list",{model:{value:e.queryParam.lineId,callback:function(t){e.$set(e.queryParam,"lineId",t)},expression:"queryParam.lineId"}})],1)],1),t("a-col",{attrs:{md:4,sm:8}},[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-space",[t("a-button",{on:{click:e.findList}},[e._v("查询")])],1)],1)])],1)],1)],1),t("div",{staticStyle:{height:"calc(80vh - 130px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(80vh - 130px)"},attrs:{border:"","max-height":"100%",align:e.allAlign,data:e.tableData,"highlight-current-row":"","show-overflow":"tooltip","radio-config":e.multiple?{}:{trigger:"row"},"checkbox-config":e.multiple?{trigger:"row",highlight:!0,range:!0}:{},"edit-config":{trigger:"click",mode:"cell",showIcon:"true"}}},[e.multiple?t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}):t("vxe-table-column",{attrs:{type:"radio",width:"40"}}),t("vxe-table-column",{attrs:{field:"fileNo",title:"文件编号",width:"180"}}),t("vxe-table-column",{attrs:{field:"fileName",title:"文件名称","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{field:"fileVer",title:"文件版本",width:"140"}}),t("vxe-table-column",{attrs:{field:"repairProgramName",title:"所属修程",width:"140"}}),t("vxe-table-column",{attrs:{field:"lineName",title:"所属线路",width:"140"}}),t("vxe-table-column",{attrs:{field:"status_dictText",title:"有效状态",width:"80"}})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1)])},i=[],n=a("5633"),o=a("8fad"),l={name:"TechBookList",components:{LineSelectList:n["default"]},props:{multiple:{type:Boolean,default:!0}},data:function(){return{queryParam:{formName:"",lineId:"",repairProgramId:"",pageNo:1,pageSize:10},allAlign:"center",totalResult:0,tableData:[],visible:!1,confirmLoading:!1,formItemLayout:{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}}}},methods:{showModal:function(){this.visible=!0,this.findList()},findList:function(){var e=this;this.loading=!0,Object(o["Rb"])(this.queryParam).then((function(t){e.totalResult=t.result.total,e.loading=!1,e.tableData=t.result.records}))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()},handleOk:function(){var e=[];this.multiple?e=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&e.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",e),this.close()},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,this.queryParam.formName=""}}},s=l,c=(a("4a04"),a("2877")),d=Object(c["a"])(s,r,i,!1,null,"83e4a944",null);t["default"]=d.exports},9108:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("j-modal",{attrs:{title:e.title,visible:e.visible,centered:"",confirmLoading:e.confirmLoading,destroyOnClose:!0,fullscreen:"",cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-form",{attrs:{form:e.form}},[t("div",{staticClass:"info-wrapper info-top-wrapper"},[t("h4",[e._v("基本信息")]),t("a-row",[t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"检查表名称"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",e.validatorRules.title],expression:"['title', validatorRules.title]"}],attrs:{placeholder:"请输入检查表名称","allow-clear":"",maxLength:65}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"所属线路"}},[t("line-select-list",{directives:[{name:"decorator",rawName:"v-decorator",value:["lineId",e.validatorRules.lineId],expression:"['lineId', validatorRules.lineId]"}]})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"修程类型"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator",value:["repairProId",e.validatorRules.repairProId],expression:"['repairProId', validatorRules.repairProId]"}],attrs:{triggerChange:!0,dictCode:"bu_repair_program,name,id",placeholder:"请选择修程类型"}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"是否有效"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",e.validatorRules.status],expression:"['status', validatorRules.status]"}],attrs:{triggerChange:!0,dictCode:"bu_effective",placeholder:"请选择是否有效"}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"设备类型"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["assetTypeName",e.validatorRules.assetTypeName],expression:"['assetTypeName', validatorRules.assetTypeName]",modifiers:{trim:!0}}],ref:"mySelect",attrs:{placeholder:"请选择关联设备",open:!1,showArrow:!0},on:{focus:e.openModal}},[t("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)],1)],1)],1),t("div",{staticClass:"info-wrapper info-top-wrapper"},[t("h4",[e._v("内容明细")]),t("a-row",[t("a-tabs",{attrs:{"default-active-key":"1"}},[t("a-tab-pane",{key:"1",attrs:{tab:"检查项点"}},[t("CheckItemList",{attrs:{data:e.itemList},on:{ok:e.addCheckItemData,del:e.delCheckItemData}})],1),t("a-tab-pane",{key:"2",attrs:{tab:"参考工艺文件"}},[t("FileList",{attrs:{data:e.techLinkList},on:{ok:e.addFileItemData,del:e.delFileItemData}})],1)],1)],1)],1)]),t("train-asset-type",{ref:"selectForm",attrs:{multiple:!1},on:{ok:e.selectTrainSys}})],1)},i=[],n=a("c1df"),o=a.n(n),l=(a("5c3a"),a("8fad")),s=a("5633"),c=a("2cb5"),d=a("fe96"),u=a("94ce"),f={name:"JobCheckItemModal",components:{LineSelectList:s["default"],CheckItemList:d["default"],FileList:u["default"],TrainAssetType:c["default"]},data:function(){return{title:"操作",visible:!1,model:{},assetTypeId:"",assetTypeName:"",labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,form:this.$form.createForm(this),validatorRules:{title:{rules:[{required:!0,message:"请输入作业检查表名称!"},{max:64,message:"不能超过64个字符"}]},lineId:{rules:[{required:!0,message:"请选择线路!"}]},repairProId:{rules:[{required:!0,message:"请选择修程类型!"}]},status:{rules:[{required:!0,message:"请选择是否有效!"}]},assetTypeName:{rules:[{required:!0,message:"请选择设备类型!"}]}},itemList:[],techLinkList:[]}},created:function(){},methods:{moment:o.a,openModal:function(){this.$refs.selectForm.showModal(),this.$refs.mySelect.blur()},selectTrainSys:function(e){e.length&&(this.assetTypeId=e[0].id,this.assetTypeName=e[0].name),this.form.setFieldsValue({assetTypeName:this.assetTypeName})},add:function(){this.edit({})},edit:function(e){var t=this;this.form.resetFields(),this.model=Object.assign({},e),this.visible=!0,e.id&&Object(l["lc"])({id:this.model.id}).then((function(e){e.success&&(t.model=Object.assign({},e.result),t.$nextTick((function(){t.form.setFieldsValue({title:t.model.title,lineId:t.model.lineId,repairProId:t.model.repairProId,status:t.model.status,assetTypeName:t.model.assetTypeName}),t.assetTypeId=t.model.assetTypeId,t.itemList=t.model.itemList||[],t.techLinkList=t.model.techLinkList||[]})))}))},handleOk:function(){var e=this;e.form.validateFields((function(t,a){if(!t){e.confirmLoading=!0;var r,i=Object.assign(e.model,a,{assetTypeId:e.assetTypeId,itemList:e.itemList,techLinkList:e.techLinkList});e.model.id&&(i.id=e.model.id),r=Object(l["Sc"])(i),r.then((function(t){t.success?(e.$message.success(t.message),e.$emit("ok"),e.close()):e.$message.error(t.message)})).finally((function(){e.confirmLoading=!1}))}}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,this.itemList=[],this.techLinkList=[]},addCheckItemData:function(e){var t=this;if(t.itemList.length){for(var a=0;a<t.itemList.length;a++){var r=t.itemList[a];if(r._XID==e._XID)return t.$set(t.itemList,a,e),!1}t.itemList.push(e)}else t.itemList.push(e)},delCheckItemData:function(e){for(var t=this,a=0;a<e.length;a++)for(var r=e[a],i=0;i<t.itemList.length;i++){var n=t.itemList[i];n._XID==r._XID&&t.itemList.splice(i,1)}},addFileItemData:function(e){var t=this;t.techLinkList.push(e)},delFileItemData:function(e){for(var t=this,a=0;a<e.length;a++)for(var r=e[a],i=0;i<t.techLinkList.length;i++){var n=t.techLinkList[i];n._XID==r._XID&&t.techLinkList.splice(i,1)}}}},m=f,h=(a("b366"),a("2877")),p=Object(h["a"])(m,r,i,!1,null,"77e55014",null);t["default"]=p.exports},"94c2d":function(e,t,a){},"94ce":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"file-list-container"},[t("div",{staticClass:"btn_cont",staticStyle:{margin:"10px 0"}},[t("a-button",{staticStyle:{"margin-right":"6px"},attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增")]),t("a-button",{on:{click:e.handleDelete}},[e._v("删除")])],1),t("vxe-table",{ref:"listTable",attrs:{border:"",align:"center","max-height":"auto",data:e.data,"keep-source":!0,"checkbox-config":{trigger:"row",highlight:!0,range:!0}},on:{"update:data":function(t){e.data=t}}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),t("vxe-table-column",{attrs:{type:"seq",title:"序号",width:"120"}}),t("vxe-table-column",{attrs:{field:"teckBookName",title:"工艺文件",align:"left"}}),t("vxe-table-column",{attrs:{title:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("a",{on:{click:function(t){return t.stopPropagation(),e.showSop(r)}}},[e._v("预览")])]}}])})],1),t("FileItemModel",{ref:"modalForm",on:{ok:e.addFileItemData}}),t("WorkSopView",{ref:"workSopViewModal"})],1)},i=[],n=a("5fab"),o=a("4501"),l={components:{FileItemModel:n["default"],WorkSopView:o["default"]},data:function(){return{}},props:{data:{type:Array,default:function(){return[]}}},methods:{handleAdd:function(){this.$refs.modalForm.add(),this.$refs.modalForm.title="新增"},handleDelete:function(){var e=this,t=this.$refs.listTable.getCheckboxRecords();t.length>0?this.$confirm({content:"是否删除选中".concat(t.length,"条数据？"),okText:"确定",cancelText:"取消",onOk:function(){e.$emit("del",t)}}):this.$message.error("请选择最少一条数据！")},addFileItemData:function(e){this.$emit("ok",e)},showSop:function(e){this.$refs.workSopViewModal.showBook(e.teckBookId)}}},s=l,c=a("2877"),d=Object(c["a"])(s,r,i,!1,null,"c4f6cf62",null);t["default"]=d.exports},9589:function(e,t,a){"use strict";a("7237")},9615:function(e,t,a){"use strict";a("94c2d")},a9c2:function(e,t,a){},a9f9:function(e,t,a){"use strict";a("d392")},b286:function(e,t,a){},b366:function(e,t,a){"use strict";a("a9c2")},b7b4:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"i",(function(){return n})),a.d(t,"l",(function(){return o})),a.d(t,"c",(function(){return s})),a.d(t,"t",(function(){return c})),a.d(t,"v",(function(){return l})),a.d(t,"n",(function(){return u})),a.d(t,"C",(function(){return f})),a.d(t,"D",(function(){return m})),a.d(t,"p",(function(){return h})),a.d(t,"m",(function(){return g})),a.d(t,"j",(function(){return b})),a.d(t,"w",(function(){return v})),a.d(t,"a",(function(){return y})),a.d(t,"h",(function(){return k})),a.d(t,"k",(function(){return x})),a.d(t,"q",(function(){return C})),a.d(t,"z",(function(){return L})),a.d(t,"r",(function(){return P})),a.d(t,"e",(function(){return I})),a.d(t,"s",(function(){return $})),a.d(t,"B",(function(){return q})),a.d(t,"x",(function(){return O})),a.d(t,"y",(function(){return T})),a.d(t,"d",(function(){return w})),a.d(t,"f",(function(){return j})),a.d(t,"o",(function(){return p})),a.d(t,"A",(function(){return S})),a.d(t,"E",(function(){return _})),a.d(t,"g",(function(){return N})),a.d(t,"u",(function(){return d}));var r=a("0fea"),i=function(e){return Object(r["j"])("/quality/rectify/add",e)},n=function(e){return Object(r["j"])("/quality/rectify/delete",e)},o=function(e){return Object(r["j"])("/quality/rectify/edit",e)},l=function(e){return Object(r["d"])("/quality/rectify/page",e)},s=function(e){return Object(r["j"])("/quality/rectify/close",e)},c=function(e){return Object(r["d"])("/quality/rectify/get",e)},d=function(e){return Object(r["d"])("/quality/rectify/getCode",e)},u=function(e){return Object(r["d"])("/quality/measurealert/page",e)},f=function(e){return Object(r["d"])("/quality/measurethreshold/form/page-data-form",e)},m=function(e){return Object(r["j"])("/quality/measurethreshold/threshold/save",e)},h=function(e){return Object(r["d"])("/quality/measurethreshold/threshold/list/".concat(e))},p=function(e){return Object(r["d"])("/serialPlan/plan/forms/online-form/alert-records",{dataRecordId:e})},g=function(e){return Object(r["j"])("/quality/measurethreshold/threshold/edit",e)},b=function(e){return Object(r["j"])("/quality/measurethreshold/threshold/delete",e)},v=function(e){return Object(r["d"])("/quality/measurethreshold/threshold/get",e)},y=function(e){return Object(r["j"])("/quality/leaverecord/add",e)},k=function(e){return Object(r["j"])("/quality/leaverecord/delete",e)},w=function(e){return Object(r["j"])("/quality/leaverecord/close",e)},x=function(e){return Object(r["j"])("/quality/leaverecord/edit",e)},C=function(e){return Object(r["d"])("/quality/leaverecord/page",e)},L=function(e,t){return Object(r["c"])("/quality/leaverecord/workLeaveRecordExport",e,t)},P=function(e){return Object(r["d"])("/quality/record-confirm/list",e)},I=function(e){return Object(r["j"])("/quality/record-confirm/confirm",e)},$=function(e){return Object(r["d"])("/quality/record-confirm/work-record/get",e)},O=function(e){return Object(r["d"])("/serialPlan/plan/forms/check-record/get",e)},T=function(e){return Object(r["d"])("/workcheck/get",e)},j=function(e){return Object(r["j"])("/quality/record-confirm/confirm",e)},q=function(e){return Object(r["d"])("/quality/record-confirm/page",e)},S=function(e){return Object(r["d"])("/quality/record-confirm/page/check-record",e)},_=function(e){return Object(r["j"])("/serialPlan/plan/forms/judge/save",e)},N=function(e){return Object(r["j"])("/serialPlan/plan/forms/judge/delete",e)}},bca7:function(e,t,a){"use strict";a("39ff7")},bcfa:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{padding:"5px"}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchQuery.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"名称"}},[t("a-input",{attrs:{placeholder:"输入作业检查表名称","allow-clear":""},model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,"name",t)},expression:"queryParam.name"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"修程"}},[t("j-dict-select-tag",{attrs:{triggerChange:"",dictCode:"bu_repair_program,name,id"},on:{change:e.handleProgram},model:{value:e.queryParam.repairProId,callback:function(t){e.$set(e.queryParam,"repairProId",t)},expression:"queryParam.repairProId"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"规程"}},[t("j-dict-select-tag",{attrs:{triggerChange:"",dictCode:e.dicStr},on:{focus:e.handleFocusRegu},model:{value:e.queryParam.reguId,callback:function(t){e.$set(e.queryParam,"reguId",t)},expression:"queryParam.reguId"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"线路"}},[t("line-select-list",{model:{value:e.queryParam.lineId,callback:function(t){e.$set(e.queryParam,"lineId",t)},expression:"queryParam.lineId"}})],1)],1)],1),t("a-row",[t("a-col",[t("span",{staticClass:"table-page-search-submitButtons"},[t("a-space",[t("a-button",{on:{click:e.findList}},[e._v("查询")]),t("a-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增")]),t("a-button",{attrs:{disabled:1!=e.records.length},on:{click:e.handleEdit}},[e._v("编辑")]),t("a-button",{attrs:{disabled:e.records.length<1},on:{click:e.deleteRecord}},[e._v("删除")]),t("a-button",{on:{click:e.importData}},[e._v("导入")]),t("a-button",{attrs:{disabled:1!=e.records.length},on:{click:e.print}},[e._v("导出打印")])],1)],1)])],1)],1)],1),t("div",{staticStyle:{height:"calc(100vh - 272px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(100vh - 272px)"},attrs:{border:"",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","max-height":"100%","auto-resize":"","checkbox-config":{trigger:"row",highlight:!0,range:!0},"edit-config":{trigger:"manual",mode:"row"}},on:{"checkbox-change":e.checkboxChange,"checkbox-all":e.checkboxChange}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),t("vxe-table-column",{attrs:{field:"title",title:"检查表名称",align:"left","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("div",[t("a",{on:{click:function(t){return t.stopPropagation(),e.handleSeeing(r)}}},[e._v(e._s(r.title))])])]}}])}),t("vxe-table-column",{attrs:{field:"lineName",title:"线路",width:"160"}}),t("vxe-table-column",{attrs:{field:"repairProName",title:"修程",width:"200"}}),t("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",width:"100"}})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1),t("job-check-item-modal",{ref:"modalForm",on:{ok:e.loadData}}),t("JobCheckTableView",{ref:"jobCheckTableView"}),t("JobCheckTableExport",{ref:"tablePrintRef"}),t("ImportCheck",{ref:"importForm",on:{ok:e.loadData}})],1)},i=[],n=a("b7b4"),o=a("5633"),l=a("9108"),s=a("aaa8"),c=a("c1c7"),d=a("3cf2"),u=a("ca00"),f=a("8fad"),m={components:{LineSelectList:o["default"],jobCheckItemModal:l["default"],JobCheckTableView:s["default"],ImportCheck:c["default"],JobCheckTableExport:d["default"]},name:"List",data:function(){return{records:[],dicStr:"",queryParam:{name:"",repairProId:"",reguId:"",lineId:"",pageNo:1,pageSize:10},totalResult:0,allAlign:"center",tableData:[]}},created:function(){this.findList()},methods:{handleFocusRegu:function(){var e=this.queryParam.repairProId;Object(u["e"])(e)&&this.$message.warn("请先选择修程类型")},handleProgram:function(e){e?this.dicStr="bu_repair_regu_info,name,id,status=1 and repair_pro_id='".concat(e,"'"):(this.queryParam.reguId="",this.dicStr="")},checkboxChange:function(e){this.records=e.records},openModal:function(){this.$refs.stationModalForm.showModal()},findList:function(){var e=this;this.loading=!0,Object(f["kc"])(this.queryParam).then((function(t){t.success&&(e.totalResult=t.result.total,e.loading=!1,e.records=[],e.tableData=t.result.records)}))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()},handleEdit:function(){var e=this.$refs.listTable.getCheckboxRecords();1==e.length?(this.$refs.modalForm.edit(e[0]),this.$refs.modalForm.title="编辑"):this.$message.error("请选择一条数据进行编辑！")},handleAdd:function(){this.$refs.modalForm.add(),this.$refs.modalForm.title="新增"},deleteRecord:function(){var e=this,t=this.$refs.listTable.getCheckboxRecords();t.length>0?this.$confirm({content:"是否删除选中".concat(t.length,"条数据？"),okText:"确定",cancelText:"取消",onOk:function(){var a=t.map((function(e,t){return e.id})).join(",");Object(f["P"])("ids=".concat(a)).then((function(t){t.success?(e.findList(),e.$message.success(t.message)):e.$message.error(t.message)}))}}):this.$message.error("尚未选中任何数据!")},importData:function(){this.$refs.importForm.show()},loadData:function(){this.findList()},handleSeeing:function(e){var t=this;Object(n["y"])({id:e.id}).then((function(e){if(e.success&&e.result){var a=e.result;t.$refs.jobCheckTableView.show(a)}else t.$message.error("加载记录数据异常")}))},print:function(){var e=this.$refs.listTable.getCheckboxRecords();this.$refs.tablePrintRef.printById(e[0].id)}}},h=m,p=(a("5464"),a("2877")),g=Object(p["a"])(h,r,i,!1,null,null,null);t["default"]=g.exports},c1c7:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,width:450,visible:e.visible,confirmLoading:e.confirmLoading,destroyOnClose:!0,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"线路"}},[t("line-select-list",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["lineId",e.validatorRules.lineId],expression:"['lineId', validatorRules.lineId]",modifiers:{trim:!0}}]})],1)],1),t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"修程类型"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["repairProgramId",e.validatorRules.repairProgramId],expression:"['repairProgramId', validatorRules.repairProgramId]",modifiers:{trim:!0}}],attrs:{triggerChange:!0,placeholder:"请选择修程",dictCode:"bu_repair_program,name,id"}})],1)],1),t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"文件上传",required:""}},[t("a-upload",{attrs:{multiple:!1,"file-list":e.fileList,accept:".docx,.doc",remove:e.handleRemove,"before-upload":e.beforeUpload}},[t("a-button",{attrs:{type:"primary"}},[e._v("添加文件")])],1)],1)],1)],1)],1)],1)],1)},i=[],n=a("5633"),o=a("5371"),l=a("8fad"),s={name:"ImportCheck",components:{LineSelectList:n["default"],DocUpload:o["default"]},data:function(){return{title:"导入",visible:!1,model:{},fileList:[],labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:14}},confirmLoading:!1,form:this.$form.createForm(this),validatorRules:{lineId:{rules:[{required:!0,message:"请选择线路!"}]},repairProgramId:{rules:[{required:!0,message:"请选择修程!"}]}}}},created:function(){},methods:{show:function(){this.form.resetFields(),this.visible=!0},handleRemove:function(e){var t=this.fileList.indexOf(e),a=this.fileList.slice();a.splice(t,1),this.fileList=a},beforeUpload:function(e){var t=e.size/1024/1024<10;if(t){var a="application/msword"===e.type||"application/vnd.openxmlformats-officedocument.wordprocessingml.document"===e.type;if(a)return this.$set(this.fileList,0,e),!1;this.$message.error("只支持Word或Excel文件导入!")}else this.$message.error("文件不得大于10MB!")},customRequest:function(e){var t=this;this.confirmLoading=!0;var a=this.fileList;a.forEach((function(a){var r=new FormData;r.append("file",a),r.append("lineId",e.lineId),r.append("repairProId",e.repairProgramId),Object(l["tc"])(r).then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok"),t.close()):t.$message.error(e.message)})).finally((function(){t.confirmLoading=!1}))}))},handleOk:function(){var e=this,t=this;t.form.validateFields((function(a,r){if(!a){var i=Object.assign(t.model,r);t.fileList.length>0?t.customRequest(i):e.$message.error("请您先添加上传文件！")}}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,this.fileList=[]}}},c=s,d=a("2877"),u=Object(d["a"])(c,r,i,!1,null,null,null);t["default"]=u.exports},d392:function(e,t,a){},fe96:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"check-item-list-container"},[t("div",{staticClass:"btn_cont",staticStyle:{margin:"10px 0"}},[t("a-button",{staticStyle:{"margin-right":"6px"},attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增")]),t("a-button",{staticStyle:{"margin-right":"6px"},on:{click:e.handleEdit}},[e._v("修改")]),t("a-button",{on:{click:e.handleDelete}},[e._v("删除")])],1),t("vxe-table",{ref:"listTable",attrs:{border:"",align:"center","max-height":"auto",data:e.data,"keep-source":!0,"checkbox-config":{trigger:"row",highlight:!0,range:!0}},on:{"update:data":function(t){e.data=t}}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),t("vxe-table-column",{attrs:{field:"sortNo",title:"序号",width:"120"}}),t("vxe-table-column",{attrs:{field:"title",title:"项点名称",align:"left",width:"280"}}),t("vxe-table-column",{attrs:{field:"checkLevel",title:"等级",width:"180"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("a-rate",{attrs:{disabled:"",count:"3"},model:{value:r.checkLevel,callback:function(t){e.$set(r,"checkLevel",t)},expression:"row.checkLevel"}})]}}])}),t("vxe-table-column",{attrs:{field:"content",title:"检查内容",align:"left"}})],1),t("CheckItemModel",{ref:"modalForm",on:{ok:e.addCheckItemData}})],1)},i=[],n=a("5f78"),o={components:{CheckItemModel:n["default"]},data:function(){return{}},props:{data:{type:Array,default:function(){return[]}}},methods:{handleAdd:function(){this.$refs.modalForm.add(),this.$refs.modalForm.title="新增"},handleEdit:function(){var e=this.$refs.listTable.getCheckboxRecords();1==e.length?(this.$refs.modalForm.edit(e[0]),this.$refs.modalForm.title="编辑"):this.$message.error("请选择一条数据进行编辑！")},handleDelete:function(){var e=this,t=this.$refs.listTable.getCheckboxRecords();t.length>0?this.$confirm({content:"是否删除选中".concat(t.length,"条数据？"),okText:"确定",cancelText:"取消",onOk:function(){e.$emit("del",t)}}):this.$message.error("请选择最少一条数据！")},addCheckItemData:function(e){this.$emit("ok",e)}}},l=o,s=a("2877"),c=Object(s["a"])(l,r,i,!1,null,"38943354",null);t["default"]=c.exports}}]);