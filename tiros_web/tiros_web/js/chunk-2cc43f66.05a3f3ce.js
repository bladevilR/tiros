(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2cc43f66"],{"3cb5":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"70%",title:"故障处理措施选择",visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",centered:"",bodyStyle:{height:"80vh"},destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline","label-col":e.formItemLayout.labelCol,"wrapper-col":e.formItemLayout.wrapperCol},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.findList.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:""}},[t("a-input",{attrs:{placeholder:"故障措施编码或者描述"},model:{value:e.queryParam.searchText,callback:function(t){e.$set(e.queryParam,"searchText",t)},expression:"queryParam.searchText"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"分类"}},[t("a-select",{ref:"categoryIdSelect",attrs:{placeholder:"请选择所属分类",open:!1,showArrow:!0},on:{focus:function(t){return e.openSelectTypeModal(1)}},model:{value:e.categoryCode,callback:function(t){e.categoryCode=t},expression:"categoryCode"}},[t("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"故障代码"}},[t("a-select",{ref:"faultCodeIdSelect",attrs:{placeholder:"请选择所属故障代码",open:!1,showArrow:!0},on:{focus:function(t){return e.openSelectTypeModal(2)}},model:{value:e.faultCode,callback:function(t){e.faultCode=t},expression:"faultCode"}},[t("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"故障原因"}},[t("a-select",{ref:"faultReasonIdSelect",attrs:{placeholder:"请选择所属故障原因代码",open:!1,showArrow:!0},on:{focus:function(t){return e.openSelectTypeModal(3)}},model:{value:e.faultReasonCode,callback:function(t){e.faultReasonCode=t},expression:"faultReasonCode"}},[t("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)],1),t("a-col",{attrs:{md:2,sm:8}},[t("a-form-item",[t("a-button",{on:{click:e.findList}},[e._v("查询")])],1)],1)],1)],1)],1),t("div",{staticStyle:{height:"calc(80vh - 130px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(80vh - 130px)"},attrs:{border:"","max-height":"100%",align:e.allAlign,data:e.tableData,"highlight-current-row":"","show-overflow":"tooltip","radio-config":e.multiple?{}:{trigger:"row"},"checkbox-config":e.multiple?{trigger:"row",highlight:!0,range:!0}:{},"edit-config":{trigger:"click",mode:"cell",showIcon:"true"}}},[e.multiple?t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}):t("vxe-table-column",{attrs:{type:"radio",width:"40"}}),t("vxe-table-column",{attrs:{type:"seq",width:"60",title:"序号"}}),t("vxe-table-column",{attrs:{field:"solutionCode",title:"故障措施代码",width:"150"}}),t("vxe-table-column",{attrs:{field:"solutionDesc",title:"故障措施描述",align:"left","header-align":"center"}})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1),t("fault-category-list",{ref:"categorySelect",attrs:{multiple:!1},on:{ok:e.addCategoryTarget}}),t("fault-code-list",{ref:"codeSelect",attrs:{multiple:!1},on:{ok:e.addCodeTarget}}),t("fault-reason-list",{ref:"reasonSelect",attrs:{multiple:!1},on:{ok:e.addReasonTarget}})],1)},l=[],r=a("b47d"),s=a("a396"),i=a("0e7b"),n=a("6034"),c=a("ca00"),u={name:"FaultSolutionList",components:{FaultCategoryList:s["default"],FaultCodeList:i["default"],FaultReasonList:n["default"]},props:{multiple:{type:Boolean,default:!0}},data:function(){return{categoryCode:"",faultCode:"",faultReasonCode:"",queryParam:{searchText:"",categoryId:"",faultCodeId:"",faultReasonId:"",pageNo:1,pageSize:10},allAlign:"center",totalResult:0,tableData:[],visible:!1,confirmLoading:!1,formItemLayout:{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}}}},methods:{showModal:function(e){this.visible=!0,this.queryParam.faultReasonId=e,this.findList()},findList:function(){var e=this;this.loading=!0,Object(r["S"])(this.queryParam).then((function(t){e.totalResult=t.result.total,e.loading=!1,e.tableData=t.result.records}))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()},handleOk:function(){var e=[];this.multiple?e=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&e.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",e),this.close()},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,this.categoryCode="",this.faultCode="",this.faultReasonCode="",this.queryParam.searchText="",this.queryParam.categoryId="",this.queryParam.faultCodeId="",this.queryParam.faultReasonId=""},openSelectTypeModal:function(e){switch(e){case 1:this.$refs.categorySelect.showModal(),this.$refs.categoryIdSelect.blur();break;case 2:this.$refs.codeSelect.showModal(),this.$refs.faultCodeIdSelect.blur();break;case 3:this.$refs.reasonSelect.showModal(),this.$refs.faultReasonIdSelect.blur();break;default:break}},addCategoryTarget:function(e){Object(c["e"])(e)?this.queryParam.categoryId="":(this.queryParam.categoryId=e[0].id,this.categoryCode=e[0].categoryCode)},addCodeTarget:function(e){Object(c["e"])(e)?this.queryParam.faultCodeId="":(this.queryParam.faultCodeId=e[0].id,this.faultCode=e[0].fltCode)},addReasonTarget:function(e){Object(c["e"])(e)?this.queryParam.faultReasonId="":(this.queryParam.faultReasonId=e[0].id,this.faultReasonCode=e[0].reasonCode)}}},d=u,f=(a("f02c"),a("2877")),h=Object(f["a"])(d,o,l,!1,null,"4d7ca708",null);t["default"]=h.exports},ee46:function(e,t,a){},f02c:function(e,t,a){"use strict";a("ee46")}}]);