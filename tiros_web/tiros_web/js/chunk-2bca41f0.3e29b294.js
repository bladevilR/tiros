(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2bca41f0","chunk-24cb054c","chunk-2d0d09da"],{"24c7":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"bodyWrapper"},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:5,sm:12}},[t("a-form-item",{attrs:{label:"名称"}},[t("a-input",{attrs:{placeholder:"输入编码或者名称",allowClear:""},model:{value:e.queryParam.searchText,callback:function(t){e.$set(e.queryParam,"searchText",t)},expression:"queryParam.searchText"}})],1)],1),t("a-col",{attrs:{md:5,sm:12}},[t("a-form-item",{attrs:{label:"年份"}},[t("a-date-picker",{staticStyle:{width:"100%"},attrs:{mode:"year",placeholder:"请选择年份",format:"YYYY",open:e.yearPickShow},on:{panelChange:e.handlePanelChange,openChange:e.handleOpenChange},model:{value:e.queryParam.sbYear,callback:function(t){e.$set(e.queryParam,"sbYear",t)},expression:"queryParam.sbYear"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"所属线路"}},[t("line-select-list",{model:{value:e.queryParam.lineId,callback:function(t){e.$set(e.queryParam,"lineId",t)},expression:"queryParam.lineId"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"所属修程"}},[t("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_repair_program,name,id"},model:{value:e.queryParam.repairProgramId,callback:function(t){e.$set(e.queryParam,"repairProgramId",t)},expression:"queryParam.repairProgramId"}})],1)],1),t("a-col",{attrs:{md:4,sm:24}},[t("a-form-item",{attrs:{label:"是否汇总"}},[t("a-checkbox",{model:{value:e.queryParam.summary,callback:function(t){e.$set(e.queryParam,"summary",t)},expression:"queryParam.summary"}})],1)],1)],1),t("a-row",[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-space",[t("a-button",{on:{click:e.findList}},[e._v("查询")]),t("a-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增")]),t("a-button",{attrs:{disabled:!e.btnStatus.edit},on:{click:e.deleteRecord}},[e._v("删除")]),t("a-button",{attrs:{loading:e.exportLoading},on:{click:e.exportMaterialPlanEXFile}},[e._v("导出")])],1)],1)])],1)],1),t("div",{staticStyle:{height:"calc(100vh - 270px)"}},[t("vxe-table",{ref:"listTable",attrs:{border:"",align:e.allAlign,height:"100%",data:e.tableData,"show-overflow":"tooltip","checkbox-config":{trigger:"row",highlight:!0,range:!0},"edit-config":{trigger:"manual",mode:"row"}},on:{"checkbox-change":function(t){return e.btnStatus.update()},"checkbox-all":function(t){return e.btnStatus.update()}}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"40",fixed:"left"}}),t("vxe-table-column",{attrs:{field:"lineName",title:"线路",width:"100"}}),t("vxe-table-column",{attrs:{field:"sbYear",title:"所属年份",width:"100"}}),t("vxe-table-column",{attrs:{field:"repairProgramName",title:"所属修程",width:"120"}}),t("vxe-table-column",{attrs:{field:"code",title:"物资编码",width:"180"}}),t("vxe-table-column",{attrs:{field:"name",title:"物资名称",width:"180",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"spec",title:"物资描述","header-align":"center",align:"left","min-width":"320"}}),t("vxe-table-column",{attrs:{field:"sbAmount",title:"提报数量",width:"100","header-align":"center",align:"right"}}),t("vxe-table-column",{attrs:{field:"unit",title:"单位",width:"100"}}),t("vxe-table-column",{attrs:{field:"sbType_dictText",title:"类别",width:"100"}}),t("vxe-table-column",{attrs:{field:"materialTypeCategory_dictText",title:"属性",width:"150"}}),t("vxe-table-column",{attrs:{field:"sbUserName",title:"提报人员",width:"100"}}),t("vxe-table-column",{attrs:{field:"sbDate",title:"提报时间",width:"120"}})],1)],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}}),t("user-list",{ref:"userSelectModal",attrs:{"dep-id":e.dispatchGroupId,multiple:!1},on:{ok:e.userSelect}}),t("material-plan-item-modal",{ref:"modalForm",on:{ok:function(t){return e.loadData()}}})],1)},i=[],l=a("c1df"),o=a.n(l),s=a("ca00"),n=a("5633"),c=a("c54ca"),d=a("6978"),u=a("b245"),m=a("54f6"),h={name:"List",components:{MaterialPlanItemModal:d["default"],LineSelectList:n["default"],UserList:u["default"]},data:function(){var e=this;return{exportLoading:!1,yearPickShow:!1,dispatchGroupId:"",sbUserName:"",queryParam:{searchText:"",sbYear:"",lineId:"",repairProgramId:"",sbDeptId:"",sbUserId:this.$store.getters.userInfo.id,summary:!1,pageNo:1,pageSize:10},isSummary:!1,totalResult:0,allAlign:"center",tableData:[],tableHeight:{top:"height: calc(100vh - 225px)",bottom:"height: calc(100vh - 225px)",size:"100%"},btnStatus:new m["a"](this,"listTable",{attrs:[{key:"edit",judge:function(t){return!e.isSummary}}]})}},created:function(){this.findList()},methods:{handleOpenChange:function(e){this.yearPickShow=e},handlePanelChange:function(e){this.$set(this.queryParam,"sbYear",o()(e).format("YYYY")),this.yearPickShow=!1},openUserSelectModal:function(){this.$refs.userSelectModal.showModal(),this.$refs.myUserSelect.blur()},userSelect:function(e){Object(s["e"])(e)||(this.sbUserName=e[0].realname,this.$set(this.queryParam,"sbUserId",e[0].id))},findList:function(){var e=this;this.queryParam.summary?this.isSummary=!0:this.isSummary=!1,Object(c["nb"])(this.queryParam).then((function(t){e.totalResult=t.result.total,e.loading=!1,e.tableData=t.result.records,e.btnStatus.update()}))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()},loadData:function(){this.findList(),this.$emit("load")},handleAdd:function(){this.$refs.modalForm.add(),this.$refs.modalForm.title="新增"},handleEdit:function(e){var t=this.$refs.listTable.getCheckboxRecords();e.id?(this.$refs.modalForm.edit(e),this.$refs.modalForm.title="编辑"):1==t.length?(this.$refs.modalForm.edit(t[0]),this.$refs.modalForm.title="编辑"):this.$message.error("请选中一项数据!")},deleteRecord:function(){var e=this,t=this.$refs.listTable.getCheckboxRecords();t.length>0?this.$confirm({content:"是否删除选中".concat(t.length,"数据？"),onOk:function(){var a=t.map((function(e,t){return e.id})).join(",");Object(c["z"])("ids="+a).then((function(t){e.findList(),e.$message.success(t.message)}))}}):this.$message.error("尚未选中任何数据!")},exportMaterialPlanEXFile:function(){var e=this;this.queryParam.lineId=this.lineId,this.exportLoading=!0,Object(c["T"])(this.queryParam).then((function(t){if(t){if("undefined"!==typeof window.navigator.msSaveBlob)window.navigator.msSaveBlob(new Blob([t],{type:"application/vnd.ms-excel"}),fileName+".xls");else{var a=window.URL.createObjectURL(new Blob([t],{type:"application/vnd.ms-excel"})),r=document.createElement("a");r.style.display="none",r.href=a,r.setAttribute("download","物资计划.xls"),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(a)}e.exportLoading=!1}else e.$message.warning("文件下载失败")})).catch((function(t){e.exportLoading=!1}))}}},f=h,p=a("2877"),g=Object(p["a"])(f,r,i,!1,null,null,null);t["default"]=g.exports},"54f6":function(e,t,a){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function o(e,t,a){return t&&l(e.prototype,t),a&&l(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=n(e,"string");return"symbol"==r(t)?t:t+""}function n(e,t){if("object"!=r(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}a.d(t,"a",(function(){return c}));var c=function(){function e(t,a){var r=this,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,e),this.options={attrs:[]},Object.assign(this.options,l),this.options.attrs.find((function(e){return"edit"===e.key}))||this.options.attrs.push({key:"edit"}),this.options.attrs.forEach((function(e){Object.hasOwnProperty.call(e,"key")&&(r[e.key]=!1),Object.hasOwnProperty.call(e,"judge")||(e["judge"]=function(e){return!0})})),this.del=!1,this.nextTick=t.$nextTick,this.refs=t.$refs,this.refName=a,t.$nextTick((function(){r.vxeTable=t.$refs[a]}))}return o(e,[{key:"editRow",get:function(){if(this.edit){var e=this.vxeTable.getCheckboxRecords();return e.length?e[0]:{}}return{}}},{key:"update",value:function(){var e=this;this.nextTick((function(){e.vxeTable||(e.vxeTable=e.refs[e.refName]);var t=e.vxeTable.getCheckboxRecords();e.del=t.length>0,e.options.attrs.forEach((function(a){for(var r in a)Object.hasOwnProperty.call(a,r)&&(a["isDel"]?t.length?e[a.key]=t.length>0&&a.judge(t[0]):e[a.key]=!1:t.length?e[a.key]=1===t.length&&a.judge(t[0]):e[a.key]=!1)}))}))}}])}()},6978:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,width:"32%",visible:e.visible,confirmLoading:e.confirmLoading,bodyStyle:{minHeight:"50px"},destroyOnClose:!0,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:24,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"选择年份"}},[t("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["sbYear",e.validatorRules.sbYear],expression:"['sbYear', validatorRules.sbYear]",modifiers:{trim:!0}}],staticStyle:{width:"100%"},attrs:{mode:"year",placeholder:"请选择年份",format:"YYYY",open:e.yearPickShow},on:{panelChange:e.handlePanelChange,openChange:e.handleOpenChange}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:24,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"物资类型选择"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["materialTypeName",e.validatorRules.materialTypeName],expression:"['materialTypeName', validatorRules.materialTypeName]",modifiers:{trim:!0}}],ref:"mySelect",attrs:{allowClear:"",placeholder:"请选择",open:!1,showArrow:!0},on:{focus:e.openModal}},[t("a-icon",{attrs:{slot:"suffix",type:"ellipsis"},slot:"suffix"})],1)],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:24,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"物料类别"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["sbType",e.validatorRules.sbType],expression:"['sbType', validatorRules.sbType]",modifiers:{trim:!0}}],attrs:{triggerChange:"",placeholder:"请选择",dictCode:"bu_material_type"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:24,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"线路"}},[t("line-select-list",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["lineId",e.validatorRules.lineId],expression:"['lineId', validatorRules.lineId]",modifiers:{trim:!0}}]})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:24,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"修程"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["repairProgramId",e.validatorRules.repairProgramId],expression:"['repairProgramId', validatorRules.repairProgramId]",modifiers:{trim:!0}}],attrs:{triggerChange:"",placeholder:"请选择",dictCode:"bu_repair_program,name,id"},on:{change:e.sumRepairPlanYearDetailAmount}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:24,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"所需数量"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["sbAmount",e.validatorRules.sbAmount],expression:"['sbAmount', validatorRules.sbAmount]",modifiers:{trim:!0}}],staticStyle:{width:"100%"},attrs:{min:1,placeholder:"请输入所需数量"}}),e._v(" 所需数量= 单列所需量 * 年度维修车辆数 ")],1)],1)],1)],1)],1),t("material-list",{ref:"MaterialModalForm",attrs:{multiple:!1},on:{ok:e.addTarget}})],1)},i=[],l=a("c1df"),o=a.n(l),s=(a("5c3a"),a("5633")),n=a("c54ca"),c=a("7164"),d={name:"MaterialPlanItemModal.vue",components:{LineSelectList:s["default"],MaterialList:c["default"]},data:function(){return{title:"操作",visible:!1,yearPickShow:!1,model:{},labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:14}},confirmLoading:!1,form:this.$form.createForm(this),rowNum:0,trainTotal:0,validatorRules:{sbYear:{rules:[{required:!0,message:"请选择年份!"}]},materialTypeName:{rules:[{required:!0,message:"请选择物资类型!"}]},sbAmount:{rules:[{required:!0,message:"请输入所需数量!"}]},sbType:{rules:[{required:!0,message:"请选择物料类别!"}]},lineId:{rules:[{required:!0,message:"请选择线路!"}]},repairProgramId:{rules:[{required:!0,message:"请选择修程!"}]}}}},watch:{rowNum:function(e){e&&this.trainTotal&&this.form.setFieldsValue({sbAmount:e*this.trainTotal})},trainTotal:function(e){e&&this.rowNum&&this.form.setFieldsValue({sbAmount:e*this.rowNum})}},created:function(){},methods:{handleOpenChange:function(e){this.yearPickShow=e},handlePanelChange:function(e){this.form.setFieldsValue({sbYear:o()(e).format("YYYY")}),this.sumRepairPlanYearDetailAmount(),this.yearPickShow=!1},openModal:function(){this.$refs.MaterialModalForm.showModal(),this.$refs.mySelect.blur()},addTarget:function(e){e&&1===e.length&&null!=e[0]&&(this.form.setFieldsValue({materialTypeName:e[0].name}),this.rowNum=e[0].num,this.materialTypeId=e[0].id)},sumRepairPlanYearDetailAmount:function(e){var t=this;e&&(this.form.setFieldsValue({repairProgramId:e}),this.$forceUpdate()),this.form.getFieldsValue().sbYear&&this.form.getFieldsValue().repairProgramId&&Object(n["nc"])({year:this.form.getFieldsValue().sbYear,programId:this.form.getFieldsValue().repairProgramId}).then((function(e){e.success&&(t.trainTotal=e.result)}))},add:function(){this.edit({})},edit:function(e){var t=this;this.form.resetFields(),this.visible=!0,this.model=Object.assign({},e),e.id?this.$nextTick((function(){t.form.setFieldsValue({sbYear:t.model.sbYear.toString(),materialTypeName:t.model.name,sbAmount:t.model.sbAmount})})):this.$nextTick((function(){t.form.setFieldsValue({sbYear:o()(new Date).format("YYYY")})}))},handleOk:function(){var e=this,t=this;t.form.validateFields((function(a,r){if(!a){t.confirmLoading=!0;var i,l=Object.assign(t.model,r,{sbYear:o()(r.sbYear).format("YYYY")});l.materialTypeId=e.materialTypeId,i=t.model.id?Object(n["H"])(l):Object(n["d"])(l),i.then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok"),t.close()):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1}))}}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},u=d,m=a("2877"),h=Object(m["a"])(u,r,i,!1,null,null,null);t["default"]=h.exports},9527:function(e,t,a){},b245:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"85%",title:"人员选择",visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",bodyStyle:{height:"70vh"},destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-row",[t("a-col",{attrs:{md:4,sm:24}},[t("div",{staticStyle:{height:"calc(70vh - 20px)","border-right":"1px solid #e3e1e1","margin-right":"15px"}},[e.treeData&&e.treeData.length>0?t("a-tree",{staticClass:"limitHeight",attrs:{defaultSelectedKeys:[e.queryParam.depId],defaultExpandAll:!0,"tree-data":e.treeData},on:{select:e.onSelect}}):e._e()],1)]),t("a-col",{attrs:{md:20,sm:24}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.findList.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"账号"}},[t("a-input",{attrs:{placeholder:"请输入用户账号"},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"真实名字"}},[t("a-input",{attrs:{placeholder:"请输入真实名字"},model:{value:e.queryParam.realname,callback:function(t){e.$set(e.queryParam,"realname",t)},expression:"queryParam.realname"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"手机号码"}},[t("a-input",{attrs:{placeholder:"请输入手机号码"},model:{value:e.queryParam.phone,callback:function(t){e.$set(e.queryParam,"phone",t)},expression:"queryParam.phone"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"角色"}},[t("j-dict-select-tag",{attrs:{triggerChange:!0,dictCode:"sys_role,role_name,id",placeholder:"选择角色"},model:{value:e.queryParam.roleId,callback:function(t){e.$set(e.queryParam,"roleId",t)},expression:"queryParam.roleId"}})],1)],1),t("a-col",{attrs:{md:2,sm:8}},[t("a-button",{on:{click:e.findList}},[e._v("查询")])],1)],1)],1)],1),t("div",{staticStyle:{height:"calc(70vh - 130px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(70vh - 130px)"},attrs:{border:"",align:e.allAlign,data:e.tableData,"max-height":"100%","show-overflow":"tooltip","radio-config":e.multiple?{}:{trigger:"row"},"checkbox-config":e.multiple?{trigger:"row",highlight:!0,range:!0}:{},"edit-config":{trigger:"manual",mode:"row"}}},[e.multiple?t("vxe-table-column",{attrs:{type:"checkbox",width:"5%"}}):t("vxe-table-column",{attrs:{type:"radio",width:"5%"}}),t("vxe-table-column",{attrs:{field:"workNo",title:"工号",width:"100",align:"center"}}),t("vxe-table-column",{attrs:{field:"username",title:"用户账号",width:"150",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"realname",title:"用户名字",width:"100",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"roleNames",title:"角色","min-width":"180",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"sex_dictText",title:"性别",width:"80"}}),t("vxe-table-column",{attrs:{field:"phone",title:"手机号码",width:"120"}}),t("vxe-table-column",{attrs:{field:"orgCode",title:"部门",width:"120",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",width:"80"}})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1)])],1)],1)},i=[],l=a("8fad"),o={name:"UserList",props:{multiple:{type:Boolean,default:!0},depId:{type:String,default:""}},data:function(){return{queryParam:{username:"",realname:"",phone:"",orgCode:"",roleId:void 0,pageNo:1,pageSize:10},allAlign:"center",totalResult:0,tableData:[],visible:!1,confirmLoading:!1,treeData:[]}},watch:{depId:function(e){this.$set(this.queryParam,"depId",e||"")}},mounted:function(){this.$set(this.queryParam,"depId",this.depId||"")},methods:{showModal:function(){this.visible=!0,this.findList(),this.getTreeList()},getTreeList:function(){var e=this;Object(l["yb"])().then((function(t){t.success&&(e.treeData=t.result)}))},onSelect:function(e,t){if(e.length){var a=t.node.dataRef;this.queryParam.depId=a.id,this.findList()}else this.queryParam.orgCode="",this.findList()},findList:function(){var e=this;this.loading=!0,Object(l["uc"])(this.queryParam).then((function(t){e.loading=!1,t.success?(e.totalResult=t.result.total,e.tableData=t.result.records):e.$message.error("加载用户数据失败")})).catch((function(t){e.$message.error("加载用户数据异常")})).finally((function(){}))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()},handleOk:function(){var e=[];this.multiple?e=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&e.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",e),this.visible=!1},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,Object.assign(this.$data,this.$options.data())}}},s=o,n=(a("f76d"),a("2877")),c=Object(n["a"])(s,r,i,!1,null,"4aa7956f",null);t["default"]=c.exports},f76d:function(e,t,a){"use strict";a("9527")}}]);