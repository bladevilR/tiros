(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e424d12","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7"],{"1aa7":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:"交接单详情",width:"85%",visible:e.visible,confirmLoading:e.confirmLoading,dialogClass:"fullDialog no-footer",destroyOnClose:!0,footer:null},on:{cancel:e.handleCancel}},[t("div",{staticClass:"content"},[t("div",{staticClass:"info-wrapper info-top-wrapper"},[t("h4",[e._v("交接信息")]),t("a-descriptions",{attrs:{bordered:""}},[t("a-descriptions-item",{attrs:{label:"交接单号"}},[e._v(" "+e._s(e.outInDetail.billNo)+" ")]),t("a-descriptions-item",{attrs:{label:"线路"}},[e._v(" "+e._s(e.outInDetail.lineName)+" ")]),t("a-descriptions-item",{attrs:{label:"车号"}},[e._v(" "+e._s(e.outInDetail.trainNo)+" ")]),t("a-descriptions-item",{attrs:{label:"交接单名"}},[e._v(" "+e._s(e.outInDetail.outinName)+" ")]),t("a-descriptions-item",{attrs:{label:"交接日期"}},[e._v(" "+e._s(e.outInDetail.transferDate)+" ")]),t("a-descriptions-item",{attrs:{label:"作业班组"}},[e._v(" "+e._s(e.outInDetail.sendGroupName)+" ")]),t("a-descriptions-item",{attrs:{label:"移交人"}},[e._v(" "+e._s(e.outInDetail.transferUserName)+" ")]),t("a-descriptions-item",{attrs:{label:"接收人"}},[e._v(" "+e._s(e.outInDetail.receiveUserName)+" ")]),t("a-descriptions-item",{attrs:{label:"工程师"}},[e._v(" "+e._s(e.outInDetail.engineerName)+" ")]),t("a-descriptions-item",{attrs:{label:0==e.outInDetail.billType?"接收厂商":"移交厂商"}},[e._v(" "+e._s(e.outInDetail.supplierName)+" ")])],1)],1)]),t("div",{staticClass:"content"},[t("div",{staticClass:"info-wrapper info-top-wrapper",staticStyle:{"margin-bottom":"0"}},[t("h4",[e._v("交接部件")]),t("div",{staticStyle:{height:"calc(100vh - 385px)"}},[t("vxe-table",{ref:"listTable",attrs:{border:"",height:"auto",align:e.allAlign,data:e.outInAsset,"show-overflow":"tooltip","edit-config":{trigger:"manual",mode:"row"}}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"40",align:"center"}}),t("vxe-table-column",{attrs:{field:"lineName",title:"线路",width:"100"}}),t("vxe-table-column",{attrs:{field:"trainNo",title:"车号",width:"100"}}),t("vxe-table-column",{attrs:{field:"assetName","header-align":"center",align:"left",title:"委外部件","min-width":"120"}}),t("vxe-table-column",{attrs:{field:"assetNo",title:"部件编号","min-width":"120"}}),t("vxe-table-column",{attrs:{field:"facadeStatus_dictText",title:"外观状态",width:"100"}}),t("vxe-table-column",{attrs:{field:"mixtoolStatus_dictText",title:"工装状态",width:"100"}}),t("vxe-table-column",{attrs:{field:"fault_dictText",title:"是否存在故障",width:"110"}}),t("vxe-table-column",{attrs:{field:"remark",title:"备注","header-align":"center",align:"left"}})],1)],1)])])])},n=[],l=(a("c1df"),a("b9c3")),s={name:"OutinDetail",data:function(){return{dictGroupStr:"bu_mtr_workshop_group,group_name,id,workshop_id='"+this.$store.getters.userInfo.workshopId+"'|workshop_id",outInDetail:{},outInAsset:[],totalResult:0,allAlign:"center",billType:0,form:this.$form.createForm(this),visible:!1,confirmLoading:!1,validatorRules:{engineerId:{rules:[{required:!0,message:"请选择工程师!"}]},trainNo:{rules:[{required:!0,message:"请选择车号!"}]},sendGroupId:{rules:[{required:!0,message:"请选择作业班组!"}]},receiveUser:{rules:[{required:!0,message:"请输入接车人!"}]},lineId:{rules:[{required:!0,message:"请选择所属线路!"}]}},labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}}}},methods:{show:function(e){this.visible=!0,this.outInDetail=e,this.outInAsset=e.outinDetails,this.billType=e.billType,this.edit(this.outInDetail)},showByTaskId:function(e){var t=this;Object(l["z"])({id:e}).then((function(e){e.success&&t.show(e.result)}))},edit:function(e){this.model=Object.assign({},e)},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},r=s,o=(a("6ad7"),a("2877")),c=Object(o["a"])(r,i,n,!1,null,"6b4c9904",null);t["default"]=c.exports},5633:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("span",[t("a-select",{key:e.key,attrs:{"allow-clear":"",value:e.getValueSting,disabled:e.disabled,placeholder:"线路"},on:{change:e.handleChange,select:e.onSelect}},[t("a-select-option",{attrs:{value:void 0}},[e._v("请选择")]),e._l(e.optionData,(function(a,i){return t("a-select-option",{key:i,attrs:{value:a.lineId}},[t("span",{staticStyle:{display:"inline-block",width:"100%"},attrs:{title:a.lineName}},[e._v(" "+e._s(a.lineName)+" ")])])}))],2)],1)},n=[],l=a("8fad"),s={name:"LineSelectList",props:{value:[String],triggerChange:Boolean,disabled:Boolean,defaultFirst:Boolean},data:function(){return{optionData:[],selectValue:"",key:0}},created:function(){this.findList()},computed:{getValueSting:function(){return null!=this.value?this.value.toString():void 0}},methods:{findList:function(){var e=this;Object(l["Jb"])().then((function(t){t.success&&(e.optionData=t.result,e.defaultFirst&&e.optionData&&e.optionData.length>0&&setTimeout((function(){e.$emit("change",e.optionData[0].lineId),e.$emit("input",e.optionData[0].lineId)}),500))}))},handleChange:function(e,t){var a="";if(t&&t.componentOptions.children[0].data&&(a=t.componentOptions.children[0].data.attrs.title),this.$emit("change",e),this.$emit("input",e),this.$emit("changeName",a),this.triggerChange)if(e){var i=this.optionData[t.key];this.$emit("change",e,i)}else this.$emit("change",e,null)},onSelect:function(e,t){if(e){var a=this.optionData[t.data.key];this.$emit("select",e,a)}else this.$emit("select","",null)}}},r=s,o=a("2877"),c=Object(o["a"])(r,i,n,!1,null,"77265147",null);t["default"]=c.exports},"6ad7":function(e,t,a){"use strict";a("dc75")},c658:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"交接"}},[t("a-input",{attrs:{placeholder:"请输入交接单号或者工单号",allowClear:""},model:{value:e.queryParam.billSearchText,callback:function(t){e.$set(e.queryParam,"billSearchText",t)},expression:"queryParam.billSearchText"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"部件"}},[t("a-input",{attrs:{placeholder:"请输入部件名或者编号",allowClear:""},model:{value:e.queryParam.assetSearchText,callback:function(t){e.$set(e.queryParam,"assetSearchText",t)},expression:"queryParam.assetSearchText"}})],1)],1),t("a-col",{attrs:{md:3,sm:24}},[t("a-form-item",{attrs:{label:"所属线路"}},[t("line-select-list",{on:{change:e.changeLine},model:{value:e.queryParam.lineId,callback:function(t){e.$set(e.queryParam,"lineId",t)},expression:"queryParam.lineId"}})],1)],1),t("a-col",{attrs:{md:3,sm:24}},[t("a-form-item",{attrs:{label:"车辆"}},[t("j-dict-select-seach-tag",{attrs:{triggerChange:!0,dictCode:e.dictTrainStr},on:{focus:e.handleSysFocus},model:{value:e.queryParam.trainId,callback:function(t){e.$set(e.queryParam,"trainId",t)},expression:"queryParam.trainId"}})],1)],1),t("a-col",{attrs:{md:8,sm:24}},[t("a-space",[t("a-button",{on:{click:e.findList}},[e._v("查询")]),t("a-button",{directives:[{name:"has",rawName:"v-has",value:"outsource:outin:add",expression:"'outsource:outin:add'"}],attrs:{type:"primary"},on:{click:function(t){return e.$refs.OutinEntrance.add(1)}}},[e._v("新增入库单")]),t("a-button",{directives:[{name:"has",rawName:"v-has",value:"outsource:outin:add",expression:"'outsource:outin:add'"}],attrs:{type:"primary"},on:{click:function(t){return e.$refs.OutinEntrance.add(0)}}},[e._v("新增出库单")]),t("a-button",{directives:[{name:"has",rawName:"v-has",value:"outsource:outin:edit",expression:"'outsource:outin:edit'"}],attrs:{disabled:1!=e.selectRecords.length},on:{click:e.editorEvent}},[e._v("编辑")]),t("a-button",{directives:[{name:"has",rawName:"v-has",value:"outsource:outin:delete",expression:"'outsource:outin:delete'"}],attrs:{disabled:e.selectRecords.length<1},on:{click:e.deleteEvent}},[e._v("删除")])],1)],1)],1)],1)],1),t("div",{staticStyle:{height:"calc(100vh - 255px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(100vh - 255px)"},attrs:{border:"","auto-resize":"","max-height":"100%",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","checkbox-config":{trigger:"row",highlight:!0,range:!0},"edit-config":{trigger:"manual",mode:"row"}},on:{"checkbox-change":e.rowSelectChange,"checkbox-all":e.rowSelectChange}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),t("vxe-table-column",{attrs:{field:"lineName",title:"线路",width:"80"}}),t("vxe-table-column",{attrs:{field:"trainNo",title:"车号",width:"80"}}),t("vxe-table-column",{attrs:{field:"billType_dictText",title:"类型",width:"80"}}),t("vxe-table-column",{attrs:{field:"billNo",title:"单号","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(a){var i=a.row;return[t("a",{on:{click:function(t){return t.stopPropagation(),e.outInDetail(i)}}},[e._v(e._s(i.billNo))])]}}])}),t("vxe-table-column",{attrs:{field:"contactPhone",title:"交接单描述","min-width":"120","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{field:"sendGroupName",title:"交接班组",width:"100"}}),t("vxe-table-column",{attrs:{field:"transferUserName",title:"移交人员",width:"100"}}),t("vxe-table-column",{attrs:{field:"receiveUserName",title:"接收人员",width:"100"}}),t("vxe-table-column",{attrs:{field:"engineerName",title:"工程师",width:"100"}}),t("vxe-table-column",{attrs:{field:"transferDate",title:"交接日期",width:"100"}}),t("vxe-table-column",{attrs:{field:"workOrderNo",title:"交接工单","min-width":"120"}}),t("vxe-table-column",{attrs:{field:"outinName",title:"交接工单名称","min-width":"120"}}),t("vxe-table-column",{attrs:{field:"remark",title:"备注","min-width":"120","header-align":"center",align:"left"}})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}}),t("outin-detail",{ref:"outInDetail"}),t("OutinEntrance",{ref:"OutinEntrance",on:{ok:e.findList}})],1)])},n=[],l=a("d214"),s=a("1aa7"),r=a("3f22"),o=a("5633"),c={name:"Outin",components:{OutinDetail:s["default"],LineSelectList:o["default"],OutinEntrance:r["default"]},data:function(){return{queryParam:{assetSearchText:"",billSearchText:"",lineId:"",trainId:"",pageNo:1,pageSize:10},dictTrainStr:"",totalResult:0,allAlign:"center",selectRecords:[],tableData:[]}},created:function(){this.findList()},methods:{editorEvent:function(){this.$refs.OutinEntrance.edit(this.selectRecords[0])},deleteEvent:function(){var e=this,t=this.selectRecords.map((function(e){return e.id})).join(",");this.$confirm({content:"确定要删除选中的出入单吗？",onOk:function(){return Object(l["u"])("ids=".concat(t)).then((function(t){t.success&&(e.$message.success("删除成功"),e.findList())}))}})},rowSelectChange:function(){this.selectRecords=this.$refs.listTable.getCheckboxRecords()},handleSysFocus:function(){this.queryParam.lineId||this.$message.warn("请先选择线路!")},openSupplierModal:function(e){1===e?(this.supplierSelectType=1,this.$refs.supplierModal.showModal(),this.$refs.mySupplierSelectOut.blur()):(this.supplierSelectType=2,this.$refs.supplierModal.showModal(),this.$refs.mySupplierSelectIn.blur())},changeLine:function(e,t){this.dictTrainStr="",e&&(this.dictTrainStr="bu_train_info,train_no,train_no,line_id="+e+"|train_struct_id")},findList:function(){var e=this;Object(l["Q"])(this.queryParam).then((function(t){e.totalResult=t.result.total,e.loading=!1,e.tableData=t.result.records,e.selectRecords=[]}))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()},loadData:function(){this.findList(),this.$emit("load")},outInDetail:function(e){this.$refs.outInDetail.show(e)}}},u=c,d=a("2877"),h=Object(d["a"])(u,i,n,!1,null,"6c7c8dc0",null);t["default"]=h.exports},dc75:function(e,t,a){}}]);