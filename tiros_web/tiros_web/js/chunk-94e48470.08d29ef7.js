(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-94e48470","chunk-49b93d74","chunk-29096d72","chunk-08efa9d3","chunk-2d20e8a3","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7"],{"12df":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("div",{staticClass:"content"},[t("div",{staticClass:"info-wrapper info-top-wrapper",staticStyle:{"margin-bottom":"20px"}},[t("h4",[e._v("基本信息")]),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"合同编号"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["contractNo",e.validatorRules.contractNo],expression:"['contractNo', validatorRules.contractNo]"}],attrs:{disabled:"",placeholder:"合同编号"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"合同名称"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["contractName",e.validatorRules.contractName],expression:"['contractName', validatorRules.contractName]"}],attrs:{disabled:"",placeholder:"合同名称"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"合同厂商"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["supplierName",e.validatorRules.supplierName],expression:"['supplierName', validatorRules.supplierName]"}],attrs:{disabled:"",placeholder:"合同厂商"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"合同金额"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["amount",e.validatorRules.amount],expression:"['amount', validatorRules.amount]"}],staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"合同金额",formatter:function(e){return"".concat(e,"万")},parser:function(e){return e.replace("万","")},min:0,step:.1,max:99999999}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"合同税率"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["taxRate",e.validatorRules.taxRate],expression:"['taxRate', validatorRules.taxRate]"}],staticStyle:{width:"100%"},attrs:{disabled:"",formatter:function(e){return"".concat(e,"%")},parser:function(e){return e.replace("%","")},min:0,step:.1,max:100,placeholder:"合同税率"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"执行税率"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["executeTaxRate",e.validatorRules.executeTaxRate],expression:"['executeTaxRate', validatorRules.executeTaxRate]"}],staticStyle:{width:"100%"},attrs:{disabled:"",formatter:function(e){return"".concat(e,"%")},parser:function(e){return e.replace("%","")},min:0,step:.1,max:100,placeholder:"执行税率"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"合同状态"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",e.validatorRules.status],expression:"['status', validatorRules.status]"}],attrs:{disabled:"",placeholder:"选择合同状态",triggerChange:!0,dictCode:"bu_contract_status"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"保证金类型"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator",value:["depositType",e.validatorRules.depositType],expression:"['depositType', validatorRules.depositType]"}],attrs:{disabled:"",triggerChange:!0,placeholder:"选择保证金类型",dictCode:"bu_contract_deposit_type"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"履约保证金"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["deposit",{initialValue:0}],expression:"['deposit', { initialValue: 0 }]"}],staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"履约保证金",formatter:function(e){return"".concat(e,"万")},parser:function(e){return e.replace("万","")},min:0,step:.1,max:99999999}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"所属线路"}},[t("line-select-list",{directives:[{name:"decorator",rawName:"v-decorator",value:["lineId",e.validatorRules.lineId],expression:"['lineId', validatorRules.lineId]"}],attrs:{disabled:"","trigger-change":!0},on:{change:e.handleLine}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"开始时间"}},[t("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["startDate",e.validatorRules.startDate],expression:"['startDate', validatorRules.startDate]"}],staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"开始时间"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"终止日期"}},[t("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["finishDate",e.validatorRules.finishDate],expression:"['finishDate', validatorRules.finishDate]"}],staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"终止日期"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"质保期"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["expiration",e.validatorRules.expiration],expression:"['expiration', validatorRules.expiration]"}],staticStyle:{width:"80%"},attrs:{disabled:"",placeholder:"质保期",min:0,max:99999999,precision:0}}),e._v(" 个月 ")],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"质保金类型"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator",value:["qualityDepositType"],expression:"['qualityDepositType']"}],attrs:{disabled:"",triggerChange:!0,placeholder:"选择质保金类型",dictCode:"bu_contract_deposit_type"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"质保金比例"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["qualityDepositPercent",e.validatorRules.qualityDepositPercent],expression:"['qualityDepositPercent', validatorRules.qualityDepositPercent]"}],staticStyle:{width:"100%"},attrs:{disabled:"",formatter:function(e){return"".concat(e,"%")},parser:function(e){return e.replace("%","")},min:0,step:.1,max:100,placeholder:"质保金比例"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"预付款"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["advancePayment",{initialValue:0}],expression:"['advancePayment', { initialValue: 0 }]"}],staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"输入预付款",formatter:function(e){return"".concat(e,"万")},parser:function(e){return e.replace("万","")},min:0,step:.1,max:99999999}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"合同部件",required:"true"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["assetTypeName",e.validatorRules.assetTypeName],expression:"['assetTypeName', validatorRules.assetTypeName]",modifiers:{trim:!0}}],ref:"mySelect",attrs:{disabled:"",placeholder:"请选择",open:!1,showArrow:!0},on:{focus:e.openModal}},[t("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"合同部件别名"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["assetTypeAlias",e.validatorRules.assetTypeAlias],expression:"['assetTypeAlias',validatorRules.assetTypeAlias]"}],attrs:{disabled:"",placeholder:"合同部件别名"}})],1)],1),t("a-col",{attrs:{md:6,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"每列部件数量"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["assetAmount",e.validatorRules.assetAmount],expression:"['assetAmount', validatorRules.assetAmount]"}],attrs:{disabled:"",placeholder:"每列部件数量"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"车辆数"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["trainAmount",e.validatorRules.trainAmount],expression:"['trainAmount', validatorRules.trainAmount]"}],staticStyle:{width:"100%"},attrs:{disabled:"",min:1,placeholder:"输入车辆数"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"已完成数"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["finishAmount",e.validatorRules.finishAmount],expression:"['finishAmount', validatorRules.finishAmount]"}],staticStyle:{width:"100%"},attrs:{disabled:"",min:0,placeholder:"输入已完成数"}})],1)],1),t("a-col",{attrs:{md:6,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"修程类型"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator",value:["repairProgramId",e.validatorRules.repairProgramId],expression:"['repairProgramId', validatorRules.repairProgramId]"}],attrs:{disabled:"",triggerChange:!0,placeholder:"请选择修程类型",dictCode:"bu_repair_program,name,id"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"计数开始"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["payBegin"],expression:"['payBegin']"}],staticStyle:{width:"100%"},attrs:{disabled:"",min:1,placeholder:"从第几列开始计算"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"支付间隔数"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["payInterval"],expression:"['payInterval']"}],staticStyle:{width:"100%"},attrs:{disabled:"",min:1,placeholder:"每隔多少列支付一次"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"维修周期"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["needDay",e.validatorRules.needDay],expression:"['needDay', validatorRules.needDay]"}],staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"自然日",min:0,max:999999999,precision:0}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"签订日期"}},[t("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["signDate"],expression:"['signDate']"}],staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"签订日期"}})],1)],1),t("a-col",{attrs:{md:18,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"支付条款"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["attention",e.validatorRules.attention],expression:"['attention', validatorRules.attention]"}],staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"支付条款"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:18,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"监修信息"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["superInfo",e.validatorRules.superInfo],expression:"['superInfo', validatorRules.superInfo]"}],staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"输入监修信息"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:18,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"培训信息"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["trainInfo",e.validatorRules.trainInfo],expression:"['trainInfo', validatorRules.trainInfo]"}],staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"输入培训信息"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:18,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"备注"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark",e.validatorRules.remark],expression:"['remark', validatorRules.remark]"}],staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"备注"}})],1)],1)],1)],1)]),t("div",{staticClass:"content"},[t("div",{staticClass:"info-wrapper info-top-wrapper"},[t("h4",[e._v("合同附件")]),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:18,sm:24,offset:3}},[t("vxe-table",{attrs:{border:"",data:e.annexList,"show-overflow":"tooltip","edit-config":{trigger:"manual",mode:"row"}}},[t("div",{}),t("vxe-table-column",{attrs:{type:"index",title:"序号",width:"50px","header-align":"center",align:"center"}}),t("vxe-table-column",{attrs:{field:"name",title:"文件名","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{field:"type",title:"文件类型",width:"120px","header-align":"center",align:"center"}}),t("vxe-table-column",{attrs:{field:"fileSize",title:"文件大小",width:"180px","header-align":"center",align:"center"}}),t("vxe-table-column",{attrs:{title:"操作",width:"160px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("a",{staticStyle:{"margin-right":"12px"},on:{click:function(t){return t.stopPropagation(),e.handleSeeing(r)}}},[e._v("查看")]),t("a",{staticStyle:{"margin-left":"12px"},on:{click:function(t){return t.stopPropagation(),e.handleDownload(r)}}},[e._v("下载")])]}}])})],1)],1)],1)],1)]),t("doc-preview-modal",{ref:"docPreview",attrs:{title:e.fileName}}),t("train-asset-type",{ref:"selectModal",attrs:{multiple:!1,trainTypeId:e.trainTypeId},on:{ok:e.addTarget}})],1)],1)},o=[],l=a("b098"),i=a("c1df"),n=a.n(i),s=a("8fad"),c=a("d214"),d=a("e2aa"),u=a("2cb5"),m=a("ca00"),p=a("5633"),f=a("353a"),h=a("5371");function v(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",o=a.toStringTag||"@@toStringTag";function l(a,r,o,l){var s=r&&r.prototype instanceof n?r:n,c=Object.create(s.prototype);return g(c,"_invoke",function(a,r,o){var l,n,s,c=0,d=o||[],u=!1,m={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,a){return l=t,n=0,s=e,m.n=a,i}};function p(a,r){for(n=a,s=r,t=0;!u&&c&&!o&&t<d.length;t++){var o,l=d[t],p=m.p,f=l[2];a>3?(o=f===r)&&(s=l[(n=l[4])?5:(n=3,3)],l[4]=l[5]=e):l[0]<=p&&((o=a<2&&p<l[1])?(n=0,m.v=r,m.n=l[1]):p<f&&(o=a<3||l[0]>r||r>f)&&(l[4]=a,l[5]=r,m.n=f,n=0))}if(o||a>1)return i;throw u=!0,r}return function(o,d,f){if(c>1)throw TypeError("Generator is already running");for(u&&1===d&&p(d,f),n=d,s=f;(t=n<2?e:s)||!u;){l||(n?n<3?(n>1&&(m.n=-1),p(n,s)):m.n=s:m.v=s);try{if(c=2,l){if(n||(o="next"),t=l[o]){if(!(t=t.call(l,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,n<2&&(n=0)}else 1===n&&(t=l.return)&&t.call(l),n<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),n=1);l=e}else if((t=(u=m.n<0)?s:a.call(r,m))!==i)break}catch(t){l=e,n=1,s=t}finally{c=1}}return{value:t,done:u}}}(a,o,l),!0),c}var i={};function n(){}function s(){}function c(){}t=Object.getPrototypeOf;var d=[][r]?t(t([][r]())):(g(t={},r,(function(){return this})),t),u=c.prototype=n.prototype=Object.create(d);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,g(e,o,"GeneratorFunction")),e.prototype=Object.create(u),e}return s.prototype=c,g(u,"constructor",c),g(c,"constructor",s),s.displayName="GeneratorFunction",g(c,o,"GeneratorFunction"),g(u),g(u,o,"Generator"),g(u,r,(function(){return this})),g(u,"toString",(function(){return"[object Generator]"})),(v=function(){return{w:l,m:m}})()}function g(e,t,a,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}g=function(e,t,a,r){function l(t,a){g(e,t,(function(e){return this._invoke(t,a,e)}))}t?o?o(e,t,{value:a,enumerable:!r,configurable:!r,writable:!r}):e[t]=a:(l("next",0),l("throw",1),l("return",2))},g(e,t,a,r)}function b(e,t,a,r,o,l,i){try{var n=e[l](i),s=n.value}catch(e){return void a(e)}n.done?t(s):Promise.resolve(s).then(r,o)}function y(e){return function(){var t=this,a=arguments;return new Promise((function(r,o){var l=e.apply(t,a);function i(e){b(l,r,o,i,n,"next",e)}function n(e){b(l,r,o,i,n,"throw",e)}i(void 0)}))}}var w={name:"ContractInfoBasic",components:{JTreeSelect:l["default"],TrainAssetType:u["default"],LineSelectList:p["default"],DocUpload:h["default"],DocPreviewModal:f["default"]},props:["contractDetail"],data:function(){return{title:"新增",trainTypeId:"",assetTypeId:"",back:!0,detail:{},lineId:"",form:this.$form.createForm(this),confirmLoading:!1,defaultFileList:[],annexList:[],filePath:"",fileName:"",status:!1,visible:!1,validatorRules:{contractName:{rules:[{required:!0,message:"请输入合同名称!"},{max:32,message:"输入长度不能超过32字符!"}]},contractNo:{rules:[{required:!0,message:"请输入合同编号!"},{max:32,message:"输入长度不能超过32字符!"}]},attention:{rules:[{max:255,message:"输入长度不能超过255字符!"}]},remark:{rules:[{max:255,message:"输入长度不能超过255字符!"}]},supplierId:{rules:[{required:!0,message:"请选择厂商!"}]},amount:{rules:[{required:!0,message:"请输入合同金额!"}]},taxRate:{rules:[{required:!0,message:"请输入合同税率!"}]},status:{rules:[{required:!0,message:"请选择合同状态!"}]},lineId:{rules:[{required:!0,message:"请选择所属线路!"}]},startDate:{rules:[{required:!0,message:"请输入开始时间!"}]},finishDate:{rules:[{required:!0,message:"请输入终止时间!"}]},signDate:{rules:[{required:!0,message:"请输入签订时间!"}]},expiration:{rules:[{required:!0,message:"请输入质保期!"}]},trainAmount:{rules:[{required:!0,message:"输入车辆数!"}]},finishAmount:{rules:[{required:!0,message:"输入已完成数!"}]},repairProgramId:{rules:[{required:!0,message:"请选择修程类型!"}]},assetTypeAlias:{rules:[{max:150,message:"输入长度不能超过150字符!"}]}},labelCol1:{xs:{span:24},sm:{span:9}},wrapperCol1:{xs:{span:24},sm:{span:15}},labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:21}}}},watch:{contractDetail:{immediate:!0,handler:function(e){e&&(this.detail=this.contractDetail,this.back=!1,this.edit(this.detail))}}},methods:{handleLine:function(e){var t=this;Object(m["e"])(e)?this.trainTypeId="":Object(s["Ib"])({lineId:e}).then((function(e){e.success&&(t.trainTypeId=e.result.trainTypeId)}))},openModal:function(){Object(m["e"])(this.trainTypeId)?this.$message.error("请先选择线路!"):(this.$refs.selectModal.showModal(),this.$refs.mySelect.blur())},addTarget:function(e){Object(m["e"])(e)||(this.assetTypeId=e[0].id,this.form.setFieldsValue({assetTypeName:e[0].name}))},successUploadFile:function(e){var t=this;!e||e.length<1||(e.map((function(e){Object.assign(e,{id:Object(m["p"])()}),t.annexList.push(e)})),this.confirmLoading=!1,Object(s["d"])(e).then((function(e){t.confirmLoading=!1})))},uploadFail:function(e){this.confirmLoading=!1},onRemoveFile:function(e){},beginUpload:function(){this.confirmLoading=!0,this.$refs.upload.beginUpload()},handlePrivilege:function(){var e=y(v().m((function e(t,a){var r,o=this;return v().w((function(e){while(1)switch(e.n){case 0:return r={id:t,operation:a},e.n=1,Object(s["Ic"])(r).then((function(e){o.status=e.result}));case 1:return e.a(2)}}),e)})));function t(t,a){return e.apply(this,arguments)}return t}(),handleSeeing:function(){var e=y(v().m((function e(t){return v().w((function(e){while(1)switch(e.n){case 0:return e.n=1,this.handlePrivilege(t.id,2);case 1:this.status?(this.fileName=t.fileName,this.$refs.docPreview.handleFilePath(t.savepath)):this.$message.error("您没有权限!");case 2:return e.a(2)}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleDelete:function(){var e=y(v().m((function e(t,a){var r;return v().w((function(e){while(1)switch(e.n){case 0:r=this,r.$confirm({title:"提示",content:"确定删除该条附件吗？",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){Object(c["t"])({ids:t.id}).then((function(e){e.success?(r.annexList.splice(a,1),r.$message.success(e.message)):r.$message.error(e.message)}))},onCancel:function(){}});case 1:return e.a(2)}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}(),handleDownload:function(){var e=y(v().m((function e(t){return v().w((function(e){while(1)switch(e.n){case 0:return e.n=1,this.handlePrivilege(t.id,3);case 1:this.status?Object(d["b"])(t.savepath):this.$message.error("您没有权限!");case 2:return e.a(2)}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleOk:function(){var e=this;this.form.validateFields((function(t,a){if(!t){e.beginUpload();var r=Object.assign({},e.model,a,{startDate:n()(a.startDate).format("YYYY-MM-DD"),finishDate:n()(a.applyDate).format("YYYY-MM-DD"),signDate:n()(a.signDate).format("YYYY-MM-DD"),assetTypeId:e.assetTypeId,extInfo:{superInfo:a.superInfo,trainInfo:a.trainInfo}});setTimeout((function(){var t;r.annexList=e.annexList,e.confirmLoading=!0,t=Object(m["e"])(e.model)?Object(c["b"])(r):Object(c["w"])(r),t.then((function(t){t.success?(e.$message.success(t.message),e.$emit("ok"),e.close()):e.$message.error(t.message)})).finally((function(){return e.confirmLoading=!1}))}),800)}}))},add:function(){this.edit({})},edit:function(e){var t=this;this.visible=!0,this.form.resetFields(),this.model=Object.assign({},e),Object(m["e"])(e)?this.assetTypeId="":(this.assetTypeId=this.model.assetTypeId,this.handleLine(this.model.lineId)),Object(m["e"])(this.model.extInfo)||this.$nextTick((function(){t.form.setFieldsValue({superInfo:t.model.extInfo.superInfo,trainInfo:t.model.extInfo.trainInfo})})),this.$nextTick((function(){Object(c["G"])({contractId:t.model.id}).then((function(e){e.success&&e.result.length&&(t.annexList=e.result||[])})),t.form.setFieldsValue({amount:t.model.amount,contractName:t.model.contractName,contractNo:t.model.contractNo,finishDate:n()(t.model.finishDate||void 0),signDate:n()(t.model.signDate||void 0),startDate:n()(t.model.startDate||void 0),status:t.model.status,taxRate:t.model.taxRate,assetTypeName:t.model.assetTypeName,attention:t.model.attention,behindMoney:t.model.behindMoney,deposit:t.model.deposit,expiration:t.model.expiration,lineId:t.model.lineId,supplierName:t.model.supplierName,remark:t.model.remark,needDay:t.model.needDay,qualityDepositPercent:t.model.qualityDepositPercent,depositType:t.model.depositType,advancePayment:t.model.advancePayment,assetAmount:t.model.assetAmount,executeTaxRate:t.model.executeTaxRate,trainAmount:t.model.trainAmount,finishAmount:t.model.finishAmount,repairProgramId:t.model.repairProgramId,qualityDepositType:t.model.qualityDepositType,payInterval:t.model.payInterval,payBegin:t.model.payBegin,assetTypeAlias:t.model.assetTypeAlias})}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},x=w,C=(a("6769"),a("2877")),k=Object(C["a"])(x,r,o,!1,null,"0af360a9",null);t["default"]=k.exports},"19c3":function(e,t,a){"use strict";a("d8b7")},"1c10":function(e,t,a){"use strict";a("ccd6")},"2cb5":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"90%",centered:"",title:e.title,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",destroyOnClose:!0,bodyStyle:{height:"80vh"}},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchQuery.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:7,sm:24}},[t("a-form-item",{attrs:{label:"名称"}},[t("a-input",{attrs:{placeholder:"名称或编码","allow-clear":""},model:{value:e.queryParam.searchText,callback:function(t){e.$set(e.queryParam,"searchText",t)},expression:"queryParam.searchText"}})],1)],1),t("a-col",{attrs:{md:7,sm:24}},[t("a-form-item",{attrs:{label:"状态"}},[t("j-dict-select-tag",{attrs:{dictCode:"bu_enable"},model:{value:e.queryParam.status,callback:function(t){e.$set(e.queryParam,"status",t)},expression:"queryParam.status"}})],1)],1),t("a-col",{attrs:{md:3,sm:12}},[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-button",{on:{click:e.searchQuery}},[e._v("查询")])],1)])],1)],1)],1),t("div",{staticStyle:{height:"calc(80vh - 85px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(80vh - 85px)"},attrs:{border:"","max-height":"100%","row-id":"id",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","radio-config":e.multiple?{}:{trigger:"row",checkMethod:e.checkRadioMethod},"checkbox-config":e.multiple?{trigger:"row",highlight:!0,checkMethod:e.checkRadioMethod}:{},"tree-config":{lazy:!0,children:"children",hasChild:"hasChildren",loadMethod:e.loadChildrenMethod}}},[e.multiple?t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}):t("vxe-table-column",{attrs:{type:"radio",width:"40"}}),t("vxe-table-column",{attrs:{field:"name",title:"名称","tree-node":"",align:"left"}}),t("vxe-table-column",{attrs:{align:"left","header-align":"center",field:"code",title:"编码",width:"15%"}}),t("vxe-table-column",{attrs:{field:"structType_dictText",title:"类型",width:"10%"}}),t("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",width:"10%"}}),t("vxe-table-column",{attrs:{field:"placeCode",title:"位置编码",width:"15%"}}),t("vxe-table-column",{attrs:{field:"placeDesc",title:"位置描述",width:"15%"}})],1)],1)])},o=[],l=a("8fad"),i={name:"TrainAssetType",props:{trainTypeId:{type:String,default:""},parentId:{type:String,default:null},multiple:{type:Boolean,default:!0},title:{type:String,default:"设备类型选择"},canSelectType:{type:Array,default:function(){return[1,2,3,4]}}},data:function(){return{queryParam:{trainTypeId:"",id:"",searchText:"",status:null,structType:null},allAlign:"center",tableData:[],treeData:[],selectParent:"",visible:!1,confirmLoading:!1}},mounted:function(){},methods:{showModal:function(){this.visible=!0,this.queryParam.trainTypeId=this.trainTypeId,this.findList()},handleOk:function(){var e=[];this.multiple?e=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&e.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",e),this.visible=!1},handleCancel:function(){this.$emit("cancel"),this.close()},close:function(){this.$emit("close"),this.visible=!1},findList:function(){var e=this;this.loading=!0,this.parentId&&(this.queryParam.id=this.parentId),this.selectParent&&(this.queryParam.id=this.selectParent),Object(l["Qd"])(this.queryParam).then((function(t){t.success&&(e.loading=!1,e.tableData=t.result)}))},findSelectList:function(){var e=this,t={id:this.parentId,trainTypeId:this.trainTypeId};this.parentId&&(t.id=this.parentId),Object(l["Qd"])(t).then((function(t){t.success&&(e.loading=!1,e.treeData=t.result.map((function(t){return e.genSelectTreeNode(t)})))}))},loadChildrenMethod:function(e){var t=this,a=e.row,r={trainTypeId:this.trainTypeId,id:a.id};return new Promise((function(e){Object(l["Qd"])(r).then((function(a){a.success?e(a.result):t.$message.error("".concat(a.msg))}))}))},loadSelectNodeMethod:function(e){var t=this,a={trainTypeId:this.trainTypeId,id:e.dataRef.id,searchText:this.queryParam.searchText,status:this.queryParam.status,structType:this.queryParam.structType};return new Promise((function(e){Object(l["Qd"])(a).then((function(e){e.success?e.result.map((function(e){t.treeData=t.treeData.concat(t.genSelectTreeNode(e))})):t.$message.warning(e.message)})),e()}))},genSelectTreeNode:function(e){return{id:e.id,pId:e.parentId,value:e.id,title:e.name,isLeaf:!e.hasChildren}},searchQuery:function(){this.findList()},checkRadioMethod:function(e){var t=e.row;return this.canSelectType.indexOf(t.structType)>-1}}},n=i,s=(a("9589"),a("2877")),c=Object(s["a"])(n,r,o,!1,null,"52968c59",null);t["default"]=c.exports},"360a":function(e,t,a){},"3aa0":function(e,t,a){},"3ae5":function(e,t,a){"use strict";a("bb9c")},"3c75":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"85%",visible:e.visible,confirmLoading:e.confirmLoading,closable:!0,footer:null,destroyOnClose:!0},on:{cancel:e.handleCancel}},[t("div",[t("a-tabs",{attrs:{"active-key":e.activeKey},on:{change:e.handleActive}},[t("a-tab-pane",{key:"1",attrs:{tab:"开工审核情况",forceRender:!0}},[t("perform-resource",{attrs:{contractId:e.contractId,fileType:1}})],1),t("a-tab-pane",{key:"2",attrs:{tab:"计划实现情况"}},[t("perform-resource",{attrs:{contractId:e.contractId,fileType:2}})],1),t("a-tab-pane",{key:"3",attrs:{tab:"质量情况"}},[t("perform-resource",{attrs:{contractId:e.contractId,fileType:3}})],1),t("a-tab-pane",{key:"4",attrs:{tab:"售后响应情况"}},[t("perform-resource",{attrs:{contractId:e.contractId,fileType:4}})],1)],1)],1)])},o=[],l=a("aae0"),i={name:"PerformDetail",components:{PerformResource:l["default"]},data:function(){return{title:"",confirmLoading:!1,visible:!1,activeKey:"1",contractId:"",supplierId:""}},methods:{show:function(e,t){this.contractId=e,this.supplierId=t,this.visible=!0},handleActive:function(e){this.activeKey=e},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,this.activeKey="1"}}},n=i,s=a("2877"),c=Object(s["a"])(n,r,o,!1,null,"12cdac98",null);t["default"]=c.exports},"54f6":function(e,t,a){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,n(r.key),r)}}function i(e,t,a){return t&&l(e.prototype,t),a&&l(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function n(e){var t=s(e,"string");return"symbol"==r(t)?t:t+""}function s(e,t){if("object"!=r(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var o=a.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}a.d(t,"a",(function(){return c}));var c=function(){function e(t,a){var r=this,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};o(this,e),this.options={attrs:[]},Object.assign(this.options,l),this.options.attrs.find((function(e){return"edit"===e.key}))||this.options.attrs.push({key:"edit"}),this.options.attrs.forEach((function(e){Object.hasOwnProperty.call(e,"key")&&(r[e.key]=!1),Object.hasOwnProperty.call(e,"judge")||(e["judge"]=function(e){return!0})})),this.del=!1,this.nextTick=t.$nextTick,this.refs=t.$refs,this.refName=a,t.$nextTick((function(){r.vxeTable=t.$refs[a]}))}return i(e,[{key:"editRow",get:function(){if(this.edit){var e=this.vxeTable.getCheckboxRecords();return e.length?e[0]:{}}return{}}},{key:"update",value:function(){var e=this;this.nextTick((function(){e.vxeTable||(e.vxeTable=e.refs[e.refName]);var t=e.vxeTable.getCheckboxRecords();e.del=t.length>0,e.options.attrs.forEach((function(a){for(var r in a)Object.hasOwnProperty.call(a,r)&&(a["isDel"]?t.length?e[a.key]=t.length>0&&a.judge(t[0]):e[a.key]=!1:t.length?e[a.key]=1===t.length&&a.judge(t[0]):e[a.key]=!1)}))}))}}])}()},5633:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("span",[t("a-select",{key:e.key,attrs:{"allow-clear":"",value:e.getValueSting,disabled:e.disabled,placeholder:"线路"},on:{change:e.handleChange,select:e.onSelect}},[t("a-select-option",{attrs:{value:void 0}},[e._v("请选择")]),e._l(e.optionData,(function(a,r){return t("a-select-option",{key:r,attrs:{value:a.lineId}},[t("span",{staticStyle:{display:"inline-block",width:"100%"},attrs:{title:a.lineName}},[e._v(" "+e._s(a.lineName)+" ")])])}))],2)],1)},o=[],l=a("8fad"),i={name:"LineSelectList",props:{value:[String],triggerChange:Boolean,disabled:Boolean,defaultFirst:Boolean},data:function(){return{optionData:[],selectValue:"",key:0}},created:function(){this.findList()},computed:{getValueSting:function(){return null!=this.value?this.value.toString():void 0}},methods:{findList:function(){var e=this;Object(l["Jb"])().then((function(t){t.success&&(e.optionData=t.result,e.defaultFirst&&e.optionData&&e.optionData.length>0&&setTimeout((function(){e.$emit("change",e.optionData[0].lineId),e.$emit("input",e.optionData[0].lineId)}),500))}))},handleChange:function(e,t){var a="";if(t&&t.componentOptions.children[0].data&&(a=t.componentOptions.children[0].data.attrs.title),this.$emit("change",e),this.$emit("input",e),this.$emit("changeName",a),this.triggerChange)if(e){var r=this.optionData[t.key];this.$emit("change",e,r)}else this.$emit("change",e,null)},onSelect:function(e,t){if(e){var a=this.optionData[t.data.key];this.$emit("select",e,a)}else this.$emit("select","",null)}}},n=i,s=a("2877"),c=Object(s["a"])(n,r,o,!1,null,"77265147",null);t["default"]=c.exports},6769:function(e,t,a){"use strict";a("aa6b")},6920:function(e,t,a){"use strict";a("360a")},"6c86":function(e,t,a){"use strict";a("e0bf")},"6d6e":function(e,t,a){},7237:function(e,t,a){},"75a7":function(e,t,a){"use strict";a("3aa0")},"769e":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"80%",title:"厂商选择",visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",centered:"",destroyOnClose:!0,bodyStyle:{height:"80vh"}},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"名称"}},[t("a-input",{attrs:{placeholder:"请输入名称"},model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,"name",t)},expression:"queryParam.name"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"修程类型"}},[t("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_repair_program,name,id"},model:{value:e.queryParam.repairProgramId,callback:function(t){e.$set(e.queryParam,"repairProgramId",t)},expression:"queryParam.repairProgramId"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"所属线路"}},[t("line-select-list",{model:{value:e.queryParam.lineId,callback:function(t){e.$set(e.queryParam,"lineId",t)},expression:"queryParam.lineId"}})],1)],1),t("a-col",{attrs:{md:4,sm:24}},[t("a-form-item",{attrs:{label:"状态"}},[t("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_effective"},model:{value:e.queryParam.status,callback:function(t){e.$set(e.queryParam,"status",t)},expression:"queryParam.status"}})],1)],1),t("a-col",{attrs:{md:4,sm:8}},[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-space",[t("a-button",{on:{click:e.findList}},[e._v("查询")])],1)],1)])],1)],1)],1),t("div",{staticStyle:{height:"calc(80vh - 130px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(80vh - 130px)"},attrs:{border:"","max-height":"100%",align:e.allAlign,data:e.tableData,"highlight-current-row":"","show-overflow":"tooltip","radio-config":e.multiple?{}:{trigger:"row"},"checkbox-config":e.multiple?{trigger:"row",highlight:!0,range:!0}:{},"edit-config":{trigger:"click",mode:"cell",showIcon:"true"}}},[e.multiple?t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}):t("vxe-table-column",{attrs:{type:"radio",width:"40"}}),t("vxe-table-column",{attrs:{field:"name",title:"厂商名称","min-width":"140","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{field:"shortName",title:"厂商简称","min-width":"120"}}),t("vxe-table-column",{attrs:{field:"category_dictText",title:"厂商类别",width:"80"}}),t("vxe-table-column",{attrs:{field:"repairProgramName",title:"所属修程",width:"8%"}}),t("vxe-table-column",{attrs:{field:"lineName",title:"所属线路",width:"8%"}}),t("vxe-table-column",{attrs:{field:"contactName",title:"联系人员",width:"80"}}),t("vxe-table-column",{attrs:{field:"contactPhone",title:"联系电话",width:"100","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{field:"email",title:"邮箱",width:"100","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{field:"address",title:"地址","min-width":"120","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{field:"appraise",title:"评分",width:"80","header-align":"center",align:"right"}}),t("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",width:"80"}}),t("vxe-table-column",{attrs:{field:"remarks",title:"备注","min-width":"120","header-align":"center",align:"left"}})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1)])},o=[],l=a("d214"),i=a("5633"),n={name:"SupplierList",components:{LineSelectList:i["default"]},props:{multiple:{type:Boolean,default:!0}},data:function(){return{queryParam:{category:null,name:"",objTypeId:"",status:null,lineId:"",repairProgramId:"",pageNo:1,pageSize:10},allAlign:"center",totalResult:0,tableData:[],visible:!1,confirmLoading:!1,formItemLayout:{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}}}},methods:{showModal:function(){this.visible=!0,this.findList()},findList:function(){var e=this;this.loading=!0,Object(l["eb"])(this.queryParam).then((function(t){e.totalResult=t.result.total,e.loading=!1,e.tableData=t.result.records}))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()},handleOk:function(){var e=[];this.multiple?e=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&e.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",e),this.close()},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,this.queryParam.searchText=""}}},s=n,c=(a("cc0c"),a("2877")),d=Object(c["a"])(s,r,o,!1,null,"2c33e9dc",null);t["default"]=d.exports},"7ad5":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"bodyWrapper"},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"合同"}},[t("a-input",{attrs:{placeholder:"合同编码或名称",allowClear:""},model:{value:e.queryParam.searchText,callback:function(t){e.$set(e.queryParam,"searchText",t)},expression:"queryParam.searchText"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"线路"}},[t("line-select-list",{model:{value:e.queryParam.lineId,callback:function(t){e.$set(e.queryParam,"lineId",t)},expression:"queryParam.lineId"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{staticClass:"a-form-item-width-gy",attrs:{label:"厂商"}},[t("a-select",{ref:"mySupplierSelect",attrs:{placeholder:"请选择厂商",open:!1,showArrow:!0},on:{focus:e.openSupplierModal},model:{value:e.supplierName,callback:function(t){e.supplierName=t},expression:"supplierName"}},[t("div",{attrs:{slot:"suffixIcon"},slot:"suffixIcon"},[e.queryParam.supplierId?t("a-icon",{staticStyle:{"padding-right":"3px"},attrs:{type:"close-circle"},on:{click:function(t){return t.stopPropagation(),e.clearValue.apply(null,arguments)}}}):t("a-icon",{attrs:{type:"ellipsis"}})],1)])],1)],1),t("a-col",{attrs:{md:4,sm:24}},[t("a-form-item",{attrs:{label:"状态"}},[t("j-dict-select-tag",{attrs:{dictCode:"bu_contract_status"},model:{value:e.queryParam.status,callback:function(t){e.$set(e.queryParam,"status",t)},expression:"queryParam.status"}})],1)],1),t("a-col",{attrs:{md:2,sm:24}},[t("a-button",{on:{click:e.findList}},[e._v("查询")])],1),t("a-col",{attrs:{md:24,sm:24}},[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-space",[t("a-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增")]),t("a-button",{attrs:{disabled:!e.btnStatus.edit},on:{click:e.handleEdit}},[e._v("编辑")]),t("a-button",{attrs:{disabled:!e.btnStatus.del},on:{click:e.deleteRecord}},[e._v("删除")]),t("a-button",{attrs:{disabled:!e.btnStatus.pay},on:{click:e.handlePay}},[e._v("支付管理")]),t("a-button",{attrs:{disabled:!e.btnStatus.del},on:{click:e.viewPay}},[e._v("价格查看")]),t("a-button",{attrs:{disabled:!e.btnStatus.file},on:{click:e.handleDoc}},[e._v("文档资料")]),t("a-button",{attrs:{disabled:!e.btnStatus.score},on:{click:e.handleRate}},[e._v("评分管理")])],1)],1)])],1)],1)],1),t("div",{staticStyle:{height:"calc(100vh - 258px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(100vh - 258px)"},attrs:{border:"","auto-resize":"","max-height":"100%",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","checkbox-config":{trigger:"row",highlight:!0,range:!0},"edit-config":{trigger:"manual",mode:"row"}},on:{"checkbox-change":e.rowSelectChange,"checkbox-all":function(t){return e.btnStatus.update()}}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"40",fixed:"left"}}),t("vxe-table-column",{attrs:{field:"lineName",title:"所属线路",width:"8%",fixed:"left"}}),t("vxe-table-column",{attrs:{field:"contractNo",title:"合同编号",width:"12%",fixed:"left",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"contractName",title:"合同名称",width:"12%",fixed:"left",align:"left","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("a",{on:{click:function(t){return t.stopPropagation(),e.contractInfoDetail(r)}}},[e._v(e._s(r.contractName))])]}}])}),t("vxe-table-column",{attrs:{field:"supplierName",title:"委外厂商",width:"16%",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"amount",title:"合同总价",width:"8%","header-align":"center",align:"right"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("span",[e._v(e._s(r.amount+"万"))])]}}])}),t("vxe-table-column",{attrs:{field:"taxRate",title:"合同税率",width:"8%","header-align":"center",align:"right"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("span",[e._v(e._s(r.taxRate+"%"))])]}}])}),t("vxe-table-column",{attrs:{field:"deposit",title:"履约保证金",width:"8%","header-align":"center",align:"right"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("span",[e._v(e._s(r.deposit+"万"))])]}}])}),t("vxe-table-column",{attrs:{field:"expiration",align:"right","header-align":"center",title:"质保期限",width:"8%"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("span",[e._v(e._s(r.expiration+"个月"))])]}}])}),t("vxe-table-column",{attrs:{field:"needDay",title:"维修周期",width:"8%","header-align":"center",align:"right"}}),t("vxe-table-column",{attrs:{field:"status_dictText",title:"合同状态",width:"8%"}}),t("vxe-table-column",{attrs:{field:"finishAmount",align:"right","header-align":"center",title:"第几列车",width:"12%"}}),t("vxe-table-column",{attrs:{field:"curTrain",title:"执行车号",width:"12%"}}),t("vxe-table-column",{attrs:{field:"remark",title:"备注",width:"12%",align:"left","header-align":"center"}})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}}),t("contract-info-add-modal",{ref:"modalForm",on:{ok:function(t){return e.loadData()}}}),t("contract-pay-modal",{ref:"payModal",on:{ok:function(t){return e.loadData()}}}),t("contract-bak-modal",{ref:"bakModal",on:{ok:function(t){return e.loadData()}}}),t("contract-info-detail",{ref:"detailModal",on:{ok:function(t){return e.loadData()}}}),t("contract-view-pay-modal",{ref:"viewPayModal"}),t("supplier-list",{ref:"supplierModal",attrs:{multiple:!1},on:{ok:e.supplierSelect}}),t("contract-perform-detail",{ref:"docModal"}),t("perform-rate",{ref:"rateModal"})],1)])},o=[],l=a("d214"),i=a("a612"),n=a("f8f3"),s=a("9a30"),c=a("a566"),d=a("7c3a"),u=a("5633"),m=a("769e"),p=a("ca00"),f=a("3c75"),h=a("1bd2"),v=a("54f6"),g={name:"ContractInfo",components:{ContractInfoAddModal:i["default"],ContractPayModal:n["default"],ContractBakModal:s["default"],ContractViewPayModal:c["default"],ContractInfoDetail:d["default"],LineSelectList:u["default"],SupplierList:m["default"],ContractPerformDetail:f["default"],PerformRate:h["default"]},data:function(){return{btnStatus:new v["a"](this,"listTable",{attrs:[{key:"pay"},{key:"payView"},{key:"file"},{key:"score"}]}),tableData:[],allAlign:"center",totalResult:0,supplierName:"",queryParam:{searchText:"",lineId:"",supplierId:"",status:null,pageNo:1,pageSize:10}}},created:function(){this.findList()},methods:{rowSelectChange:function(){this.btnStatus.update()},clearValue:function(){this.queryParam.supplierId="",this.supplierName=""},openSupplierModal:function(){this.$refs.supplierModal.showModal(),this.$refs.mySupplierSelect.blur()},supplierSelect:function(e){Object(p["e"])(e)||(this.supplierName=e[0].name,this.queryParam.supplierId=e[0].id)},loadData:function(){this.findList()},findList:function(){var e=this;this.loading=!0,Object(l["H"])(this.queryParam).then((function(t){e.totalResult=t.result.total,e.loading=!1,e.tableData=t.result.records,e.btnStatus.update()}))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()},handleEdit:function(){var e=this.$refs.listTable.getCheckboxRecords();1==e.length?(this.$refs.modalForm.edit(e[0]),this.$refs.modalForm.title="编辑"):this.$message.warn("请选择一项数据！")},contractInfoDetail:function(e){this.$refs.detailModal.show(e)},handlePay:function(){var e=this.$refs.listTable.getCheckboxRecords();if(1===e.length){var t=e[0].id,a=e[0].amount;this.$refs.payModal.show({contractId:t,amount:a,executeTaxRate:e[0].executeTaxRate,contractNo:e[0].contractNo})}else e.length>1?this.$message.error("只能选中一条数据!"):this.$message.error("尚未选中任何数据!")},viewPay:function(){var e=this.$refs.listTable.getCheckboxRecords();if(e.length){var t=e.map((function(e,t){return e.id})).join(",");this.$refs.viewPayModal.show({ids:t})}else this.$message.error("尚未选中任何数据!")},handleBak:function(){var e=this.$refs.listTable.getCheckboxRecords();if(1===e.length){var t=e[0].id,a=e[0].behindMoney;this.$refs.bakModal.show({contractId:t,behindMoney:a})}else e.length>1?this.$message.error("只能选中一条数据!"):this.$message.error("尚未选中任何数据!")},handleAdd:function(){this.$refs.modalForm.add(),this.$refs.modalForm.title="新增"},deleteRecord:function(){var e=this,t=this.$refs.listTable.getCheckboxRecords();t.length>0?this.$confirm({content:"是否删除选中".concat(t.length,"数据？"),onOk:function(){var a=t.map((function(e,t){return e.id})).join(",");Object(l["k"])("ids="+a).then((function(t){e.findList(),e.$message.success(t.message)}))}}):this.$message.error("尚未选中任何数据!")},handleDoc:function(){var e=this.$refs.listTable.getCheckboxRecords();if(1===e.length){var t=e[0].id,a=e[0].supplierId;this.$refs.docModal.show(t,a)}else e.length>1?this.$message.error("只能选中一条数据!"):this.$message.error("尚未选中任何数据!")},handleRate:function(){var e=this.$refs.listTable.getCheckboxRecords();if(1===e.length){var t=e[0].id,a=e[0].supplierId;this.$refs.rateModal.show(t,a)}else e.length>1?this.$message.error("只能选中一条数据!"):this.$message.error("尚未选中任何数据!")}}},b=g,y=(a("6920"),a("2877")),w=Object(y["a"])(b,r,o,!1,null,null,null);t["default"]=w.exports},"7c3a":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"85%",visible:e.visible,confirmLoading:e.confirmLoading,dialogClass:"fullDialog no-title no-footer",destroyOnClose:!0},on:{cancel:e.handleCancel}},[t("div",{staticClass:"bodyWrapper"},[t("a-tabs",{attrs:{"active-key":e.activeKey},on:{change:e.handleActive}},[t("a-tab-pane",{key:"1",attrs:{tab:"合同基本信息"}},[t("contract-info-basic",{attrs:{contractDetail:e.detail}})],1),t("a-tab-pane",{key:"2",attrs:{tab:"合同监控"}},[t("div",{staticClass:"content"},[null!=e.contractMonitor?t("div",{staticClass:"info-wrapper info-top-wrapper"},[t("div",{staticStyle:{"text-align":"center"}},[t("a-row",{style:{marginLeft:"50px"},attrs:{gutter:24}},[null!=e.contractMonitor.payed?t("a-col",{attrs:{md:4}},[t("progress-chart",{attrs:{value:e.contractMonitor.payed,"have-color":"#389AF4","no-color":"#dfeaff",rotateZ:"rotateZ(".concat(Math.round(3.6*e.contractMonitor.payed),"deg)")}}),t("p",{staticStyle:{color:"#389AF4"}},[e._v("已支付比例")])],1):e._e(),null!=e.contractMonitor.bakMoney?t("a-col",{attrs:{md:4}},[t("progress-chart",{attrs:{value:e.contractMonitor.bakMoney,"have-color":"#FF8C37","no-color":"#ffdcc3",rotateZ:"rotateZ(".concat(Math.round(3.6*e.contractMonitor.bakMoney),"deg)")}}),t("p",{staticStyle:{color:"#FF8C37"}},[e._v("暂列金使用")])],1):e._e(),null!=e.contractMonitor.score?t("a-col",{attrs:{md:4}},[t("progress-chart",{attrs:{value:e.contractMonitor.score,"have-color":"#FFC257","no-color":"#ffedcc",rotateZ:"rotateZ(".concat(Math.round(3.6*e.contractMonitor.score),"deg)")}}),t("p",{staticStyle:{color:"#FFC257"}},[e._v("评分值")])],1):e._e(),null!=e.contractMonitor.quality?t("a-col",{attrs:{md:4}},[t("progress-chart",{attrs:{value:e.contractMonitor.quality,"have-color":"#A587FC","no-color":"#e3d9fe",rotateZ:"rotateZ(".concat(Math.round(3.6*e.contractMonitor.quality),"deg)")}}),t("p",{staticStyle:{color:"#A587FC"}},[e._v("质保期限")])],1):e._e()],1)],1)]):e._e()])])],1)],1)])},o=[],l=a("abb2"),i=a("d214"),n=a("8c90"),s=a("12df"),c=a("895d"),d=a("ab87"),u={name:"ContractInfoDetail",components:{ContractInfoBasic:s["default"],PieDonut:l["default"],ContractPayDetail:c["default"],ContractBakDetail:d["default"],ProgressChart:n["default"]},data:function(){return{detail:{},contractMonitor:null,visible:!1,confirmLoading:!1,title:"合同详情",activeKey:"1"}},methods:{show:function(e){this.visible=!0,this.detail=e,this.contractMonitor=null,this.findList()},findList:function(){var e=this,t={id:this.detail.id};Object(i["J"])(t).then((function(t){e.contractMonitor=t.result;e.contractMonitor.payed,e.contractMonitor.bakMoney,e.contractMonitor.score,e.contractMonitor.quality}))},handleCancel:function(){this.close()},close:function(){this.activeKey="1",this.$emit("close"),this.visible=!1},handleActive:function(e){this.activeKey=e}}},m=u,p=(a("fdf0"),a("2877")),f=Object(p["a"])(m,r,o,!1,null,"2deee82d",null);t["default"]=f.exports},"85dfa":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,width:700,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:24,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"名称"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["name",e.validatorRules.name],expression:"[ 'name', validatorRules.name]",modifiers:{trim:!0}}],attrs:{placeholder:"文件名称"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:24,sm:24}},[t("a-form-item",{attrs:{label:"备注",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark",e.validatorRules.remark],expression:"[ 'remark',validatorRules.remark]"}]})],1)],1)],1)],1)],1)],1)},o=[],l=a("d214"),i={name:"EditFileModal",props:["other"],data:function(){return{title:"操作",visible:!1,model:{},labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:15}},confirmLoading:!1,form:this.$form.createForm(this),validatorRules:{name:{rules:[{required:!0,message:"请输入名称!"},{max:100,message:"输入长度不能超过100字符!"}]},remark:{rules:[{max:255,message:"输入长度不能超过255字符!"}]}}}},created:function(){},methods:{edit:function(e){var t=this;this.form.resetFields(),this.model=Object.assign({},e),this.visible=!0,this.$nextTick((function(){t.form.setFieldsValue({name:t.model.name,remark:t.model.remark})}))},handleOk:function(){var e=this,t=this;t.form.validateFields((function(a,r){if(!a){t.confirmLoading=!0;var o,i=Object.assign(t.model,r);o=e.other?Object(l["y"])(i):Object(l["B"])(i),o.then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok"),t.close()):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1}))}}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},n=i,s=a("2877"),c=Object(s["a"])(n,r,o,!1,null,null,null);t["default"]=c.exports},"895d":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"bodyWrapper"},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"支付标题"}},[t("a-input",{attrs:{placeholder:"请输入名称"},model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,"name",t)},expression:"queryParam.name"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"支付日期"}},[t("a-range-picker",{attrs:{ranges:e.dateRanges},on:{change:e.onDateChange},model:{value:e.payDate,callback:function(t){e.payDate=t},expression:"payDate"}})],1)],1),t("a-col",{attrs:{md:12,sm:8}},[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-space",[t("a-button",{on:{click:e.findList}},[e._v("查询")]),t("a-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增")]),t("a-button",{on:{click:e.deleteRecord}},[e._v("删除")])],1)],1)])],1)],1)],1),t("div",[t("vxe-table",{ref:"listTable",staticClass:"table-footer",staticStyle:{height:"calc(100vh - 240px)"},attrs:{border:"","max-height":"78%",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","edit-config":{trigger:"manual",mode:"row"},"show-footer":"","footer-span-method":e.footerColspanMethod,"footer-cell-class-name":e.footerCellClassName,"footer-method":e.sumMethod}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"40",align:"center"}}),t("vxe-table-column",{attrs:{field:"payNo",title:"序号",width:"8%"}}),t("vxe-table-column",{attrs:{field:"payDesc",title:"支付标题",width:"15%","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{field:"amount",title:"支付金额",width:"10%","header-align":"center",align:"right"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("span",[e._v(e._s(r.amount+"万"))])]}}])}),t("vxe-table-column",{attrs:{field:"dealMan",title:"办理人",width:"10%"}}),t("vxe-table-column",{attrs:{field:"payDate",title:"支付日期",width:"10%"}}),t("vxe-table-column",{attrs:{field:"leftover",title:"剩余支付",width:"10%","header-align":"center",align:"right"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("span",[e._v(e._s(r.leftover+"万"))])]}}])}),t("vxe-table-column",{attrs:{field:"remark",title:"备注",width:"20%","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{title:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("a",{on:{click:function(t){return e.handleEdit(r)}}},[e._v("编辑")])]}}])})],1)],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}}),t("contract-pay-item-modal",{ref:"modalForm",attrs:{contractId:e.queryParam.contractId},on:{ok:function(t){return e.loadData()}}})],1)},o=[],l=a("c1df"),i=a.n(l),n=a("d214"),s=a("f0db"),c=a("c695"),d=a.n(c),u=a("ca00"),m={components:{ContractPayItemModal:s["default"]},name:"ContractPay",props:["detail"],data:function(){return{tableData:[],allAlign:"center",totalResult:0,amount:0,payDate:null,back:!0,dateRanges:{"最近一周":[i()().startOf("day").subtract(1,"weeks"),i()()],"最近一个月":[i()().startOf("day").subtract(30,"day"),i()()],"最近三个月":[i()().startOf("day").subtract(90,"day"),i()()]},queryParam:{contractId:"",name:"",startTime:null,endTime:null,pageNo:1,pageSize:10}}},created:function(){this.queryParam.contractId=this.detail.id,this.amount=this.detail.amount,this.findList()},methods:{loadData:function(){this.findList()},findList:function(){var e=this;this.confirmLoading=!0,Object(n["K"])(this.queryParam).then((function(t){e.totalResult=t.result.total,e.confirmLoading=!1,e.tableData=t.result.records}))},onDateChange:function(e,t){Object(u["e"])(t[0])&&Object(u["e"])(t[1])?(this.queryParam.startTime="",this.queryParam.endTime=""):(this.queryParam.startTime=i()(e[0]).format("YYYY-MM-DD"),this.queryParam.endTime=i()(e[1]).format("YYYY-MM-DD"))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()},handleEdit:function(e){var t=e.leftover+e.amount;this.$refs.modalForm.edit(e),this.$refs.modalForm.setMaxAmount(t),this.$refs.modalForm.title="编辑"},handleAdd:function(){var e;this.$refs.modalForm.add(),e=this.tableData.length>0?this.tableData[this.tableData.length-1].leftover:this.amount,this.$refs.modalForm.setMaxAmount(e),this.$refs.modalForm.title="新增"},deleteRecord:function(){var e=this,t=this.$refs.listTable.getCheckboxRecords();t.length>0?this.$confirm({content:"是否删除选中".concat(t.length,"数据？"),onOk:function(){var a=t.map((function(e,t){return e.id})).join(",");Object(n["l"])("ids="+a).then((function(t){e.findList(),e.$message.success(t.message)}))}}):this.$message.error("尚未选中任何数据!")},sumMethod:function(e){var t=this,a=e.columns,r=e.data,o=[a.map((function(e,a){if(0===a)return"合计";if(["payNo"].includes(e.property)){var o="剩余支付：";return 1===r.length?o=o+r[0].leftover+"万元":r.length>1?o=o+r[r.length-1].leftover+"万元":o+=t.amount+"万元","已支付："+d.a.sum(r,"amount")+"万元；"+o}return null}))];return o},footerColspanMethod:function(e){var t=e.$rowIndex,a=e._columnIndex;if(0===t){if(1===a)return{rowspan:1,colspan:8};if(0!==a)return{rowspan:0,colspan:0}}},footerCellClassName:function(e){var t=e.$rowIndex,a=(e.column,e.columnIndex);if(0===a&&0===t)return"col-red"}}},p=m,f=(a("6c86"),a("2877")),h=Object(f["a"])(p,r,o,!1,null,null,null);t["default"]=h.exports},"8c90":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"loading"},[t("div",{staticClass:"left",style:{"--haveColor":e.haveColor,"--noColor":e.noColor,"--rotateZ":e.rotateZ}}),t("div",{staticClass:"right",style:{"--noColor":e.noColor,"--haveColor":e.haveColor,"--rotateZ":e.rotateZ}}),t("div",{staticClass:"progress",style:{"--haveColor":e.haveColor}},[e._v(e._s(e.value)+"%")])])},o=[],l={name:"ProgressChart",props:{value:{default:""},haveColor:{type:String,default:"#389AF4"},noColor:{type:String,default:"#dfeaff"},rotateZ:{type:String,default:"rotateZ(180deg)"}},created:function(){}},i=l,n=(a("3ae5"),a("2877")),s=Object(n["a"])(i,r,o,!1,null,"df6e5b60",null);t["default"]=s.exports},9589:function(e,t,a){"use strict";a("7237")},"9a30":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,width:"85%",visible:e.visible,confirmLoading:e.confirmLoading,dialogClass:"fullDialog no-footer",destroyOnClose:!0},on:{cancel:e.handleCancel}},[t("div",{staticClass:"bodyWrapper"},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"使用标题"}},[t("a-input",{attrs:{placeholder:"请输入名称"},model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,"name",t)},expression:"queryParam.name"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"使用日期"}},[t("a-range-picker",{attrs:{ranges:e.dateRanges},on:{change:e.onDateChange},model:{value:e.payDate,callback:function(t){e.payDate=t},expression:"payDate"}})],1)],1),t("a-col",{attrs:{md:12,sm:8}},[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-space",[t("a-button",{on:{click:e.findList}},[e._v("查询")]),t("a-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增")]),t("a-button",{on:{click:e.deleteRecord}},[e._v("删除")]),e.back?t("a-button",{on:{click:e.handleCancel}},[e._v("返回")]):e._e()],1)],1)])],1)],1)],1),t("div",{staticStyle:{height:"calc(100vh - 225px)"}},[t("vxe-table",{ref:"listTable",staticClass:"table-footer",staticStyle:{height:"calc(100vh - 225px)"},attrs:{border:"","max-height":"90%",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","edit-config":{trigger:"manual",mode:"row"},"show-footer":"","footer-span-method":e.footerColspanMethod,"footer-cell-class-name":e.footerCellClassName,"footer-method":e.sumMethod}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),t("vxe-table-column",{attrs:{field:"useNo",title:"序号",width:"8%"}}),t("vxe-table-column",{attrs:{field:"subject",title:"使用名目",width:"15%","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{field:"amount",title:"使用金额",width:"10%","header-align":"center",align:"right"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("span",[e._v(e._s(r.amount+"万"))])]}}])}),t("vxe-table-column",{attrs:{field:"useDate",title:"使用日期",width:"10%"}}),t("vxe-table-column",{attrs:{field:"leftover",title:"剩余金额",width:"8%","header-align":"center",align:"right"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("span",[e._v(e._s(r.leftover+"万"))])]}}])}),t("vxe-table-column",{attrs:{field:"reason",title:"使用原因",width:"10%","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{field:"remark",title:"备注",width:"20%","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{title:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("a",{on:{click:function(t){return t.stopPropagation(),e.handleEdit(r)}}},[e._v("编辑")])]}}])})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1),t("contract-bak-item-modal",{ref:"modalForm",attrs:{contractId:e.queryParam.contractId},on:{ok:function(t){return e.loadData()}}})],1)])},o=[],l=a("c1df"),i=a.n(l),n=a("d214"),s=a("cf57"),c=a("c695"),d=a.n(c),u=a("ca00"),m={components:{ContractBakItemModal:s["default"]},name:"ContractBak",props:["detail"],data:function(){return{tableData:[],allAlign:"center",totalResult:0,behindMoney:0,payDate:null,back:!0,dateRanges:{"最近一周":[i()().startOf("day").subtract(1,"weeks"),i()()],"最近一个月":[i()().startOf("day").subtract(30,"day"),i()()],"最近三个月":[i()().startOf("day").subtract(90,"day"),i()()]},queryParam:{contractId:"",name:"",startTime:null,endTime:null,pageNo:1,pageSize:10},visible:!1,confirmLoading:!1,title:"暂列金管理"}},methods:{loadData:function(){this.findList()},show:function(e){this.visible=!0,this.behindMoney=e.behindMoney,this.queryParam.contractId=e.contractId,this.findList()},findList:function(){var e=this;this.loading=!0,Object(n["F"])(this.queryParam).then((function(t){e.totalResult=t.result.total,e.loading=!1,e.tableData=t.result.records}))},onDateChange:function(e,t){Object(u["e"])(t[0])&&Object(u["e"])(t[1])?(this.queryParam.startTime="",this.queryParam.endTime=""):(this.queryParam.startTime=i()(e[0]).format("YYYY-MM-DD"),this.queryParam.endTime=i()(e[1]).format("YYYY-MM-DD"))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()},handleEdit:function(e){var t=e.leftover+e.amount;this.$refs.modalForm.edit(e),this.$refs.modalForm.setMaxAmount(t),this.$refs.modalForm.title="编辑"},handleAdd:function(){var e;this.$refs.modalForm.add(),e=this.tableData.length>0?this.tableData[this.tableData.length-1].leftover:this.behindMoney,this.$refs.modalForm.setMaxAmount(e),this.$refs.modalForm.title="新增"},deleteRecord:function(){var e=this,t=this.$refs.listTable.getCheckboxRecords();t.length>0?this.$confirm({content:"是否删除选中".concat(t.length,"数据？"),onOk:function(){var a=t.map((function(e,t){return e.id})).join(",");Object(n["j"])("ids="+a).then((function(t){e.findList(),e.$message.success(t.message)}))}}):this.$message.warn("尚未选中任何数据!")},sumMethod:function(e){var t=this,a=e.columns,r=e.data,o=[a.map((function(e,a){if(0===a)return"合计";if(["useNo"].includes(e.property)){var o="剩余金额：";return 1===r.length?o=o+r[0].leftover+"万元":r.length>1?o=o+Math.min.apply(Math,r.map((function(e){return e.leftover})))+"万元":o+=t.behindMoney+"万元","已使用："+d.a.sum(r,"amount")+"万元；"+o}return null}))];return o},footerColspanMethod:function(e){var t=e.$rowIndex,a=e._columnIndex;if(0===t){if(1===a)return{rowspan:1,colspan:8};if(0!==a)return{rowspan:0,colspan:0}}},footerCellClassName:function(e){var t=e.$rowIndex,a=(e.column,e.columnIndex);if(0===a&&0===t)return"col-red"},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,this.queryParam.startTime="",this.queryParam.endTime="",this.queryParam.name="",this.payDate=null}}},p=m,f=(a("75a7"),a("2877")),h=Object(f["a"])(p,r,o,!1,null,null,null);t["default"]=h.exports},a1e7:function(e,t,a){},a566:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,width:"85%",visible:e.visible,confirmLoading:e.confirmLoading,footer:null,destroyOnClose:!0},on:{cancel:e.handleCancel}},[t("div",[t("div",{staticStyle:{height:"calc(100vh - 220px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(100vh - 220px)"},attrs:{border:"","max-height":"90%",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip"}},[t("vxe-table-column",{attrs:{field:"contractNo",title:"合同编号",width:"20%","header-align":"center",align:"center"}}),t("vxe-table-column",{attrs:{field:"contractName",width:"30%",title:"合同名称","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{field:"trainAmount",title:"车辆列数",width:"10%","header-align":"center",align:"right"}}),t("vxe-table-column",{attrs:{field:"contractAmount",title:"合同总价",width:"10%","header-align":"center",align:"right"}}),t("vxe-table-column",{attrs:{field:"singlePrice",title:"单列价格",width:"10%","header-align":"center",align:"right"}}),t("vxe-table-column",{attrs:{field:"partPrice",title:"部件单价",width:"10%","header-align":"center",align:"right"}}),t("vxe-table-column",{attrs:{field:"signDate",title:"签订日期",width:"10%",align:"center"}})],1)],1)])])},o=[],l=a("d214"),i={name:"ContractViewPay",data:function(){return{visible:!1,tableData:[],allAlign:"center",title:"合同价格查询",confirmLoading:!1}},methods:{show:function(e){this.visible=!0,this.findList(e.ids)},findList:function(e){var t=this;this.confirmLoading=!0,Object(l["I"])({ids:e}).then((function(e){t.confirmLoading=!1,t.tableData=e.result}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},n=i,s=(a("ae15"),a("2877")),c=Object(s["a"])(n,r,o,!1,null,null,null);t["default"]=c.exports},a612:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,width:"85%",visible:e.visible,confirmLoading:e.confirmLoading,dialogClass:"fullDialog",cancelText:"关闭",destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("div",{staticClass:"content"},[t("div",{staticClass:"info-wrapper info-top-wrapper",staticStyle:{"margin-bottom":"20px"}},[t("h4",[e._v("基本信息")]),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"合同编号"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["contractNo",e.validatorRules.contractNo],expression:"['contractNo', validatorRules.contractNo]"}],attrs:{placeholder:"合同编号"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"合同名称"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["contractName",e.validatorRules.contractName],expression:"['contractName', validatorRules.contractName]"}],attrs:{placeholder:"合同名称"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"合同厂商"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["supplierName",e.validatorRules.supplierId],expression:"['supplierName', validatorRules.supplierId]"}],ref:"mySupplierSelect",attrs:{placeholder:"请选择厂商",open:!1,showArrow:!0},on:{focus:e.openSupplierModal}},[t("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"合同金额"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["amount",e.validatorRules.amount],expression:"['amount', validatorRules.amount]"}],staticStyle:{width:"100%"},attrs:{placeholder:"合同金额",formatter:function(e){return"".concat(e,"万")},parser:function(e){return e.replace("万","")},min:0,step:.1,max:99999999}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"合同税率"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["taxRate",e.validatorRules.taxRate],expression:"['taxRate', validatorRules.taxRate]"}],staticStyle:{width:"100%"},attrs:{formatter:function(e){return"".concat(e,"%")},parser:function(e){return e.replace("%","")},min:0,step:.1,max:100,placeholder:"合同税率"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"执行税率"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["executeTaxRate",e.validatorRules.executeTaxRate],expression:"['executeTaxRate', validatorRules.executeTaxRate]"}],staticStyle:{width:"100%"},attrs:{formatter:function(e){return"".concat(e,"%")},parser:function(e){return e.replace("%","")},min:0,step:.1,max:100,placeholder:"执行税率"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"合同状态"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",e.validatorRules.status],expression:"['status', validatorRules.status]"}],attrs:{placeholder:"选择合同状态",triggerChange:!0,dictCode:"bu_contract_status"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"保证金类型"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator",value:["depositType",e.validatorRules.depositType],expression:"['depositType', validatorRules.depositType]"}],attrs:{triggerChange:!0,placeholder:"选择保证金类型",dictCode:"bu_contract_deposit_type"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"履约保证金"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["deposit",{initialValue:0}],expression:"['deposit', { initialValue: 0 }]"}],staticStyle:{width:"100%"},attrs:{placeholder:"履约保证金",formatter:function(e){return"".concat(e,"万")},parser:function(e){return e.replace("万","")},min:0,step:.1,max:99999999}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"所属线路"}},[t("line-select-list",{directives:[{name:"decorator",rawName:"v-decorator",value:["lineId",e.validatorRules.lineId],expression:"['lineId', validatorRules.lineId]"}],attrs:{"trigger-change":!0},on:{change:e.handleLine}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"开始时间"}},[t("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["startDate",e.validatorRules.startDate],expression:"['startDate', validatorRules.startDate]"}],staticStyle:{width:"100%"},attrs:{placeholder:"开始时间"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"终止日期"}},[t("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["finishDate",e.validatorRules.finishDate],expression:"['finishDate', validatorRules.finishDate]"}],staticStyle:{width:"100%"},attrs:{placeholder:"终止日期"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"质保期"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["expiration",e.validatorRules.expiration],expression:"['expiration', validatorRules.expiration]"}],staticStyle:{width:"80%"},attrs:{placeholder:"质保期",min:0,max:99999999,precision:0}}),e._v(" 个月 ")],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"质保金类型"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator",value:["qualityDepositType"],expression:"['qualityDepositType']"}],attrs:{triggerChange:!0,placeholder:"选择质保金类型",dictCode:"bu_contract_deposit_type"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"质保金比例"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["qualityDepositPercent",e.validatorRules.qualityDepositPercent],expression:"['qualityDepositPercent', validatorRules.qualityDepositPercent]"}],staticStyle:{width:"100%"},attrs:{formatter:function(e){return"".concat(e,"%")},parser:function(e){return e.replace("%","")},min:0,step:.1,max:100,placeholder:"质保金比例"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"预付款"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["advancePayment",{initialValue:0}],expression:"['advancePayment', { initialValue: 0 }]"}],staticStyle:{width:"100%"},attrs:{placeholder:"输入预付款",formatter:function(e){return"".concat(e,"万")},parser:function(e){return e.replace("万","")},min:0,step:.1,max:99999999}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"合同部件",required:"true"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["assetTypeName",e.validatorRules.assetTypeName],expression:"['assetTypeName', validatorRules.assetTypeName]",modifiers:{trim:!0}}],ref:"mySelect",attrs:{placeholder:"请选择",open:!1,showArrow:!0},on:{focus:e.openModal}},[t("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"合同部件别名"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["assetTypeAlias",e.validatorRules.assetTypeAlias],expression:"['assetTypeAlias',validatorRules.assetTypeAlias]"}],attrs:{placeholder:"合同部件别名"}})],1)],1),t("a-col",{attrs:{md:6,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"每列部件数量"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["assetAmount",e.validatorRules.assetAmount],expression:"['assetAmount', validatorRules.assetAmount]"}],attrs:{placeholder:"每列部件数量"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"车辆数"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["trainAmount",e.validatorRules.trainAmount],expression:"['trainAmount', validatorRules.trainAmount]"}],staticStyle:{width:"100%"},attrs:{min:1,placeholder:"输入车辆数"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"已完成数"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["finishAmount",e.validatorRules.finishAmount],expression:"['finishAmount', validatorRules.finishAmount]"}],staticStyle:{width:"100%"},attrs:{min:0,placeholder:"输入已完成数"}})],1)],1),t("a-col",{attrs:{md:6,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"修程类型"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator",value:["repairProgramId",e.validatorRules.repairProgramId],expression:"['repairProgramId', validatorRules.repairProgramId]"}],attrs:{triggerChange:!0,placeholder:"请选择修程类型",dictCode:"bu_repair_program,name,id"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"计数开始"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["payBegin"],expression:"['payBegin']"}],staticStyle:{width:"100%"},attrs:{min:1,placeholder:"从第几列开始计算"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"支付间隔数"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["payInterval"],expression:"['payInterval']"}],staticStyle:{width:"100%"},attrs:{min:1,placeholder:"每隔多少列支付一次"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"维修周期"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["needDay",e.validatorRules.needDay],expression:"['needDay', validatorRules.needDay]"}],staticStyle:{width:"100%"},attrs:{placeholder:"自然日",min:0,max:999999999,precision:0}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"签订日期"}},[t("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["signDate"],expression:"['signDate']"}],staticStyle:{width:"100%"},attrs:{placeholder:"签订日期"}})],1)],1),t("a-col",{attrs:{md:18,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"支付条款"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["attention",e.validatorRules.attention],expression:"['attention', validatorRules.attention]"}],staticStyle:{width:"100%"},attrs:{placeholder:"支付条款"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:18,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"监修信息"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["superInfo",e.validatorRules.superInfo],expression:"['superInfo', validatorRules.superInfo]"}],staticStyle:{width:"100%"},attrs:{placeholder:"输入监修信息"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:18,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"培训信息"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["trainInfo",e.validatorRules.trainInfo],expression:"['trainInfo', validatorRules.trainInfo]"}],staticStyle:{width:"100%"},attrs:{placeholder:"输入培训信息"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:18,sm:24,offset:3}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"备注"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark",e.validatorRules.remark],expression:"['remark', validatorRules.remark]"}],staticStyle:{width:"100%"},attrs:{placeholder:"备注"}})],1)],1)],1)],1)]),t("div",{staticClass:"content"},[t("div",{staticClass:"info-wrapper info-top-wrapper"},[t("h4",[e._v("合同附件")]),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:18,sm:24,offset:3}},[t("DocUpload",{ref:"upload",attrs:{"default-file-list":e.defaultFileList,"show-upload":!1,isFileEmpty:!0},on:{setBforeUploadStatus:e.setBforeUploadStatus,uploaded:e.successUploadFile,removed:e.onRemoveFile,uploadFail:e.uploadFail,setUpLoadingEndStatus:e.setUpLoadingEndStatus}}),t("a-divider",{staticStyle:{"font-size":"14px"},attrs:{orientation:"left"}},[e._v("已上传列表")]),t("vxe-table",{staticStyle:{"margin-top":"12px"},attrs:{border:"",data:e.annexList,"show-overflow":"tooltip","edit-config":{trigger:"manual",mode:"row"}}},[t("div",{}),t("vxe-table-column",{attrs:{type:"index",title:"序号",width:"50px","header-align":"center",align:"center"}}),t("vxe-table-column",{attrs:{field:"name",title:"文件名","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{field:"type",title:"文件类型",width:"120px","header-align":"center",align:"center"}}),t("vxe-table-column",{attrs:{field:"fileSize",title:"文件大小",width:"180px","header-align":"center",align:"center"}}),t("vxe-table-column",{attrs:{title:"操作",width:"160px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row,o=a.rowIndex;return[t("a",{staticStyle:{"margin-right":"12px"},on:{click:function(t){return t.stopPropagation(),e.handleSeeing(r)}}},[e._v("查看")]),t("a",{on:{click:function(t){return t.stopPropagation(),e.handleDelete(r,o)}}},[e._v("删除")])]}}])})],1)],1)],1)],1)]),t("doc-preview-modal",{ref:"docPreview",attrs:{title:e.fileName}}),t("train-asset-type",{ref:"selectModal",attrs:{multiple:!1,trainTypeId:e.trainTypeId},on:{ok:e.addTarget}}),t("supplier-list",{ref:"supplierModal",attrs:{multiple:!1},on:{ok:e.supplierSelect}})],1)],1)],1)},o=[],l=a("b098"),i=a("c1df"),n=a.n(i),s=a("8fad"),c=a("d214"),d=a("2cb5"),u=a("ca00"),m=a("5633"),p=a("769e"),f=a("353a"),h=a("5371"),v=a("4ec3");function g(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",o=a.toStringTag||"@@toStringTag";function l(a,r,o,l){var s=r&&r.prototype instanceof n?r:n,c=Object.create(s.prototype);return b(c,"_invoke",function(a,r,o){var l,n,s,c=0,d=o||[],u=!1,m={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,a){return l=t,n=0,s=e,m.n=a,i}};function p(a,r){for(n=a,s=r,t=0;!u&&c&&!o&&t<d.length;t++){var o,l=d[t],p=m.p,f=l[2];a>3?(o=f===r)&&(s=l[(n=l[4])?5:(n=3,3)],l[4]=l[5]=e):l[0]<=p&&((o=a<2&&p<l[1])?(n=0,m.v=r,m.n=l[1]):p<f&&(o=a<3||l[0]>r||r>f)&&(l[4]=a,l[5]=r,m.n=f,n=0))}if(o||a>1)return i;throw u=!0,r}return function(o,d,f){if(c>1)throw TypeError("Generator is already running");for(u&&1===d&&p(d,f),n=d,s=f;(t=n<2?e:s)||!u;){l||(n?n<3?(n>1&&(m.n=-1),p(n,s)):m.n=s:m.v=s);try{if(c=2,l){if(n||(o="next"),t=l[o]){if(!(t=t.call(l,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,n<2&&(n=0)}else 1===n&&(t=l.return)&&t.call(l),n<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),n=1);l=e}else if((t=(u=m.n<0)?s:a.call(r,m))!==i)break}catch(t){l=e,n=1,s=t}finally{c=1}}return{value:t,done:u}}}(a,o,l),!0),c}var i={};function n(){}function s(){}function c(){}t=Object.getPrototypeOf;var d=[][r]?t(t([][r]())):(b(t={},r,(function(){return this})),t),u=c.prototype=n.prototype=Object.create(d);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,b(e,o,"GeneratorFunction")),e.prototype=Object.create(u),e}return s.prototype=c,b(u,"constructor",c),b(c,"constructor",s),s.displayName="GeneratorFunction",b(c,o,"GeneratorFunction"),b(u),b(u,o,"Generator"),b(u,r,(function(){return this})),b(u,"toString",(function(){return"[object Generator]"})),(g=function(){return{w:l,m:m}})()}function b(e,t,a,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}b=function(e,t,a,r){function l(t,a){b(e,t,(function(e){return this._invoke(t,a,e)}))}t?o?o(e,t,{value:a,enumerable:!r,configurable:!r,writable:!r}):e[t]=a:(l("next",0),l("throw",1),l("return",2))},b(e,t,a,r)}function y(e,t,a,r,o,l,i){try{var n=e[l](i),s=n.value}catch(e){return void a(e)}n.done?t(s):Promise.resolve(s).then(r,o)}function w(e){return function(){var t=this,a=arguments;return new Promise((function(r,o){var l=e.apply(t,a);function i(e){y(l,r,o,i,n,"next",e)}function n(e){y(l,r,o,i,n,"throw",e)}i(void 0)}))}}var x={name:"ContractInfoAdd",components:{JTreeSelect:l["default"],TrainAssetType:d["default"],LineSelectList:m["default"],SupplierList:p["default"],DocUpload:h["default"],DocPreviewModal:f["default"]},props:["contractDetail"],data:function(){return{title:"新增",trainTypeId:"",assetTypeId:"",back:!0,detail:{},lineId:"",form:this.$form.createForm(this),confirmLoading:!1,visible:!1,supplierName:"",supplierId:"",defaultFileList:[],annexList:[],filePath:"",fileName:"",status:!1,saveFlag:!0,uploading:!1,validatorRules:{contractName:{rules:[{required:!0,message:"请输入合同名称!"},{max:200,message:"输入长度不能超过200字符!"}]},contractNo:{rules:[{required:!0,message:"请输入合同编号!"},{max:32,message:"输入长度不能超过32字符!"},{validator:this.validateCode}]},attention:{rules:[{max:255,message:"输入长度不能超过255字符!"}]},remark:{rules:[{max:255,message:"输入长度不能超过255字符!"}]},supplierId:{rules:[{required:!0,message:"请选择厂商!"}]},amount:{rules:[{required:!0,message:"请输入合同金额!"}]},taxRate:{rules:[{required:!0,message:"请输入合同税率!"}]},status:{rules:[{required:!0,message:"请选择合同状态!"}]},lineId:{rules:[{required:!0,message:"请选择所属线路!"}]},startDate:{rules:[{required:!0,message:"请输入开始时间!"}]},finishDate:{rules:[{required:!0,message:"请输入终止时间!"}]},signDate:{rules:[{required:!0,message:"请输入签订时间!"}]},expiration:{rules:[{required:!0,message:"请输入质保期!"}]},needDay:{rules:[{required:!0,message:"请输入维修周期!"}]},qualityDepositPercent:{rules:[{required:!0,message:"请输入质保金比例!"}]},depositType:{rules:[{required:!0,message:"请选择保证金类型!"}]},advancePayment:{rules:[{required:!0,message:"请输入预付款!"}]},assetAmount:{rules:[{required:!0,message:"请输入每列部件数量!"}]},executeTaxRate:{rules:[{required:!0,message:"请输入执行税率!"}]},assetTypeName:{rules:[{required:!0,message:"请选择合同设备!"}]},trainAmount:{rules:[{required:!0,message:"输入车辆数!"}]},finishAmount:{rules:[{required:!0,message:"输入已完成数!"}]},repairProgramId:{rules:[{required:!0,message:"请选择修程类型!"}]},assetTypeAlias:{rules:[{max:150,message:"输入长度不能超过150字符!"}]}},labelCol1:{xs:{span:24},sm:{span:9}},wrapperCol1:{xs:{span:24},sm:{span:15}},labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:21}}}},methods:{validateCode:function(e,t,a){var r={tableName:"bu_contract_info",fieldName:"contract_no",fieldVal:t,dataId:this.model.id};Object(u["e"])(t)?a():Object(v["m"])(r).then((function(e){e.success?a():a(e.message)}))},openSupplierModal:function(){this.$refs.supplierModal.showModal(),this.$refs.mySupplierSelect.blur()},supplierSelect:function(e){var t=this;Object(u["e"])(e)||(this.$nextTick((function(){t.form.setFieldsValue({supplierName:e[0].name})})),this.supplierId=e[0].id)},handleLine:function(e,t){t&&(this.trainTypeId=t.trainTypeId)},openModal:function(){Object(u["e"])(this.form.getFieldValue("lineId"))?this.$message.warn("请先选择线路!"):(this.$refs.selectModal.showModal(),this.$refs.mySelect.blur())},addTarget:function(e){Object(u["e"])(e)||(this.assetTypeId=e[0].id,this.form.setFieldsValue({assetTypeName:e[0].name}))},setBforeUploadStatus:function(e){this.saveFlag=e},setUpLoadingEndStatus:function(e){this.saveFlag=e},successUploadFile:function(e){var t=this;!e||e.length<1||(e.map((function(e){Object.assign(e,{id:Object(u["p"])()}),t.annexList.push(e)})),this.confirmLoading=!1)},uploadFail:function(e){this.confirmLoading=!1},onRemoveFile:function(e){},beginUpload:function(){this.confirmLoading=!0,this.$refs.upload.beginUpload()},handlePrivilege:function(){var e=w(g().m((function e(t,a){var r,o=this;return g().w((function(e){while(1)switch(e.n){case 0:return r={id:t,operation:a},e.n=1,Object(s["Ic"])(r).then((function(e){o.status=e.result}));case 1:return e.a(2)}}),e)})));function t(t,a){return e.apply(this,arguments)}return t}(),handleSeeing:function(){var e=w(g().m((function e(t){return g().w((function(e){while(1)switch(e.n){case 0:return e.n=1,this.handlePrivilege(t.id,2);case 1:this.status?(this.fileName=t.fileName,this.$refs.docPreview.handleFilePath(t.savepath)):this.$message.error("您没有权限!");case 2:return e.a(2)}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleDelete:function(){var e=w(g().m((function e(t,a){var r;return g().w((function(e){while(1)switch(e.n){case 0:r=this,r.$confirm({title:"提示",content:"确定删除该条附件吗？",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){r.annexList.splice(a,1)},onCancel:function(){}});case 1:return e.a(2)}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}(),handleOk:function(){var e=this;this.form.validateFields((function(t,a){if(!t){e.beginUpload();var r=Object.assign({},e.model,a,{startDate:n()(a.startDate).format("YYYY-MM-DD"),finishDate:n()(a.finishDate).format("YYYY-MM-DD"),signDate:a.signDate?n()(a.signDate).format("YYYY-MM-DD"):"",assetTypeId:e.assetTypeId,supplierId:e.supplierId,extInfo:{superInfo:a.superInfo,trainInfo:a.trainInfo}}),o=null;clearInterval(o),o=setInterval((function(){var t;e.saveFlag&&(r.annexList=e.annexList,e.confirmLoading=!0,t=Object(u["e"])(e.model)?Object(c["b"])(r):Object(c["w"])(r),t.then((function(t){t.success?(e.annexList=[],e.$message.success(t.message),e.$emit("ok"),e.close()):e.$message.error(t.message)})).finally((function(){clearInterval(o),e.confirmLoading=!1})))}),1e3)}}))},add:function(){var e=this;this.edit({}),this.$nextTick((function(){e.form.setFieldsValue({trainAmount:1,finishAmount:0})}))},edit:function(e){var t=this;this.visible=!0,this.form.resetFields(),this.model=Object.assign({},e),Object(u["e"])(e)?this.assetTypeId="":(this.assetTypeId=this.model.assetTypeId,this.supplierId=this.model.supplierId,this.handleLine(this.model.lineId)),Object(u["e"])(this.model.extInfo)||this.$nextTick((function(){t.form.setFieldsValue({superInfo:t.model.extInfo.superInfo,trainInfo:t.model.extInfo.trainInfo})})),this.model.id&&(Object(c["G"])({contractId:this.model.id}).then((function(e){e.success&&e.result.length&&(t.annexList=e.result||[])})),this.$nextTick((function(){t.form.setFieldsValue({amount:t.model.amount,contractName:t.model.contractName,contractNo:t.model.contractNo,finishDate:t.model.finishDate?n()(t.model.finishDate):"",signDate:n()(t.model.signDate||void 0),startDate:t.model.startDate?n()(t.model.startDate):"",status:t.model.status,taxRate:t.model.taxRate,assetTypeName:t.model.assetTypeName,attention:t.model.attention,deposit:t.model.deposit,expiration:t.model.expiration,lineId:t.model.lineId,supplierName:t.model.supplierName,remark:t.model.remark,needDay:t.model.needDay,qualityDepositPercent:t.model.qualityDepositPercent,depositType:t.model.depositType,advancePayment:t.model.advancePayment,assetAmount:t.model.assetAmount,executeTaxRate:t.model.executeTaxRate,trainAmount:t.model.trainAmount,finishAmount:t.model.finishAmount,repairProgramId:t.model.repairProgramId,qualityDepositType:t.model.qualityDepositType,payInterval:t.model.payInterval,payBegin:t.model.payBegin,assetTypeAlias:t.model.assetTypeAlias})})))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,this.annexList=[]}}},C=x,k=(a("b44d"),a("2877")),P=Object(k["a"])(C,r,o,!1,null,"6d764443",null);t["default"]=P.exports},aa6b:function(e,t,a){},aae0:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"bodyWrapper"},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{label:"资料名称"}},[t("a-input",{attrs:{placeholder:"请输入文件名称",allowClear:""},model:{value:e.queryParam.fileName,callback:function(t){e.$set(e.queryParam,"fileName",t)},expression:"queryParam.fileName"}})],1)],1),t("a-col",{attrs:{md:10,sm:8}},[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-space",[t("a-button",{on:{click:e.findList}},[e._v("查询")]),t("a-button",{on:{click:e.handleUpload}},[e._v("上传")]),t("a-button",{on:{click:e.deleteRecord}},[e._v("删除")])],1)],1)])],1)],1)],1),t("div",{staticStyle:{height:"calc(100vh - 330px)"}},[t("vxe-table",{ref:"listTable",attrs:{border:"",height:"auto",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","checkbox-config":{trigger:"row",highlight:!0,range:!0},"edit-config":{trigger:"manual",mode:"row"}}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"5%"}}),t("vxe-table-column",{attrs:{title:"-",width:"10%"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("span",[t("a-space",[t("a",{on:{click:function(t){return t.stopPropagation(),e.handleSeeing(r)}}},[e._v("查看")]),t("a",{on:{click:function(t){return t.stopPropagation(),e.handleDownload(r)}}},[e._v("下载")])])],1)]}}])}),t("vxe-table-column",{attrs:{field:"name",title:"资料名称",width:"20%",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"type",title:"文件类型",width:"10%"}}),t("vxe-table-column",{attrs:{field:"fileSize",title:"大小(KB)",width:"10%",align:"right","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"remark",title:"备注",width:"10%",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{title:"操作",width:"10%"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("a",{on:{click:function(t){return t.stopPropagation(),e.handleEdit(r)}}},[e._v("编辑")])]}}])})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1),t("resource-upload-module",{ref:"modalForm",attrs:{contractId:e.contractId,other:!1},on:{ok:function(t){return e.loadData()}}}),t("doc-preview-modal",{ref:"docPreview",attrs:{title:e.fileName}}),t("edit-file-modal",{ref:"editModalForm",attrs:{other:!1},on:{ok:function(t){return e.loadData()}}})],1)},o=[],l=a("d214"),i=a("353a"),n=a("85dfa"),s=a("e2aa"),c=a("b824"),d={name:"PerformResource",props:["contractId","fileType"],components:{ResourceUploadModule:c["default"],DocPreviewModal:i["default"],EditFileModal:n["default"]},data:function(){return{queryParam:{fileName:"",contractId:"",fileType:null,pageNo:1,pageSize:10},totalResult:0,allAlign:"center",tableData:[],fileName:"",filePath:""}},created:function(){this.findList()},methods:{findList:function(){var e=this;this.queryParam.contractId=this.contractId,this.queryParam.fileType=this.fileType,this.loading=!0,Object(l["ab"])(this.queryParam).then((function(t){e.loading=!1,t.success&&(e.totalResult=t.result.total,e.tableData=t.result.records)}))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()},loadData:function(){this.findList(),this.$emit("load")},handleUpload:function(){this.$refs.modalForm.handleAdd(this.fileType)},handleSeeing:function(e){this.fileName=e.name,this.$refs.docPreview.handleFilePath(e.savepath)},handleDownload:function(e){Object(s["b"])(e.savepath)},handleEdit:function(e){this.$refs.editModalForm.edit(e),this.$refs.editModalForm.title="编辑"},deleteRecord:function(){var e=this,t=this.$refs.listTable.getCheckboxRecords();t.length>0?this.$confirm({content:"是否删除选中".concat(t.length,"数据？"),okText:"确认",cancelText:"取消",onOk:function(){var a=t.map((function(e,t){return e.id})).join(",");Object(l["p"])("ids="+a).then((function(t){t.success&&e.findList(),e.$message.success(t.message)}))}}):this.$message.error("尚未选中任何数据!")}}},u=d,m=a("2877"),p=Object(m["a"])(u,r,o,!1,null,"685a610d",null);t["default"]=p.exports},ab87:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"bodyWrapper"},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"使用标题"}},[t("a-input",{attrs:{placeholder:"请输入名称"},model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,"name",t)},expression:"queryParam.name"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"使用日期"}},[t("a-range-picker",{attrs:{ranges:e.dateRanges},on:{change:e.onDateChange},model:{value:e.payDate,callback:function(t){e.payDate=t},expression:"payDate"}})],1)],1),t("a-col",{attrs:{md:12,sm:8}},[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-space",[t("a-button",{on:{click:e.findList}},[e._v("查询")]),t("a-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增")]),t("a-button",{on:{click:e.deleteRecord}},[e._v("删除")])],1)],1)])],1)],1)],1),t("div",{staticStyle:{height:"calc(100vh - 160px)"}},[t("vxe-table",{ref:"listTable",staticClass:"table-footer",staticStyle:{height:"calc(100vh - 240px)"},attrs:{border:"","max-height":"78%",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","edit-config":{trigger:"manual",mode:"row"},"show-footer":"","footer-span-method":e.footerColspanMethod,"footer-cell-class-name":e.footerCellClassName,"footer-method":e.sumMethod}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),t("vxe-table-column",{attrs:{field:"useNo",title:"序号",width:"8%"}}),t("vxe-table-column",{attrs:{field:"subject",title:"使用名目",width:"15%","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{field:"amount",title:"使用金额",width:"10%","header-align":"center",align:"right"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("span",[e._v(e._s(r.amount+"万"))])]}}])}),t("vxe-table-column",{attrs:{field:"useDate",title:"使用日期",width:"10%"}}),t("vxe-table-column",{attrs:{field:"leftover",title:"剩余金额",width:"8%","header-align":"center",align:"right"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("span",[e._v(e._s(r.leftover+"万"))])]}}])}),t("vxe-table-column",{attrs:{field:"reason",title:"使用原因",width:"10%","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{field:"remark",title:"备注",width:"20%","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{title:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("a",{on:{click:function(t){return e.handleEdit(r)}}},[e._v("编辑")])]}}])})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1),t("contract-bak-item-modal",{ref:"modalForm",attrs:{contractId:e.queryParam.contractId},on:{ok:function(t){return e.loadData()}}})],1)},o=[],l=a("c1df"),i=a.n(l),n=a("d214"),s=a("cf57"),c=a("c695"),d=a.n(c),u=a("ca00"),m={components:{ContractBakItemModal:s["default"]},name:"ContractBakDetail",props:["detail"],data:function(){return{tableData:[],allAlign:"center",totalResult:0,behindMoney:0,payDate:null,back:!0,dateRanges:{"最近一周":[i()().startOf("day").subtract(1,"weeks"),i()()],"最近一个月":[i()().startOf("day").subtract(30,"day"),i()()],"最近三个月":[i()().startOf("day").subtract(90,"day"),i()()]},queryParam:{contractId:"",name:"",startTime:null,endTime:null,pageNo:1,pageSize:10},confirmLoading:!1}},created:function(){this.queryParam.contractId=this.detail.id,this.behindMoney=this.detail.behindMoney,this.findList()},methods:{loadData:function(){this.findList()},findList:function(){var e=this;this.loading=!0,Object(n["F"])(this.queryParam).then((function(t){e.totalResult=t.result.total,e.loading=!1,e.tableData=t.result.records}))},onDateChange:function(e,t){Object(u["e"])(t[0])&&Object(u["e"])(t[1])?(this.queryParam.startTime="",this.queryParam.endTime=""):(this.queryParam.startTime=i()(e[0]).format("YYYY-MM-DD"),this.queryParam.endTime=i()(e[1]).format("YYYY-MM-DD"))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()},handleEdit:function(e){var t=e.leftover+e.amount;this.$refs.modalForm.edit(e),this.$refs.modalForm.setMaxAmount(t),this.$refs.modalForm.title="编辑"},handleAdd:function(){var e;this.$refs.modalForm.add(),e=this.tableData.length>0?this.tableData[this.tableData.length-1].leftover:this.behindMoney,this.$refs.modalForm.setMaxAmount(e),this.$refs.modalForm.title="新增"},deleteRecord:function(){var e=this,t=this.$refs.listTable.getCheckboxRecords();t.length>0?this.$confirm({content:"是否删除选中".concat(t.length,"数据？"),onOk:function(){var a=t.map((function(e,t){return e.id})).join(",");Object(n["j"])("ids="+a).then((function(t){e.findList(),e.$message.success(t.message)}))}}):this.$message.error("尚未选中任何数据!")},sumMethod:function(e){var t=this,a=e.columns,r=e.data,o=[a.map((function(e,a){if(0===a)return"合计";if(["useNo"].includes(e.property)){var o="剩余金额：";return 1===r.length?o=o+r[0].leftover+"万元":r.length>1?o=o+Math.min.apply(Math,r.map((function(e){return e.leftover})))+"万元":o+=t.behindMoney+"万元","已使用："+d.a.sum(r,"amount")+"万元；"+o}return null}))];return o},footerColspanMethod:function(e){var t=e.$rowIndex,a=e._columnIndex;if(0===t){if(1===a)return{rowspan:1,colspan:8};if(0!==a)return{rowspan:0,colspan:0}}},footerCellClassName:function(e){var t=e.$rowIndex,a=(e.column,e.columnIndex);if(0===a&&0===t)return"col-red"},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,this.queryParam.startTime="",this.queryParam.endTime="",this.queryParam.name="",this.payDate=null}}},p=m,f=(a("19c3"),a("2877")),h=Object(f["a"])(p,r,o,!1,null,null,null);t["default"]=h.exports},abb2:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("v-chart",{attrs:{title:e.title,forceFit:!0,height:e.height,data:e.data,scale:e.scale,onClick:e.handleClick}},[t("v-tooltip",{attrs:{showTitle:!1,dataKey:"item*percent"}}),t("v-axis"),t("v-legend",{attrs:{dataKey:"item",show:!1}}),t("v-pie",{attrs:{position:"percent",color:"item","v-style":e.pieStyle,label:e.labelConfig}}),t("v-coord",{attrs:{type:"theta",radius:.75,innerRadius:.6}})],1)},o=[],l=a("c917"),i=a("7104"),n={name:"Pie",mixins:[l["a"]],props:{title:{type:String,default:""},height:{type:Number,default:200},dataSource:{type:Array,default:function(){return[{item:"示例一",count:40},{item:"示例二",count:21},{item:"示例三",count:17},{item:"示例四",count:13},{item:"示例五",count:9}]}}},data:function(){return{scale:[{dataKey:"percent",min:0,formatter:".0%"}],pieStyle:{stroke:"#fff",lineWidth:1},labelConfig:["percent",{formatter:function(e,t){return t.point.item+": "+e}}]}},computed:{data:function(){var e=(new i.View).source(this.dataSource);return e.transform({type:"percent",field:"count",dimension:"item",as:"percent"}),e.rows}}},s=n,c=a("2877"),d=Object(c["a"])(s,r,o,!1,null,null,null);t["default"]=d.exports},ae15:function(e,t,a){"use strict";a("a1e7")},b098:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-tree-select",{staticStyle:{width:"100%"},attrs:{allowClear:"",labelInValue:"",getPopupContainer:function(e){return e.parentNode},disabled:e.disabled,dropdownStyle:{maxHeight:"400px",overflow:"auto"},placeholder:e.placeholder,loadData:e.asyncLoadTreeData,value:e.treeValue,treeData:e.treeData,multiple:e.multiple},on:{change:e.onChange,search:e.onSearch}})},o=[],l=a("0fea");function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function n(e){return d(e)||c(e)||m(e)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function d(e){if(Array.isArray(e))return p(e)}function u(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=m(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,i=!0,n=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){n=!0,l=e},f:function(){try{i||null==a.return||a.return()}finally{if(n)throw l}}}}function m(e,t){if(e){if("string"==typeof e)return p(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}var f={name:"JTreeSelect",props:{value:{type:String,required:!1},placeholder:{type:String,default:"请选择",required:!1},dict:{type:String,default:"",required:!1},pidField:{type:String,default:"pid",required:!1},pidValue:{type:String,default:"",required:!1},disabled:{type:Boolean,default:!1,required:!1},hasChildField:{type:String,default:"",required:!1},condition:{type:String,default:"",required:!1},multiple:{type:Boolean,default:!1},loadTriggleChange:{type:Boolean,default:!1,required:!1}},data:function(){return{treeValue:null,treeData:[],url:"/sys/dict/loadTreeData",view:"/sys/dict/loadDictItem/",tableName:"",text:"",code:""}},watch:{value:function(){this.loadItemByCode()},dict:function(){this.initDictInfo(),this.loadRoot()}},created:function(){var e=this;this.validateProp().then((function(){e.initDictInfo(),e.loadRoot(),e.loadItemByCode()}))},methods:{loadItemByCode:function(){var e=this;this.value&&"0"!=this.value?Object(l["d"])("".concat(this.view).concat(this.dict),{key:this.value}).then((function(t){if(t.success){var a=e.value.split(",");e.treeValue=t.result.map((function(e,t){return{key:a[t],value:a[t],label:e}})),e.onLoadTriggleChange(t.result[0])}})):this.treeValue=null},onLoadTriggleChange:function(e){!this.multiple&&this.loadTriggleChange&&this.$emit("change",this.value,e)},initDictInfo:function(){var e=this.dict.split(",");this.tableName=e[0],this.text=e[1],this.code=e[2]},asyncLoadTreeData:function(e){var t=this;return new Promise((function(a){if(e.$vnode.children)a();else{var r=e.$vnode.key,o={pid:r,tableName:t.tableName,text:t.text,code:t.code,pidField:t.pidField,hasChildField:t.hasChildField,condition:t.condition};Object(l["d"])(t.url,o).then((function(e){if(e.success){var o,l=u(e.result);try{for(l.s();!(o=l.n()).done;){var i=o.value;i.value=i.key,0==i.leaf?i.isLeaf=!1:1==i.leaf&&(i.isLeaf=!0)}}catch(s){l.e(s)}finally{l.f()}t.addChildren(r,e.result,t.treeData),t.treeData=n(t.treeData)}a()}))}}))},addChildren:function(e,t,a){if(a&&a.length>0){var r,o=u(a);try{for(o.s();!(r=o.n()).done;){var l=r.value;if(l.key==e){t&&0!=t.length?l.children=t:l.isLeaf=!0;break}this.addChildren(e,t,l.children)}}catch(i){o.e(i)}finally{o.f()}}},loadRoot:function(){var e=this,t={pid:this.pidValue,tableName:this.tableName,text:this.text,code:this.code,pidField:this.pidField,hasChildField:this.hasChildField,condition:this.condition};Object(l["d"])(this.url,t).then((function(t){if(t.success&&t.result){var a,r=u(t.result);try{for(r.s();!(a=r.n()).done;){var o=a.value;o.value=o.key,0==o.leaf?o.isLeaf=!1:1==o.leaf&&(o.isLeaf=!0)}}catch(l){r.e(l)}finally{r.f()}e.treeData=n(t.result)}}))},onChange:function(e){e?e instanceof Array?(this.$emit("change",e.map((function(e){return e.value})).join(",")),this.treeValue=e):(this.$emit("change",e.value,e.label),this.treeValue=e):(this.$emit("change",""),this.treeValue=null)},onSearch:function(e){},getCurrTreeData:function(){return this.treeData},validateProp:function(){var e=this,t=this.condition;return new Promise((function(a,r){if(t)try{var o=JSON.parse(t);"object"==i(o)&&o?a():(e.$message.error("组件JTreeSelect-condition传值有误，需要一个json字符串!"),r())}catch(l){e.$message.error("组件JTreeSelect-condition传值有误，需要一个json字符串!"),r()}else a()}))}},model:{prop:"value",event:"change"}},h=f,v=a("2877"),g=Object(v["a"])(h,r,o,!1,null,null,null);t["default"]=g.exports},b44d:function(e,t,a){"use strict";a("ed8b")},bb9c:function(e,t,a){},c917:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var r={methods:{handleClick:function(e,t){this.handleEvent("click",e,t)},handleEvent:function(e,t,a){this.$emit(e,t,a)}}}},cc0c:function(e,t,a){"use strict";a("cdfd")},ccd6:function(e,t,a){},cdfd:function(e,t,a){},cf57:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,width:700,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"使用名目"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["subject",e.validatorRules.subject],expression:"[ 'subject', validatorRules.subject]",modifiers:{trim:!0}}],attrs:{placeholder:"使用名目"}})],1)],1),t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"使用金额"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["amount",e.validatorRules.amount],expression:"['amount',validatorRules.amount]"}],staticStyle:{width:"100%"},attrs:{placeholder:"使用金额",formatter:function(e){return"".concat(e,"万")},parser:function(e){return e.replace("万","")},min:0,max:e.maxAmount,step:.1}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"办理人"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["dealMan",e.validatorRules.dealMan],expression:"[ 'dealMan',validatorRules.dealMan]",modifiers:{trim:!0}}],attrs:{placeholder:"办理人"}})],1)],1),t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"办理日期"}},[t("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["dealDate",e.validatorRules.dealDate],expression:"['dealDate',validatorRules.dealDate]"}],staticStyle:{width:"100%"},attrs:{placeholder:"办理日期"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"使用日期"}},[t("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["useDate",e.validatorRules.useDate],expression:"['useDate',validatorRules.useDate]"}],staticStyle:{width:"100%"},attrs:{placeholder:"使用日期"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:24,sm:24}},[t("a-form-item",{attrs:{label:"使用原因",labelCol:e.rLabelCol,wrapperCol:e.rWrapperCol}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["reason",e.validatorRules.reason],expression:"[ 'reason',validatorRules.reason]"}]})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:24,sm:24}},[t("a-form-item",{attrs:{label:"备注",labelCol:e.rLabelCol,wrapperCol:e.rWrapperCol}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark",e.validatorRules.remark],expression:"[ 'remark',validatorRules.remark]"}]})],1)],1)],1)],1)],1)],1)},o=[],l=a("d214"),i=a("c1df"),n=a.n(i),s={name:"ContractBakItemModal",props:["contractId"],data:function(){return{title:"操作",visible:!1,model:{},maxAmount:0,labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:15}},rLabelCol:{xs:{span:24},sm:{span:3}},rWrapperCol:{xs:{span:24},sm:{span:21}},confirmLoading:!1,form:this.$form.createForm(this),validatorRules:{subject:{rules:[{required:!0,message:"请输入使用名目!"},{max:32,message:"输入长度不能超过32字符!"}]},amount:{rules:[{required:!0,message:"请输入使用金额!"}]},dealDate:{rules:[{required:!0,message:"请输入办理日期!"}]},useDate:{rules:[{required:!0,message:"请输入使用日期!"}]},dealMan:{rules:[{max:32,message:"输入长度不能超过32字符!"}]},reason:{rules:[{max:64,message:"输入长度不能超过64字符!"}]},remark:{rules:[{max:255,message:"输入长度不能超过255字符!"}]}}}},created:function(){},methods:{add:function(){this.edit({})},setMaxAmount:function(e){this.maxAmount=e},edit:function(e){var t=this;this.form.resetFields(),this.model=Object.assign({},e),this.visible=!0,this.$nextTick((function(){t.form.setFieldsValue({subject:t.model.subject,amount:t.model.amount,dealMan:t.model.dealMan,reason:t.model.reason,dealDate:n()(t.model.dealDate||void 0),useDate:n()(t.model.useDate||void 0),remark:t.model.remark})}))},handleOk:function(){var e=this,t=this;t.form.validateFields((function(a,r){if(!a){t.confirmLoading=!0;var o,i=Object.assign(t.model,r,{dealDate:n()(r.dealDate).format("YYYY-MM-DD"),useDate:n()(r.useDate).format("YYYY-MM-DD"),contractId:e.contractId});o=t.model.id?Object(l["v"])(i):Object(l["a"])(i),o.then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok"),t.close()):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1}))}}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},c=s,d=a("2877"),u=Object(d["a"])(c,r,o,!1,null,null,null);t["default"]=u.exports},d8b7:function(e,t,a){},e0bf:function(e,t,a){},ed8b:function(e,t,a){},f0db:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,width:800,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"支付标题:"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["payDesc",e.validatorRules.payDesc],expression:"['payDesc', validatorRules.payDesc]",modifiers:{trim:!0}}],attrs:{placeholder:"支付标题"}})],1)],1),t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"执行税率:"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["executeTaxRate",e.validatorRules.executeTaxRate],expression:"['executeTaxRate', validatorRules.executeTaxRate]"}],staticStyle:{width:"100%"},attrs:{placeholder:"执行税率",formatter:function(e){return"".concat(e,"%")},parser:function(e){return e.replace("%","")},min:0,max:100,step:.1}})],1)],1),t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"开票金额:"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["ticketAmount",e.validatorRules.ticketAmount],expression:"['ticketAmount', validatorRules.ticketAmount]"}],staticStyle:{width:"100%"},attrs:{placeholder:"开票金额",formatter:function(e){return"".concat(e,"万")},parser:function(e){return e.replace("万","")},min:0,max:e.maxAmount,step:.1}})],1)],1),t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"支付金额:"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["amount",e.validatorRules.amount],expression:"['amount', validatorRules.amount]"}],staticStyle:{width:"100%"},attrs:{placeholder:"支付金额",formatter:function(e){return"".concat(e,"万")},parser:function(e){return e.replace("万","")},min:0,max:e.maxAmount,step:.1},on:{change:e.onAmountChange}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"质保金比率:"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["qaRate",e.validatorRules.qaRate],expression:"['qaRate', validatorRules.qaRate]"}],staticStyle:{width:"100%"},attrs:{placeholder:"质保金比率",formatter:function(e){return"".concat(e,"%")},parser:function(e){return e.replace("%","")},min:0,max:100,step:.1},on:{change:e.onQaRateChange}})],1)],1),t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"质保金:"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["qaMoney",e.validatorRules.qaMoney],expression:"['qaMoney', validatorRules.qaMoney]"}],staticStyle:{width:"100%"},attrs:{placeholder:"质保金",formatter:function(e){return"".concat(e,"万")},parser:function(e){return e.replace("万","")},min:0,max:e.maxAmount,step:.1,disabled:!0}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"办理日期"}},[t("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["dealDate",e.validatorRules.dealDate],expression:"['dealDate', validatorRules.dealDate]"}],staticStyle:{width:"100%"},attrs:{placeholder:"办理日期"}})],1)],1),t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"办理人:"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["dealMan",e.validatorRules.dealMan],expression:"['dealMan', validatorRules.dealMan]",modifiers:{trim:!0}}],attrs:{placeholder:"办理人"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"支付日期:"}},[t("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["payDate",e.validatorRules.payDate],expression:"['payDate', validatorRules.payDate]"}],staticStyle:{width:"100%"},attrs:{placeholder:"支付日期"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:24,sm:24}},[t("a-form-item",{attrs:{label:"备注",labelCol:e.rLabelCol,wrapperCol:e.rWrapperCol}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark",e.validatorRules.remark],expression:"['remark', validatorRules.remark]"}]})],1)],1)],1)],1)],1)],1)},o=[],l=a("d214"),i=a("c1df"),n=a.n(i),s=a("ca00"),c={name:"ContractPayItemModal",props:["contractId"],data:function(){return{title:"操作",visible:!1,model:{},maxAmount:0,labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:15}},rLabelCol:{xs:{span:24},sm:{span:3}},rWrapperCol:{xs:{span:24},sm:{span:21}},confirmLoading:!1,form:this.$form.createForm(this),validatorRules:{executeTaxRate:{rules:[{required:!0,message:"请输入执行税率!"}]},ticketAmount:{rules:[{required:!0,message:"请输入开票金额!"}]},amount:{rules:[{required:!0,message:"请输入支付金额!"}]},qaRate:{rules:[{required:!0,message:"请输入质保金比率!"}]},payDesc:{rules:[{required:!0,message:"请输入支付标题!"},{max:64,message:"输入长度不能超过64字符!"}]},dealDate:{rules:[{required:!0,message:"请输入办理日期!"}]},payDate:{rules:[{required:!0,message:"请输入支付日期!"}]},remark:{rules:[{max:255,message:"输入长度不能超过255字符!"}]},dealMan:{rules:[{required:!0,message:"请输入办理人!"},{max:32,message:"输入长度不能超过32字符!"}]}},oldExecuteTaxRate:0}},created:function(){},methods:{add:function(e){this.edit(e)},setMaxAmount:function(e){this.maxAmount=e},edit:function(e){var t=this;this.form.resetFields(),this.model=Object.assign({},e),this.oldExecuteTaxRate=e.executeTaxRate,this.visible=!0,this.$nextTick((function(){t.form.getFieldDecorator("qaMoney"),t.form.setFieldsValue({payDesc:t.model.payDesc,ticketAmount:t.model.ticketAmount,amount:t.model.amount,qaMoney:t.model.qaMoney,qaRate:t.model.qaRate,dealMan:t.model.dealMan,dealDate:n()(t.model.dealDate||void 0),payDate:n()(t.model.payDate||void 0),executeTaxRate:t.model.executeTaxRate,remark:t.model.remark})}))},handleOk:function(){var e=this,t=this;t.form.validateFields((function(a,r){if(!a){t.confirmLoading=!0;var o,i=Object.assign(t.model,r,{dealDate:n()(r.dealDate).format("YYYY-MM-DD"),payDate:n()(r.payDate).format("YYYY-MM-DD"),contractId:e.contractId}),c=Object(s["k"])(e.maxAmount,Object(s["i"])(1,Object(s["k"])(Number(e.oldExecuteTaxRate),100))),d=Object(s["i"])(1,Object(s["k"])(Number(i.executeTaxRate),100));i["leftover"]=Object(s["j"])(Object(s["l"])(c,d),i.amount),o=t.model.id?Object(l["x"])(i):Object(l["c"])(i),o.then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok"),t.close()):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1}))}}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1},onAmountChange:function(e){var t=this.form.getFieldValue("qaRate");if(void 0!==t)try{this.form.setFieldsValue({qaMoney:Object(s["l"])(Number(e),Object(s["k"])(Number(t),100))})}catch(a){}},onQaRateChange:function(e){var t=this.form.getFieldValue("amount");if(void 0!==t)try{this.form.setFieldsValue({qaMoney:Object(s["l"])(Number(t),Object(s["k"])(Number(e),100))})}catch(a){}}}},d=c,u=a("2877"),m=Object(u["a"])(d,r,o,!1,null,null,null);t["default"]=m.exports},f8f3:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,width:"100%",visible:e.visible,confirmLoading:e.confirmLoading,dialogClass:"fullDialog no-footer",destroyOnClose:!0},on:{cancel:e.handleCancel}},[t("div",{staticClass:"bodyWrapper"},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"支付标题"}},[t("a-input",{attrs:{placeholder:"请输入名称"},model:{value:e.queryParam.searchText,callback:function(t){e.$set(e.queryParam,"searchText",t)},expression:"queryParam.searchText"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"支付日期"}},[t("a-range-picker",{attrs:{ranges:e.dateRanges,defaultPickerValue:e.defaultDateRange},on:{change:e.onDateChange},model:{value:e.payDate,callback:function(t){e.payDate=t},expression:"payDate"}})],1)],1),t("a-col",{attrs:{md:12,sm:8}},[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-space",[t("a-button",{on:{click:e.findList}},[e._v("查询")]),t("a-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增")]),t("a-button",{attrs:{disabled:1!=e.btnStatus.length},on:{click:function(t){return e.handleEdit(e.btnStatus[0])}}},[e._v("编辑")]),t("a-button",{attrs:{disabled:e.btnStatus.length<1},on:{click:e.deleteRecord}},[e._v("删除")])],1)],1)])],1)],1)],1),t("div",{staticStyle:{height:"calc(100vh - 220px)"}},[t("vxe-table",{ref:"payListTable",staticClass:"table-footer",staticStyle:{height:"calc(100vh - 220px)"},attrs:{border:"","max-height":"90%",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","checkbox-config":{trigger:"row",highlight:!0,range:!0},"edit-config":{trigger:"manual",mode:"row"},"show-footer":"","footer-span-method":e.footerColspanMethod,"footer-cell-class-name":e.footerCellClassName,"footer-method":e.sumMethod},on:{"checkbox-change":e.checkboxChange,"checkbox-all":e.checkboxChange}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"40",align:"center"}}),t("vxe-table-column",{attrs:{type:"seq",field:"payNo",title:"序号",width:"70"}}),t("vxe-table-column",{attrs:{field:"payDesc",title:"支付标题","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{field:"ticketAmount",title:"开票金额",width:"120px","header-align":"center",align:"right"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("span",[e._v(e._s(r.ticketAmount+"万"))])]}}])}),t("vxe-table-column",{attrs:{field:"executeTaxRate",title:"税率",width:"120px","header-align":"center",align:"right"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("span",[e._v(e._s(r.executeTaxRate+"%"))])]}}])}),t("vxe-table-column",{attrs:{field:"amount",title:"支付金额",width:"120px","header-align":"center",align:"right"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("span",[e._v(e._s(r.amount+"万"))])]}}])}),t("vxe-table-column",{attrs:{field:"qaRate",title:"质保金比率",width:"120px",align:"right"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("span",[e._v(e._s(r.qaRate+"%"))])]}}])}),t("vxe-table-column",{attrs:{field:"qaMoney",title:"质保金",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("span",[e._v(e._s(r.qaMoney+"万"))])]}}])}),t("vxe-table-column",{attrs:{field:"dealMan",title:"办理人",width:"80px"}}),t("vxe-table-column",{attrs:{field:"payDate",title:"支付日期",width:"100px"}}),t("vxe-table-column",{attrs:{field:"dealDate",title:"办理日期",width:"100px"}}),t("vxe-table-column",{attrs:{field:"leftover",title:"剩余支付",width:"120px","header-align":"center",align:"right"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("span",[e._v(e._s(r.leftover+"万"))])]}}])}),t("vxe-table-column",{attrs:{field:"remark",title:"备注","header-align":"center",align:"left"}})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1),t("contract-pay-item-modal",{ref:"modalForm",attrs:{contractId:e.queryParam.contractId},on:{ok:function(t){return e.loadData()}}})],1)])},o=[],l=a("c1df"),i=a.n(l),n=a("d214"),s=a("f0db"),c=a("c695"),d=a.n(c),u=a("ca00"),m=(a("54f6"),{components:{ContractPayItemModal:s["default"]},name:"ContractPay",props:["detail"],data:function(){return{tableData:[],allAlign:"center",totalResult:0,amount:0,payDate:null,back:!0,dateRanges:{"最近一周":[i()().startOf("day").subtract(1,"weeks"),i()()],"最近一个月":[i()().startOf("day").subtract(30,"day"),i()()],"最近三个月":[i()().startOf("day").subtract(90,"day"),i()()]},queryParam:{contractId:"",searchText:"",startTime:null,endTime:null,pageNo:1,pageSize:10},visible:!1,confirmLoading:!1,title:"支付管理",leftover:0,executeTaxRate:0,btnStatus:[]}},methods:{checkboxChange:function(e){var t=e.records;this.btnStatus=t},loadData:function(){this.findList()},show:function(e){this.visible=!0,this.amount=e.amount,this.queryParam.contractId=e.contractId,this.executeTaxRate=e.executeTaxRate,this.findList()},findList:function(){var e=this;this.confirmLoading=!0,Object(n["K"])(this.queryParam).then((function(t){e.totalResult=t.result.total,e.confirmLoading=!1,e.tableData=t.result.records,e.btnStatus=[]}))},onDateChange:function(e,t){Object(u["e"])(t[0])&&Object(u["e"])(t[1])?(this.queryParam.startTime="",this.queryParam.endTime=""):(this.queryParam.startTime=i()(e[0]).format("YYYY-MM-DD"),this.queryParam.endTime=i()(e[1]).format("YYYY-MM-DD"))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()},handleEdit:function(e){var t=e.leftover+e.amount;this.$refs.modalForm.edit(e),this.$refs.modalForm.setMaxAmount(t),this.$refs.modalForm.title="编辑"},handleAdd:function(){var e;this.$refs.modalForm.add({executeTaxRate:this.executeTaxRate}),e=this.tableData.length>0?this.tableData[this.tableData.length-1].leftover:this.amount,this.$refs.modalForm.setMaxAmount(e),this.$refs.modalForm.title="新增"},deleteRecord:function(){var e=this,t=this.$refs.payListTable.getCheckboxRecords();t.length>0?this.$confirm({content:"是否删除选中".concat(t.length,"数据？"),onOk:function(){var a=t.map((function(e,t){return e.id})).join(",");Object(n["l"])("ids="+a).then((function(t){e.findList(),e.$message.success(t.message)}))}}):this.$message.error("尚未选中任何数据!")},sumMethod:function(e){var t=this,a=e.columns,r=e.data,o=[a.map((function(e,a){if(0===a)return"合计";if(["payNo"].includes(e.property)){var o="剩余支付：";return 1===r.length?(o=o+r[0].leftover+"万元",t.leftover=r[0].leftover):r.length>1?(o=o+r[r.length-1].leftover+"万元",t.leftover=r[r.length-1].leftover):(o+=t.amount+"万元",t.leftover=t.amount),"已支付："+d.a.sum(r,"amount")+"万元；"+o}return null}))];return o},footerColspanMethod:function(e){var t=e.$rowIndex,a=e._columnIndex;if(0===t){if(1===a)return{rowspan:1,colspan:12};if(0!==a)return{rowspan:0,colspan:0}}},footerCellClassName:function(e){var t=e.$rowIndex,a=(e.column,e.columnIndex);if(0===a&&0===t)return"col-red"},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,this.queryParam.startTime="",this.queryParam.endTime="",this.queryParam.searchText="",this.payDate=null}}}),p=m,f=(a("1c10"),a("2877")),h=Object(f["a"])(p,r,o,!1,null,null,null);t["default"]=h.exports},fdf0:function(e,t,a){"use strict";a("6d6e")}}]);