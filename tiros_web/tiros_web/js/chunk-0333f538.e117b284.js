(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0333f538"],{6994:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t._self._c;return e("div",[e("a-modal",{attrs:{title:"批次明细",width:"70%",visible:t.visible,confirmLoading:t.confirmLoading},on:{ok:t.handleOk,cancel:t.cancel}},[e("div",{staticClass:"fieldset-wrapper"},[e("h4",{staticClass:"title"},[t._v("实际消耗")]),e("div",{staticStyle:{"padding-bottom":"10px"}},[e("a-space",[e("a-button",{on:{click:function(e){return t.$refs.modalForm.showModal()}}},[t._v("添加")]),e("a-button",{on:{click:t.deleteEvent}},[t._v("删除")])],1)],1),e("div",{staticStyle:{height:"calc(100vh - 600px)"}},[e("vxe-table",{key:"outTable",ref:"outTable",attrs:{border:"",height:"auto",align:"center",data:t.form.actList,"show-overflow":"tooltip","checkbox-config":{trigger:"row",highlight:!0,range:!0}},on:{"checkbox-all":t.selectChangeEvent,"checkbox-change":t.selectChangeEvent}},[e("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),e("vxe-table-column",{attrs:{field:"tradeNo",title:"批次号"}}),e("vxe-table-column",{attrs:{field:"price",title:"价格"}}),e("vxe-table-column",{attrs:{field:"actAmount",title:"数量"},scopedSlots:t._u([{key:"default",fn:function(i){var r=i.row;return[e("a-input-number",{attrs:{min:0,max:r.usableAmount,precision:0},model:{value:r.actAmount,callback:function(e){t.$set(r,"actAmount",e)},expression:"row.actAmount"}})]}}])})],1)],1)])]),e("material-list",{ref:"modalForm",attrs:{lineId:t.form.lineId,multiple:!1,mode:[3],materialTypeCode:t.form.materialTypeCode,"group-id":t.form.groupId},on:{ok:t.onSelectMaterial}})],1)},o=[],n=i("ca00"),a=i("7164");function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function l(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?l(Object(i),!0).forEach((function(e){u(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function u(t,e,i){return(e=f(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function f(t){var e=d(t,"string");return"symbol"==c(e)?e:e+""}function d(t,e){if("object"!=c(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var m={name:"MaterialConsumeTradeModal",components:{MaterialList:a["default"]},data:function(){return{visible:!1,confirmLoading:!1,form:{workstationId:null,useCategory:null,systemId:null,actList:[]},selecteList:[],labelCol:{span:6},wrapperCol:{span:18},isEdit:!1,validRules:{actAmount:[{required:!0,message:"请输入消耗数量"}]},copy:{}}},methods:{show:function(t){this.form=s(s({},this.form),t),this.selecteList=[],this.visible=!0},selectChangeEvent:function(t){var e=t.records;this.selecteList=JSON.parse(JSON.stringify(e))},deleteEvent:function(){var t=this;this.selecteList.forEach((function(e,i,r){for(var o=0,n=t.form.actList.length;o<n;o++)if(e.id===t.form.actList[o].id){t.form.actList.splice(o,1);break}}))},onSelectMaterial:function(t){if(t.length){var e=this.form.actList.filter((function(e){return e.tradeNo===t[0].tradeNo}));if(e.length)return this.$message.warning("添加的批次已经存在列表中");this.form.actList.push({id:Object(n["p"])(),groupStockId:t[0].groupStockId,applyId:t[0].applyId,applyIdDetailId:t[0].applyIdDetailId,assignDetailId:t[0].assignDetailId,tradeNo:t[0].tradeNo,actAmount:"",usableAmount:t[0].usableAmount,price:t[0].price})}},handleOk:function(){this.isEdit?this.$message.warning("请先保存或者取消正在编辑的物资核实"):(this.$emit("ok",this.form.actList),this.visible=!1)},cancel:function(){this.visible=!1,this.isEdit=!1,this.$emit("cancel",this.copy)}}},p=m,b=(i("91cb5"),i("2877")),h=Object(b["a"])(p,r,o,!1,null,"00962e02",null);e["default"]=h.exports},"91cb5":function(t,e,i){"use strict";i("a9af")},a9af:function(t,e,i){}}]);