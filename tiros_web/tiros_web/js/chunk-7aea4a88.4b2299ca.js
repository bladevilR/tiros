(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7aea4a88","chunk-41d7c2b0","chunk-42391c95","chunk-535429be","chunk-24cb054c","chunk-2d0c17f7"],{"25e0":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{title:t.title,centered:"",width:500,visible:t.visible,confirmLoading:t.confirmLoading,cancelText:"关闭",destroyOnClose:!0},on:{ok:t.handleOk,cancel:t.handleCancel}},[e("a-spin",{attrs:{spinning:t.confirmLoading}},[e("a-form",{attrs:{form:t.form}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"检查日期"}},[e("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["checkDate",t.validatorRules.checkDate],expression:"['checkDate', validatorRules.checkDate]"}],staticStyle:{width:"100%"},attrs:{format:"YYYY-MM-DD",placeholder:"选择检查日期"},on:{change:t.changeCheckDate}})],1),e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"检查结果"}},[e("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator",value:["checkResult",t.validatorRules.checkResult],expression:"['checkResult', validatorRules.checkResult]"}],attrs:{triggerChange:!0,placeholder:"请选择检查结果",dictCode:"bu_work_order_record_result"}})],1),e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"质量负责人"}},[e("a-input",{ref:"userSelect",staticStyle:{width:"100%"},attrs:{placeholder:"请选择质量负责人",open:!1},on:{click:function(e){return t.openSelectUser()}},model:{value:t.checkUserName,callback:function(e){t.checkUserName=e},expression:"checkUserName"}},[e("a-icon",{attrs:{slot:"suffix",type:"ellipsis"},slot:"suffix"})],1)],1),e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"备注"}},[e("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["remark"],expression:"['remark']",modifiers:{trim:!0}}],attrs:{placeholder:"请输入备注"}})],1)],1)],1),e("user-list",{ref:"userSelectModal",attrs:{multiple:!1},on:{ok:t.onSelectUser}})],1)},o=[],n=a("b245"),i=a("b7b4"),s=a("c1df"),l=a.n(s),c={name:"ConfirmForm",components:{UserList:n["default"]},data:function(){return{title:"检查确认",visible:!1,recordId:"",checkUserName:"",checkUserId:"",model:{},confirmLoading:!1,labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},form:this.$form.createForm(this),validatorRules:{checkDate:{rules:[{required:!0,message:"请选择检查日期!"}]},checkResult:{rules:[{required:!0,message:"请选择检查结果!"}]}}}},mounted:function(){},methods:{confirm:function(t){var e=this;this.form.resetFields(),this.visible=!0,this.confirmLoading=!1,this.recordId=t,this.model=Object.assign({},{checkDate:l()(new Date).format("YYYY-MM-DD")}),this.$nextTick((function(){e.form.setFieldsValue({checkDate:e.model.checkDate})})),this.checkUserName=this.$store.getters.userInfo.realname,this.checkUserId=this.$store.getters.userInfo.id},changeCheckDate:function(t){t&&(this.model.checkDate=t)},handleOk:function(){var t=this;t.form.validateFields((function(e,a){if(!e){t.confirmLoading=!0;var r=Object.assign(t.model,a,{checkDate:l()(t.model.checkDate).format("YYYY-MM-DD"),id:t.recordId,checkUserName:t.checkUserName,checkUserId:t.checkUserId});Object(i["f"])(r).then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok",r),t.close()):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1}))}}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1},openSelectUser:function(){this.$refs.userSelectModal.showModal(),this.$refs.userSelect.blur()},onSelectUser:function(t){t.length&&(this.checkUserName=t[0].realname,this.checkUserId=t[0].id,this.$forceUpdate())}}},u=c,d=a("2877"),h=Object(d["a"])(u,r,o,!1,null,null,null);e["default"]=h.exports},"260f":function(t,e,a){},"353a":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{width:"80%",visible:t.visible,title:t.title,centered:"",bodyStyle:{height:"80vh"},confirmLoading:t.confirmLoading,destroyOnClose:!0,footer:null},on:{cancel:t.handleCancel}},[e("div",[e("iframe",{staticClass:"filename",staticStyle:{height:"calc(80vh - 25px)"},attrs:{src:t.filePath,width:"100%",frameborder:"0"}})])])},o=[],n=a("e2aa"),i={name:"DocPreviewModal",props:{title:{type:String,default:"文件预览"}},data:function(){return{visible:!1,confirmLoading:!1,filePath:""}},methods:{handleFilePath:function(t){var e=this;Object(n["c"])(t).then((function(t){if(t.success){var a=t.result;e.visible=!0,e.filePath=window._CONFIG["onlinePreviewDomainURL"]+"?url="+encodeURIComponent(a)}else e.$message.warning("查看文件失败")}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},s=i,l=(a("9216"),a("2877")),c=Object(l["a"])(s,r,o,!1,null,"484795fd",null);e["default"]=c.exports},"3ab9":function(t,e,a){},"3bcd":function(t,e,a){"use strict";a.d(e,"P",(function(){return o})),a.d(e,"N",(function(){return n})),a.d(e,"F",(function(){return i})),a.d(e,"J",(function(){return s})),a.d(e,"t",(function(){return l})),a.d(e,"i",(function(){return v})),a.d(e,"j",(function(){return b})),a.d(e,"h",(function(){return k})),a.d(e,"g",(function(){return C})),a.d(e,"l",(function(){return y})),a.d(e,"c",(function(){return w})),a.d(e,"e",(function(){return _})),a.d(e,"f",(function(){return I})),a.d(e,"d",(function(){return D})),a.d(e,"b",(function(){return j})),a.d(e,"x",(function(){return x})),a.d(e,"z",(function(){return S})),a.d(e,"w",(function(){return T})),a.d(e,"H",(function(){return O})),a.d(e,"I",(function(){return N})),a.d(e,"y",(function(){return R})),a.d(e,"A",(function(){return P})),a.d(e,"B",(function(){return L})),a.d(e,"M",(function(){return A})),a.d(e,"r",(function(){return $})),a.d(e,"E",(function(){return F})),a.d(e,"k",(function(){return d})),a.d(e,"D",(function(){return h})),a.d(e,"u",(function(){return u})),a.d(e,"L",(function(){return c})),a.d(e,"a",(function(){return f})),a.d(e,"K",(function(){return q})),a.d(e,"m",(function(){return z})),a.d(e,"p",(function(){return J})),a.d(e,"o",(function(){return U})),a.d(e,"G",(function(){return m})),a.d(e,"v",(function(){return p})),a.d(e,"C",(function(){return g})),a.d(e,"n",(function(){return B})),a.d(e,"q",(function(){return E})),a.d(e,"s",(function(){return W})),a.d(e,"O",(function(){return G}));var r=a("0fea"),o=function(t){return Object(r["d"])("/produce/train/history/tree/line-train",t)},n=function(t){return Object(r["d"])("/produce/train/history/maximo-asset/list-child",t)},i=function(t){return Object(r["d"])("/produce/train/history/train/get",t)},s=function(t){return Object(r["d"])("/produce/train/history/train/period",t)},l=function(t){return Object(r["d"])("/produce/train/history/maximo-asset/get",t)},c=function(t){return Object(r["d"])("/produce/train/history/work/page",t)},u=function(t){return Object(r["d"])("/produce/train/history/measure/page",t)},d=function(t){return Object(r["d"])("/produce/train/history/fault/page",t)},h=function(t){return Object(r["d"])("/produce/train/history/forms/page",t)},f=function(t){return Object(r["d"])("/produce/train/history/change/page",t)},m=function(t){return Object(r["d"])("/produce/train/history/train/period",t)},p=function(t){return Object(r["d"])("/produce/train/history/workLeaveRecord/page",t)},g=function(t){return Object(r["d"])("/produce/train/history/workRectify/page",t)},v=function(t){return Object(r["d"])("/produce/fault/detail/count",t)},b=function(t){return Object(r["d"])("/produce/fault/detail/page",t)},y=function(t){return Object(r["d"])("/produce/fault/statistics",t)},k=function(t){return Object(r["j"])("/produce/fault/compare",t)},C=function(t){return Object(r["d"])("/produce/fault/time-effect/data",t)},w=function(t){return Object(r["d"])("/produce/cost/detail/count",t)},_=function(t){return Object(r["d"])("/produce/cost/detail/page",t)},I=function(t){return Object(r["j"])("/produce/cost/statistics",t)},D=function(t){return Object(r["d"])("/produce/cost/compare/count-6year",t)},j=function(t){return Object(r["j"])("/produce/cost/compare",t)},x=function(t){return Object(r["d"])("/produce/plan/list",t)},S=function(t){return Object(r["d"])("/produce/plan/task/listByPlanId/".concat(t))},T=function(t){return Object(r["d"])("/produce/plan/get/".concat(t))},O=function(t){return Object(r["d"])("/serialPlan/plan/get/".concat(t))},N=function(t){return Object(r["d"])("/produce/plan/task/get/".concat(t))},R=function(t){return Object(r["d"])("/produce/plan/regu/list/".concat(t))},P=function(t){return Object(r["d"])("/produce/plan/train-struct/list/".concat(t))},L=function(t){return Object(r["d"])("/produce/plan/train-struct/orders/".concat(t))},A=function(t){return Object(r["d"])("/workshop/list",t)},$=function(t){return Object(r["d"])("/produce/workshop/fault/latest",t)},F=function(t){return Object(r["d"])("/produce/workshop/workstation/list",t)},q=function(t){return Object(r["d"])("/produce/workshop/train-track",t)},z=function(t){return Object(r["d"])("/produce/kpi/group",t)},J=function(t){return Object(r["d"])("/produce/kpi/user",t)},U=function(t){return Object(r["d"])("/produce/kpi/plan/list",t)},B=function(t){return Object(r["d"])("/produce/kpi/plan/get",t)},E=function(t){return Object(r["d"])("/serialPlan/plan/material/lack",t)},W=function(t){return Object(r["d"])("/board/plan-group-statistic/get-last-working-plan",t)},G=function(t){return Object(r["d"])("/board/plan-group-statistic/list",t)}},"3cf2":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("div")},o=[],n=a("e8ae"),i=a("21a6"),s=a("b7b4"),l="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",c={name:"JobCheckTableExport",data:function(){return{}},props:{},created:function(){},mounted:function(){},methods:{sortArray:function(t){return t.sort(this.compare("sortNo")),t},compare:function(t){return function(e,a){return e[t]-a[t]}},printByRow:function(t){t.itemList=this.sortArray(t.itemList),this.initWorkBook(t)},printById:function(t){var e=this;Object(s["A"])({id:t}).then((function(t){t.success&&(t.result.itemList=e.sortArray(t.result.itemList),e.initWorkBook(t.result))}))},initWorkBook:function(t){var e=new n["Workbook"];e.creator="GY",e.lastModifiedBy="2021-10-28",e.created=new Date,e.modified=new Date,e.lastPrinted=new Date;var a=e.addWorksheet("Sheet1",{properties:{defaultRowHeight:30,defaultColWidth:22},pageSetup:{paperSize:9}});a.addRows([["车辆连挂作业过程检查项点"]]),a.getCell("A2").value="车号："+(t.trainNo||""),a.getCell("D2").value="部件名称："+(t.assetName||""),a.getCell("G2").value="作业周期："+(t.period||""),a.getCell("A3").value="部件编号："+(t.assetNo||""),a.getCell("D3").value="作业位置："+(t.location||""),a.getCell("G3").value="作业班组："+(t.groupName||""),a.getColumn("A").width=15,a.getColumn("B").width=30,a.getColumn("C").width=60,a.mergeCells("A1:J1"),a.mergeCells("A2:C2"),a.mergeCells("D2:F2"),a.mergeCells("G2:J2"),a.mergeCells("A3:C3"),a.mergeCells("D3:F3"),a.mergeCells("G3:J3"),a.addRows([["序号","项点","检查内容","等级","检查情况","结果","作业时间","检查方式","检查人","检查时间"]]);var r=[];(t.itemList||[]).forEach((function(t,e,a){for(var o="",n=0,i=5;n<i;n++)t.checkLevel>n?o+="★":o+="☆";r.push([t.sortNo||"",t.title||"",t.content||"",o,t.checkDesc||"",t.checkUserName?t.checkResult_dictText:"",t.workTime||"",t.checkMethod||"",t.checkUserName||"",t.checkTime||""])})),a.addRows(r);var o=4+(t.itemList||[]).length+1;a.mergeCells("A".concat(o,":J").concat(o)),a.getCell("A".concat(o+1)).value="参考工艺文件",a.mergeCells("A".concat(o+1,":B").concat(o+1)),a.mergeCells("C".concat(o+1,":J").concat(o+1));var s="";(t.techLinkList||[]).forEach((function(t,e,a){s+="".concat(e+1,"、").concat(t.teckBookName).concat(e<a.length-1?"\n":"")})),a.getCell("C".concat(o+1)).value=s;var c=12*((t.techLinkList||[]).length||1)+18,u=o+2;a.mergeCells("A".concat(u,":J").concat(u)),a.mergeCells("A".concat(u+1,":G").concat(u+1)),a.getCell("A".concat(u+1)).value="不合格项汇总",a.getCell("H".concat(u+1)).value="整改情况",a.getCell("I".concat(u+1)).value="复查时间",a.getCell("J".concat(u+1)).value="复查人",(t.rectifyList||[]).forEach((function(t,e,r){a.mergeCells("A".concat(u+e+2,":G").concat(u+e+2)),a.getCell("A".concat(u+e+2)).value=t.itemInfo,a.getCell("H".concat(u+e+2)).value=t.rectifyDesc,a.getCell("I".concat(u+e+2)).value=t.reviewTime,a.getCell("J".concat(u+e+2)).value=t.reviewUserName}));var d=u+(t.rectifyList||[]).length+2;a.mergeCells("A".concat(d,":J").concat(d)),a.getCell("A".concat(d+1)).value="评定",a.mergeCells("A".concat(d+1,":B").concat(d+1)),a.mergeCells("C".concat(d+1,":J").concat(d+1));var h="";(t.judgeList||[]).forEach((function(t,e,a){h+="评定人：".concat(t.jdUserName,"；评定时间：").concat(t.jdTime,"；评定内容：").concat(t.jdContent,"；").concat(e<a.length-1?"\n":"")})),a.getCell("C".concat(d+1)).value=h;var f=12*((t.judgeList||[]).length||1)+18,m=d+2;a.mergeCells("A".concat(m,":J").concat(m));var p=["表中只列出关键项点，检查人员在检查时参照工艺文件标准执行。","检查人员必须对当天作业内容进行检查。","表中所有内容全部现场检查时填写完成，并悬挂于部件上，随部件流转。","作业时间由作业班组填写，其余由检查人员填写。“检查情况”一栏详细记录检查情况；“结果”一栏对检查合格的画“√”不合格的画“×”；“检查方式”一栏写明检查手段，如：目视、测量、操作等。","检查人员对不合格项视情节严重情况开具整改单，及时提出整改意见，并督促整改，整改完成后及时进行复查。","由检查人员、质量工程师及专业工程师对整体作业质量做出最终判定。"];a.getCell("A".concat(m+1)).value="说明",a.mergeCells("A".concat(m+1,":B").concat(m+1)),a.mergeCells("C".concat(m+1,":J").concat(m+1));var g="";p.forEach((function(t,e,a){g+="".concat(e+1,"、").concat(t).concat(e<a.length-1?"\n":"")})),a.getCell("C".concat(m+1)).value=g;var v=12*(p.length||1)+18;a._rows.forEach((function(e,r){a.getRow(r+1).height=o==r?c:d==r?f:m==r?v:30,e._cells.forEach((function(e,n){var i=a.getCell(e._address);i.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},[1,2].indexOf(r)>-1||r-3>=0&&r-3<=t.itemList.length&&[1,2,4].indexOf(n)>-1||o==r&&n>=2||d>r&&u<r&&n<7||d==r&&n>=2||m==r&&n>=2?i.alignment={vertical:"middle",horizontal:"left",wrapText:!0}:i.alignment={vertical:"middle",horizontal:"center",wrapText:!0},[0,1,2,3,u].indexOf(r)>-1?(i.fill={type:"pattern",pattern:"darkGray",fgColor:{argb:"FFe9e9e9"}},i.font={name:"黑体",family:4,size:14,underline:!1,bold:!0}):i.font=r<o&&3==n?{name:"黑体",family:4,size:18,underline:!1,bold:!1}:{name:"黑体",family:4,size:12,underline:!1,bold:!1}}))})),e.xlsx.writeBuffer().then((function(e){var a=new Blob([e],{type:l});i["saveAs"](a,"".concat(t.title,".xlsx"))}))}}},u=c,d=a("2877"),h=Object(d["a"])(u,r,o,!1,null,"188fb66a",null);e["default"]=h.exports},"3ff1":function(t,e,a){},"45ff":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{ref:"calcHeight"})},o=[],n=a("e8ae"),i=a("21a6"),s=a("8fad"),l="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",c={name:"TableExport",data:function(){return{}},mounted:function(){},methods:{printById:function(t){var e=this;Object(s["Kb"])({id:t}).then((function(t){t.success?e.initWorkBook(t.result):e.$message.error("获取记录表详情失败")})).catch((function(t){e.$message.error("获取记录表详情异常")}))},printByData:function(t){this.initWorkBook(t)},initWorkBook:function(t){var e=new n["Workbook"];e.creator="GY",e.lastModifiedBy="2021-10-28",e.created=new Date,e.modified=new Date,e.lastPrinted=new Date;var a=e.addWorksheet("Sheet1",{properties:{defaultColWidth:22,alignment:{vertical:"middle",horizontal:"left",wrapText:!0}},pageSetup:{paperSize:9}}),r=[];a.mergeCells("A1:C1"),a.getCell("A1").value="车号："+(t.trainNo||""),r.push({cell:"A1",horizontal:"left",fill:!0,size:14,bold:!0}),0===t.updown?(a.mergeCells("A2:C2"),a.getCell("A2").value="部件号："+(t.manufNo||""),r.push({cell:"A2",horizontal:"left",fill:!0,size:14,bold:!0})):1===t.updown?(a.mergeCells("A2:C2"),a.getCell("A2").value="原部件序列号："+(t.manufNo||""),r.push({cell:"A2",horizontal:"left",fill:!0,size:14,bold:!0}),a.mergeCells("A3:C3"),a.getCell("A3").value="新部件序列号："+(t.manufNoUp||""),r.push({cell:"A3",horizontal:"left",fill:!0,size:14,bold:!0})):a.mergeCells("A1:C2"),1===t.updown?a.mergeCells("D1:F3"):a.mergeCells("D1:F2"),a.getCell("D1").value=t.title||t.workRecName||"",r.push({cell:"D1",fill:!0,size:14,bold:!0}),a.mergeCells("G1:H1"),a.getCell("G1").value="作业日期："+(t.workDate||""),r.push({cell:"G1",fill:!0,horizontal:"left",size:14,bold:!0}),a.mergeCells("I1:J1"),a.getCell("I1").value="完工日期："+(t.finishDate||""),r.push({cell:"I1",fill:!0,horizontal:"left",size:14,bold:!0}),1===t.updown?a.mergeCells("G2:J3"):a.mergeCells("G2:J2"),a.getCell("G2").value="作业班组："+(t.workGroupName||""),r.push({cell:"G2",fill:!0,horizontal:"left",size:14,bold:!0}),a.getColumn("A").width=15,a.getColumn("B").width=30,a.getColumn("C").width=60,a.getColumn("D").width=15,a.getColumn("E").width=60,a.getColumn("F").width=60,a.getRow(1).height=30,a.getRow(2).height=30,a.getRow(3).height=30,1===t.updown&&(a.getRow(4).height=30);var o={A:"序号",B:"项目",C:"作业内容",D:"控制点",E:"技术要求",F:"作业情况",G:"结果",H:"自检",I:"互检",J:"专检"};for(var s in o)a.getCell(s+(1===t.updown?4:3)).value=o[s],r.push({cell:s+(1===t.updown?4:3),fill:!0,size:14,bold:!0});var c=1===t.updown?5:4,u=0;t.categoryList.forEach((function(t,e){a.getCell("A".concat(c+e)).value=t.recIndex,r.push({cell:"A".concat(c+e)}),a.mergeCells("A".concat(c+e,":A").concat(c+e+t.detailList.length-1)),a.getCell("B".concat(c+e)).value=t.reguTitle,r.push({cell:"B".concat(c+e),horizontal:"left"}),a.mergeCells("B".concat(c+e,":B").concat(c+e+t.detailList.length-1)),t.detailList.forEach((function(t,o){a.getCell("C".concat(c+e+o)).value="\n".concat(t.workContent||"","\n"),r.push({cell:"C".concat(c+e+o),horizontal:"left"}),a.getCell("D".concat(c+e+o)).value=t.checkLevel_dictText||"",r.push({cell:"D".concat(c+e+o)}),a.getCell("E".concat(c+e+o)).value="\n".concat(t.techRequire||"","\n"),r.push({cell:"E".concat(c+e+o),horizontal:"left"}),a.getCell("F".concat(c+e+o)).value=0==t.isIgnore?t.workInfo:t.ignoreDesc,r.push({cell:"F".concat(c+e+o),horizontal:"left"}),a.getCell("G".concat(c+e+o)).value=t.result?"√":"□",r.push({cell:"G".concat(c+e+o)}),a.getCell("H".concat(c+e+o)).value=t.selfCheck||"",r.push({cell:"H".concat(c+e+o)}),a.getCell("I".concat(c+e+o)).value=t.guarderCheck||"",r.push({cell:"I".concat(c+e+o)}),a.getCell("J".concat(c+e+o)).value=t.monitorCheck||"",r.push({cell:"J".concat(c+e+o)})})),c+=t.detailList.length-1,u+=t.detailList.length})),u+=1===t.updown?5:4,a.mergeCells("A".concat(u,":J").concat(u)),a.getRow(u).height=30,r.push({cell:"A".concat(u),bold:!0}),u+=1;var d=t.measureToolList||[];d.length&&(a.mergeCells("A".concat(u,":B").concat(u+d.length-1)),a.getCell("A".concat(u)).value="计量器具使用",r.push({cell:"A".concat(u)}),d.forEach((function(t,e,o){a.mergeCells("C".concat(u+e,":D").concat(u+e)),a.getCell("C".concat(u+e)).value=" \n名称："+(t.name||"")+"\n",r.push({cell:"C".concat(u+e),horizontal:"left"}),a.getCell("E".concat(u+e)).value=" \n规格型号："+(t.model||"")+"\n",r.push({cell:"E".concat(u+e),horizontal:"left"}),a.getCell("F".concat(u+e)).value=" \n出厂编号："+(t.serialNo||"")+"\n",r.push({cell:"F".concat(u+e),horizontal:"left"}),a.mergeCells("G".concat(u+e,":H").concat(u+e)),a.getCell("G".concat(u+e)).value=" \n上次检验时间："+(t.lastCheckTime||"")+"\n",r.push({cell:"G".concat(u+e),horizontal:"left"}),a.mergeCells("I".concat(u+e,":J").concat(u+e)),a.getCell("I".concat(u+e)).value=" \n下次检验时间："+(t.nextCheckTime||"")+"\n",r.push({cell:"I".concat(u+e),horizontal:"left"})})),u+=d.length,a.mergeCells("A".concat(u,":J").concat(u)),a.getRow(u).height=30,r.push({cell:"A".concat(u),bold:!0}),u+=1);var h=["控制点分为H点和W点，“H”点为该项工序操作过程必须经过专业工程师现场检查确认的工序，“W”点为班组长可在工序完工后确认的工序。","“自检”栏为作业者本人进行签字；“互检”栏由作业监护人员进行检查签字；“专检”栏由班组长进行检查签字。“质量负责人”由相关专业工程师进行签字。","“作业情况”需根据实际情况填写。若该项工序无异常则由作业者在框中填入√；若该项工序存在异常，则将实际故障情况填入框内。","“结果”栏方框在完成该项作业及检查后，由工班长进行填写。若无异常则在方框内填入√，若有异常，工班长需对故障情况进行确认，在方框内填入×，并将故障在“备注”栏进行汇总。","作业内容中有数据要求的一并填入“作业情况”栏。"];a.mergeCells("A".concat(u,":J").concat(u));var f="";h.forEach((function(t,e,a){f+="".concat(e+1,"、").concat(t).concat(e<a.length-1?"\n":"")})),f="说明：\n"+f+"\n",f="\n检查结果：".concat(0===t.checkResult?"未通过":"通过","                                        检查日期：").concat(t.checkDate||"            ","                                        质量负责人：").concat(t.checkUserName||"            ","\n\n")+f,a.getCell("A".concat(u)).value=f,r.push({cell:"A".concat(u),horizontal:"left",border:top});var m=12*(h.length+4)+18;a.getRow(u).height=m,r.forEach((function(t,e,r){var o=a.getCell(t.cell);o.alignment={vertical:"middle",horizontal:t.horizontal||"center",wrapText:!0},t.fill&&(o.fill={type:"pattern",pattern:"darkGray",fgColor:{argb:"FFe9e9e9"}}),o.font={name:"黑体",family:4,size:t.size||12,underline:!1,bold:t.bold||!1},o.padding={top:10,left:10,bottom:10,right:10},o.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}})),e.xlsx.writeBuffer().then((function(e){var a=new Blob([e],{type:l});i["saveAs"](a,"".concat(t.title||t.workRecName,".xlsx"))}))}}},u=c,d=a("2877"),h=Object(d["a"])(u,r,o,!1,null,"dac1198a",null);e["default"]=h.exports},"4b54":function(t,e,a){},8019:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bodyWrapper"},[e("div",{staticClass:"table-page-search-wrapper"},[e("a-form",{attrs:{layout:"inline"}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:4,sm:24}},[e("a-form-item",{attrs:{label:"修程"}},[e("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_repair_program,name,id"},model:{value:t.queryParam.repairProgramId,callback:function(e){t.$set(t.queryParam,"repairProgramId",e)},expression:"queryParam.repairProgramId"}})],1)],1),e("a-col",{attrs:{md:4,sm:24}},[e("a-form-item",{attrs:{label:"班组:"}},[e("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_mtr_workshop_group,group_name,id"},model:{value:t.queryParam.groupId,callback:function(e){t.$set(t.queryParam,"groupId",e)},expression:"queryParam.groupId"}})],1)],1),e("a-col",{attrs:{md:4,sm:24}},[e("a-form-item",{attrs:{label:"类型:"}},[e("a-select",{attrs:{placeholder:"请选择类型",allowClear:""},model:{value:t.queryParam.formRecordType,callback:function(e){t.$set(t.queryParam,"formRecordType",e)},expression:"queryParam.formRecordType"}},[e("a-select-option",{attrs:{value:""}},[t._v("所有")]),e("a-select-option",{attrs:{value:"1"}},[t._v("作业记录表")]),e("a-select-option",{attrs:{value:"2"}},[t._v("数据记录表")]),e("a-select-option",{attrs:{value:"3"}},[t._v("检查记录表")]),e("a-select-option",{attrs:{value:"4"}},[t._v("工单附件")])],1)],1)],1),e("a-col",{attrs:{md:6,sm:24}},[e("a-form-item",{attrs:{label:"工单日期"}},[e("a-date-picker",{attrs:{format:"YYYY-MM-DD"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)],1),e("a-col",{attrs:{md:6,sm:8}},[e("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[e("a-space",[e("a-button",{on:{click:t.findList}},[t._v("查询")])],1)],1)])],1)],1)],1),e("a-spin",{attrs:{spinning:t.loading}},[e("div",[e("vxe-table",{ref:"listTable",staticStyle:{height:"calc(100vh - 298px)"},attrs:{border:"","max-height":"90%",align:t.allAlign,data:t.tableData,"show-overflow":"tooltip","edit-config":{trigger:"manual",mode:"row"}}},[e("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),e("vxe-table-column",{attrs:{field:"formRecordName",title:"表单名称","min-width":"180",align:"left","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(a){var r=a.row;return[e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return e.stopPropagation(),t.showDetail(r)}}},[t._v(t._s(r.formRecordName))])]}}])}),e("vxe-table-column",{attrs:{field:"formRecordTypeName",title:"表单类型",width:"120"}}),e("vxe-table-column",{attrs:{field:"orderName",title:"所属工单","min-width":"160",align:"left","header-align":"center"}}),e("vxe-table-column",{attrs:{field:"orderTime",title:"工单日期",width:"100"}})],1),e("vxe-pager",{attrs:{perfect:"","current-page":t.queryParam.pageNo,"page-size":t.queryParam.pageSize,total:t.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(e){return t.$set(t.queryParam,"pageNo",e)},"update:current-page":function(e){return t.$set(t.queryParam,"pageNo",e)},"update:pageSize":function(e){return t.$set(t.queryParam,"pageSize",e)},"update:page-size":function(e){return t.$set(t.queryParam,"pageSize",e)},"page-change":t.handlePageChange}})],1)]),e("ViewWorkForm",{ref:"viewWorkForm",on:{ok:function(e){return t.loadData()}}}),e("doc-preview-modal",{ref:"docPreview",attrs:{title:t.previewFileName}})],1)},o=[],n=a("3bcd"),i=a("88da"),s=a("353a"),l=a("c1df"),c=a.n(l),u={name:"FaultRecord",props:{trainNo:{type:String,default:""},structureDetailId:{type:String,default:""}},components:{ViewWorkForm:i["default"],DocPreviewModal:s["default"]},data:function(){return{previewFileName:"",dicSysIdStr:"bu_train_asset_type,name,id,struct_type=1 and train_type_id=(select train_type_id from bu_train_info where train_no='".concat(this.trainNo,"')"),date:null,queryParam:{trainNo:this.trainNo,structureDetailId:"",repairProgramId:"",groupId:"",formRecordType:"",orderTime:"",pageNo:1,pageSize:10},totalResult:0,allAlign:"center",tableData:[],loading:!1}},watch:{structureDetailId:{immediate:!0,handler:function(t){this.queryParam.structureDetailId=t!==this.trainNo?t:"",this.findList()}},trainNo:{immediate:!0,handler:function(t){this.queryParam.trainNo=t,this.findList()}}},methods:{showDetail:function(t){switch(t.formRecordType){case 1:this.jumpFormInfo(t);break;case 2:this.jumpFormInfo(t);break;case 3:this.jumpFormInfo(t);break;case 4:this.previewImage(t);break}},jumpFormInfo:function(t){t.instType=t.formType,t.formInstId=t.formRecordId,t.formName=t.formRecordName,this.$refs.viewWorkForm.showModal(t,this.trainNo)},previewImage:function(t){this.previewFileName=t.formRecordName,this.$refs.docPreview.handleFilePath(t.orderAnnexPath)},findList:function(){var t=this;this.loading=!0,this.date?this.queryParam.orderTime=c()(this.date).format("YYYY-MM-DD"):this.queryParam.orderTime="",Object(n["D"])(this.queryParam).then((function(e){t.totalResult=e.result.total,t.tableData=e.result.records})).finally((function(){return t.loading=!1}))},handlePageChange:function(t){var e=t.currentPage,a=t.pageSize;this.queryParam.pageNo=e,this.queryParam.pageSize=a,this.findList()},loadData:function(){this.findList()}}},d=u,h=a("2877"),f=Object(h["a"])(d,r,o,!1,null,"4fa751bf",null);e["default"]=f.exports},8522:function(t,e,a){"use strict";a("f000")},"88da":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{title:t.title,centered:"",visible:t.visible,width:"100%",dialogClass:6===t.operator?"fullDialog":"fullDialog no-footer",destroyOnClose:!0},on:{cancel:function(e){t.visible=!1}}},[e("a-button",{attrs:{"na-btn-type":"print",type:"primary"},on:{click:t.exportPrint}},[t._v("导出打印")]),3===t.formType&&1===t.workRecordType?e("div",{staticClass:"table-page-body",staticStyle:{height:"100%","overflow-y":"auto"}},[e("RecordSheetTable",{directives:[{name:"show",rawName:"v-show",value:t.curRecordData,expression:"curRecordData"}],ref:"recordTable"})],1):t._e(),4===t.formType?e("div",{staticClass:"table-page-body",staticStyle:{height:"100%","overflow-y":"auto"}},[e("JobCheckSheetTable",{ref:"jobCheckTable",attrs:{data:t.sheetData}})],1):t._e(),1===t.formType||3===t.formType&&2===t.workRecordType?e("div",{staticClass:"table-page-body",staticStyle:{height:"100%"}},[e("div",{attrs:{id:"luckysheet"}})]):t._e(),6===t.operator?e("template",{slot:"footer"},[e("a-button",{attrs:{type:"primary"},on:{click:t.confirmForm}},[t._v(" 检查确认")]),e("a-button",{on:{click:function(e){t.visible=!1}}},[t._v(" 关闭")])],1):t._e(),e("ConfirmForm",{ref:"confirmForm",on:{ok:t.handleOk}}),e("WorkRecordPrint",{ref:"workRecordPrint",attrs:{luckySheetId:"luckysheet"},on:{sheetPrintOk:t.onSheetPrintOk}}),e("JobCheckTableExport",{ref:"tablePrintRef"}),e("TableExport",{ref:"tablePrintRef2"})],2)},o=[],n=a("b7b4"),i=a("b9c3"),s=a("958d"),l=a("e0ce"),c=a("3cf2"),u=a("45ff"),d=a("8fad"),h=a("7268"),f=a("25e0"),m=a("10f9"),p=a("e24e"),g={name:"ViewWorkForm",components:{RecordSheetTable:s["default"],ConfirmForm:f["default"],JobCheckSheetTable:l["default"],WorkRecordPrint:m["default"],JobCheckTableExport:c["default"],TableExport:u["default"]},props:{operator:{type:Number,default:0}},data:function(){return{sheetData:{},formType:1,workRecordType:0,formName:"",trainNo:"",groupName:"",visible:!1,fileUrl:"",tableData:[],curRecordData:[],curOnlineForm:null,formSheetId:"",formInfo:{},formInstId:"",onLineInstId:"",defaultOptions:{container:"luckysheet",title:"sheet",column:26,row:50,lang:"zh",allowEdit:!1,showinfobar:!1,sheetFormulaBar:!1,showsheetbar:!1,showstatisticBar:!0,enableAddRow:!1,enableAddCol:!1,showtoolbar:!1},printType:0,allItems:!0}},computed:{title:function(){return"表单查看-"+this.trainNo+"车 "+this.formName}},beforeDestroy:function(){luckysheet.destroy()},methods:{exportPrint:function(){try{var t="";switch(this.trainNo&&(t="-"+this.trainNo+"车"),this.formType){case 1:Object(p["a"])(luckysheet.getAllSheets(),this.formName+t);break;case 3:1===this.workRecordType?this.$refs.tablePrintRef2.printByData(this.curRecordData):2===this.workRecordType&&Object(p["a"])(luckysheet.getAllSheets(),this.formName+t);break;case 4:this.$refs.tablePrintRef.printByRow(this.sheetData)}}catch(e){}},initSheet:function(t){t.scrollLeft=0,t.scrollTop=0;var e=JSON.parse(JSON.stringify(this.defaultOptions));e.data=[t],luckysheet.destroy(),luckysheet.create(e)},showModal:function(t,e){try{this.formInfo=t,this.formType=t.instType,this.workRecordType=t.workRecordType,this.trainNo=e,this.formName=t.formName,this.formInstId=t.formInstId,this.allItems=!1,this.loadFormDetail(!1)}catch(a){}},showModalAllItem:function(t,e){try{this.formInfo=t,this.formType=t.instType,this.trainNo=e,this.formName=t.formName,this.formInstId=t.formInstId,this.allItems=!0,this.loadFormDetail(!0)}catch(a){}},loadFormDetail:function(t){this.printType=0;try{switch(this.formType){case 1:this.formInfo.formObjId=this.formInfo.id,this.loadOnlineFormDetail(this.formInfo.task2InstId,this.formInfo.formInstId);break;case 3:1===this.workRecordType?this.loadRecordTableDetail(this.formInfo.task2InstId,this.formInfo.formInstId,t):2===this.workRecordType&&this.loadWorkRecordDetail(this.formInfo.formObjId,this.formInfo.formInstId);break;case 4:this.loadWorkCheckFormDetail(this.formInfo.task2InstId,this.formInfo.formInstId,t)}}catch(e){}},loadWorkRecordDetail:function(t,e){var a=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.visible=!0,Object(d["Db"])(t).then((function(t){if(t.success){var o=JSON.parse(t.result);if(!r)return void a.initSheet(o);Object(i["U"])(e).then((function(t){if(t.success){if(t.result){var e=JSON.parse(t.result);o.data=[],o.celldata=luckysheet.transToCellData(e)}a.initSheet(o)}else a.initSheet(o)}))}else a.$message.error("获取作业记录表模板数据失败")}))},loadWorkCheckFormDetail:function(t,e){var a=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(i["P"])({task2InstId:t,formInstId:e,allItems:r}).then((function(t){if(t.success&&t.result){var e=t.result;a.sheetData=e,a.visible=!0}else a.$message.error("加载记录数据异常")}))},loadOnlineFormDetail:function(t,e){var a=this;this.visible=!0,Object(i["Q"])({task2InstId:t,formInstId:e,needValues:!1}).then((function(t){if(t.success){a.curOnlineForm=t.result;var e=null;if(a.curOnlineForm){if(a.curOnlineForm.result)try{e=JSON.parse(a.curOnlineForm.result)}catch(r){return void a.$message.error("转换表单填写结果异常")}Object(d["Db"])(a.curOnlineForm.formObjId).then((function(t){if(t.success){var r=JSON.parse(t.result);e&&(r.data=[],r.celldata=luckysheet.transToCellData(e)),a.initSheet(r)}else a.$message.error("获取表单模板数据失败")}))}else a.$message.error("获取作业表单数据失败")}else a.$message.error("获取记录表内容错误")}))},loadRecordTableDetail:function(t,e){var a=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(i["R"])({task2InstId:t,formInstId:e,needChecks:!0,needCategory:!0,allItems:r}).then((function(t){t.success&&t.result?(a.curRecordData=t.result,a.curRecordData.categoryList&&a.curRecordData.categoryList.sort((function(t,e){return t.recIndex-e.recIndex})),a.$nextTick((function(){a.$refs.recordTable.loadData(a.curRecordData)})),a.visible=!0):a.$message.error("加载记录数据异常")}))},confirmForm:function(){this.$refs.confirmForm.confirm(this.formInstId)},handleOk:function(t){if(3===this.formType&&2===this.workRecordType){var e=h["a"].searchCellByText("检查结果",luckysheet.getAllSheets()[0].data),a=e.c;if(e){var r=h["a"].getCellText(e.cell),o="1"===t.checkResult?"通过":"不通过";r=r.replace("检查结果：","检查结果："+o),h["a"].setCellValue(e.r,e.c,r)}e=h["a"].searchCellByText("检查日期",luckysheet.getAllSheets()[0].data);var n=e.c;if(e){var i=h["a"].getCellText(e.cell);i=i.replace("检查日期：","检查日期："+t.checkDate),h["a"].setCellValue(e.r,e.c,i)}e=h["a"].searchCellByText("质量负责人",luckysheet.getAllSheets()[0].data);var s=e.c;if(e){var l=h["a"].getCellText(e.cell);l=l.replace("质量负责人：","质量负责人："+t.checkUserName),h["a"].setCellValue(e.r,e.c,l)}if(a===n&&n===s){var c="1"===t.checkResult?"通过":"不通过",u="检查结果："+c;u+="          检查日期："+t.checkDate,u+="          质量负责人："+t.checkUserName,h["a"].setCellValue(e.r,e.c,u)}this.saveWorkRecord(!1)}this.$emit("checkSuccess",this.formInfo,t),this.visible=!1},saveWorkRecord:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=JSON.stringify(luckysheet.getAllSheets()[0].data),r={formInstId:this.formInfo.formInstId,xlsJson:a};Object(i["hb"])(r).then((function(a){a.success?e&&t.$message.success("保存作业记录表信息成功"):e&&t.$message.error("保存作业记录表信息失败")}))},print:function(){var t={id:this.formInfo.id,instType:this.formType,formInstId:this.formInfo.formInstId,formObjId:this.formInfo.formObjId,formName:this.formName,workRecordType:this.workRecordType};0===this.printType?this.$refs.workRecordPrint.print(t):1===this.printType&&this.$refs.workRecordPrint.printNoData(t)},onSheetPrintOk:function(){0===this.printType?this.loadFormDetail(this.allItems):1===this.printType&&this.loadFormDetailNoData()},showModalNoData:function(t,e){this.formInfo=t,this.formType=t.instType,this.trainNo=e,this.formName=t.formName,this.formInstId=t.formInstId,this.loadFormDetailNoData()},loadFormDetailNoData:function(){this.printType=1;try{switch(this.formType){case 1:this.formInfo.formObjId=this.formInfo.id,this.loadOnlineDetailNoData(this.formInfo.formInstId);break;case 3:1===this.workRecordType?this.loadRecordDetailNoData(this.formInfo.formInstId):2===this.workRecordType&&this.loadWorkRecordDetail(this.formInfo.formObjId||this.formInfo.id,this.formInfo.formInstId,!1);break;case 4:this.loadCheckDetailNoData(this.formInfo.formInstId)}}catch(t){}},loadRecordDetailNoData:function(t){var e=this;Object(d["Kb"])({id:t}).then((function(t){t.success&&t.result?(e.curRecordData=t.result,e.curRecordData.categoryList&&e.curRecordData.categoryList.sort((function(t,e){return t.recIndex-e.recIndex})),e.$nextTick((function(){e.$refs.recordTable.loadData(e.curRecordData)})),e.visible=!0):e.$message.error("加载记录数据异常")}))},loadCheckDetailNoData:function(t){var e=this;Object(n["A"])({id:t}).then((function(t){try{if(t.success&&t.result){var a=t.result;e.sheetData=a,e.visible=!0}else e.$message.error("加载记录数据异常")}catch(r){e.$message.error("加载记录数据异常")}}))},loadOnlineDetailNoData:function(t){var e=this;this.visible=!0,Object(d["Db"])(t).then((function(t){if(t.success){var a=JSON.parse(t.result);e.$nextTick((function(){e.initSheet(a)}))}}))}}},v=g,b=(a("f0c5"),a("8522"),a("2877")),y=Object(b["a"])(v,r,o,!1,null,"a7b5b52c",null);e["default"]=y.exports},9216:function(t,e,a){"use strict";a("260f")},9527:function(t,e,a){},"958d":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("div",[e("table",{staticClass:"table"},[e("thead",[e("tr",[e("td",{staticStyle:{padding:"0"},attrs:{colspan:"4",rowspan:"2"}},[t.recordSheet.assetTypeId?t._e():e("span",{staticStyle:{"padding-left":"5px"}},[t._v("车号："+t._s(t.recordSheet.trainNo))]),t.recordSheet.assetTypeId&&0===t.recordSheet.updown?e("table",{staticClass:"innerTable"},[e("tr",[e("td",{staticClass:"bottom"},[t._v("车号："+t._s(t.recordSheet.trainNo))])]),e("tr",[e("td",[t._v("部件号："+t._s(t.recordSheet.manufNo))])])]):t._e(),t.recordSheet.assetTypeId&&1===t.recordSheet.updown?e("table",{staticClass:"innerTable"},[e("tr",[e("td",{staticClass:"bottom"},[t._v("车号："+t._s(t.recordSheet.trainNo))])]),e("tr",[e("td",{staticClass:"bottom"},[t._v("原部件序列号："+t._s(t.recordSheet.manufNo))])]),e("tr",[e("td",[t._v("新部件序列号："+t._s(t.recordSheet.manufNoUp))])])]):t._e()]),e("td",{staticStyle:{"text-align":"center","font-weight":"bold"},attrs:{colspan:"3",rowspan:"2"}},[t._v(" "+t._s(t.recordSheet.title||t.recordSheet.workRecName)+" ")]),e("td",{attrs:{colspan:"3"}},[t._v("作业日期："+t._s(t.recordSheet.workDate)+" 完工日期: "+t._s(t.recordSheet.finishDate))])]),e("tr",[e("td",{attrs:{colspan:"3"}},[t._v("作业班组："+t._s(t.recordSheet.workGroupName))])]),t._m(0)]),t._l(t.recordSheet.categoryList,(function(a){return e("tbody",{key:a.id},t._l(a.detailList,(function(r,o){return e("tr",{key:r.id},[0===o?e("td",{attrs:{rowspan:a.detailList.length}},[t._v(" "+t._s(a.recIndex)+" ")]):t._e(),0===o?e("td",{attrs:{rowspan:a.detailList.length}},[t._v(" "+t._s(a.reguTitle)+" ")]):t._e(),e("td",[t._v(" "+t._s(r.workContent)+" ")]),e("td",{staticStyle:{"text-align":"center"}},[t._v(" "+t._s(r.checkLevel_dictText)+" ")]),e("td",[t._v(" "+t._s(r.techRequire)+" ")]),e("td",[t._v(" "+t._s(0==r.isIgnore?r.workInfo:r.ignoreDesc)+" ")]),e("td",{staticStyle:{"text-align":"center"}},[1===r.result?e("a-checkbox",{attrs:{checked:"",disabled:""}}):t._e(),0===r.result?e("a-checkbox",{attrs:{disabled:""}}):t._e()],1),e("td",[t._v(" "+t._s(r.selfCheck)+" ")]),e("td",[t._v(" "+t._s(r.guarderCheck)+" ")]),e("td",[t._v(" "+t._s(r.monitorCheck)+" ")])])})),0)})),t._l(t.recordSheet.measureToolList,(function(a,r){return e("tr",{key:r},[0===r?e("td",{attrs:{colspan:"2",rowspan:t.recordSheet.measureToolList.length}},[t._v("计量器具使用")]):t._e(),e("td",{attrs:{colspan:"2"}},[t._v("名称: "+t._s(a.name))]),e("td",[t._v("规格型号："+t._s(a.model))]),e("td",[t._v("出厂编号："+t._s(a.serialNo))]),e("td",{attrs:{colspan:"2"}},[t._v("上次检验时间："+t._s(a.lastCheckTime))]),e("td",{attrs:{colspan:"2"}},[t._v("下次检验时间："+t._s(a.nextCheckTime))])])})),e("tr",[e("td",{staticStyle:{height:"80px"},attrs:{colspan:"10"}},[t._v("情况说明："+t._s(t.recordSheet.remark))])]),e("tr",[e("td",{staticStyle:{height:"80px"},attrs:{colspan:"10"}},[e("span",{staticStyle:{"margin-left":"5%"}},[t._v("检查结果："+t._s(0===t.recordSheet.checkResult?"未通过":"通过")+" ")]),e("span",{staticStyle:{"margin-left":"30%"}},[t._v("检查日期："+t._s(t.recordSheet.checkDate)+" ")]),e("span",{staticStyle:{"margin-left":"30%"}},[t._v("质量负责人："+t._s(t.recordSheet.checkUserName)+" ")]),t._m(1)])])],2)])},o=[function(){var t=this,e=t._self._c;return e("tr",[e("th",{staticStyle:{width:"60px"}},[t._v("序号")]),e("th",{staticStyle:{width:"100px"}},[t._v("项目")]),e("th",{staticStyle:{width:"200px"}},[t._v("作业内容")]),e("th",{staticStyle:{width:"60px"}},[t._v("控制点")]),e("th",{staticStyle:{width:"200px"}},[t._v("技术要求")]),e("th",{staticStyle:{width:"200px"}},[t._v("作业情况")]),e("th",{staticStyle:{width:"80px"}},[t._v("结果")]),e("th",{staticStyle:{width:"60px"}},[t._v("自检")]),e("th",{staticStyle:{width:"60px"}},[t._v("互检")]),e("th",{staticStyle:{width:"60px"}},[t._v("专检")])])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"padding-top":"15px"}},[t._v(" 说明："),e("br"),t._v(" 1. 控制点分为H点和W点，“H”点为该项工序操作过程必须经过专业工程师现场检查确认的工序，“W”点为班组长可在工序完工后确认的工序。"),e("br"),t._v(" 2. “自检”栏为作业者本人进行签字；“互检”栏由作业监护人员进行检查签字；“专检”栏由班组长进行检查签字。“质量负责人”由相关专业工程师进行签字。"),e("br"),t._v(" 3. “作业情况”需根据实际情况填写。若该项工序无异常则由作业者在框中填入√；若该项工序存在异常，则将实际故障情况填入框内。"),e("br"),t._v(" 4. “结果”栏方框在完成该项作业及检查后，由工班长进行填写。若无异常则在方框内填入√，若有异常，工班长需对故障情况进行确认，在方框内填入×，并将故障在“备注”栏进行汇总。"),e("br"),t._v(" 5. 作业内容中有数据要求的一并填入“作业情况”栏 。 ")])}],n={name:"RecordSheetTable",data:function(){return{recordSheet:{}}},methods:{loadData:function(t){this.recordSheet=t}}},i=n,s=(a("d88b"),a("2877")),l=Object(s["a"])(i,r,o,!1,null,"197d5722",null);e["default"]=l.exports},b245:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{width:"85%",title:"人员选择",visible:t.visible,confirmLoading:t.confirmLoading,cancelText:"关闭",bodyStyle:{height:"70vh"},destroyOnClose:!0},on:{ok:t.handleOk,cancel:t.handleCancel}},[e("a-row",[e("a-col",{attrs:{md:4,sm:24}},[e("div",{staticStyle:{height:"calc(70vh - 20px)","border-right":"1px solid #e3e1e1","margin-right":"15px"}},[t.treeData&&t.treeData.length>0?e("a-tree",{staticClass:"limitHeight",attrs:{defaultSelectedKeys:[t.queryParam.depId],defaultExpandAll:!0,"tree-data":t.treeData},on:{select:t.onSelect}}):t._e()],1)]),e("a-col",{attrs:{md:20,sm:24}},[e("div",{staticClass:"table-page-search-wrapper"},[e("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.findList.apply(null,arguments)}}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:5,sm:24}},[e("a-form-item",{attrs:{label:"账号"}},[e("a-input",{attrs:{placeholder:"请输入用户账号"},model:{value:t.queryParam.username,callback:function(e){t.$set(t.queryParam,"username",e)},expression:"queryParam.username"}})],1)],1),e("a-col",{attrs:{md:5,sm:24}},[e("a-form-item",{attrs:{label:"真实名字"}},[e("a-input",{attrs:{placeholder:"请输入真实名字"},model:{value:t.queryParam.realname,callback:function(e){t.$set(t.queryParam,"realname",e)},expression:"queryParam.realname"}})],1)],1),e("a-col",{attrs:{md:6,sm:24}},[e("a-form-item",{attrs:{label:"手机号码"}},[e("a-input",{attrs:{placeholder:"请输入手机号码"},model:{value:t.queryParam.phone,callback:function(e){t.$set(t.queryParam,"phone",e)},expression:"queryParam.phone"}})],1)],1),e("a-col",{attrs:{md:6,sm:24}},[e("a-form-item",{attrs:{label:"角色"}},[e("j-dict-select-tag",{attrs:{triggerChange:!0,dictCode:"sys_role,role_name,id",placeholder:"选择角色"},model:{value:t.queryParam.roleId,callback:function(e){t.$set(t.queryParam,"roleId",e)},expression:"queryParam.roleId"}})],1)],1),e("a-col",{attrs:{md:2,sm:8}},[e("a-button",{on:{click:t.findList}},[t._v("查询")])],1)],1)],1)],1),e("div",{staticStyle:{height:"calc(70vh - 130px)"}},[e("vxe-table",{ref:"listTable",staticStyle:{height:"calc(70vh - 130px)"},attrs:{border:"",align:t.allAlign,data:t.tableData,"max-height":"100%","show-overflow":"tooltip","radio-config":t.multiple?{}:{trigger:"row"},"checkbox-config":t.multiple?{trigger:"row",highlight:!0,range:!0}:{},"edit-config":{trigger:"manual",mode:"row"}}},[t.multiple?e("vxe-table-column",{attrs:{type:"checkbox",width:"5%"}}):e("vxe-table-column",{attrs:{type:"radio",width:"5%"}}),e("vxe-table-column",{attrs:{field:"workNo",title:"工号",width:"100",align:"center"}}),e("vxe-table-column",{attrs:{field:"username",title:"用户账号",width:"150",align:"left","header-align":"center"}}),e("vxe-table-column",{attrs:{field:"realname",title:"用户名字",width:"100",align:"left","header-align":"center"}}),e("vxe-table-column",{attrs:{field:"roleNames",title:"角色","min-width":"180",align:"left","header-align":"center"}}),e("vxe-table-column",{attrs:{field:"sex_dictText",title:"性别",width:"80"}}),e("vxe-table-column",{attrs:{field:"phone",title:"手机号码",width:"120"}}),e("vxe-table-column",{attrs:{field:"orgCode",title:"部门",width:"120",align:"left","header-align":"center"}}),e("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",width:"80"}})],1),e("vxe-pager",{attrs:{perfect:"","current-page":t.queryParam.pageNo,"page-size":t.queryParam.pageSize,total:t.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(e){return t.$set(t.queryParam,"pageNo",e)},"update:current-page":function(e){return t.$set(t.queryParam,"pageNo",e)},"update:pageSize":function(e){return t.$set(t.queryParam,"pageSize",e)},"update:page-size":function(e){return t.$set(t.queryParam,"pageSize",e)},"page-change":t.handlePageChange}})],1)])],1)],1)},o=[],n=a("8fad"),i={name:"UserList",props:{multiple:{type:Boolean,default:!0},depId:{type:String,default:""}},data:function(){return{queryParam:{username:"",realname:"",phone:"",orgCode:"",roleId:void 0,pageNo:1,pageSize:10},allAlign:"center",totalResult:0,tableData:[],visible:!1,confirmLoading:!1,treeData:[]}},watch:{depId:function(t){this.$set(this.queryParam,"depId",t||"")}},mounted:function(){this.$set(this.queryParam,"depId",this.depId||"")},methods:{showModal:function(){this.visible=!0,this.findList(),this.getTreeList()},getTreeList:function(){var t=this;Object(n["yb"])().then((function(e){e.success&&(t.treeData=e.result)}))},onSelect:function(t,e){if(t.length){var a=e.node.dataRef;this.queryParam.depId=a.id,this.findList()}else this.queryParam.orgCode="",this.findList()},findList:function(){var t=this;this.loading=!0,Object(n["uc"])(this.queryParam).then((function(e){t.loading=!1,e.success?(t.totalResult=e.result.total,t.tableData=e.result.records):t.$message.error("加载用户数据失败")})).catch((function(e){t.$message.error("加载用户数据异常")})).finally((function(){}))},handlePageChange:function(t){var e=t.currentPage,a=t.pageSize;this.queryParam.pageNo=e,this.queryParam.pageSize=a,this.findList()},handleOk:function(){var t=[];this.multiple?t=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&t.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",t),this.visible=!1},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,Object.assign(this.$data,this.$options.data())}}},s=i,l=(a("f76d"),a("2877")),c=Object(l["a"])(s,r,o,!1,null,"4aa7956f",null);e["default"]=c.exports},bd18:function(t,e,a){"use strict";a("3ab9")},d88b:function(t,e,a){"use strict";a("3ff1")},e0ce:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("table",{staticClass:"table"},[e("thead",[e("tr",[e("th",{staticClass:"tg-d1f0",attrs:{colspan:"10"}},[t._v(t._s(t.sheetData.title))])])]),e("tbody",[e("tr",[e("td",{staticClass:"tg-ld8d",attrs:{colspan:"3"}},[e("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[t._v("车号："+t._s(t.sheetData.trainNo))])]),e("td",{staticClass:"tg-ld8d",attrs:{colspan:"3"}},[e("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[t._v("部件名称："+t._s(t.sheetData.assetName))])]),e("td",{staticClass:"tg-ld8d",attrs:{colspan:"4"}},[t._v("作业周期："+t._s(t.sheetData.period))])]),e("tr",[e("td",{staticClass:"tg-ld8d",attrs:{colspan:"3"}},[e("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[t._v("部件编号："+t._s(t.sheetData.assetNo))])]),e("td",{staticClass:"tg-ld8d",attrs:{colspan:"3"}},[e("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[t._v("作业位置："+t._s(t.sheetData.location))])]),e("td",{staticClass:"tg-ld8d",attrs:{colspan:"4"}},[t._v("作业班组："+t._s(t.sheetData.groupName))])]),t._m(0),t._l(t.sheetData.itemList,(function(a,r){return e("tr",{key:r},[e("td",{staticClass:"tg-0pky tg-9wq8"},[t._v(t._s(a.sortNo))]),e("td",{staticClass:"tg-0pky"},[t._v(t._s(a.title))]),e("td",{staticClass:"tg-0pky"},[t._v(t._s(a.content))]),e("td",{staticClass:"tg-0pky tg-9wq8"},[e("a-rate",{attrs:{disabled:"",count:3},model:{value:a.checkLevel,callback:function(e){t.$set(a,"checkLevel",e)},expression:"item.checkLevel"}})],1),e("td",{staticClass:"tg-0pky"},[t._v(t._s(a.checkDesc))]),e("td",{staticClass:"tg-0pky tg-9wq8"},[t._v(t._s(a.checkUserName?a.checkResult_dictText:""))]),e("td",{staticClass:"tg-0pky tg-9wq8"},[t._v(t._s(a.workTime))]),e("td",{staticClass:"tg-0pky tg-9wq8"},[t._v(t._s(a.checkMethod_dictText))]),e("td",{staticClass:"tg-0pky tg-9wq8"},[t._v(t._s(a.checkUserName))]),e("td",{staticClass:"tg-0pky tg-9wq8"},[t._v(t._s(a.checkTime))])])})),t._m(1),e("tr",[e("td",{staticClass:"tg-9wq8",attrs:{colspan:"2"}},[t._v("参考工艺文件")]),e("td",{staticClass:"tg-0pky",attrs:{colspan:"8"}},t._l(t.sheetData.techLinkList,(function(a,r){return e("p",{key:r,staticStyle:{margin:"0","font-size":"12px","line-height":"18px"}},[t._v(" "+t._s(a.teckBookName)+" ")])})),0)]),t._m(2),t._m(3),t._l(t.sheetData.rectifyList,(function(a,r){return e("tr",{key:r},[e("td",{staticClass:"tg-0pky",attrs:{colspan:"7"}},[t._v(t._s(a.itemInfo))]),e("td",{staticClass:"tg-0pky"},[t._v(t._s(a.rectifyDesc))]),e("td",{staticClass:"tg-0pky"},[t._v(t._s(a.reviewTime))]),e("td",{staticClass:"tg-0pky"},[t._v(t._s(a.reviewUserName))])])})),t._m(4),e("tr",[e("td",{staticClass:"tg-9wq8",attrs:{colspan:"2"}},[t._v("评定：")]),e("td",{staticClass:"tg-0pky",attrs:{colspan:"8"}},[t._l(t.sheetData.judgeList,(function(a){return e("div",{key:a.id,staticClass:"qualityBox"},[e("div",{staticClass:"flex1",style:t.qualityEvaluation&&"padding-right: 20px;"},[e("span",[t._v(t._s("评定人：".concat(a.jdUserName)))]),e("span",[t._v(t._s("评定时间：".concat(a.jdTime)))]),e("span",[t._v(t._s("评定内容：".concat(a.jdContent)))])]),t.qualityEvaluation&&a.jdUserId===t.$store.getters.userInfo.id?e("div",[e("a-button",{directives:[{name:"has",rawName:"v-has",value:"jobchekc:evaluation:add",expression:"'jobchekc:evaluation:add'"}],attrs:{type:"link"},on:{click:t.openJudgeModal}},[t._v("质量评定")]),e("a-button",{directives:[{name:"has",rawName:"v-has",value:"jobchekc:evaluation:del",expression:"'jobchekc:evaluation:del'"}],attrs:{type:"link"},on:{click:function(e){return t.delJudge(a.id)}}},[t._v("删除")])],1):t._e()])})),t.sheetData.judgeList&&0!==t.sheetData.judgeList.length&&t.isJudge?t._e():e("div",{staticClass:"qualityBox"},[e("div",{staticClass:"flex1",style:t.qualityEvaluation&&"padding-right: 20px;"}),e("div",[t.fromData?e("a-button",{directives:[{name:"has",rawName:"v-has",value:"jobchekc:evaluation:add",expression:"'jobchekc:evaluation:add'"}],attrs:{type:"link"},on:{click:t.openJudgeModal}},[t._v("质量评定")]):t._e()],1)])],2)]),t._m(5),e("tr",[e("td",{staticClass:"tg-9wq8",attrs:{colspan:"2"}},[t._v("说明："+t._s(t.sheetData.remark))]),t._m(6)])],2),e("a-modal",{attrs:{title:"作业质量评定",width:800,visible:t.visible,centered:"",cancelText:"关闭",destroyOnClose:!0},on:{ok:t.handleOk,cancel:function(e){t.visible=!1}}},[e("a-form",{ref:"initForm",attrs:{form:t.form}},[e("a-form-item",[e("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["jdContent",t.validatorRules.jdContent],expression:"['jdContent', validatorRules.jdContent]"}],attrs:{"auto-size":{minRows:8,maxRows:8}}})],1)],1)],1)],1)},o=[function(){var t=this,e=t._self._c;return e("tr",[e("td",{staticClass:"tg-87ij",staticStyle:{width:"6%"}},[e("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[t._v("序号")])]),e("td",{staticClass:"tg-87ij",staticStyle:{width:"12%"}},[e("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[t._v("项点")])]),e("td",{staticClass:"tg-87ij",staticStyle:{width:"18%"}},[e("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[t._v("检查内容")])]),e("td",{staticClass:"tg-87ij",staticStyle:{width:"8%"}},[e("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[t._v("等级")])]),e("td",{staticClass:"tg-87ij",staticStyle:{width:"8%"}},[e("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[t._v("检查情况")])]),e("td",{staticClass:"tg-87ij",staticStyle:{width:"8%"}},[e("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[t._v("结果")])]),e("td",{staticClass:"tg-87ij",staticStyle:{width:"10%"}},[e("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[t._v("作业时间")])]),e("td",{staticClass:"tg-87ij",staticStyle:{width:"10%"}},[e("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[t._v("检查方式")])]),e("td",{staticClass:"tg-87ij",staticStyle:{width:"10%"}},[e("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[t._v("检查人")])]),e("td",{staticClass:"tg-87ij",staticStyle:{width:"10%"}},[e("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[t._v("检查时间")])])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{staticClass:"tg-0pky",attrs:{colspan:"10"}})])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{staticClass:"tg-0pky",attrs:{colspan:"10"}})])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{staticClass:"tg-87ij",attrs:{colspan:"7"}},[e("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[t._v("不合格项汇总")])]),e("td",{staticClass:"tg-87ij"},[e("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[t._v("整改情况")])]),e("td",{staticClass:"tg-87ij"},[e("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[t._v("复查时间")])]),e("td",{staticClass:"tg-87ij"},[e("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[t._v("复查人")])])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{staticClass:"tg-0pky",attrs:{colspan:"10"}})])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{staticClass:"tg-0pky",attrs:{colspan:"10"}})])},function(){var t=this,e=t._self._c;return e("td",{staticClass:"tg-0pky",attrs:{colspan:"8"}},[t._v(" 1、表中只列出关键项点，检查人员在检查时参照工艺文件标准执行。"),e("br"),t._v(" 2、检查人员必须对当天作业内容进行检查。"),e("br"),t._v(" 3、表中所有内容全部现场检查时填写完成，并悬挂于部件上，随部件流转。"),e("br"),t._v(" 4、作业时间由作业班组填写，其余由检查人员填写。“检查情况”一栏详细记录检查情况；“结果”一栏对检查合格的画“√”不合格的画“×”；“检查方式”一栏写明检查手段，如：目视、测量、操作等。"),e("br"),t._v(" 5、检查人员对不合格项视情节严重情况开具整改单，及时提出整改意见，并督促整改，整改完成后及时进行复查。"),e("br"),t._v(" 6、由检查人员、质量工程师及专业工程师对整体作业质量做出最终判定。 ")])}],n=a("b7b4");function i(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",o=a.toStringTag||"@@toStringTag";function n(a,r,o,n){var i=r&&r.prototype instanceof c?r:c,u=Object.create(i.prototype);return s(u,"_invoke",function(a,r,o){var n,i,s,c=0,u=o||[],d=!1,h={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,a){return n=e,i=0,s=t,h.n=a,l}};function f(a,r){for(i=a,s=r,e=0;!d&&c&&!o&&e<u.length;e++){var o,n=u[e],f=h.p,m=n[2];a>3?(o=m===r)&&(s=n[(i=n[4])?5:(i=3,3)],n[4]=n[5]=t):n[0]<=f&&((o=a<2&&f<n[1])?(i=0,h.v=r,h.n=n[1]):f<m&&(o=a<3||n[0]>r||r>m)&&(n[4]=a,n[5]=r,h.n=m,i=0))}if(o||a>1)return l;throw d=!0,r}return function(o,u,m){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,m),i=u,s=m;(e=i<2?t:s)||!d;){n||(i?i<3?(i>1&&(h.n=-1),f(i,s)):h.n=s:h.v=s);try{if(c=2,n){if(i||(o="next"),e=n[o]){if(!(e=e.call(n,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,i<2&&(i=0)}else 1===i&&(e=n.return)&&e.call(n),i<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),i=1);n=t}else if((e=(d=h.n<0)?s:a.call(r,h))!==l)break}catch(e){n=t,i=1,s=e}finally{c=1}}return{value:e,done:d}}}(a,o,n),!0),u}var l={};function c(){}function u(){}function d(){}e=Object.getPrototypeOf;var h=[][r]?e(e([][r]())):(s(e={},r,(function(){return this})),e),f=d.prototype=c.prototype=Object.create(h);function m(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=d,s(f,"constructor",d),s(d,"constructor",u),u.displayName="GeneratorFunction",s(d,o,"GeneratorFunction"),s(f),s(f,o,"Generator"),s(f,r,(function(){return this})),s(f,"toString",(function(){return"[object Generator]"})),(i=function(){return{w:n,m:m}})()}function s(t,e,a,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}s=function(t,e,a,r){function n(e,a){s(t,e,(function(t){return this._invoke(e,a,t)}))}e?o?o(t,e,{value:a,enumerable:!r,configurable:!r,writable:!r}):t[e]=a:(n("next",0),n("throw",1),n("return",2))},s(t,e,a,r)}function l(t,e,a,r,o,n,i){try{var s=t[n](i),l=s.value}catch(t){return void a(t)}s.done?e(l):Promise.resolve(l).then(r,o)}function c(t){return function(){var e=this,a=arguments;return new Promise((function(r,o){var n=t.apply(e,a);function i(t){l(n,r,o,i,s,"next",t)}function s(t){l(n,r,o,i,s,"throw",t)}i(void 0)}))}}var u={name:"JobCheckSheetTable",data:function(){return{jdContentText:"",form:this.$form.createForm(this),validatorRules:{jdContent:{rules:[{required:!0,message:"请输入评定内容!"}]}},judgeQueryParam:{id:null,checkInstId:"",checkInstName:"",jdContent:"",jdTime:null,jdUserId:this.$store.getters.userInfo.id,jdUserName:this.$store.getters.userInfo.username},visible:!1,sheetData:{}}},props:{data:{type:Object,default:function(){return{}}},qualityEvaluation:{type:Boolean,default:!1},fromData:{type:Object,default:function(){}}},created:function(){this.sheetData=Object.assign({},this.data),this.sheetData.itemList=this.sortArray(this.sheetData.itemList)},mounted:function(){},computed:{isJudge:function(){var t=this;return!(!this.sheetData||!this.sheetData.judgeList||this.sheetData.judgeList.length<1)&&!!this.sheetData.judgeList.find((function(e){return e.jdUserId===t.$store.getters.userInfo.id}))}},methods:{getWorkCheckForm:function(){var t=c(i().m((function t(){var e,a=this;return i().w((function(t){while(1)switch(t.n){case 0:return e=this.fromData,t.a(2,Object(n["z"])({task2InstId:e.task2InstId,formInstId:e.id}).then((function(t){return t.success&&t.result&&(t.result.itemList=a.sortArray(t.result.itemList),a.sheetData=t.result),a.sheetData})))}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),openJudgeModal:function(){var t=this,e=this.fromData;this.judgeQueryParam.checkInstId=e.id,this.judgeQueryParam.checkInstName=e.name,this.visible=!0;var a=e.judgeList.find((function(e){return e.jdUserId===t.$store.getters.userInfo.id}));a?(this.judgeQueryParam.jdContent=a.jdContent,this.judgeQueryParam.id=a.id,this.form.getFieldDecorator("jdContent"),this.$nextTick((function(){t.form.setFieldsValue({jdContent:t.jdContentText||t.judgeQueryParam.jdContent})}))):(this.judgeQueryParam.jdContent="",this.judgeQueryParam.id=null,this.form.getFieldDecorator("jdContent"),this.$nextTick((function(){t.form.setFieldsValue({jdContent:""})})))},handleOk:function(){var t=this;this.form.validateFields((function(e,a){e||(Object.assign(t.judgeQueryParam,a),Object(n["I"])(t.judgeQueryParam).then((function(e){e.success?(t.jdContentText=a.jdContent,t.$message.success("保存成功"),t.$emit("brush"),t.getWorkCheckForm().then((function(e){t.$emit("judgeChange",t.sheetData)}))):t.$message.error(e.message)})),t.visible=!1)}))},sortArray:function(t){return t.sort(this.compare("sortNo")),t},compare:function(t){return function(e,a){return e[t]-a[t]}},delJudge:function(t){var e=this;this.$confirm({content:"是否删除作业质量评定？",okText:"确定",cancelText:"取消",onOk:function(){var a=new FormData;a.append("ids",t),Object(n["h"])(a).then((function(t){t.success?(e.$message.success("执行成功"),e.$emit("brush"),e.getWorkCheckForm().then((function(t){e.$emit("judgeChange",e.sheetData)}))):e.$message.error(t.message)}))}})}}},d=u,h=(a("bd18"),a("2877")),f=Object(h["a"])(d,r,o,!1,null,"3c8c4fbe",null);e["default"]=f.exports},e24e:function(t,e,a){"use strict";a.d(e,"a",(function(){return l}));var r=a("e8ae"),o=a.n(r),n=a("21a6"),i=a.n(n),s=(a("7268"),"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"),l=function(t,e){var a=new o.a.Workbook;"[object Object]"===Object.prototype.toString.call(t)&&(t=[t]),t.forEach((function(t){if(0===t.data.length)return!0;var e=a.addWorksheet(t.name),r=t.config&&t.config.merge||{},o=t.config&&t.config.borderInfo||{},n=t.config&&t.config.columnlen||{},i=t.images||{};return d(i,a,e),u(n,e),c(t.config,e),m(t.data,e),h(r,e),f(o,e),!0}));var r=a.xlsx.writeBuffer().then((function(t){var a=new Blob([t],{type:s});i.a.saveAs(a,"".concat(e,".xlsx"))}));return r},c=function(t,e){if(t&&t.rowlen)for(var a in t.rowlen){var r=parseInt(a),o=parseInt(t.rowlen[a]),n=e.getRow(r+1);n.height=o}},u=function(t,e){for(var a in t){var r=parseInt(a),o=parseInt(t[a]);e.getColumn(r+1).width=parseInt(o/7)}},d=function(t,e,a){for(var r in t){var o=t[r],n=o.src.split(";base64,"),i=n[0].replaceAll("data:image/",""),s=e.addImage({base64:o.src,extension:i}),l=luckysheet.location(o.default.left,o.default.top);a.addImage(s,{tl:{col:l.col,row:l.row},ext:{width:o.default.width,height:o.default.height}})}},h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,a=Object.values(t);a.forEach((function(t){e.mergeCells(t.r+1,t.c+1,t.r+t.rs,t.c+t.cs)}))},f=function(t,e){Array.isArray(t)&&t.forEach((function(t){if("range"===t.rangeType)for(var a=b(t.borderType,t.style,t.color),r=t.range[0],o=r.row,n=r.column,i=o[0]+1;i<o[1]+2;i++)for(var s=n[0]+1;s<n[1]+2;s++)e.getCell(i,s).border=a;if("cell"===t.rangeType){var l=t.value,c=l.col_index,u=l.row_index,d=Object.assign({},t.value);delete d.col_index,delete d.row_index;var h=y(d,u,c);e.getCell(u+1,c+1).border=h}}))},m=function(t,e){Array.isArray(t)&&t.forEach((function(t,a){t.every((function(t,r){if(!t)return!0;var o=p(t.bg),n=g(t.ff,t.fc,t.bl,t.it,t.fs,t.cl,t.ul),i=v(t.vt,t.ht,t.tb,t.tr),s="";t.f?s={formula:t.f,result:t.v}:!t.v&&t.ct&&t.ct.s?t.ct.s.forEach((function(t){s+=t.v})):s=t.v;var l=k(r),c=e.getCell(l+(a+1));for(var u in o){c.fill=o;break}return c.font=n,c.alignment=i,c.value=s,!0}))}))},p=function(t){if(!t)return{};var e={type:"pattern",pattern:"solid",fgColor:{argb:t.replace("#","")}};return e},g=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#000000",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:10,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s={0:"微软雅黑",1:"宋体（Song）",2:"黑体（ST Heiti）",3:"楷体（ST Kaiti）",4:"仿宋（ST FangSong）",5:"新宋体（ST Song）",6:"华文新魏",7:"华文行楷",8:"华文隶书",9:"Arial",10:"Times New Roman ",11:"Tahoma ",12:"Verdana",num2bl:function(t){return 0!==t}},l={name:"number"===typeof t?s[t]:t,family:1,size:o,color:{argb:e.replace("#","")},bold:s.num2bl(a),italic:s.num2bl(r),underline:s.num2bl(i),strike:s.num2bl(n)};return l},v=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"default",o={vertical:{0:"middle",1:"top",2:"bottom",default:"top"},horizontal:{0:"center",1:"left",2:"right",default:"left"},wrapText:{0:!1,1:!1,2:!0,default:!1},textRotation:{0:0,1:45,2:-45,3:"vertical",4:90,5:-90,default:0}},n={vertical:o.vertical[t],horizontal:o.horizontal[e],wrapText:o.wrapText[a],textRotation:o.textRotation[r]};return n},b=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#000";if(!t)return{};var r={type:{"border-all":"all","border-top":"top","border-right":"right","border-bottom":"bottom","border-left":"left"},style:{0:"none",1:"thin",2:"hair",3:"dotted",4:"dashDot",5:"dashDot",6:"dashDotDot",7:"double",8:"medium",9:"mediumDashed",10:"mediumDashDot",11:"mediumDashDotDot",12:"slantDashDot",13:"thick"}},o={style:r.style[e],color:{argb:a.replace("#","")}},n={};return"all"===r.type[t]?(n["top"]=o,n["right"]=o,n["bottom"]=o,n["left"]=o):n[r.type[t]]=o,n};function y(t,e,a){var r={},o={type:{l:"left",r:"right",b:"bottom",t:"top"},style:{0:"none",1:"thin",2:"hair",3:"dotted",4:"dashDot",5:"dashDot",6:"dashDotDot",7:"double",8:"medium",9:"mediumDashed",10:"mediumDashDot",11:"mediumDashDotDot",12:"slantDashDot",13:"thick"}};for(var n in t)-1===t[n].color.indexOf("rgb")?r[o.type[n]]={style:o.style[t[n].style],color:{argb:t[n].color.replace("#","")}}:r[o.type[n]]={style:o.style[t[n].style],color:{argb:t[n].color}};return r}function k(t){var e="A".charCodeAt(0),a="Z".charCodeAt(0),r=a-e+1,o="";while(t>=0)o=String.fromCharCode(t%r+e)+o,t=Math.floor(t/r)-1;return o}},f000:function(t,e,a){},f0c5:function(t,e,a){"use strict";a("4b54")},f76d:function(t,e,a){"use strict";a("9527")}}]);