(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6ffc3d02","chunk-371ab49c","chunk-24cb054c"],{"4f27":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,width:800,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:20,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"整改项目"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["changeName",e.validatorRules.changeName],expression:"['changeName', validatorRules.changeName]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入整改项目"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:20,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"整改内容描述"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["changeDesc",e.validatorRules.changeDesc],expression:"['changeDesc', validatorRules.changeDesc]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入整改内容描述"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:20,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"责任部门"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["dept",e.validatorRules.dept],expression:"['dept', validatorRules.dept]",modifiers:{trim:!0}}],attrs:{placeholder:"请选择责任部门",triggerChange:!0,dictCode:"sys_depart,depart_name,id"},on:{select:e.deptChange}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:20,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"责任人"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["dutyManName",e.validatorRules.dutyManName],expression:"['dutyManName', validatorRules.dutyManName]",modifiers:{trim:!0}}],ref:"userSelect",attrs:{placeholder:"请选择责任人",open:!1},on:{focus:e.openUserSelectModal}},[t("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:20,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"整改日期"}},[t("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["changeDate",e.validatorRules.changeDate],expression:"['changeDate', validatorRules.changeDate]",modifiers:{trim:!0}}],attrs:{placeholder:"请选择整改日期"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:20,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"检查日期"}},[t("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["checkDate"],expression:"['checkDate']",modifiers:{trim:!0}}],attrs:{placeholder:"请选择检查日期"}})],1)],1)],1)],1),t("user-list",{ref:"userModalForm",attrs:{multiple:!1},on:{ok:e.addTarget}})],1)],1)},i=[],r=(a("b47d"),a("ca00")),s=a("b245"),n=a("c1df"),o=a.n(n),c={name:"RectifyModal",components:{UserList:s["default"]},props:["exchangeId"],data:function(){return{title:"操作",visible:!1,activeIndex:null,model:{},labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}},dutyMan:"",confirmLoading:!1,form:this.$form.createForm(this),validatorRules:{changeName:{rules:[{required:!0,message:"请输入整改项目名称!"},{max:64,message:"输入长度不能超过64字符!"}]},changeDesc:{rules:[{required:!0,message:"请输入整改内容描述!"},{max:500,message:"输入长度不能超过500字符!"}]},dept:{rules:[{required:!0,message:"请选择责任部门!"}]},dutyManName:{rules:[{required:!0,message:"请选择责任人!"}]},changeDate:{rules:[{required:!0,message:"请选择整改日期!"}]}}}},created:function(){},methods:{deptChange:function(e,t){e&&(this.model.deptName=t.text)},openUserSelectModal:function(){this.$refs.userModalForm.showModal(),this.$refs.userSelect.blur()},addTarget:function(e){Object(r["e"])(e)||(this.dutyMan=e[0].id,this.form.setFieldsValue({dutyManName:e[0].realname}))},add:function(){this.edit({})},edit:function(e,t){var a=this;this.activeIndex=t,this.form.resetFields(),this.model=Object.assign({},e),this.visible=!0,e.id&&(this.dutyMan=e.dutyMan),this.$nextTick((function(){a.form.setFieldsValue({changeName:a.model.changeName,changeDesc:a.model.changeDesc,dept:a.model.dept,deptName:a.model.deptName,dutyManName:a.model.dutyManName,changeDate:o()(a.model.changeDate||void 0),checkDate:o()(a.model.checkDate||void 0)})}))},handleOk:function(){var e=this,t=this;t.form.validateFields((function(a,l){if(!a){e.confirmLoading=!0;var i=Object.assign(t.model,l,{dutyMan:e.dutyMan,changeDate:o()(l.changeDate).format("YYYY-MM-DD"),checkDate:o()(l.checkDate).format("YYYY-MM-DD")});e.$emit("addItem",i,e.activeIndex),e.$message.success("添加成功！"),e.$emit("ok"),e.close(),e.activeIndex=null,e.confirmLoading=!1}}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},d=c,u=a("2877"),m=Object(u["a"])(d,l,i,!1,null,"c5a90dee",null);t["default"]=m.exports},9527:function(e,t,a){},b245:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"85%",title:"人员选择",visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",bodyStyle:{height:"70vh"},destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-row",[t("a-col",{attrs:{md:4,sm:24}},[t("div",{staticStyle:{height:"calc(70vh - 20px)","border-right":"1px solid #e3e1e1","margin-right":"15px"}},[e.treeData&&e.treeData.length>0?t("a-tree",{staticClass:"limitHeight",attrs:{defaultSelectedKeys:[e.queryParam.depId],defaultExpandAll:!0,"tree-data":e.treeData},on:{select:e.onSelect}}):e._e()],1)]),t("a-col",{attrs:{md:20,sm:24}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.findList.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"账号"}},[t("a-input",{attrs:{placeholder:"请输入用户账号"},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"真实名字"}},[t("a-input",{attrs:{placeholder:"请输入真实名字"},model:{value:e.queryParam.realname,callback:function(t){e.$set(e.queryParam,"realname",t)},expression:"queryParam.realname"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"手机号码"}},[t("a-input",{attrs:{placeholder:"请输入手机号码"},model:{value:e.queryParam.phone,callback:function(t){e.$set(e.queryParam,"phone",t)},expression:"queryParam.phone"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"角色"}},[t("j-dict-select-tag",{attrs:{triggerChange:!0,dictCode:"sys_role,role_name,id",placeholder:"选择角色"},model:{value:e.queryParam.roleId,callback:function(t){e.$set(e.queryParam,"roleId",t)},expression:"queryParam.roleId"}})],1)],1),t("a-col",{attrs:{md:2,sm:8}},[t("a-button",{on:{click:e.findList}},[e._v("查询")])],1)],1)],1)],1),t("div",{staticStyle:{height:"calc(70vh - 130px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(70vh - 130px)"},attrs:{border:"",align:e.allAlign,data:e.tableData,"max-height":"100%","show-overflow":"tooltip","radio-config":e.multiple?{}:{trigger:"row"},"checkbox-config":e.multiple?{trigger:"row",highlight:!0,range:!0}:{},"edit-config":{trigger:"manual",mode:"row"}}},[e.multiple?t("vxe-table-column",{attrs:{type:"checkbox",width:"5%"}}):t("vxe-table-column",{attrs:{type:"radio",width:"5%"}}),t("vxe-table-column",{attrs:{field:"workNo",title:"工号",width:"100",align:"center"}}),t("vxe-table-column",{attrs:{field:"username",title:"用户账号",width:"150",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"realname",title:"用户名字",width:"100",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"roleNames",title:"角色","min-width":"180",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"sex_dictText",title:"性别",width:"80"}}),t("vxe-table-column",{attrs:{field:"phone",title:"手机号码",width:"120"}}),t("vxe-table-column",{attrs:{field:"orgCode",title:"部门",width:"120",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",width:"80"}})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1)])],1)],1)},i=[],r=a("8fad"),s={name:"UserList",props:{multiple:{type:Boolean,default:!0},depId:{type:String,default:""}},data:function(){return{queryParam:{username:"",realname:"",phone:"",orgCode:"",roleId:void 0,pageNo:1,pageSize:10},allAlign:"center",totalResult:0,tableData:[],visible:!1,confirmLoading:!1,treeData:[]}},watch:{depId:function(e){this.$set(this.queryParam,"depId",e||"")}},mounted:function(){this.$set(this.queryParam,"depId",this.depId||"")},methods:{showModal:function(){this.visible=!0,this.findList(),this.getTreeList()},getTreeList:function(){var e=this;Object(r["yb"])().then((function(t){t.success&&(e.treeData=t.result)}))},onSelect:function(e,t){if(e.length){var a=t.node.dataRef;this.queryParam.depId=a.id,this.findList()}else this.queryParam.orgCode="",this.findList()},findList:function(){var e=this;this.loading=!0,Object(r["uc"])(this.queryParam).then((function(t){e.loading=!1,t.success?(e.totalResult=t.result.total,e.tableData=t.result.records):e.$message.error("加载用户数据失败")})).catch((function(t){e.$message.error("加载用户数据异常")})).finally((function(){}))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()},handleOk:function(){var e=[];this.multiple?e=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&e.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",e),this.visible=!1},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,Object.assign(this.$data,this.$options.data())}}},n=s,o=(a("f76d"),a("2877")),c=Object(o["a"])(n,l,i,!1,null,"4aa7956f",null);t["default"]=c.exports},c0c5:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"bodyWrapper"},[e.isReadonly?e._e():t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:5,sm:8}},[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-space",[t("a-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增")]),t("a-button",{on:{click:e.handleDel}},[e._v("删除")])],1)],1)])],1)],1)],1),t("div",{style:"height: calc(100vh - ".concat(e.isReadonly?"134":"240","px)")},[t("vxe-table",{ref:"listTable",style:"height: calc(100vh - ".concat(e.isReadonly?"134":"239","px)"),attrs:{border:"","auto-resize":"","max-height":"90%",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","checkbox-config":{trigger:"row",highlight:!0,range:!0},"edit-config":{trigger:"manual",mode:"row"}},on:{"checkbox-all":e.selectAllRowsIds,"checkbox-change":e.selectRowsIds}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),t("vxe-table-column",{attrs:{type:"seq",title:"序号",width:"80"}}),t("vxe-table-column",{attrs:{field:"changeName",title:"整改项目","min-width":"100",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"changeDesc",title:"整改内容描述","min-width":"120"}}),t("vxe-table-column",{attrs:{field:"deptName",title:"责任部门","min-width":"100"}}),t("vxe-table-column",{attrs:{field:"dutyManName",title:"责任人",width:"100"}}),t("vxe-table-column",{attrs:{field:"changeDate",title:"整改日期",width:"100"}}),t("vxe-table-column",{attrs:{field:"checkDate",title:"检查日期",width:"100"}}),t("vxe-table-column",{attrs:{field:"annex",title:"附件下载","min-width":"140",align:"left","header-align":"center"}}),e.isReadonly?e._e():t("vxe-table-column",{attrs:{title:"操作",width:"80",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){var l=a.row,i=a.rowIndex;return[t("a",{on:{click:function(t){return t.stopPropagation(),e.handleEdit(l,i)}}},[e._v("编辑")])]}}],null,!1,2479697564)})],1)],1),t("rectify-modal",{ref:"rectifyModal",attrs:{exchangeId:e.exchangeId},on:{ok:function(t){e.loading=!1},addItem:e.addItem}})],1)},i=[],r=a("b47d"),s=a("4f27"),n=a("ca00"),o={name:"ReceiveCarRectify",components:{RectifyModal:s["default"]},props:["exchangeId","isReadonly"],data:function(){return{queryParam:{exchangeId:"",pageNo:1,pageSize:999},totalResult:0,allAlign:"center",tableData:[],multipleSelection:[]}},created:function(){this.findList()},methods:{findList:function(){var e=this;Object(n["e"])(this.exchangeId)||(this.queryParam.exchangeId=this.exchangeId,Object(r["lb"])(this.queryParam).then((function(t){e.totalResult=t.result.total,e.loading=!1,e.tableData=t.result.records,e.$bus.$emit("setReceiveCarRectifyData",e.tableData)})))},selectAllRowsIds:function(e){var t=this;e.records.length?e.records.map((function(e,a){t.multipleSelection.push(e._XID)})):t.multipleSelection=[]},selectRowsIds:function(e){this.multipleSelection.includes(e.rowid)?this.multipleSelection.splice(this.multipleSelection.indexOf(e.rowid),1):this.multipleSelection.push(e.rowid)},addItem:function(e,t){if(t||0==t)for(var a in e)this.$set(this.tableData[t],a,e[a]),this.$forceUpdate();else this.tableData.unshift(e),this.$refs.listTable.clearCheckboxRow(),this.multipleSelection=[];this.$bus.$emit("setReceiveCarRectifyData",this.tableData)},handleAdd:function(){this.$refs.rectifyModal.title="新增",this.$refs.rectifyModal.add()},handleEdit:function(e,t){this.$refs.rectifyModal.title="编辑",this.$refs.rectifyModal.edit(e,t)},handleDel:function(){var e=this,t=this;t.multipleSelection.length>0?t.$confirm({content:"是否删除选中".concat(t.multipleSelection.length,"数据？"),onOk:function(){t.multipleSelection.map((function(e,a){for(var l=0;l<t.tableData.length;l++){var i=t.tableData[l];if(i._XID==e)return void t.tableData.splice(l,1)}})),e.$refs.listTable.clearCheckboxRow(),e.multipleSelection=[],e.$bus.$emit("setReceiveCarRectifyData",e.tableData)}}):t.$message.error("尚未选中任何数据!")},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()}}},c=o,d=a("2877"),u=Object(d["a"])(c,l,i,!1,null,"3071c07b",null);t["default"]=u.exports},f76d:function(e,t,a){"use strict";a("9527")}}]);