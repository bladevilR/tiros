(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-43ea12a0","chunk-29136323","chunk-6492a1e8","chunk-cfac6c42","chunk-770c7bea"],{1158:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"90%",title:"工位选择",centered:"",bodyStyle:{height:"80vh"},visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-row",[t("a-col",{staticStyle:{"border-right":"1px dotted #D3E1F1",height:"calc(80vh - 20px)","margin-right":"8px",padding:"0px"},attrs:{md:4,sm:24}},[e.treeData.length?t("a-tree",{attrs:{defaultExpandAll:"","tree-data":e.treeData,"default-selected-keys":e.defaultKey,dropdownStyle:{maxHeight:"200px",overflow:"auto"},replaceFields:{title:"name",key:"id"}},on:{select:e.onSelect}}):e._e()],1),t("a-col",{attrs:{md:19,sm:24}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getWorkStation.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"工位"}},[t("a-input",{attrs:{placeholder:"请输入工位名称","allow-clear":""},model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,"name",t)},expression:"queryParam.name"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"班组"}},[t("j-dict-select-tag",{attrs:{dictCode:"sys_depart,depart_name,id,org_category=4",placeholder:"请选择"},model:{value:e.queryParam.groupId,callback:function(t){e.$set(e.queryParam,"groupId",t)},expression:"queryParam.groupId"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-space",[t("a-button",{on:{click:e.getWorkStation}},[e._v("查询")])],1)],1)],1)],1)],1),t("div",{staticClass:"limitHeight"},[t("vxe-table",{ref:"listTable",staticStyle:{height:"100%"},attrs:{border:"","row-id":"id",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","edit-config":{trigger:"manual",mode:"row"},"radio-config":{trigger:"row"},"checkbox-config":{trigger:"row",highlight:!0,range:!0,checkStrictly:!0},"max-height":"100%"}},[e.multiple?t("vxe-table-column",{attrs:{type:"checkbox",width:"40",fixed:"left"}}):t("vxe-table-column",{attrs:{type:"radio",width:"40"}}),t("vxe-table-column",{attrs:{field:"stationNo",title:"工位号",width:"100"}}),t("vxe-table-column",{attrs:{field:"name",title:"工位名称",width:"20%",align:"left"}}),t("vxe-table-column",{attrs:{field:"groupName",title:"所属班组",width:"20%",align:"left"}}),t("vxe-table-column",{attrs:{field:"location",title:"位置",width:"100",align:"left"}}),t("vxe-table-column",{attrs:{field:"content",title:"作业内容",width:"25%",align:"left"}}),t("vxe-table-column",{attrs:{field:"remark",title:"备注",width:"10%",align:"left"}})],1)],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.page.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1)],1)],1)},n=[],i=r("8fad"),o={name:"WorkStationList",props:{multiple:{type:Boolean,default:!1},groupId:{type:String,default:null}},data:function(){return{visible:!1,confirmLoading:!1,treeData:[],tableData:[],allAlign:"center",defaultKey:[],queryParam:{id:"",name:"",groupId:"",pageNo:1,pageSize:10},page:{currentPage:1,pageSize:10,totalResult:3}}},mounted:function(){this.groupId&&(this.queryParam.groupId=this.groupId)},methods:{showModal:function(){this.visible=!0,this.getTreeList()},getTreeList:function(){var e=this;Object(i["Ub"])().then((function(t){t.success&&(e.treeData=t.result,e.defaultKey[0]=t.result[0].id,e.queryParam.id=t.result[0].id,e.getWorkStation())}))},getWorkStation:function(){var e=this;Object(i["Tb"])(this.queryParam).then((function(t){e.page.totalResult=t.result.total,e.tableData=t.result.records}))},onSelect:function(e,t){var r=t.node.dataRef;e.length>0&&(this.queryParam.id=r.id,this.queryParam.pageNo=1,this.getWorkStation())},handleOk:function(){var e=[];this.multiple?e=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&e.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",e),this.visible=!1},handlePageChange:function(e){var t=e.currentPage,r=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=r,this.getTreeList()},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},l=o,s=(r("7483"),r("2877")),c=Object(s["a"])(l,a,n,!1,null,"ea42f1f8",null);t["default"]=c.exports},"1e6a":function(e,t,r){"use strict";r("4a60")},"20c7":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,centered:"",width:600,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:24,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"开口项名称"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["recordName",e.validatorRules.recordName],expression:"['recordName', validatorRules.recordName]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入"}})],1)],1),t("a-col",{attrs:{md:24,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"线路"}},[t("line-select-list",{directives:[{name:"decorator",rawName:"v-decorator",value:["lineId",e.validatorRules.lineId],expression:"['lineId', validatorRules.lineId]"}],on:{change:e.changeLine}})],1)],1),t("a-col",{attrs:{md:24,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"车辆"}},[t("j-dict-select-seach-tag",{directives:[{name:"decorator",rawName:"v-decorator",value:["trainNo",e.validatorRules.trainNo],expression:"['trainNo', validatorRules.trainNo]"}],attrs:{triggerChange:!0,dictCode:e.dictCodeStr}})],1)],1),t("a-col",{attrs:{md:24,sm:24}},[t("a-form-item",{attrs:{field:"orderId",labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"所属工单"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["orderName",e.validatorRules.orderId],expression:"['orderName', validatorRules.orderId]",modifiers:{trim:!0}}],ref:"myOrderSelect",attrs:{"allow-clear":"",placeholder:"请选择工单",open:!1,showArrow:!0},on:{change:e.clearVal,dropdownVisibleChange:e.chooseWorkOrder}},[t("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)],1),t("a-col",{attrs:{md:24,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"工单任务"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["orderTaskId",e.validatorRules.orderTaskId],expression:"[ 'orderTaskId', validatorRules.orderTaskId ]",modifiers:{trim:!0}}],attrs:{triggerChange:!0,placeholder:"请选择工单任务",dictCode:e.dictCodeStrOrder}})],1)],1),t("a-col",{attrs:{md:24,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"是否处理"}},[t("a-switch",{on:{change:e.handleChange},model:{value:e.isStatus,callback:function(t){e.isStatus=t},expression:"isStatus"}})],1)],1),t("a-col",{attrs:{md:24,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"备注说明"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["recordDesc",e.validatorRules.recordDesc],expression:"['recordDesc', validatorRules.recordDesc]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入"}})],1)],1)],1)],1),t("work-order-select",{ref:"workOrderSelect",on:{ok:e.onSelectOrder}})],1)],1)},n=[],i=(r("c1df"),r("b7b4")),o=r("5633"),l=r("673e"),s={name:"OpenItemModal",components:{LineSelectList:o["default"],WorkOrderSelect:l["default"]},data:function(){return{isStatus:!1,status:"",dictCodeStr:"bu_train_info,train_no,train_no",dictCodeStrOrder:"",title:"操作",visible:!1,model:{},labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},isClose:!1,confirmLoading:!1,form:this.$form.createForm(this),validatorRules:{recordName:{rules:[{required:!0,message:"请输入开口项名称!"},{max:32,message:"输入长度不能超过32字符!"}]},orderId:{rules:[{required:!0,message:"请选择所属工单!"}]},orderName:{rules:[]},lineId:{rules:[{required:!0,message:"请选择线路!"}]},trainNo:{rules:[{required:!0,message:"请选择车辆!"}]},orderTaskId:{rules:[{required:!0,message:"请选择工单任务!"}]},recordDesc:{rules:[{max:500,message:"输入长度不能超过500字符!"}]},status:{rules:[{required:!0,message:"请选择处理状态!"}]}}}},created:function(){},methods:{changeOrder:function(e){this.dictCodeStrOrder=e?"bu_work_order_task,task_name,id,order_id='"+e+"'":"bu_work_order_task,task_name,id"},changeLine:function(e){this.dictCodeStr=e?"bu_train_info,train_no,train_no,line_id="+e:"bu_train_info,train_no,train_no"},handleChange:function(e){var t=e?1:0;this.status=t},changeClose:function(e){this.isClose=e},add:function(e,t,r){e&&this.changeOrder(e),this.edit({orderId:e,orderTaskId:t,recordDesc:r})},edit:function(e){var t=this;e.id?this.isClose=!(!e["close"]||1!=e["close"]):this.isClose=!1,this.model=Object.assign({},e),this.visible=!0;var r=!!this.model.status;this.model.status=r,this.isStatus=this.model.status,this.changeOrder(this.model.orderId),this.$nextTick((function(){t.form.getFieldDecorator("orderName",{rules:t.validatorRules.orderName}),t.form.setFieldsValue({recordName:t.model.recordName,orderId:t.model.orderId,orderName:t.model.orderName,groupId:t.model.groupId,trainNo:t.model.trainNo,orderTaskId:t.model.orderTaskId,lineId:t.model.lineId,recordDesc:t.model.recordDesc})}))},handleOk:function(){var e=this;e.form.validateFields((function(t,r){if(!t){e.confirmLoading=!0,e.model.orderId||(e.model.orderId=""),r.orderTaskId||(r.orderTaskId="");var a,n=Object.assign(e.model,r);n["status"]=e.isStatus?1:0,a=e.model.id?Object(i["k"])(n):Object(i["a"])(n),a.then((function(t){t.success?(e.$message.success(t.message),e.$emit("ok"),e.close()):e.$message.error("保存失败")})).catch((function(t){e.$message.error("保存异常")})).finally((function(){e.confirmLoading=!1}))}}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1},clearVal:function(e){e||(this.model.orderId=null,this.model.orderTaskId=null,this.form.setFieldsValue({orderName:null,orderTaskId:null}))},chooseWorkOrder:function(){this.$refs.workOrderSelect.showModal()},onSelectOrder:function(e){e.length>0&&(this.form.setFieldsValue({orderName:e[0].orderName,orderTaskId:null}),this.model.orderId=e[0].id,this.changeOrder(e[0].id))}}},c=s,u=r("2877"),d=Object(u["a"])(c,a,n,!1,null,"a23e45b2",null);t["default"]=d.exports},"2e75":function(e,t,r){},4227:function(e,t,r){},"4a60":function(e,t,r){},"51cf":function(e,t,r){},"52c9":function(e,t,r){},"623c":function(e,t,r){"use strict";r("4227")},7068:function(e,t,r){"use strict";r("51cf")},7483:function(e,t,r){"use strict";r("2e75")},a6da:function(e,t,r){e.exports=r.p+"img/code.77bdebfa.png"},a7eb:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"myWorkContent"}},[t("na-splitter",{staticStyle:{height:"calc(100vh - 120px)"},attrs:{defaultSize:350},on:{resize:e.resizeSplitter}},[t("div",{staticStyle:{"overflow-y":"auto","overflow-x":"hidden","padding-right":"2px"},attrs:{slot:"left-panel"},slot:"left-panel"},[t("div",{staticClass:"titleBar bg-primary-1"},[e._v("任务搜索")]),t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:12}},[t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",[t("a-date-picker",{staticStyle:{width:"100%"},attrs:{format:"YYYY-MM-DD"},model:{value:e.queryParam.startDate,callback:function(t){e.$set(e.queryParam,"startDate",t)},expression:"queryParam.startDate"}})],1)],1),t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",[t("j-dict-select-tag",{attrs:{dictCode:"bu_order_task_status",placeholder:"请选择状态"},model:{value:e.queryParam.status,callback:function(t){e.$set(e.queryParam,"status",t)},expression:"queryParam.status"}})],1)],1),t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{staticStyle:{width:"100%"}},[t("div",{on:{click:e.openPlanModel}},[t("a-select",{ref:"myPlanSelect",attrs:{"allow-clear":"",placeholder:"请选择列计划",open:!1,showArrow:!0},on:{change:e.changePlanSelect},model:{value:e.queryParam.planName,callback:function(t){e.$set(e.queryParam,"planName",t)},expression:"queryParam.planName"}},[t("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)])],1),t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{staticClass:"work-order-select-cont"},[t("span",{on:{click:e.openOrderModel}},[t("a-select",{ref:"myOrderSelect",attrs:{"allow-clear":"",placeholder:"请选择工单",open:!1,showArrow:!0},on:{change:e.changeOrderSelect},model:{value:e.queryParam.orderName,callback:function(t){e.$set(e.queryParam,"orderName",t)},expression:"queryParam.orderName"}},[t("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)])],1),t("a-col",{attrs:{md:24,sm:24}},[t("a-form-item",[t("a-input",{attrs:{placeholder:"请输入任务名称","allow-clear":""},model:{value:e.queryParam.taskName,callback:function(t){e.$set(e.queryParam,"taskName",t)},expression:"queryParam.taskName"}})],1)],1)],1),t("a-row",[t("a-form-item",[t("a-button",{attrs:{type:"primary",block:""},on:{click:e.loadTaskList}},[e._v("搜索")])],1)],1)],1)],1),t("div",{staticClass:"titleBar bg-primary-1"},[e._v("任务列表")]),t("div",{staticClass:"list-wrapper"},[t("vxe-table",{ref:"listTable",attrs:{stripe:!0,border:"","row-id":"id",align:e.allAlign,data:e.tableDataTask,"max-height":"100%","show-overflow":"tooltip","radio-config":{trigger:"row",highlight:!0,reserve:!0,checkRowKey:e.defaultSelectTaskRow}},on:{"radio-change":e.radioChangeEvent}},[t("vxe-table-column",{attrs:{type:"radio",width:"35"}}),t("vxe-table-column",{attrs:{field:"taskName",title:"任务名称",align:"left",width:"195"}}),t("vxe-table-column",{attrs:{field:"taskStatus_dictText",title:"状态",align:"left",width:"65"}}),t("vxe-table-column",{attrs:{field:"trainNo",title:"车号",align:"left",width:"65"}}),t("vxe-table-column",{attrs:{field:"orderCode",title:"工单号",align:"left",width:"80"}}),t("vxe-table-column",{attrs:{field:"orderName",title:"工单名称",align:"left",width:"165"}})],1)],1)]),t("div",{staticStyle:{"padding-left":"5px","padding-right":"3px"},attrs:{slot:"right-panel"},slot:"right-panel"},[t("a-tabs",{attrs:{size:"small"}},[t("a-tab-pane",{key:"2",attrs:{tab:"作业要求"}},[t("div",{staticClass:"requireBox"},[t("div",{staticClass:"requireTitle"},[t("span",[e._v(" 安全要求")])]),e.requirement&&e.requirement.safeNotice?t("p",{staticClass:"safeContent"},[e._v(" "+e._s(e.requirement.safeNotice)+" ")]):e._e()]),t("div",{staticClass:"requireBox"},[t("div",{staticClass:"requireTitle"},[t("span",[e._v(" 技术要求")])]),e.requirement&&e.requirement.requirement?t("p",{staticClass:"safeContent"},[e._v(" "+e._s(e.requirement.requirement)+" ")]):e._e()]),t("div",{staticClass:"requireBox"},[t("div",{staticClass:"requireTitle"},[t("span",[e._v(" 安全预想")])]),e.requirement&&e.requirement.safetyExpectation?t("p",{staticClass:"safeContent",domProps:{innerHTML:e._s(e.requirement.safetyExpectation)}}):e._e()])]),t("a-tab-pane",{key:"1",attrs:{tab:"作业表单"}},[e.taskFormsList.length?t("a-tabs",{attrs:{size:"small",defaultActiveKey:0},on:{change:e.selectForm}},[e._l(e.taskFormsList,(function(r,a){return t("a-tab-pane",{key:a,attrs:{tab:r.formName,forceRender:!0}},[3===r.formType?t("div",[t("div",{staticClass:"buttonDiv"},[t("a-space",[t("a-button",{on:{click:function(t){return e.handleCheck(4,"抽检")}}},[e._v("抽检")]),t("a-button",{on:{click:function(t){return e.handleCheck(5,"过程检")}}},[e._v("过程检")]),t("a-button",{directives:[{name:"has",rawName:"v-has",value:"quailty:check6",expression:"'quailty:check6'"}],on:{click:function(t){return e.handleCheck(6,"过程检确认")}}},[e._v("过程检确认")]),t("a-button",{on:{click:function(t){return e.handleCheck(7,"交接检")}}},[e._v("交接检")]),t("a-button",{directives:[{name:"has",rawName:"v-has",value:"quailty:check8",expression:"'quailty:check8'"}],on:{click:function(t){return e.handleCheck(8,"交接检确认")}}},[e._v("交接检确认")]),t("a-button",{directives:[{name:"has",rawName:"v-has",value:"quailty:check9",expression:"'quailty:check9'"}],on:{click:function(t){return e.handleCheck(9,"专工验收")}}},[e._v("专工验收")]),t("a-dropdown",[t("a-menu",{attrs:{slot:"overlay"},on:{click:e.moreBtnClick},slot:"overlay"},[t("a-menu-item",{key:"1"},[e._v(" 故障提报 ")]),t("a-menu-item",{key:"2"},[e._v(" 设为开口项 ")]),t("a-menu-item",{key:"3"},[e._v(" 创建整改项 ")])],1),t("a-button",[e._v(" 更多 "),t("a-icon",{attrs:{type:"down"}})],1)],1)],1)],1),e.curRecordForm?t("vxe-table",{ref:"recordListTable",refInFor:!0,attrs:{stripe:!0,border:"","auto-resize":"","row-id":"id",align:e.allAlign,data:e.curRecordForm.detailList,"show-overflow":"tooltip","edit-config":{trigger:"manual",mode:"row"},"checkbox-config":{trigger:"row",highlight:!0,range:!0}}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),t("vxe-table-column",{attrs:{field:"checkLevel_dictText",title:"控制点",align:"center",width:"70"}}),t("vxe-table-column",{attrs:{field:"workContent",title:"检修内容",align:"left",width:"250"}}),t("vxe-table-column",{attrs:{field:"result_dictText",title:"结果",align:"center",width:"80"}}),t("vxe-table-column",{attrs:{field:"selfCheck",title:"自检",align:"center",width:"80"}}),t("vxe-table-column",{attrs:{field:"guarderCheck",title:"互检",align:"center",width:"80"}}),t("vxe-table-column",{attrs:{field:"monitorCheck",title:"专检",align:"center",width:"80"}}),t("vxe-table-column",{attrs:{field:"workInfo",title:"作业情况",align:"center"}})],1):e._e()],1):e._e(),1===r.formType?t("div",{staticStyle:{height:"calc(100vh - 210px)"}},[t("div",{staticStyle:{margin:"0px",padding:"0px",width:"100%",height:"100%"},attrs:{id:"luckysheet"}})]):e._e()])})),e.curFormIndexList&&e.curFormIndexList.length>1?t("a-select",{staticStyle:{width:"200px"},attrs:{slot:"tabBarExtraContent"},on:{change:e.changeFormIndex},slot:"tabBarExtraContent",model:{value:e.curCopyIndex,callback:function(t){e.curCopyIndex=t},expression:"curCopyIndex"}},e._l(e.curFormIndexList,(function(r,a){return t("a-select-option",{key:r.formIndex,attrs:{value:a}},[e._v(" "+e._s(r.formIndex)+"-"+e._s(r.name)+" "+e._s(" -"+r.assetName)+" ")])})),1):e._e()],2):e._e(),e.taskFormsList.length?e._e():t("div",{staticStyle:{margin:"20px"}},[e._v("无须填写作业记录")])],1),t("a-tab-pane",{key:"4",attrs:{tab:"物料消耗"}},[t("div",{staticClass:"tableHeight"},[t("vxe-table",{ref:"MaterialListTable",attrs:{border:"",align:e.allAlign,data:e.materials,"show-overflow":"ellipsis"}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),t("vxe-table-column",{attrs:{field:"code",title:"物料编码",width:"15%"}}),t("vxe-table-column",{attrs:{field:"name",title:"物料名称",width:"15%"}}),t("vxe-table-column",{attrs:{field:"amount",title:"所需数量",width:"15%"}}),t("vxe-table-column",{attrs:{field:"actAmount",title:"实际消耗",align:"left","edit-render":{name:"$input",props:{type:"number"}}}}),t("vxe-table-column",{attrs:{field:"unit",title:"单位",align:"left",width:"15%"}}),t("vxe-table-column",{attrs:{field:"remark",title:"消耗备注",align:"left","edit-render":{name:"$input",props:{type:"text"}}}})],1)],1)]),t("a-tab-pane",{key:"5",attrs:{tab:"工器具"}},[t("div",{staticClass:"tableHeight"},[t("vxe-table",{ref:"ToolsListTable",attrs:{border:"",align:e.allAlign,data:e.tools,"show-overflow":"ellipsis","checkbox-config":{trigger:"row",highlight:!0,range:!0},"edit-config":{trigger:"click",mode:"row"}}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),t("vxe-table-column",{attrs:{field:"code",title:"工器具类型编码"}}),t("vxe-table-column",{attrs:{field:"name",title:"工器具名称"}}),t("vxe-table-column",{attrs:{field:"amount",title:"所需数量"}}),t("vxe-table-column",{attrs:{field:"unit",title:"单位",align:"left",width:"15%"}})],1)],1)]),t("a-tab-pane",{key:"3",attrs:{tab:"必换件清单"}},[t("div",{staticClass:"tableHeight"},[t("vxe-table",{ref:"MustListTable",attrs:{border:"",align:e.allAlign,data:e.mustReplaces,"show-overflow":"ellipsis","edit-config":{trigger:"click",mode:"row"}}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),t("vxe-table-column",{attrs:{field:"code",title:"必换件编码",width:"15%"}}),t("vxe-table-column",{attrs:{field:"name",title:"必换件名称",width:"15%"}}),t("vxe-table-column",{attrs:{field:"initNum",title:"数量",width:"15%"}}),t("vxe-table-column",{attrs:{field:"unit",title:"单位",align:"left",width:"15%"}}),t("vxe-table-column",{attrs:{field:"changed",title:"更换状态",align:"left",width:"15%"}}),t("vxe-table-column",{attrs:{field:"remark",title:"备注",align:"left","edit-render":{name:"$input",props:{type:"text"}}}})],1)],1)]),t("a-tab-pane",{key:"6",attrs:{tab:"工艺文件"}},[t("vxe-table",{ref:"fileListTable",attrs:{border:"",data:e.files,"show-overflow":"ellipsis","checkbox-config":{trigger:"row",highlight:!0,range:!0}}},[t("vxe-table-column",{attrs:{title:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(r){var a=r.row;return[t("a-space",[t("a-button",{attrs:{type:"dashed",size:"small"},on:{click:function(t){return e.viewFile(a)}}},[e._v("查看")]),t("a-button",{attrs:{type:"dashed",size:"small"},on:{click:function(t){return e.downFile(a)}}},[e._v("下载")])],1)]}}])}),t("vxe-table-column",{attrs:{field:"fileName",title:"文件名称",align:"left"}})],1)],1),t("a-tab-pane",{key:"7",attrs:{tab:"任务信息"}},[t("div",{staticStyle:{padding:"20px"}},[t("div",{staticClass:"info-wrapper info-top-wrapper"},[t("h4",[e._v("工单信息")]),t("a-descriptions",{attrs:{title:"",bordered:""}},[t("a-descriptions-item",{attrs:{label:"工单编号"}},[e._v(" "+e._s(e.workOrderDetail.orderCode)+" ")]),t("a-descriptions-item",{attrs:{label:"工单类型"}},[e._v(" "+e._s(e.workOrderDetail.orderType_dictText)+" ")]),t("a-descriptions-item",{attrs:{label:"工单名称"}},[e._v(" "+e._s(e.workOrderDetail.orderName)+" ")]),t("a-descriptions-item",{attrs:{label:"作业班组"}},[e._v(" "+e._s(e.workOrderDetail.groupName)+" ")]),t("a-descriptions-item",{attrs:{label:"线路"}},[e._v(" "+e._s(e.workOrderDetail.lineName)+" ")]),t("a-descriptions-item",{attrs:{label:"车号"}},[e._v(" "+e._s(e.workOrderDetail.trainNo)+" ")]),t("a-descriptions-item",{attrs:{label:"开始日期"}},[e._v(" "+e._s(e.workOrderDetail.startTime)+" ")]),t("a-descriptions-item",{attrs:{label:"结束日期"}},[e._v(" "+e._s(e.workOrderDetail.finishTime)+" ")])],1)],1),t("div",{staticClass:"info-wrapper info-top-wrapper"},[t("h4",[e._v("任务信息")]),t("a-descriptions",{attrs:{title:"",bordered:""}},[t("a-descriptions-item",{attrs:{label:"任务编码"}},[e._v(" "+e._s(e.taskInfo.taskNo)+" ")]),t("a-descriptions-item",{attrs:{label:"重要工序"}},[e._v(" "+e._s(1===e.taskInfo.important?"是":"否")+" ")]),t("a-descriptions-item",{attrs:{label:"重要工序"}},[e._v(" "+e._s(1===e.taskInfo.outsource?"是":"否")+" ")]),t("a-descriptions-item",{attrs:{label:"任务名称"}},[e._v(" "+e._s(e.taskInfo.taskName)+" ")]),t("a-descriptions-item",{attrs:{label:"作业手段"}},[e._v(" "+e._s(e.taskInfo.method_dictText)+" ")]),t("a-descriptions-item",{attrs:{label:"作业部件"}},[e._v(" "+e._s(e.taskInfo.assetTypeName)+" ")]),t("a-descriptions-item",{attrs:{label:"预计工时"}},[e._v(" "+e._s(e.taskInfo.workTime)+" ")]),t("a-descriptions-item",{attrs:{label:"任务描述"}},[e._v(" "+e._s(e.taskInfo.remark)+" ")])],1)],1)])]),t("a-tab-pane",{key:"8",attrs:{tab:"附件"}},[t("vxe-table",{ref:"listTable",attrs:{border:"",align:"center",data:e.annexs,"keep-source":!0,"show-overflow":"tooltip"},on:{"update:data":function(t){e.annexs=t}}},[t("vxe-table-column",{attrs:{field:"name",title:"文件名称",align:"left"}}),t("vxe-table-column",{attrs:{field:"type",title:"扩展名",width:"150px"}}),t("vxe-table-column",{attrs:{field:"size",title:"文件大小(KB)",width:"150px"}}),t("vxe-table-column",{attrs:{field:"uid",title:"-",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(r){var a=r.row;return[a?t("span",[t("a",{on:{click:function(t){return t.stopPropagation(),e.previewImage(a)}}},[e._v("查看")]),t("a",{staticStyle:{"margin-left":"6px"},on:{click:function(t){return t.stopPropagation(),e.handleDownload(a)}}},[e._v("下载")])]):e._e()]}}])})],1)],1)],1)],1)]),t("train-plan-list",{ref:"planModalForm",on:{ok:e.onSelectPlan}}),t("work-order-select",{ref:"workOrderSelect",attrs:{"order-status":[2]},on:{ok:e.onSelectOrder}}),t("check-modal",{ref:"checkModalForm",attrs:{title:e.checkModalTitle},on:{ok:e.onCheckRecord}}),t("doc-preview-modal",{ref:"docPreview",attrs:{title:e.fileName}}),t("open-item-modal",{ref:"openItemModal"}),t("rectify-modal",{ref:"rectifyModal"}),t("BreakdownModal",{ref:"breakdownModal"})],1)},n=[],i=r("c1df"),o=r.n(i),l=r("2410"),s=r.n(l),c=r("60e2"),u=r("673e"),d=r("cf54"),m=r("e5b4"),f=r("d425"),h=r("353a"),p=r("b9c3"),b=r("8fad"),g=r("20c7"),v=r("5315"),k=r("ab7d"),y=r("e18e"),w=r("e2aa");function O(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",n=r.toStringTag||"@@toStringTag";function i(r,a,n,i){var s=a&&a.prototype instanceof l?a:l,c=Object.create(s.prototype);return x(c,"_invoke",function(r,a,n){var i,l,s,c=0,u=n||[],d=!1,m={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,r){return i=t,l=0,s=e,m.n=r,o}};function f(r,a){for(l=r,s=a,t=0;!d&&c&&!n&&t<u.length;t++){var n,i=u[t],f=m.p,h=i[2];r>3?(n=h===a)&&(s=i[(l=i[4])?5:(l=3,3)],i[4]=i[5]=e):i[0]<=f&&((n=r<2&&f<i[1])?(l=0,m.v=a,m.n=i[1]):f<h&&(n=r<3||i[0]>a||a>h)&&(i[4]=r,i[5]=a,m.n=h,l=0))}if(n||r>1)return o;throw d=!0,a}return function(n,u,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,h),l=u,s=h;(t=l<2?e:s)||!d;){i||(l?l<3?(l>1&&(m.n=-1),f(l,s)):m.n=s:m.v=s);try{if(c=2,i){if(l||(n="next"),t=i[n]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,l<2&&(l=0)}else 1===l&&(t=i.return)&&t.call(i),l<2&&(s=TypeError("The iterator does not provide a '"+n+"' method"),l=1);i=e}else if((t=(d=m.n<0)?s:r.call(a,m))!==o)break}catch(t){i=e,l=1,s=t}finally{c=1}}return{value:t,done:d}}}(r,n,i),!0),c}var o={};function l(){}function s(){}function c(){}t=Object.getPrototypeOf;var u=[][a]?t(t([][a]())):(x(t={},a,(function(){return this})),t),d=c.prototype=l.prototype=Object.create(u);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,x(e,n,"GeneratorFunction")),e.prototype=Object.create(d),e}return s.prototype=c,x(d,"constructor",c),x(c,"constructor",s),s.displayName="GeneratorFunction",x(c,n,"GeneratorFunction"),x(d),x(d,n,"Generator"),x(d,a,(function(){return this})),x(d,"toString",(function(){return"[object Generator]"})),(O=function(){return{w:i,m:m}})()}function x(e,t,r,a){var n=Object.defineProperty;try{n({},"",{})}catch(e){n=0}x=function(e,t,r,a){function i(t,r){x(e,t,(function(e){return this._invoke(t,r,e)}))}t?n?n(e,t,{value:r,enumerable:!a,configurable:!a,writable:!a}):e[t]=r:(i("next",0),i("throw",1),i("return",2))},x(e,t,r,a)}function j(e,t,r,a,n,i,o){try{var l=e[i](o),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(a,n)}function C(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var i=e.apply(t,r);function o(e){j(i,a,n,o,l,"next",e)}function l(e){j(i,a,n,o,l,"throw",e)}o(void 0)}))}}var T={components:{NaSplitter:y["default"],TrainPlanList:c["default"],WorkOrderSelect:u["default"],checkModal:d["default"],taskSubmitModal:m["default"],ToolsList:f["default"],DocPreviewModal:h["default"],OpenItemModal:g["default"],RectifyModal:v["default"],BreakdownModal:k["default"]},data:function(){return{tableDataTask:[],serialList:[],workOrderList:[],allAlign:"center",queryParam:{planId:"",planName:"",startDate:"",status:null,taskName:"",orderName:"",workOrderId:""},taskFormsList:[],defaultSelectTaskRow:"",selectTask:null,curCopyIndex:0,curFormIndex:0,curForm:null,curFormIndexList:[],curRecordForm:null,curOnlineForm:null,requirement:{},materials:[],tools:[],files:[],fileName:"",mustReplaces:[],taskDetail:{},workOrderDetail:{},taskInfo:{},curDepartId:this.$store.getters.userInfo.departId,defaultOptions:{container:"luckysheet",title:"sheet",column:26,row:50,lang:"zh",allowEdit:!0,showinfobar:!1,sheetFormulaBar:!1,showsheetbar:!1,showstatisticBar:!0,enableAddRow:!1,enableAddCol:!1,showtoolbar:!1,showtoolbarConfig:{save:!0,undoRedo:!0}},colNames:[],checkModalTitle:"自检",annexs:[]}},created:function(){this.loadTaskList()},beforeDestroy:function(){luckysheet.destroy()},mounted:function(){for(var e=65;e<91;e++)this.colNames.push(String.fromCharCode(e))},methods:{previewImage:function(e){return this.previewFileName=e.name,this.$refs.docPreview.handleFilePath(e.savepath),!1},handleDownload:function(){var e=C(O().m((function e(t){return O().w((function(e){while(1)switch(e.n){case 0:Object(w["b"])(t.savepath);case 1:return e.a(2)}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),moment:o.a,handleCheck:function(e,t){for(var r=-1,a=0;a<=this.curFormIndex;a++)3===this.taskFormsList[a].formType&&r++;var n=this.$refs.recordListTable[r].getCheckboxRecords();if(n.length>0){var i=n.map((function(e,t){return e.id})).join(",");this.checkModalTitle=t,this.$refs.checkModalForm.showModal(i,e)}else this.$message.error("请选择要检查的作业记录明细!")},onCheckRecord:function(e){e.saveSuccess&&this.loadRecordFormDetail()},openPlanModel:function(){this.$refs.planModalForm.showModal()},openOrderModel:function(){this.$refs.workOrderSelect.showModal()},onSelectPlan:function(e){this.queryParam.planId=e[0].id,this.queryParam.planName=e[0].planName},changePlanSelect:function(e){e||(this.queryParam.planId="")},onSelectOrder:function(e){this.queryParam.workOrderId=e[0].id,this.queryParam.orderName=e[0].orderName},changeOrderSelect:function(e){e||(this.queryParam.workOrderId="")},loadTaskList:function(){var e=this;this.queryParam.startDate=this.startDate?o()(this.startDate).format("YYYY-MM-DD"):void 0,this.queryParam.orderStatusList=[2,3,4,5],this.queryParam.orderWorkStatusList=[1,2],Object(p["V"])(this.queryParam).then((function(t){t.success?(e.tableDataTask=t.result,e.tableDataTask&&e.tableDataTask.length>0&&(e.defaultSelectTaskRow=t.result[0].id,e.selectTask=t.result[0],e.getWriteForm(e.defaultSelectTaskRow),e.getTaskInfo(e.defaultSelectTaskRow))):e.$message.warning(t.message)}))},radioChangeEvent:function(e){var t=e.row;this.selectTask=t,0===t.outTask&&(this.getWriteForm(t.id),this.getTaskInfo(t.id)),t.outTask,t.outTask},getTaskInfo:function(e){var t=this;Object(p["L"])(e).then((function(e){e.success&&(t.materials=e.result.materials,t.requirement=e.result.requirement,t.tools=e.result.tools,t.files=e.result.otherData,t.mustReplaces=e.result.mustReplaces,t.taskDetail=e.result.taskDetail,t.workOrderDetail=e.result.workOrder,t.annexs=e.result.annexList,t.taskInfo=e.result.task)}))},getWriteForm:function(e){var t=this;this.curForm=null,this.taskFormsList=[],this.curFormIndex=0,Object(p["K"])({taskId:e}).then((function(e){e.success&&(t.taskFormsList=e.result,t.selectForm(0))}))},selectForm:function(e){this.curFormIndex=e,this.taskFormsList&&this.taskFormsList.length>0&&(this.curForm=this.taskFormsList[this.curFormIndex],this.initForm())},initForm:function(){this.curForm&&(this.curCopyIndex=0,this.curFormIndexList=this.curForm.choiceList,this.curRecordForm=null,this.curOnlineForm=null,this.loadCopyFormDetail())},changeFormIndex:function(e){luckysheet.destroy(),this.curCopyIndex=e,this.loadCopyFormDetail()},loadCopyFormDetail:function(){3===this.curForm.formType&&this.loadRecordFormDetail(),1===this.curForm.formType&&this.loadOnlineFormDetail()},loadRecordFormDetail:function(){var e=this,t={task2InstId:this.curFormIndexList[this.curCopyIndex].id,formInstId:this.curFormIndexList[this.curCopyIndex].formInstId,needChecks:!0,needCategory:!1,orderTaskId:this.selectTask.id};Object(p["R"])(t).then((function(t){t.success?e.curRecordForm=t.result:e.$message.error("获取作业记录表内容错误")})).catch((function(t){e.$message.error("获取作业记录表内容异常")}))},loadOnlineFormDetail:function(){var e=this,t={task2InstId:this.curFormIndexList[this.curCopyIndex].id,formInstId:this.curFormIndexList[this.curCopyIndex].formInstId,needValues:!1};Object(p["Q"])(t).then((function(t){if(t.success){e.curOnlineForm=t.result;var r=null;if(e.curOnlineForm){if(e.curOnlineForm.result)try{r=JSON.parse(e.curOnlineForm.result)}catch(a){return void e.$message.error("转换表单填写结果异常")}Object(b["ub"])(e.curOnlineForm.formObjId).then((function(t){if(t.success){var a=JSON.parse(t.result);r&&(a.data=[],a.celldata=luckysheet.transToCellData(r)),e.initSheet(a)}else e.$message.error("获取表单模板数据失败")}))}else e.$message.error("获取作业表单数据失败")}else e.$message.error("获取记录表内容错误")})).catch((function(t){e.$message.error("获取记录表内容异常")}))},initSheet:function(e){var t=s()(this.defaultOptions);t.showtoolbarConfig={},e.config.authority.allowRangeList=[],t.data=[e],luckysheet.destroy(),luckysheet.create(t)},resizeSplitter:function(){var e=this;setTimeout((function(){e.curForm&&1===e.curForm.formType&&luckysheet.resize()}),100)},viewFile:function(e){this.fileName=e.fileName,this.$refs.docPreview.handleFilePath(e.savePath)},downFile:function(e){try{Object(w["b"])(e.savePath)}catch(t){this.$message.error("下载异常！")}},moreBtnClick:function(e){switch(e.key){case"1":this.createFault();break;case"2":this.createOpenItem();break;case"3":this.createRectify();break;default:break}},createOpenItem:function(){for(var e=-1,t=0;t<=this.curFormIndex;t++)3===this.taskFormsList[t].formType&&e++;var r=this.$refs.recordListTable[e].getCheckboxRecords();if(r.length>0){var a=r.map((function(e,t){return e.workContent})).join(",");this.$refs.openItemModal.add(this.selectTask.orderId,this.selectTask.id,a)}else this.$message.error("请选择要设为开口先项的作业记录明细!")},createFault:function(){for(var e=-1,t=0;t<=this.curFormIndex;t++)3===this.taskFormsList[t].formType&&e++;var r=this.$refs.recordListTable[e].getCheckboxRecords();if(r.length>0){if(r.length>1)return void this.$message.error("只能选择一条作业记录明细创建故障!");this.$refs.breakdownModal.add(this.selectTask.orderId,this.selectTask.id,2)}else this.$message.error("请选择要创建故障的作业记录明细!")},createRectify:function(){for(var e=this,t=-1,r=0;r<=this.curFormIndex;r++)3===this.taskFormsList[r].formType&&t++;var a=this.$refs.recordListTable[t].getCheckboxRecords();if(a.length>0){var n=a.map((function(e,t){return e.workContent})).join(",");Object(b["Nb"])({moduleCode:"JDXZG"}).then((function(t){t.success?e.$refs.rectifyModal.add(e.selectTask.orderId,e.selectTask.id,n,t.result):e.$message.error(t.message)}))}else this.$message.error("请选择要创建整改的作业记录明细!")}}},I=T,_=(r("bc44"),r("1e6a"),r("2877")),S=Object(_["a"])(I,a,n,!1,null,null,null);t["default"]=S.exports},ab7d:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:"故障编辑",width:"100%",centered:"",visible:e.visible,dialogClass:"fullDialog",confirmLoading:e.confirmLoading,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("div",{staticStyle:{height:"calc(100vh - 5px)","overflow-y":"auto"}},[e.visible?t("BreakdownFormItem",{ref:"breakdownForm",attrs:{fromWriteReport:e.fromWriteReport,workStationsList:e.workStationsList},on:{ok:e.onSaveOk,fail:e.onSaveFail,cancel:e.onSaveCancel}}):e._e()],1)])},n=[],i=r("d0ca"),o={name:"BreakdownModal",components:{BreakdownFormItem:i["default"]},props:{showWorkStation:{type:Boolean,default:!1},fromWriteReport:{type:Boolean,default:!1}},data:function(){return{visible:!1,confirmLoading:!1,workStationsList:[]}},created:function(){},methods:{setWorkStations:function(e){var t=this;this.workStationsList.length=0,e.forEach((function(e){t.workStationsList.find((function(t){return t.workstationId===e.workstationId}))||t.workStationsList.push(e)}))},add:function(e,t,r){this.edit({workOrderId:e,orderTaskId:t,formType:r,createType:r})},edit:function(e){var t=this;this.visible=!0,this.$nextTick((function(){t.$refs.breakdownForm.edit(e)}))},handleOk:function(){this.confirmLoading=!0,this.$refs.breakdownForm.save()},onSaveOk:function(){this.confirmLoading=!1,this.visible=!1,this.$message.success("保存成功"),this.$emit("ok")},onSaveFail:function(){this.$message.error("保存失败"),this.confirmLoading=!1},onSaveCancel:function(){this.confirmLoading=!1},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.confirmLoading=!1,this.visible=!1}}},l=o,s=(r("7068"),r("2877")),c=Object(s["a"])(l,a,n,!1,null,"12e1d6e2",null);t["default"]=c.exports},b7b4:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"i",(function(){return i})),r.d(t,"l",(function(){return o})),r.d(t,"c",(function(){return s})),r.d(t,"t",(function(){return c})),r.d(t,"v",(function(){return l})),r.d(t,"n",(function(){return d})),r.d(t,"C",(function(){return m})),r.d(t,"D",(function(){return f})),r.d(t,"p",(function(){return h})),r.d(t,"m",(function(){return b})),r.d(t,"j",(function(){return g})),r.d(t,"w",(function(){return v})),r.d(t,"a",(function(){return k})),r.d(t,"h",(function(){return y})),r.d(t,"k",(function(){return O})),r.d(t,"q",(function(){return x})),r.d(t,"z",(function(){return j})),r.d(t,"r",(function(){return C})),r.d(t,"e",(function(){return T})),r.d(t,"s",(function(){return I})),r.d(t,"B",(function(){return P})),r.d(t,"x",(function(){return _})),r.d(t,"y",(function(){return S})),r.d(t,"d",(function(){return w})),r.d(t,"f",(function(){return q})),r.d(t,"o",(function(){return p})),r.d(t,"A",(function(){return F})),r.d(t,"E",(function(){return N})),r.d(t,"g",(function(){return L})),r.d(t,"u",(function(){return u}));var a=r("0fea"),n=function(e){return Object(a["j"])("/quality/rectify/add",e)},i=function(e){return Object(a["j"])("/quality/rectify/delete",e)},o=function(e){return Object(a["j"])("/quality/rectify/edit",e)},l=function(e){return Object(a["d"])("/quality/rectify/page",e)},s=function(e){return Object(a["j"])("/quality/rectify/close",e)},c=function(e){return Object(a["d"])("/quality/rectify/get",e)},u=function(e){return Object(a["d"])("/quality/rectify/getCode",e)},d=function(e){return Object(a["d"])("/quality/measurealert/page",e)},m=function(e){return Object(a["d"])("/quality/measurethreshold/form/page-data-form",e)},f=function(e){return Object(a["j"])("/quality/measurethreshold/threshold/save",e)},h=function(e){return Object(a["d"])("/quality/measurethreshold/threshold/list/".concat(e))},p=function(e){return Object(a["d"])("/serialPlan/plan/forms/online-form/alert-records",{dataRecordId:e})},b=function(e){return Object(a["j"])("/quality/measurethreshold/threshold/edit",e)},g=function(e){return Object(a["j"])("/quality/measurethreshold/threshold/delete",e)},v=function(e){return Object(a["d"])("/quality/measurethreshold/threshold/get",e)},k=function(e){return Object(a["j"])("/quality/leaverecord/add",e)},y=function(e){return Object(a["j"])("/quality/leaverecord/delete",e)},w=function(e){return Object(a["j"])("/quality/leaverecord/close",e)},O=function(e){return Object(a["j"])("/quality/leaverecord/edit",e)},x=function(e){return Object(a["d"])("/quality/leaverecord/page",e)},j=function(e,t){return Object(a["c"])("/quality/leaverecord/workLeaveRecordExport",e,t)},C=function(e){return Object(a["d"])("/quality/record-confirm/list",e)},T=function(e){return Object(a["j"])("/quality/record-confirm/confirm",e)},I=function(e){return Object(a["d"])("/quality/record-confirm/work-record/get",e)},_=function(e){return Object(a["d"])("/serialPlan/plan/forms/check-record/get",e)},S=function(e){return Object(a["d"])("/workcheck/get",e)},q=function(e){return Object(a["j"])("/quality/record-confirm/confirm",e)},P=function(e){return Object(a["d"])("/quality/record-confirm/page",e)},F=function(e){return Object(a["d"])("/quality/record-confirm/page/check-record",e)},N=function(e){return Object(a["j"])("/serialPlan/plan/forms/judge/save",e)},L=function(e){return Object(a["j"])("/serialPlan/plan/forms/judge/delete",e)}},bc44:function(e,t,r){"use strict";r("e99b")},be65:function(e,t,r){"use strict";r("52c9")},c54ca:function(e,t,r){"use strict";r.d(t,"hb",(function(){return o})),r.d(t,"Cb",(function(){return u})),r.d(t,"jb",(function(){return d})),r.d(t,"ib",(function(){return m})),r.d(t,"Db",(function(){return f})),r.d(t,"Pb",(function(){return h})),r.d(t,"Zb",(function(){return p})),r.d(t,"e",(function(){return l})),r.d(t,"I",(function(){return s})),r.d(t,"A",(function(){return c})),r.d(t,"h",(function(){return b})),r.d(t,"N",(function(){return g})),r.d(t,"Gb",(function(){return v})),r.d(t,"n",(function(){return y})),r.d(t,"x",(function(){return k})),r.d(t,"Mb",(function(){return w})),r.d(t,"f",(function(){return C})),r.d(t,"J",(function(){return T})),r.d(t,"mb",(function(){return I})),r.d(t,"t",(function(){return _})),r.d(t,"l",(function(){return S})),r.d(t,"ec",(function(){return B})),r.d(t,"Rb",(function(){return O})),r.d(t,"g",(function(){return q})),r.d(t,"w",(function(){return P})),r.d(t,"K",(function(){return F})),r.d(t,"tb",(function(){return N})),r.d(t,"ub",(function(){return L})),r.d(t,"Ub",(function(){return $})),r.d(t,"bc",(function(){return D})),r.d(t,"C",(function(){return M})),r.d(t,"Lb",(function(){return z})),r.d(t,"ob",(function(){return W})),r.d(t,"P",(function(){return E})),r.d(t,"Q",(function(){return Y})),r.d(t,"pb",(function(){return V})),r.d(t,"ac",(function(){return U})),r.d(t,"u",(function(){return J})),r.d(t,"Fb",(function(){return j})),r.d(t,"fc",(function(){return A})),r.d(t,"Bb",(function(){return R})),r.d(t,"s",(function(){return ye})),r.d(t,"G",(function(){return we})),r.d(t,"Ib",(function(){return Oe})),r.d(t,"ic",(function(){return Te})),r.d(t,"c",(function(){return ke})),r.d(t,"db",(function(){return xe})),r.d(t,"lb",(function(){return je})),r.d(t,"jc",(function(){return Ce})),r.d(t,"cb",(function(){return qe})),r.d(t,"Z",(function(){return ae})),r.d(t,"X",(function(){return X})),r.d(t,"Y",(function(){return K})),r.d(t,"q",(function(){return Q})),r.d(t,"i",(function(){return Z})),r.d(t,"j",(function(){return ee})),r.d(t,"E",(function(){return H})),r.d(t,"a",(function(){return G})),r.d(t,"b",(function(){return ne})),r.d(t,"F",(function(){return ie})),r.d(t,"r",(function(){return oe})),r.d(t,"o",(function(){return le})),r.d(t,"ab",(function(){return se})),r.d(t,"D",(function(){return ce})),r.d(t,"m",(function(){return ue})),r.d(t,"Tb",(function(){return de})),r.d(t,"xb",(function(){return me})),r.d(t,"Ab",(function(){return fe})),r.d(t,"L",(function(){return he})),r.d(t,"M",(function(){return pe})),r.d(t,"V",(function(){return Pe})),r.d(t,"W",(function(){return Fe})),r.d(t,"U",(function(){return Ne})),r.d(t,"Eb",(function(){return x})),r.d(t,"yb",(function(){return te})),r.d(t,"k",(function(){return re})),r.d(t,"qb",(function(){return Le})),r.d(t,"R",(function(){return Re})),r.d(t,"Hb",(function(){return $e})),r.d(t,"cc",(function(){return De})),r.d(t,"O",(function(){return Me})),r.d(t,"y",(function(){return ze})),r.d(t,"mc",(function(){return Be})),r.d(t,"qc",(function(){return Ae})),r.d(t,"Nb",(function(){return We})),r.d(t,"sb",(function(){return Ee})),r.d(t,"rb",(function(){return Ye})),r.d(t,"dc",(function(){return Ve})),r.d(t,"v",(function(){return Ue})),r.d(t,"p",(function(){return Je})),r.d(t,"nb",(function(){return Ge})),r.d(t,"d",(function(){return He})),r.d(t,"H",(function(){return Qe})),r.d(t,"z",(function(){return Xe})),r.d(t,"T",(function(){return Ze})),r.d(t,"nc",(function(){return et})),r.d(t,"bb",(function(){return Ke})),r.d(t,"Qb",(function(){return rt})),r.d(t,"rc",(function(){return nt})),r.d(t,"gb",(function(){return at})),r.d(t,"eb",(function(){return ct})),r.d(t,"Ob",(function(){return ut})),r.d(t,"hc",(function(){return Ie})),r.d(t,"kc",(function(){return _e})),r.d(t,"zb",(function(){return be})),r.d(t,"fb",(function(){return ge})),r.d(t,"Kb",(function(){return ve})),r.d(t,"vb",(function(){return bt})),r.d(t,"lc",(function(){return gt})),r.d(t,"B",(function(){return vt})),r.d(t,"wb",(function(){return kt})),r.d(t,"Sb",(function(){return it})),r.d(t,"Xb",(function(){return ot})),r.d(t,"Vb",(function(){return lt})),r.d(t,"Wb",(function(){return st})),r.d(t,"Jb",(function(){return dt})),r.d(t,"oc",(function(){return mt})),r.d(t,"S",(function(){return Se})),r.d(t,"gc",(function(){return ft})),r.d(t,"Yb",(function(){return ht})),r.d(t,"pc",(function(){return pt})),r.d(t,"kb",(function(){return tt}));var a=r("0fea"),n=r("4328"),i=r.n(n),o=function(e){return Object(a["d"])("/material/list",e)},l=function(e){return Object(a["j"])("/material/add",e)},s=function(e){return Object(a["j"])("/material/edit",e)},c=function(e){return Object(a["j"])("/material/delete",e)},u=function(e){return Object(a["d"])("/material/list/tool",e)},d=function(e){return Object(a["d"])("/material/get",e)},m=function(e){return Object(a["d"])("/material/get/tool",e)},f=function(e){return Object(a["d"])("/material/tools/page",e)},h=function(e){return Object(a["d"])("/material/can-replace/list",e)},p=function(e){return Object(a["j"])("/material/can-replace/save",e)},b=function(e){return Object(a["j"])("/material/warehouse/add",e)},g=function(e){return Object(a["j"])("/material/warehouse/edit",e)},v=function(e){return Object(a["d"])("/material/warehouse/page",e)},k=function(e){return Object(a["j"])("/material/warehouse/delete",e)},y=function(e){return Object(a["j"])("/material/warehouse/close",e)},w=function(e){return Object(a["j"])("/material/warehouse/importExcel",e)},O=function(e){return Object(a["d"])("/material/warehouse/list-child",e)},x=function(){return Object(a["d"])("/material/warehouse/allTree")},j=function(e){return Object(a["d"])("/material/warehouse/get",e)},C=function(e){return Object(a["j"])("/material/pallet/add",e)},T=function(e){return Object(a["j"])("/material/pallet/edit",e)},I=function(e){return Object(a["d"])("/material/pallet/page",e)},_=function(e){return Object(a["j"])("/material/pallet/delete",e)},S=function(e){return Object(a["j"])("/material/pallet/set-materialTypes",e)},q=function(e){return Object(a["j"])("/material/spare-part/add",e)},P=function(e){return Object(a["j"])("/material/spare-part/delete",e)},F=function(e){return Object(a["j"])("/material/spare-part/edit",e)},N=function(e){return Object(a["d"])("/material/spare-part/get",e)},L=function(e){return Object(a["d"])("/material/spare-part/page",e)},R=function(e){return Object(a["d"])("trainAssetType/system",e)},$=function(e){return Object(a["d"])("/material/turnover/page",e)},D=function(e){return Object(a["j"])("/material/turnover/save",e)},M=function(e){return Object(a["j"])("/material/turnover/delete",e)},z=function(e){return Object(a["j"])("/material/turnover/importExcel",e)},B=function(e){return Object(a["d"])("/material/qrcode/pagePallet",e)},A=function(e){return Object(a["d"])("/material/qrcode/pageWarehouse",e)},W=function(e){return Object(a["d"])("/material/entry/page",e)},E=function(e){return Object(a["j"])("/material/entry/confirm/levelFour",e)},Y=function(e){return Object(a["d"])("/material/entry/detail/get",e)},V=function(e){return Object(a["d"])("/material/entry/detail/page",e)},U=function(e){return Object(a["j"])("/material/entry/save",e)},J=function(e){return Object(a["j"])("/material/entry/detail/delete",e)},K=function(e){return Object(a["d"])("/material/apply/page",e)},G=function(e){return Object(a["j"])("/material/apply/add",e)},H=function(e){return Object(a["j"])("/material/apply/edit",e)},Q=function(e){return Object(a["j"])("/material/apply/delete",e)},X=function(e){return Object(a["d"])("/material/apply/detail/listByApplyId",e)},Z=function(e){return Object(a["j"])("/material/apply/readyConfirm",e)},ee=function(e){return Object(a["j"])("/material/apply/receive-confirm",i.a.stringify(e))},te=function(e){return Object(a["d"])("/material/stock/list",e)},re=function(e){return Object(a["j"])("/material/apply/assign/auto-assign",e)},ae=function(e){return Object(a["d"])("/material/borrow/page",e)},ne=function(e){return Object(a["j"])("/material/borrow/add",e)},ie=function(e){return Object(a["j"])("/material/borrow/edit",e)},oe=function(e){return Object(a["j"])("/material/borrow/delete",e)},le=function(e){return Object(a["j"])("/material/borrow/return",e)},se=function(e){return Object(a["d"])("/material/borrow/detail/".concat(e))},ce=function(e,t){return Object(a["c"])("/material/borrow/export",e,t)},ue=function(e,t){return Object(a["c"])("/material/borrow/borrowExport",e,t)},de=function(e){return Object(a["d"])("/material/stock/page",e)},me=function(e){return Object(a["d"])("/material/stock/attr/get",e)},fe=function(e){return Object(a["d"])("/material/stock/trade-attr/get",e)},he=function(e){return Object(a["j"])("/material/stock/attr/set",e)},pe=function(e){return Object(a["j"])("/material/stock/trade-attr/set",e)},be=function(e){return Object(a["d"])("/material/stock/sum/get-amount",e)},ge=function(e){return Object(a["d"])("/material/stock/group/get-amount",e)},ve=function(e){return Object(a["j"])("/material/stock/import-level4-stock",e)},ke=function(e){return Object(a["j"])("/material/tools/add",e)},ye=function(e){return Object(a["j"])("/material/tools/delete",e)},we=function(e){return Object(a["j"])("/material/tools/edit",e)},Oe=function(e){return Object(a["d"])("/material/tools/listNeedCheck",e)},xe=function(e){return Object(a["d"])("/material/tools/page",e)},je=function(e){return Object(a["d"])("/material/tools/countNeedCheck",e)},Ce=function(e){return Object(a["j"])("/material/tools/setResponsible",e)},Te=function(e){return Object(a["j"])("/material/tools/setNextCheckTime",e)},Ie=function(e){return Object(a["j"])("/material/tools/setLastSelfCheckTime",e)},_e=function(e){return Object(a["j"])("/material/tools/setSelfCheck",e)},Se=function(e,t){return Object(a["c"])("/material/tools/export",e,t)},qe=function(e){return Object(a["d"])("/material/alert/page",e)},Pe=function(e){return Object(a["c"])("/material/alert/exportMonth",e)},Fe=function(e){return Object(a["c"])("/material/alert/exportWeek",e)},Ne=function(e){return Object(a["c"])("/material/alert/exportTheshold",e)},Le=function(e){return Object(a["d"])("/report/cost/receive/detail/page",e)},Re=function(e){return Object(a["b"])("/report/cost/receive/detail/export",e)},$e=function(e){return Object(a["d"])("/material/must/list",e)},De=function(e){return Object(a["j"])("/material/must/add",e)},Me=function(e){return Object(a["j"])("/material/must/edit",e)},ze=function(e){return Object(a["j"])("/material/must/delete",e)},Be=function(e){return Object(a["j"])("/material/must/set-group",e)},Ae=function(e){return Object(a["j"])("/material/must/valid",e)},We=function(e){return Object(a["j"])("/material/must/invalid",e)},Ee=function(e){return Object(a["d"])("/material/returned/page",e)},Ye=function(e){return Object(a["d"])("/material/returned/get",e)},Ve=function(e){return Object(a["j"])("/material/returned/save",e)},Ue=function(e){return Object(a["j"])("/material/returned/delete",e)},Je=function(e){return Object(a["j"])("/material/returned/confirm",e)},Ke=function(e){return Object(a["d"])("/material/apply/detail/listByOrderId",e)},Ge=function(e){return Object(a["d"])("/material/plan/list/part",e)},He=function(e){return Object(a["j"])("/material/plan/add",e)},Qe=function(e){return Object(a["j"])("/material/plan/edit",e)},Xe=function(e){return Object(a["j"])("/material/plan/delete",e)},Ze=function(e){return Object(a["b"])("/material/plan/export",e)},et=function(e){return Object(a["d"])("/dispatch/plan/year/sum-year-plan-detail-amount",e)},tt=function(e){return Object(a["d"])("/material/plan/materialYearTrain",e)},rt=function(e){return Object(a["d"])("/material/cost/compare/list",e)},at=function(e){return Object(a["d"])("/material/cost/compare/detail",e)},nt=function(e){return Object(a["j"])("/material/cost/verify-orderMaterialList",e)},it=function(e){return Object(a["b"])("/material/cost/compare/export",e)},ot=function(e){return Object(a["d"])("/material/plan-cost/page",e)},lt=function(e){return Object(a["d"])("/material/plan-cost/get",e)},st=function(e){return Object(a["j"])("/material/plan-cost/save",e)},ct=function(e){return Object(a["d"])("/material/stock/group/page",e)},ut=function(e){return Object(a["d"])("/material/stock/group/list-for-taskWrite",e)},dt=function(e,t){return Object(a["c"])("/material/stock/group/export",e,t)},mt=function(e){return Object(a["j"])("/material/tools/setElectric",e)},ft=function(e){return Object(a["j"])("/material/stock/group/setAttribute",e)},ht=function(e){return Object(a["j"])("/material/stock/group/recoverAttribute",e)},pt=function(e){return Object(a["j"])("/material/stock/group/trans-to/turnover",e)},bt=function(e){return Object(a["d"])("/material/specasset/page",e)},gt=function(e){return Object(a["j"])("/material/specasset/save",e)},vt=function(e){return Object(a["j"])("/material/specasset/delete",e)},kt=function(e){return Object(a["d"])("/dispatch/specasset-plan/get-month-usage",e)}},cf54:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,width:800,visible:e.visible,confirmLoading:e.confirmLoading,centered:"",cancelText:"关闭",destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-row",[t("a-col",{attrs:{md:18}},[t("div",[t("a-form",{attrs:{form:e.form}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"登录名称"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["checkUserName",e.validatorRules.checkUserName],expression:"['checkUserName', validatorRules.checkUserName]",modifiers:{trim:!0}}]})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"登录密码"}},[t("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["checkUserPwd",e.validatorRules.checkUserPwd],expression:"['checkUserPwd', validatorRules.checkUserPwd]",modifiers:{trim:!0}}]})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"结果"}},[t("a-checkbox",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["exp",{initialValue:!1}],expression:"['exp',{initialValue: false}]",modifiers:{trim:!0}}]},[e._v(" 是否异常 ")])],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"作业情况"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["resultDesc",{initialValue:"",rules:[]}],expression:"['resultDesc',{initialValue:'',rules:[]}]",modifiers:{trim:!0}}],attrs:{"auto-size":{minRows:8,maxRows:8}}})],1)],1)],1)]),t("a-col",{attrs:{md:6}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("div",{staticStyle:{margin:"30px 10px 20px","text-align":"center"}},[t("a-spin",{attrs:{spinning:e.qrLoading}},[e.imageBase64Url?t("img",{staticClass:"QRcode",attrs:{src:e.imageBase64Url,alt:""}}):t("img",{staticClass:"QRcode",attrs:{src:r("a6da"),alt:""}})])],1),t("div",{staticStyle:{"text-align":"center"}},[e._v(" 通过APP扫码确认 ")])])],1)],1)],1)},n=[],i=r("b9c3"),o=r("986e"),l={name:"SheetItemModal",props:["title"],data:function(){return{qrLoading:!1,imageBase64Url:"",detailIds:"",checkType:-1,value:1,status:1,switchCheck:!0,visible:!1,model:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:18}},confirmLoading:!1,form:this.$form.createForm(this),validatorRules:{checkUserName:{rules:[{required:!0,message:"请输入登录名称!"}]},checkUserPwd:{rules:[{required:!0,message:"请输入密码!"}]},checkResult:{rules:[{required:!0,message:"选择检查结果!"}]}}}},mounted:function(){var e=this;o["a"].$on("topic",(function(t){e.$message.success(t.msgTxt);var r=Object.assign(e.model);r.detailIds=1===e.workRecordType?e.detailIds:e.detailIds.join(","),r.result=r.exp?0:1,r.isIgnore=e.isIgnore?1:0,r.type=e.checkType,r.workRecordId=e.formInstId,r.colIndex=e.colIndex,r.workRecordType=e.workRecordType,r.detailIds=e.detailIds,e.$emit("scan",{saveSuccess:!0,data:r}),e.close()}))},methods:{add:function(){this.edit({})},getTaskQRCode:function(e){var t=this;this.qrLoading=!0,Object(i["J"])({formDetails:"string"===typeof this.detailIds?this.detailIds:this.detailIds.join(","),checkType:this.checkType,colIndex:this.colIndex,formInstId:e.formInstId,formType:e.instType,fromBy:"PC",orderId:e.workOrderId,targetType:"TASK",taskId:e.workOrderTaskId,workRecordType:e.workRecordType}).then((function(e){t.qrLoading=!1,e.success&&(t.imageBase64Url=e.result.base64)}))},showModal:function(e,t){this.detailIds=e,this.checkType=t,this.getTaskQRCode(curForm),this.form.resetFields(),this.visible=!0},handleOk:function(){var e=this,t=this;t.form.validateFields((function(r,a){if(!r){var n=Object.assign(t.model,a);n.detailIds=e.detailIds,n.result=n.exp?0:1,n.type=e.checkType,Object(i["Y"])(n).then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok",{saveSuccess:!0}),t.close()):t.$message.error(e.message)})).finally((function(){}))}}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},s=l,c=(r("be65"),r("2877")),u=Object(c["a"])(s,a,n,!1,null,"2ec89969",null);t["default"]=u.exports},d425:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"90%",title:"工器具选择",visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",centered:"",destroyOnClose:!0,bodyStyle:{height:"80vh"}},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.findList.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"工器具名称"}},[t("a-input",{attrs:{placeholder:"请输入工器具名称或编码"},model:{value:e.queryParam.searchText,callback:function(t){e.$set(e.queryParam,"searchText",t)},expression:"queryParam.searchText"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"工器具分类"}},[t("j-dict-select-tag",{attrs:{placeholder:"请选择工器具分类",dictCode:"bu_tools_type",disabled:e.canSelectType&&1===e.canSelectType.length},model:{value:e.queryParam.toolType,callback:function(t){e.$set(e.queryParam,"toolType",t)},expression:"queryParam.toolType"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"工班"}},[t("j-dict-select-tag",{attrs:{dictCode:"sys_depart,depart_name,id,org_category=4",placeholder:"请选择工班"},model:{value:e.queryParam.groupId,callback:function(t){e.$set(e.queryParam,"groupId",t)},expression:"queryParam.groupId"}})],1)],1),t("a-col",{attrs:{md:3,sm:8}},[t("a-button",{on:{click:e.findList}},[e._v("查询")])],1)],1)],1)],1),t("div",{staticStyle:{height:"calc(80vh - 130px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(80vh - 130px)"},attrs:{border:"","max-height":"100%",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","cell-class-name":e.cellClassName,"radio-config":e.multiple?{}:{trigger:"row",checkMethod:e.checkRadioMethod},"checkbox-config":e.multiple?{trigger:"row",highlight:!0,range:!0,checkMethod:e.checkRadioMethod}:{},"edit-config":{trigger:"click",mode:"cell",showIcon:"true"}}},[e.multiple?t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}):t("vxe-table-column",{attrs:{type:"radio",width:"40"}}),t("vxe-table-column",{attrs:{field:"code",title:"工器具类型编码"}}),t("vxe-table-column",{attrs:{field:"name",title:"工器具名称"}}),t("vxe-table-column",{attrs:{field:"model",title:"规格型号"}}),t("vxe-table-column",{attrs:{field:"assetCode",title:"资产编码"}}),t("vxe-table-column",{attrs:{field:"serialNo",title:"出厂编号"}}),t("vxe-table-column",{attrs:{field:"toolType_dictText",title:"类别"}}),t("vxe-table-column",{attrs:{field:"unit",title:"单位"}}),t("vxe-table-column",{attrs:{field:"groupName",title:"所属班组"}}),t("vxe-table-column",{attrs:{field:"nextCheckTime",title:"下次送检",width:"100"}}),t("vxe-table-column",{attrs:{field:"isOverTime",title:"是否逾期",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(e.getIsOverTimeStatus(r))+" ")]}}])}),t("vxe-table-column",{attrs:{field:"isOverTimeDays",title:"逾期天数",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(e.getIsOverTimeDays(r))+" ")]}}])})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1)])},n=[],i=r("c54ca"),o={name:"ToolsList",props:{multiple:{type:Boolean,default:!0},canSelectType:{type:Array,default:null},groupId:{type:String,default:null}},data:function(){return{queryParam:{searchText:"",toolType:"6",groupId:"",pageNo:1,pageSize:10},allAlign:"center",totalResult:0,tableData:[],visible:!1,confirmLoading:!1}},methods:{showModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.visible=!0,this.canSelectType&&this.canSelectType.length>0&&(this.queryParam.toolType=this.canSelectType[0]+""),this.groupId&&(this.queryParam.groupId=this.groupId),e&&(this.queryParam.materialTypeId=e),this.findList()},findList:function(){var e=this;this.loading=!0,Object(i["Db"])(this.queryParam).then((function(t){e.totalResult=t.result.total,e.loading=!1,e.tableData=t.result.records,e.tableData.forEach((function(t){e.$set(t,"num",1)}))}))},handlePageChange:function(e){var t=e.currentPage,r=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=r,this.findList()},handleOk:function(){var e=[];this.multiple?e=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&e.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",e),this.visible=!1},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.queryParam.materialTypeId=this.$options.data().queryParam.materialTypeId,this.visible=!1},checkRadioMethod:function(e){var t=e.row;return!this.canSelectType||this.canSelectType.indexOf(t.toolType)>-1},getIsOverTimeStatus:function(e){if(e.nextCheckTime){var t=this.$moment(new Date).format("YYYY-MM-DD"),r=this.$moment(e.nextCheckTime).diff(t,"day");return r<0?"是":"否"}return"否"},cellClassName:function(e){var t=e.row,r=(e.rowIndex,e.column),a=(e.columnIndex,["nextCheckTime","isOverTime","isOverTimeDays"]);if(a.includes(r.property)&&t.nextCheckTime){var n=this.$moment(new Date).format("YYYY-MM-DD"),i=this.$moment(t.nextCheckTime).diff(n,"day");if("nextCheckTime"===r.property){if(i<=0)return"table-cell-bg-red";if(i>0&&i<=15)return"table-cell-bg-yellow"}if("isOverTime"===r.property&&i<0)return"table-cell-bg-red";if("isOverTimeDays"===r.property&&i<0)return"table-cell-bg-red"}},getIsOverTimeDays:function(e){if(e.nextCheckTime){var t=this.$moment(new Date).format("YYYY-MM-DD"),r=this.$moment(e.nextCheckTime).diff(t,"day");if(r<0)return Math.abs(r)}return""}}},l=o,s=(r("623c"),r("2877")),c=Object(s["a"])(l,a,n,!1,null,"8f25e80a",null);t["default"]=c.exports},e5b4:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:"任务提交",width:600,visible:e.visible,centered:"",cancelText:"关闭",destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-form",{attrs:{form:e.form}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"作业人数"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["renshu",e.validatorRules.renshu],expression:"['renshu', validatorRules.renshu]",modifiers:{trim:!0}}],staticStyle:{width:"100%"},attrs:{min:0,max:9999},on:{change:e.renshuChange}})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"人均工时"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["workTime",e.validatorRules.worktime],expression:"['workTime', validatorRules.worktime]",modifiers:{trim:!0}}],staticStyle:{width:"100%"},attrs:{min:0,max:9999},on:{change:e.worktimeChange}})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"总计工时"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["workTimeSum",e.validatorRules.sumtime],expression:"['workTimeSum', validatorRules.sumtime]",modifiers:{trim:!0}}],staticStyle:{width:"100%"},attrs:{min:0,max:99999999999}})],1)],1)],1)},n=[],i=r("b9c3"),o={name:"taskSubmitModal",data:function(){return{visible:!1,taskId:null,labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:18}},form:this.$form.createForm(this),validatorRules:{renshu:{initialValue:0,rules:[{required:!0,message:"请输入人数!"}]},worktime:{initialValue:0,rules:[{required:!0,message:"请输入人均工时!"}]},sumtime:{initialValue:0,rules:[{required:!0,message:"请输入总计工时"}]}}}},methods:{showModal:function(e){this.taskId=e,this.form.resetFields(),this.visible=!0},renshuChange:function(e){var t=this.form.getFieldValue("workTime");this.form.setFieldsValue({workTimeSum:e*t})},worktimeChange:function(e){var t=this.form.getFieldValue("renshu");this.form.setFieldsValue({workTimeSum:t*e})},handleOk:function(){var e=this;this.form.validateFields((function(t,r){t||e.$confirm({content:"你确定提交该任务？",onOk:function(){var t=Object.assign({},r);t.taskId=e.taskId,Object(i["nb"])(t).then((function(t){t.success?(e.$message.success(t.message),e.$emit("ok"),e.close()):e.$message.error("保存错误")}))}})}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},l=o,s=r("2877"),c=Object(s["a"])(l,a,n,!1,null,"5f5fa5f1",null);t["default"]=c.exports},e99b:function(e,t,r){}}]);