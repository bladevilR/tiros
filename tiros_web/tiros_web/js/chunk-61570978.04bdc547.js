(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-61570978","chunk-2d208328"],{2599:function(e,t,a){},a33e8:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"项目名称"}},[t("a-input",{attrs:{placeholder:"请输入项目名称",allowClear:""},model:{value:e.queryParam.projectName,callback:function(t){e.$set(e.queryParam,"projectName",t)},expression:"queryParam.projectName"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"车型"}},[t("a-select",{attrs:{placeholder:"请选择车型",allowClear:""},model:{value:e.queryParam.trainType,callback:function(t){e.$set(e.queryParam,"trainType",t)},expression:"queryParam.trainType"}},[t("a-select-option",{attrs:{value:""}},[e._v("全部")]),t("a-select-option",{attrs:{value:"电客车"}},[e._v("电客车")]),t("a-select-option",{attrs:{value:"电动车组"}},[e._v("电动车组")])],1)],1)],1),e.advanced?[t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"车号"}},[t("a-input",{attrs:{placeholder:"请输入车号",allowClear:""},model:{value:e.queryParam.trainNo,callback:function(t){e.$set(e.queryParam,"trainNo",t)},expression:"queryParam.trainNo"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"计划ID"}},[t("a-input",{attrs:{placeholder:"请输入计划ID",allowClear:""},model:{value:e.queryParam.planId,callback:function(t){e.$set(e.queryParam,"planId",t)},expression:"queryParam.planId"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"质量等级"}},[t("a-select",{attrs:{placeholder:"请选择质量等级",allowClear:""},model:{value:e.queryParam.qualityLevel,callback:function(t){e.$set(e.queryParam,"qualityLevel",t)},expression:"queryParam.qualityLevel"}},[t("a-select-option",{attrs:{value:""}},[e._v("全部")]),t("a-select-option",{attrs:{value:"A"}},[e._v("A")]),t("a-select-option",{attrs:{value:"B"}},[e._v("B")]),t("a-select-option",{attrs:{value:"C"}},[e._v("C")]),t("a-select-option",{attrs:{value:"D"}},[e._v("D")])],1)],1)],1)]:e._e(),t("a-col",{attrs:{md:6,sm:8}},[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-space",[t("a-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增")]),t("a-button",{attrs:{disabled:1!=e.selectRows.length},on:{click:function(t){return e.handleEdit(e.selectRows[0])}}},[e._v("编辑")]),t("a-button",{attrs:{disabled:e.selectRows.length<1},on:{click:e.handleDelete}},[e._v("删除")]),t("a-button",{on:{click:e.handleBatchRefreshByPlan}},[e._v("按计划批量刷新")]),t("a-button",{attrs:{disabled:1!=e.selectRows.length},on:{click:e.handleViewProcessSteps}},[e._v("工序明细")]),t("a-button",{attrs:{disabled:1!=e.selectRows.length},on:{click:e.handleExtractPlanning}},[e._v("质量策划抽取")]),t("a-button",{on:{click:e.handleExport}},[e._v("导出")]),t("a-upload",{attrs:{name:"file",showUploadList:!1,multiple:!1,headers:e.tokenHeader,action:e.importExcelUrl},on:{change:e.handleImportExcel}},[t("a-button",[e._v("导入")])],1),t("a-button",{on:{click:e.handleSearch}},[e._v("查询")]),t("a",{on:{click:function(t){e.advanced=!e.advanced}}},[e._v(" "+e._s(e.advanced?"收起":"展开")+" "),t("a-icon",{attrs:{type:e.advanced?"up":"down"}})],1)],1)],1)])],2)],1)],1),t("div",{staticStyle:{height:"calc(100vh - 225px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(100vh - 225px)"},attrs:{border:"","auto-resize":"","max-height":"100%",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","checkbox-config":{trigger:"row",highlight:!0,range:!0}},on:{"checkbox-change":e.checkboxChange,"checkbox-all":e.checkboxChange}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),t("vxe-table-column",{attrs:{field:"projectName",title:"项目名称",width:"20%","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{field:"trainType",title:"车型",width:"12%","header-align":"center",align:"center"}}),t("vxe-table-column",{attrs:{field:"trainNo",title:"车号",width:"12%","header-align":"center",align:"center"}}),t("vxe-table-column",{attrs:{field:"qualityLevel",title:"质量等级",width:"12%","header-align":"center",align:"center"}}),t("vxe-table-column",{attrs:{field:"progress",title:"进度",width:"12%","header-align":"center",align:"center"}}),t("vxe-table-column",{attrs:{field:"createTime",title:"创建日期",width:"18%",formatter:e.formatDate}}),t("vxe-table-column",{attrs:{field:"remark",title:"备注",width:"15%","header-align":"center",align:"left"}})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1),t("quality-visual-modal",{ref:"qualityModal",on:{ok:function(t){return e.loadData()}}}),t("a-drawer",{attrs:{title:"工序进度与质量可视化明细",placement:"right",width:1100,visible:e.processDrawerVisible,maskClosable:!1},on:{close:function(t){e.processDrawerVisible=!1}}},[t("a-spin",{attrs:{spinning:e.processStepsLoading}},[t("vxe-table",{attrs:{border:"","auto-resize":"","max-height":"calc(100vh - 170px)",align:e.allAlign,data:e.processSteps,"show-overflow":"tooltip"}},[t("vxe-table-column",{attrs:{field:"orderCode",title:"工单号",width:"120"}}),t("vxe-table-column",{attrs:{field:"orderName",title:"工单名称",width:"180",align:"left"}}),t("vxe-table-column",{attrs:{field:"taskNo",title:"序号",width:"70"}}),t("vxe-table-column",{attrs:{field:"taskName",title:"工序/工步",width:"210",align:"left"}}),t("vxe-table-column",{attrs:{field:"checkedPoints",title:"已检查点",width:"100"}}),t("vxe-table-column",{attrs:{field:"totalPoints",title:"总检查点",width:"100"}}),t("vxe-table-column",{attrs:{field:"progressPercent",title:"完成度",width:"100"},scopedSlots:e._u([{key:"default",fn:function(e){var a=e.row;return[t("a-progress",{attrs:{percent:a.progressPercent||0,size:"small"}})]}}])}),t("vxe-table-column",{attrs:{field:"qualityIssueCount",title:"故障数",width:"90"}}),t("vxe-table-column",{attrs:{field:"openItemCount",title:"开口项",width:"90"}}),t("vxe-table-column",{attrs:{field:"qualityLevel",title:"质量等级",width:"90"},scopedSlots:e._u([{key:"default",fn:function(a){var l=a.row;return[t("a-tag",{attrs:{color:"A"===l.qualityLevel?"green":"B"===l.qualityLevel?"blue":"C"===l.qualityLevel?"orange":"red"}},[e._v(" "+e._s(l.qualityLevel||"-")+" ")])]}}])}),t("vxe-table-column",{attrs:{field:"statusColor",title:"状态提示",width:"100"},scopedSlots:e._u([{key:"default",fn:function(e){var a=e.row;return[t("a-badge",{attrs:{status:"green"===a.statusColor?"success":"red"===a.statusColor?"error":"warning",text:"green"===a.statusColor?"正常":"red"===a.statusColor?"风险":"进行中"}})]}}])}),t("vxe-table-column",{attrs:{field:"startTime",title:"开始",width:"110",formatter:e.formatDateYmd}}),t("vxe-table-column",{attrs:{field:"finishTime",title:"结束",width:"110",formatter:e.formatDateYmd}})],1)],1)],1),t("a-modal",{attrs:{title:"质量策划抽取结果",visible:e.planningVisible,width:1200,footer:null,maskClosable:!1},on:{cancel:function(t){e.planningVisible=!1}}},[t("a-spin",{attrs:{spinning:e.planningLoading}},[t("a-row",{staticStyle:{"margin-bottom":"12px"},attrs:{gutter:16}},[t("a-col",{attrs:{span:6}},[t("a-statistic",{attrs:{title:"总项点",value:e.planningSummary.totalItems||0}})],1),t("a-col",{attrs:{span:6}},[t("a-statistic",{attrs:{title:"无需填报",value:e.planningSummary.noNeedFillItems||0}})],1),t("a-col",{attrs:{span:6}},[t("a-statistic",{attrs:{title:"已填报",value:e.planningSummary.filledItems||0}})],1),t("a-col",{attrs:{span:6}},[t("a-statistic",{attrs:{title:"待填报",value:e.planningSummary.pendingItems||0}})],1)],1),t("vxe-table",{attrs:{border:"","auto-resize":"","max-height":"520",align:e.allAlign,data:e.planningSummary.items||[],"show-overflow":"tooltip"}},[t("vxe-table-column",{attrs:{field:"orderCode",title:"工单号",width:"120"}}),t("vxe-table-column",{attrs:{field:"taskName",title:"工序/工步",width:"200",align:"left"}}),t("vxe-table-column",{attrs:{field:"workContent",title:"作业内容",width:"280",align:"left"}}),t("vxe-table-column",{attrs:{field:"techRequire",title:"技术要求",width:"260",align:"left"}}),t("vxe-table-column",{attrs:{field:"checkLevelText",title:"检查级别",width:"100"}}),t("vxe-table-column",{attrs:{field:"noNeedFill",title:"无需填报",width:"90"},scopedSlots:e._u([{key:"default",fn:function(a){var l=a.row;return[t("a-tag",{attrs:{color:1===l.noNeedFill?"default":"green"}},[e._v(e._s(1===l.noNeedFill?"是":"否"))])]}}])}),t("vxe-table-column",{attrs:{field:"filled",title:"填报状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){var l=a.row;return[t("a-tag",{attrs:{color:1===l.filled?"green":"orange"}},[e._v(e._s(1===l.filled?"已填报":"待填报"))])]}}])})],1)],1)],1)],1)},r=[],s=a("c1df"),o=a.n(s),n=(a("5c3a"),a("a487")),i=a("8fad"),c=a("0fea"),d=a("2b0e"),u=a("9fb0");function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){h(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function h(e,t,a){return(t=g(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function g(e){var t=b(e,"string");return"symbol"==m(t)?t:t+""}function b(e,t){if("object"!=m(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var l=a.call(e,t||"default");if("object"!=m(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var v={name:"QualityProcess",components:{QualityVisualModal:n["default"]},computed:{importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/base/quality-visual/importExcel")}},data:function(){return{selectRows:[],advanced:!1,tokenHeader:{"X-Access-Token":d["default"].ls.get(u["a"])},queryParam:{projectName:"",trainType:"",trainNo:"",planId:"",qualityLevel:"",pageNo:1,pageSize:10},totalResult:0,allAlign:"center",tableData:[],loading:!1,processDrawerVisible:!1,processStepsLoading:!1,processSteps:[],planningVisible:!1,planningLoading:!1,planningSummary:{}}},created:function(){this.loadData()},methods:{checkboxChange:function(e){this.selectRows=e.records},loadData:function(){var e=this;this.loading=!0,Object(i["Vc"])(this.queryParam).then((function(t){t.success&&(e.tableData=t.result.records||[],e.totalResult=t.result.total||0)})).finally((function(){e.loading=!1}))},handleSearch:function(){this.queryParam.pageNo=1,this.loadData()},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.loadData()},handleAdd:function(){this.$refs.qualityModal.add()},handleEdit:function(e){this.$refs.qualityModal.edit(e)},handleDelete:function(){var e=this;0!==this.selectRows.length?this.$confirm({title:"删除确认",content:"确认删除选中的质量可视化记录吗？",onOk:function(){var t=e.selectRows.map((function(e){return e.id})).join(",");Object(i["cb"])({ids:t}).then((function(t){t.success&&(e.$message.success("删除成功"),e.selectRows=[],e.loadData())}))}}):this.$message.warning("请先选择要删除的记录")},handleBatchRefreshByPlan:function(){var e=this,t=this.queryParam.planId;t?this.$confirm({title:"批量刷新确认",content:"确认按计划【".concat(t,"】批量刷新质量可视化数据吗？"),onOk:function(){Object(i["gd"])({planId:t}).then((function(t){if(t.success){var a=(t.result||[]).length;e.$message.success("批量刷新完成，共处理 ".concat(a," 列车")),e.loadData()}else e.$message.error(t.message||"批量刷新失败")}))}}):this.$message.warning("请先在查询条件输入计划ID")},handleViewProcessSteps:function(){var e=this,t=this.selectRows[0];t?t.planId?(this.processDrawerVisible=!0,this.processStepsLoading=!0,Object(i["Oc"])({planId:t.planId,trainNo:t.trainNo}).then((function(t){t.success?e.processSteps=t.result||[]:e.$message.error(t.message||"加载工序明细失败")})).finally((function(){e.processStepsLoading=!1}))):this.$message.warning("所选记录缺少计划ID"):this.$message.warning("请先选择一条记录")},handleExtractPlanning:function(){var e=this,t=this.selectRows[0];t?t.planId&&t.trainNo?(this.planningVisible=!0,this.planningLoading=!0,Object(i["ub"])({planId:t.planId,trainNo:t.trainNo,excludeNoNeed:!0}).then((function(t){t.success?e.planningSummary=t.result||{}:e.$message.error(t.message||"抽取质量策划失败")})).finally((function(){e.planningLoading=!1}))):this.$message.warning("所选记录缺少计划ID或车号"):this.$message.warning("请先选择一条记录")},handleExport:function(){var e=this,t=f({},this.queryParam);Object(c["b"])("/base/quality-visual/exportXls",t).then((function(t){if(t){var a=new Blob([t],{type:"application/vnd.ms-excel"}),l=window.URL.createObjectURL(a),r=document.createElement("a");r.style.display="none",r.href=l,r.setAttribute("download","质量可视化.xls"),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(l)}else e.$message.warning("文件下载失败")}))},handleImportExcel:function(e){"done"===e.file.status?e.file.response&&e.file.response.success?(this.$message.success(e.file.response.message||"".concat(e.file.name," 导入成功")),this.loadData()):this.$message.error(e.file.response?e.file.response.message:"导入失败"):"error"===e.file.status&&this.$message.error("文件上传失败")},formatDate:function(e){return e.createTime?o()(e.createTime).format("YYYY-MM-DD HH:mm:ss"):""},formatDateYmd:function(e,t,a){return a?o()(a).format("YYYY-MM-DD"):""}}},y=v,w=(a("b9a5"),a("2877")),x=Object(w["a"])(y,l,r,!1,null,"ffb3cad4",null);t["default"]=x.exports},a487:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,width:900,visible:e.visible,confirmLoading:e.confirmLoading,maskClosable:!1},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form-model",{ref:"form",attrs:{model:e.model,rules:e.validatorRules,"label-col":{span:6},"wrapper-col":{span:16}}},[t("a-row",[t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"项目名称",prop:"projectName"}},[t("a-input",{attrs:{placeholder:"请输入项目名称"},model:{value:e.model.projectName,callback:function(t){e.$set(e.model,"projectName",t)},expression:"model.projectName"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"计划ID"}},[t("a-input",{attrs:{placeholder:"请输入计划ID"},model:{value:e.model.planId,callback:function(t){e.$set(e.model,"planId",t)},expression:"model.planId"}})],1)],1)],1),t("a-row",[t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"车号"}},[t("a-input",{attrs:{placeholder:"请输入车号"},model:{value:e.model.trainNo,callback:function(t){e.$set(e.model,"trainNo",t)},expression:"model.trainNo"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"车型"}},[t("a-input",{attrs:{placeholder:"请输入车型"},model:{value:e.model.trainType,callback:function(t){e.$set(e.model,"trainType",t)},expression:"model.trainType"}})],1)],1)],1),t("a-row",[t("a-col",{attrs:{span:24}},[t("a-form-model-item",{attrs:{label:"数据汇总","label-col":{span:3},"wrapper-col":{span:20}}},[t("a-space",[t("a-button",{attrs:{type:"dashed",icon:"sync",loading:e.refreshLoading},on:{click:e.handleAutoRefresh}},[e._v("自动汇总")]),t("span",{staticStyle:{color:"rgba(0, 0, 0, 0.45)"}},[e._v("根据计划ID+车号自动汇总工单与质量问题数据")])],1)],1)],1)],1),t("a-row",[t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"质量等级"}},[t("a-select",{attrs:{placeholder:"请选择质量等级"},model:{value:e.model.qualityLevel,callback:function(t){e.$set(e.model,"qualityLevel",t)},expression:"model.qualityLevel"}},[t("a-select-option",{attrs:{value:"A"}},[e._v("A")]),t("a-select-option",{attrs:{value:"B"}},[e._v("B")]),t("a-select-option",{attrs:{value:"C"}},[e._v("C")]),t("a-select-option",{attrs:{value:"D"}},[e._v("D")])],1)],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"进度"}},[t("a-input",{attrs:{placeholder:"请输入进度(%)"},model:{value:e.model.progress,callback:function(t){e.$set(e.model,"progress",t)},expression:"model.progress"}})],1)],1)],1),t("a-row",[t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"已完成工序数"}},[t("a-input-number",{staticStyle:{width:"100%"},attrs:{min:0},model:{value:e.model.completedProcesses,callback:function(t){e.$set(e.model,"completedProcesses",t)},expression:"model.completedProcesses"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"总工序数"}},[t("a-input-number",{staticStyle:{width:"100%"},attrs:{min:0},model:{value:e.model.totalProcesses,callback:function(t){e.$set(e.model,"totalProcesses",t)},expression:"model.totalProcesses"}})],1)],1)],1),t("a-row",[t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"质量问题数"}},[t("a-input-number",{staticStyle:{width:"100%"},attrs:{min:0},model:{value:e.model.qualityIssues,callback:function(t){e.$set(e.model,"qualityIssues",t)},expression:"model.qualityIssues"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"未关闭问题数"}},[t("a-input-number",{staticStyle:{width:"100%"},attrs:{min:0},model:{value:e.model.openIssues,callback:function(t){e.$set(e.model,"openIssues",t)},expression:"model.openIssues"}})],1)],1)],1),t("a-row",[t("a-col",{attrs:{span:24}},[t("a-form-model-item",{attrs:{label:"工序流程(JSON)","label-col":{span:3},"wrapper-col":{span:20}}},[t("a-textarea",{attrs:{rows:3,placeholder:"请输入工序流程JSON"},model:{value:e.model.processFlow,callback:function(t){e.$set(e.model,"processFlow",t)},expression:"model.processFlow"}})],1)],1)],1),t("a-row",[t("a-col",{attrs:{span:24}},[t("a-form-model-item",{attrs:{label:"质检点(JSON)","label-col":{span:3},"wrapper-col":{span:20}}},[t("a-textarea",{attrs:{rows:3,placeholder:"请输入质检点JSON"},model:{value:e.model.qualityPoints,callback:function(t){e.$set(e.model,"qualityPoints",t)},expression:"model.qualityPoints"}})],1)],1)],1),t("a-row",[t("a-col",{attrs:{span:24}},[t("a-form-model-item",{attrs:{label:"备注","label-col":{span:3},"wrapper-col":{span:20}}},[t("a-textarea",{attrs:{rows:2,placeholder:"请输入备注"},model:{value:e.model.remark,callback:function(t){e.$set(e.model,"remark",t)},expression:"model.remark"}})],1)],1)],1)],1)],1)],1)},r=[],s=a("8fad"),o={name:"QualityVisualModal",data:function(){return{title:"",visible:!1,confirmLoading:!1,refreshLoading:!1,model:{},validatorRules:{projectName:[{required:!0,message:"请输入项目名称",trigger:"blur"}]}}},methods:{add:function(){this.title="新增质量可视化",this.visible=!0,this.model={trainType:"电客车",qualityLevel:"A",completedProcesses:0,totalProcesses:0,qualityIssues:0,openIssues:0}},edit:function(e){this.title="编辑质量可视化",this.visible=!0,this.model=Object.assign({},e)},handleAutoRefresh:function(){var e=this;this.model.planId&&this.model.trainNo?(this.refreshLoading=!0,Object(s["fd"])({planId:this.model.planId,trainNo:this.model.trainNo,trainType:this.model.trainType,projectName:this.model.projectName}).then((function(t){t.success&&t.result?(e.model=Object.assign({},e.model,t.result),e.$message.success("自动汇总成功，已回填数据")):e.$message.error(t.message||"自动汇总失败")})).finally((function(){e.refreshLoading=!1}))):this.$message.warning("请先输入计划ID和车号")},handleOk:function(){var e=this;this.$refs.form.validate((function(t){if(t){if(e.model.completedProcesses>e.model.totalProcesses)return void e.$message.warning("已完成工序数不能大于总工序数");e.confirmLoading=!0;var a=e.model.id?Object(s["Ud"])(e.model):Object(s["td"])(e.model);a.then((function(t){t.success?(e.$message.success(e.model.id?"修改成功":"新增成功"),e.visible=!1,e.$emit("ok")):e.$message.error(t.message||"操作失败")})).finally((function(){e.confirmLoading=!1}))}}))},handleCancel:function(){this.visible=!1,this.$refs.form.resetFields()}}},n=o,i=a("2877"),c=Object(i["a"])(n,l,r,!1,null,null,null);t["default"]=c.exports},b9a5:function(e,t,a){"use strict";a("2599")}}]);