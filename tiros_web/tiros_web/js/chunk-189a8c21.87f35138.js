(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-189a8c21","chunk-c7b1b1f0"],{"13f1":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("a-modal",{ref:"locationModalRef",class:{"na-footer-none":2===e.modeType},attrs:{title:"库位选择",width:"80%",bodyStyle:{height:"70vh"},visible:e.visible,centered:!0,confirmLoading:e.confirmLoading,closable:!0,forceRender:!0,destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"库位选择"}},[t("a-checkbox-group",{attrs:{name:"checkboxgroup",options:e.options},on:{change:e.findList},model:{value:e.warehouseLevelList,callback:function(t){e.warehouseLevelList=t},expression:"warehouseLevelList"}})],1)],1),t("a-col",{attrs:{md:12}},[t("a-space",[t("a-button",{attrs:{type:"primary"},on:{click:e.findList}},[e._v("查询")])],1)],1)],1)],1)],1),e.loading?t("div",{staticStyle:{height:"calc(100% - 66px)"},attrs:{id:"location_table_main"}},[t("vxe-table",{ref:"listTable",attrs:{border:"",align:"center",height:"auto","show-overflow":"tooltip",data:e.tableData,"tree-config":{key:"warehouseId",children:"children",expandAll:!0},"radio-config":{highlight:!0,trigger:"row"},"row-class-name":e.setRowClass},on:{"update:data":function(t){e.tableData=t},"cell-click":e.onCurrentChange}},[1===e.modeType?t("vxe-table-column",{attrs:{type:"radio",width:"40px"}}):e._e(),t("vxe-table-column",{attrs:{field:"sourceLocationName",width:"200",title:"所属组织","header-align":"center",align:"left","tree-node":""}}),t("vxe-table-column",{attrs:{width:"80",field:"warehouseLevel",title:"库位级别",formatter:e.formatLevel}}),t("vxe-table-column",{attrs:{width:"120",field:"materialTypeCode",title:"物资编码"}}),t("vxe-table-column",{attrs:{field:"materialTypeName",title:"物资名称","min-width":"130","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{field:"tradeNo",width:"200",title:"所属批次"}}),t("vxe-table-column",{attrs:{width:"80",field:"amount",title:"当前库存"}}),t("vxe-table-column",{attrs:{width:"80",field:"usableAmount",title:"可用库存"}}),t("vxe-table-column",{attrs:{width:"160",field:"usedDetailInfo",title:"占用详情","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{width:"80",field:"price",title:"价格"}}),t("vxe-table-column",{attrs:{width:"80",field:"unit",title:"单位"}}),t("vxe-table-column",{attrs:{width:"100",field:"materialType_dictText",title:"物料分类"}}),t("vxe-table-column",{attrs:{width:"100",field:"materialAttr_dictText",title:"物料属性"}}),t("vxe-table-column",{attrs:{field:"spec",title:"物料描述","min-width":"100","header-align":"center",align:"left"}})],1)],1):e._e()])},n=[],i=r("c54ca");function o(e){return u(e)||c(e)||s(e)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(e){if("string"==typeof e)return d(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}function c(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function u(e){if(Array.isArray(e))return d(e)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}var f={name:"LocationList",props:{multiple:{type:Boolean,default:!1},modeType:{type:Number,default:1}},data:function(){return{visible:!1,confirmLoading:!1,loading:!1,tableData:[],selectMaterialTypeId:"",warehouseLevelList:[],options:[{label:"三级库",value:3},{label:"四级库",value:4}]}},updated:function(){var e=this;this.$nextTick((function(){e.loading=!0}))},created:function(){},methods:{showModal:function(e,t,r){this.visible=!0,this.selectMaterialTypeId=e,this.findList(t,r)},findList:function(e,t){var r=this;Object(i["yb"])({warehouseLevelList:this.warehouseLevelList,materialTypeId:this.selectMaterialTypeId,applyDetailId:e,assignDetailId:t}).then((function(e){e.success&&(r.tableData=[],r.tableData=r.buildTree(e.result),r.$nextTick((function(){r.$refs.listTable.setAllTreeExpand(!0)})))}))},buildTree:function(e){var t=e.reduce((function(e,t,r){return e[t.warehouseId]=r,e}),{}),r=[];return e.forEach((function(a){if(null===a.parentId)r.push(a);else{var n=e[t[a.parentId]];n?n.children=[].concat(o(n.children||[]),[a]):r.push(a)}})),r},formatLevel:function(e){var t=e.cellValue,r=parseInt(t);return r-1},handleOk:function(){var e=this.$refs.listTable.getRadioRecord();e.children?this.$message.warn("该库位还有下级库位，请选择下级库位！"):(this.$emit("ok",e?[e]:[]),this.visible=!1)},saveOk:function(){this.close()},saveFail:function(){this.confirmLoading=!1},handleCancel:function(){this.close()},close:function(){this.visible=!1,Object.assign(this.$data,this.$options.data())},openPalletModal:function(){this.$refs.palletSelect.blur()},openlocationModal:function(){this.$refs.materialToolsModal.showModal(),this.$refs.locationSelect.blur()},onCurrentChange:function(e){var t=e.row,r=e.$event;2===this.modeType&&(t.children&&t.children.length&&!/vxe-tree--node-btn/.test(r.target.className)?this.$refs.listTable.setTreeExpand([t],!this.$refs.listTable.isTreeExpandByRow(t)):(this.$emit("ok",[t]),this.visible=!1))},setRowClass:function(e){e.row;return 2===this.modeType?"mode-type-choose":""}}},h=f,p=(r("1892"),r("2877")),m=Object(p["a"])(h,a,n,!1,null,null,null);t["default"]=m.exports},1892:function(e,t,r){"use strict";r("9424")},"3ddc":function(e,t,r){"use strict";r("7691")},"607e":function(e,t,r){"use strict";r("c95b")},"673e":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"80%",title:"工单选择",visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",centered:"",bodyStyle:{height:"70vh"}},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.findList.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:7,sm:24}},[t("a-form-item",{attrs:{label:"工单搜索"}},[t("a-input",{attrs:{placeholder:"请输入工单名称或编码"},model:{value:e.queryParam.searchText,callback:function(t){e.$set(e.queryParam,"searchText",t)},expression:"queryParam.searchText"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"工单类型"}},[t("j-dict-select-tag",{attrs:{placeholder:"请选择工单类型",dictCode:"bu_order_type"},model:{value:e.queryParam.orderType,callback:function(t){e.$set(e.queryParam,"orderType",t)},expression:"queryParam.orderType"}})],1)],1),t("a-col",{attrs:{md:9,sm:24}},[t("a-form-item",{attrs:{label:"工单状态"}},[t("div",{staticClass:"autoWidth"},[t("j-multi-select-tag",{attrs:{placeholder:"请选择工单状态",dictCode:"bu_order_status"},model:{value:e.queryParam.status,callback:function(t){e.$set(e.queryParam,"status",t)},expression:"queryParam.status"}})],1)])],1),t("a-col",{attrs:{md:3,sm:24}},[t("a-form-item",[t("a-button",{attrs:{type:"primary"},on:{click:e.findList}},[e._v("查询")])],1)],1)],1)],1)],1),t("div",{staticStyle:{height:"calc(70vh - 172px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(70vh - 172px)"},attrs:{border:"",align:e.allAlign,data:e.tableData,"max-height":"100%","show-overflow":"tooltip","radio-config":e.multiple?{}:{trigger:"row",checkMethod:e.checkRadioMethod},"checkbox-config":e.multiple?{trigger:"row",highlight:!0,range:!0,checkMethod:e.checkRadioMethod}:{},"edit-config":{trigger:"manual",mode:"row"}}},[e.multiple?t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}):t("vxe-table-column",{attrs:{type:"radio",width:"40"}}),t("vxe-table-column",{attrs:{field:"trainNo",title:"作业车号",width:"100"}}),t("vxe-table-column",{attrs:{field:"groupName",title:"所属班组",width:"100"}}),t("vxe-table-column",{attrs:{field:"orderCode",title:"工单编号",width:"150"}}),t("vxe-table-column",{attrs:{field:"orderName",title:"工单名称",align:"left","min-width":"150"}}),t("vxe-table-column",{attrs:{field:"startTime",title:"计划开始",width:"150"}}),t("vxe-table-column",{attrs:{field:"finishTime",title:"计划结束",width:"150"}}),t("vxe-table-column",{attrs:{field:"orderStatus_dictText",title:"工单状态",width:"150"}}),t("vxe-table-column",{attrs:{field:"orderType_dictText",title:"工单类型",width:"150"}})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1)])},n=[],i=r("f680"),o=r("b9c3"),l=r("c1df"),s=r.n(l),c={name:"WorkOrderSelect",components:{JMultiSelectTag:i["default"]},props:{multiple:{type:Boolean,default:!1},workGroupId:{type:String,default:""},planId:{type:String,default:""},orderType:{type:Number,default:null},orderStatus:{type:Array,default:function(){return[3,4,8]}},selectStatus:{type:Array,default:function(){return[]}}},data:function(){return{dateRange:[s()(new Date,"YYYY-MM-DD"),s()(new Date,"YYYY-MM-DD")],queryParam:{searchText:"",startDate:"",endDate:"",orderType:"",status:this.orderStatus.join(","),pageNo:1,pageSize:10,workGroupId:this.workGroupId,planId:this.planId},allAlign:"center",totalResult:0,tableData:[],visible:!1,confirmLoading:!1,stationData:[]}},methods:{checkRadioMethod:function(e){var t=e.row;return!(this.selectStatus&&this.selectStatus.length>0)||this.selectStatus.indexOf(t.orderStatus)>-1},onDateChange:function(){this.dateRange[0]?this.queryParam.startDate=this.dateRange[0].format("YYYY-MM-DD"):this.queryParam.startDate=null,this.dateRange[1]?this.queryParam.endDate=this.dateRange[1].format("YYYY-MM-DD"):this.queryParam.endDate=null},showModal:function(){this.visible=!0,this.queryParam.planId=this.planId,this.queryParam.workGroupId=this.workGroupId,this.queryParam.orderType=this.orderType,this.findList()},findList:function(){var e=this;this.loading=!0,Object(o["T"])(this.queryParam).then((function(t){e.totalResult=t.result.total,e.loading=!1,e.tableData=t.result.records}))},handlePageChange:function(e){var t=e.currentPage,r=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=r,this.findList()},handleOk:function(){var e=[];this.multiple?e=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&e.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",e),this.visible=!1},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},u=c,d=(r("607e"),r("2877")),f=Object(d["a"])(u,a,n,!1,null,null,null);t["default"]=f.exports},7691:function(e,t,r){},9424:function(e,t,r){},9527:function(e,t,r){},b0cd:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:"选择部门",width:e.modalWidth,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭"},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[t("a-spin",{attrs:{tip:"Loading...",spinning:!1}},[t("a-input-search",{staticStyle:{"margin-bottom":"1px"},attrs:{placeholder:"请输入部门名称按回车进行搜索"},on:{search:e.onSearch}}),t("a-tree",{attrs:{checkable:"",treeData:e.treeData,checkStrictly:!0,autoExpandParent:e.autoExpandParent,expandedKeys:e.expandedKeys,checkedKeys:e.checkedKeys},on:{check:e.onCheck,select:e.onSelect,expand:e.onExpand},scopedSlots:e._u([{key:"title",fn:function(r){var a=r.title;return[a.indexOf(e.searchValue)>-1?t("span",[e._v(" "+e._s(a.substr(0,a.indexOf(e.searchValue)))+" "),t("span",{staticStyle:{color:"#f50"}},[e._v(e._s(e.searchValue))]),e._v(" "+e._s(a.substr(a.indexOf(e.searchValue)+e.searchValue.length))+" ")]):t("span",[e._v(e._s(a))])]}}])})],1)],1)},n=[],i=r("4ec3");function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=c(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw i}}}}function l(e){return d(e)||u(e)||c(e)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"==typeof e)return f(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}function u(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function d(e){if(Array.isArray(e))return f(e)}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}var h={name:"JSelectDepartModal",props:["modalWidth","multi","rootOpened","departId"],data:function(){return{visible:!1,confirmLoading:!1,treeData:[],autoExpandParent:!0,expandedKeys:[],dataList:[],checkedKeys:[],checkedRows:[],searchValue:""}},created:function(){this.loadDepart()},watch:{departId:function(){this.initDepartComponent()},visible:{handler:function(){this.departId?this.checkedKeys=this.departId.split(","):this.checkedKeys=[]}}},methods:{show:function(){this.visible=!0,this.checkedRows=[],this.checkedKeys=[]},loadDepart:function(){var e=this;Object(i["H"])().then((function(t){if(t.success){var r=l(t.result);e.reWriterWithSlot(r),e.treeData=r,e.initDepartComponent(),e.rootOpened&&e.initExpandedKeys(t.result)}}))},initDepartComponent:function(){var e="";if(this.departId){var t,r=this.departId,a=o(this.dataList);try{for(a.s();!(t=a.n()).done;){var n=t.value;r.indexOf(n.key)>=0&&(e+=","+n.title)}}catch(i){a.e(i)}finally{a.f()}e&&(e=e.substring(1))}this.$emit("initComp",e)},reWriterWithSlot:function(e){var t,r=o(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(a.children&&a.children.length>0){this.reWriterWithSlot(a.children);var n=Object.assign({},a);n.children={},this.dataList.push(n)}else this.dataList.push(a),a.scopedSlots={title:"title"}}}catch(i){r.e(i)}finally{r.f()}},initExpandedKeys:function(e){if(e&&e.length>0){var t,r=[],a=o(e);try{for(a.s();!(t=a.n()).done;){var n=t.value;n.children&&n.children.length>0&&r.push(n.id)}}catch(i){a.e(i)}finally{a.f()}this.expandedKeys=[].concat(r)}else this.expandedKeys=[]},onCheck:function(e,t){var r=this;if(this.multi)this.checkedKeys=e.checked,this.checkedRows=this.getCheckedRows(this.checkedKeys);else{var a=e.checked.filter((function(e){return r.checkedKeys.indexOf(e)<0}));this.checkedKeys=l(a),this.checkedRows=0===this.checkedKeys.length?[]:[t.node.dataRef]}},onSelect:function(e,t){var r=[];if(r.push(e[0]),this.checkedKeys&&0!==this.checkedKeys.length&&this.multi){var a,n=t.node.dataRef.key;if(this.checkedKeys.indexOf(n)>=0)this.checkedKeys=this.checkedKeys.filter((function(e){return e!==n}));else(a=this.checkedKeys).push.apply(a,r)}else this.checkedKeys=[].concat(r),this.checkedRows=[t.node.dataRef];this.checkedRows=this.getCheckedRows(this.checkedKeys)},onExpand:function(e){this.expandedKeys=e,this.autoExpandParent=!1},handleSubmit:function(){this.checkedKeys&&0!=this.checkedKeys.length?this.$emit("ok",this.checkedRows,this.checkedKeys.join(",")):this.$emit("ok",""),this.handleClear()},handleCancel:function(){this.handleClear()},handleClear:function(){this.visible=!1,this.checkedKeys=[]},getParentKey:function(e,t){for(var r,a=0;a<t.length;a++){var n=t[a];n.children&&(n.children.some((function(t){return t.key===e}))?r=n.key:this.getParentKey(e,n.children)&&(r=this.getParentKey(e,n.children)))}return r},onSearch:function(e){var t=this,r=this.dataList.map((function(r){return r.title.indexOf(e)>-1?t.getParentKey(r.key,t.treeData):null})).filter((function(e,t,r){return e&&r.indexOf(e)===t}));Object.assign(this,{expandedKeys:r,searchValue:e,autoExpandParent:!0})},getCheckedRows:function(e){var t,r=function(e,t){var a,n=o(e);try{for(n.s();!(a=n.n()).done;){var i=a.value;if(i.id===t)return i;if(i.children instanceof Array){var l=r(i.children,t);if(null!=l)return l}}}catch(s){n.e(s)}finally{n.f()}return null},a=[],n=o(e);try{for(n.s();!(t=n.n()).done;){var i=t.value,l=r(this.treeData,i);null!=l&&a.push(l)}}catch(s){n.e(s)}finally{n.f()}return a}}},p=h,m=r("2877"),b=Object(m["a"])(p,a,n,!1,null,"4907a211",null);t["default"]=b.exports},b245:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"85%",title:"人员选择",visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",bodyStyle:{height:"70vh"},destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-row",[t("a-col",{attrs:{md:4,sm:24}},[t("div",{staticStyle:{height:"calc(70vh - 20px)","border-right":"1px solid #e3e1e1","margin-right":"15px"}},[e.treeData&&e.treeData.length>0?t("a-tree",{staticClass:"limitHeight",attrs:{defaultSelectedKeys:[e.queryParam.depId],defaultExpandAll:!0,"tree-data":e.treeData},on:{select:e.onSelect}}):e._e()],1)]),t("a-col",{attrs:{md:20,sm:24}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.findList.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"账号"}},[t("a-input",{attrs:{placeholder:"请输入用户账号"},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"真实名字"}},[t("a-input",{attrs:{placeholder:"请输入真实名字"},model:{value:e.queryParam.realname,callback:function(t){e.$set(e.queryParam,"realname",t)},expression:"queryParam.realname"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"手机号码"}},[t("a-input",{attrs:{placeholder:"请输入手机号码"},model:{value:e.queryParam.phone,callback:function(t){e.$set(e.queryParam,"phone",t)},expression:"queryParam.phone"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"角色"}},[t("j-dict-select-tag",{attrs:{triggerChange:!0,dictCode:"sys_role,role_name,id",placeholder:"选择角色"},model:{value:e.queryParam.roleId,callback:function(t){e.$set(e.queryParam,"roleId",t)},expression:"queryParam.roleId"}})],1)],1),t("a-col",{attrs:{md:2,sm:8}},[t("a-button",{on:{click:e.findList}},[e._v("查询")])],1)],1)],1)],1),t("div",{staticStyle:{height:"calc(70vh - 130px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(70vh - 130px)"},attrs:{border:"",align:e.allAlign,data:e.tableData,"max-height":"100%","show-overflow":"tooltip","radio-config":e.multiple?{}:{trigger:"row"},"checkbox-config":e.multiple?{trigger:"row",highlight:!0,range:!0}:{},"edit-config":{trigger:"manual",mode:"row"}}},[e.multiple?t("vxe-table-column",{attrs:{type:"checkbox",width:"5%"}}):t("vxe-table-column",{attrs:{type:"radio",width:"5%"}}),t("vxe-table-column",{attrs:{field:"workNo",title:"工号",width:"100",align:"center"}}),t("vxe-table-column",{attrs:{field:"username",title:"用户账号",width:"150",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"realname",title:"用户名字",width:"100",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"roleNames",title:"角色","min-width":"180",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"sex_dictText",title:"性别",width:"80"}}),t("vxe-table-column",{attrs:{field:"phone",title:"手机号码",width:"120"}}),t("vxe-table-column",{attrs:{field:"orgCode",title:"部门",width:"120",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",width:"80"}})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1)])],1)],1)},n=[],i=r("8fad"),o={name:"UserList",props:{multiple:{type:Boolean,default:!0},depId:{type:String,default:""}},data:function(){return{queryParam:{username:"",realname:"",phone:"",orgCode:"",roleId:void 0,pageNo:1,pageSize:10},allAlign:"center",totalResult:0,tableData:[],visible:!1,confirmLoading:!1,treeData:[]}},watch:{depId:function(e){this.$set(this.queryParam,"depId",e||"")}},mounted:function(){this.$set(this.queryParam,"depId",this.depId||"")},methods:{showModal:function(){this.visible=!0,this.findList(),this.getTreeList()},getTreeList:function(){var e=this;Object(i["mb"])().then((function(t){t.success&&(e.treeData=t.result)}))},onSelect:function(e,t){if(e.length){var r=t.node.dataRef;this.queryParam.depId=r.id,this.findList()}else this.queryParam.orgCode="",this.findList()},findList:function(){var e=this;this.loading=!0,Object(i["gc"])(this.queryParam).then((function(t){e.loading=!1,t.success?(e.totalResult=t.result.total,e.tableData=t.result.records):e.$message.error("加载用户数据失败")})).catch((function(t){e.$message.error("加载用户数据异常")})).finally((function(){}))},handlePageChange:function(e){var t=e.currentPage,r=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=r,this.findList()},handleOk:function(){var e=[];this.multiple?e=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&e.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",e),this.visible=!1},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,Object.assign(this.$data,this.$options.data())}}},l=o,s=(r("f76d"),r("2877")),c=Object(s["a"])(l,a,n,!1,null,"4aa7956f",null);t["default"]=c.exports},b9c3:function(e,t,r){"use strict";r.d(t,"lb",(function(){return o})),r.d(t,"f",(function(){return l})),r.d(t,"i",(function(){return s})),r.d(t,"v",(function(){return c})),r.d(t,"b",(function(){return f})),r.d(t,"l",(function(){return h})),r.d(t,"p",(function(){return p})),r.d(t,"G",(function(){return m})),r.d(t,"c",(function(){return d})),r.d(t,"B",(function(){return g})),r.d(t,"k",(function(){return v})),r.d(t,"A",(function(){return y})),r.d(t,"x",(function(){return w})),r.d(t,"g",(function(){return k})),r.d(t,"E",(function(){return O})),r.d(t,"C",(function(){return x})),r.d(t,"M",(function(){return S})),r.d(t,"kb",(function(){return C})),r.d(t,"O",(function(){return P})),r.d(t,"N",(function(){return D})),r.d(t,"jb",(function(){return T})),r.d(t,"t",(function(){return R})),r.d(t,"d",(function(){return N})),r.d(t,"W",(function(){return $})),r.d(t,"X",(function(){return q})),r.d(t,"e",(function(){return _})),r.d(t,"o",(function(){return M})),r.d(t,"V",(function(){return G})),r.d(t,"R",(function(){return U})),r.d(t,"Q",(function(){return E})),r.d(t,"K",(function(){return Y})),r.d(t,"L",(function(){return F})),r.d(t,"fb",(function(){return ge})),r.d(t,"bb",(function(){return B})),r.d(t,"Y",(function(){return H})),r.d(t,"J",(function(){return Q})),r.d(t,"hb",(function(){return ie})),r.d(t,"U",(function(){return oe})),r.d(t,"eb",(function(){return X})),r.d(t,"cb",(function(){return Z})),r.d(t,"a",(function(){return ee})),r.d(t,"j",(function(){return ue})),r.d(t,"nb",(function(){return de})),r.d(t,"gb",(function(){return fe})),r.d(t,"m",(function(){return he})),r.d(t,"H",(function(){return ye})),r.d(t,"T",(function(){return W})),r.d(t,"S",(function(){return A})),r.d(t,"mb",(function(){return K})),r.d(t,"z",(function(){return pe})),r.d(t,"db",(function(){return me})),r.d(t,"y",(function(){return be})),r.d(t,"u",(function(){return u})),r.d(t,"F",(function(){return b})),r.d(t,"ob",(function(){return I})),r.d(t,"q",(function(){return L})),r.d(t,"D",(function(){return j})),r.d(t,"ib",(function(){return te})),r.d(t,"n",(function(){return re})),r.d(t,"I",(function(){return J})),r.d(t,"P",(function(){return V})),r.d(t,"s",(function(){return le})),r.d(t,"Z",(function(){return se})),r.d(t,"ab",(function(){return ce})),r.d(t,"h",(function(){return ae})),r.d(t,"w",(function(){return ne})),r.d(t,"r",(function(){return z}));var a=r("0fea"),n=r("4328"),i=r.n(n),o=function(e){return Object(a["j"])("/group/fault/info/submit",e)},l=function(e){return Object(a["j"])("/group/fault/info/cancel",e)},s=function(e){return Object(a["j"])("/group/fault/info/delete",e)},c=function(e){return Object(a["d"])("/group/fault/info/page",e)},u=function(e){return Object(a["d"])("/group/fault/info/get",e)},d=function(e){return Object(a["j"])("/group/safeassume/read/add",e)},f=function(e){return Object(a["j"])("/group/safeassume/add",e)},h=function(e){return Object(a["j"])("/group/safeassume/delete",e)},p=function(e){return Object(a["j"])("/group/safeassume/edit",e)},m=function(e){return Object(a["d"])("/group/safeassume/page",e)},b=function(e){return Object(a["d"])("/group/safeassume/get",e)},g=function(e){return Object(a["d"])("/group/turnoverchange/page",e)},y=function(e){return Object(a["d"])("/material/spare-part/get",e)},v=function(e){return Object(a["j"])("/group/turnoverchange/delete",e)},w=function(e){return Object(a["d"])("/group/measurealert/page",e)},k=function(e){return Object(a["j"])("/group/measurealert/close",e)},O=function(e){return Object(a["d"])("/group/spare-part/page",e)},x=function(e){return Object(a["d"])("/group/spare-part/get",e)},j=function(e){return Object(a["d"])("/produce/train/history/asset/use/page",e)},S=function(e){return Object(a["d"])("/group/toolequipment/page",e)},C=function(e){return Object(a["j"])("/group/toolequipment/setStatus",e)},L=function(e){return Object(a["d"])("/group/toolequipment/usage",e)},P=function(e){return Object(a["d"])("/group/tool/page",e)},D=function(e){return Object(a["d"])("/group/tool/get",e)},T=function(e){return Object(a["j"])("/group/tool/setDutyUser",e)},I=function(e){return Object(a["d"])("/group/tool/usage",e)},R=function(e){return Object(a["d"])("/group/information/basic",e)},N=function(e){return Object(a["j"])("/group/information/tools/add",e)},$=function(e){return Object(a["d"])("/group/information/workstation/page-related",e)},q=function(e){return Object(a["d"])("/group/information/workstation/page-unrelated",e)},_=function(e){return Object(a["j"])("/group/information/workstation/add",e)},M=function(e){return Object(a["j"])("/group/information/workstation/delete",e)},A=function(e){return Object(a["d"])("/workGroup/workOrder/relevanceInfo/".concat(e))},K=function(e){return Object(a["j"])("/workGroup/workOrder/submit-to-dispatcher",i.a.stringify(e))},G=function(e){return Object(a["d"])("/workGroup/workRecord/list",e)},E=function(e){return Object(a["d"])("/serialPlan/plan/forms/online-form/get",e)},U=function(e){return Object(a["d"])("/serialPlan/plan/forms/work-record/get",e)},V=function(e){return Object(a["d"])("/serialPlan/plan/forms/check-record/get",e)},W=function(e){return Object(a["d"])("/workGroup/workOrder/page",e)},z=function(e){return Object(a["d"])("/workGroup/workOrder/apply/page",e)},Y=function(e){return Object(a["d"])("/workGroup/workRecord/recordForm",e)},F=function(e){return Object(a["d"])("/workGroup/workRecord/relevanceInfo/".concat(e))},J=function(e){return Object(a["d"])("/workGroup/workRecord/relevanceInfo/bookSteps/".concat(e))},B=function(e){return Object(a["j"])("/workGroup/workRecord/save/form-result",e)},H=function(e){return Object(a["j"])("/workGroup/workRecord/check",e)},Q=function(e){return Object(a["j"])("/workGroup/workRecord/getTaskQRCode",e)},X=function(e){return Object(a["j"])("/workGroup/workRecord/work-record/save-manufNo",i.a.stringify(e))},Z=function(e){return Object(a["j"])("/workGroup/workRecord/save/material",e)},ee=function(e){return Object(a["j"])("/workGroup/workRecord/save/actMaterial",e)},te=function(e){return Object(a["j"])("/workGroup/workRecord/save/work-time",e)},re=function(e){return Object(a["j"])("/workGroup/workRecord/arrange/delete",e)},ae=function(e){return Object(a["j"])("/workGroup/workOrder/material/commit-temp-apply",e)},ne=function(e){return Object(a["d"])("/workGroup/workOrder/material/apply/list",e)},ie=function(e){return Object(a["j"])("/workGroup/workRecord/check/saveExcelData",e)},oe=function(e){return Object(a["d"])("/workGroup/workRecord/get/excelData/".concat(e))},le=function(e){return Object(a["d"])("/serialPlan/plan/forms/check-record/item/list",e)},se=function(e){return Object(a["j"])("/workGroup/workRecord/check-record/set-check",e)},ce=function(e){return Object(a["j"])("/workGroup/workRecord/check-record/set-time",e)},ue=function(e){return Object(a["j"])("/workGroup/workRecord/delete/material",i.a.stringify(e))},de=function(e){return Object(a["j"])("/workGroup/workRecord/submit-task",e)},fe=function(e){return Object(a["j"])("/workGroup/workRecord/save/tool",e)},he=function(e){return Object(a["j"])("/workGroup/workRecord/delete/tool",i.a.stringify(e))},pe=function(e){return Object(a["d"])("/workGroup/workRecord/outsourceOutin",e)},me=function(e){return Object(a["j"])("/workGroup/workRecord/save/outsourceOutin",e)},be=function(e){return Object(a["d"])("/workGroup/workRecord/outin/not-returns",e)},ge=function(e){return Object(a["j"])("/group/safeassume/read/add",i.a.stringify(e))},ye=function(e){return Object(a["d"])("/serialPlan/plan/page",e)}},c94f:function(e,t,r){"use strict";r("fef4")},c95b:function(e,t,r){},d866:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("div",[t("a-modal",{attrs:{title:e.title,width:"80%",visible:e.visible,confirmLoading:e.confirmLoading,bodyStyle:{minHeight:"450px"},destroyOnClose:!0,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:9,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"所属工单"}},[t("div",{on:{click:e.openOrderModel}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["workOrderName",e.validatorRules.workOrderName],expression:"['workOrderName', validatorRules.workOrderName]",modifiers:{trim:!0}}],ref:"myOrderSelect",attrs:{placeholder:"请选择工单"}},[t("a-icon",{attrs:{slot:"suffix",type:"ellipsis"},slot:"suffix"})],1)],1)])],1),t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"退料日期"}},[t("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["billDate",e.validatorRules.billDate],expression:"['billDate', validatorRules.billDate]",modifiers:{trim:!0}}],staticStyle:{width:"100%"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"办理人员"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["handleUserName",e.validatorRules.handleUserName],expression:"['handleUserName', validatorRules.handleUserName]"}],ref:"myUserSelect",attrs:{placeholder:"请选择办理人员",open:!1,showArrow:!0},on:{focus:e.openUserSelectModal}},[t("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:24,sm:24}},[t("a-form-item",{staticClass:"fixedWidth",attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"备注"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["remark",e.validatorRules.remark],expression:"['remark', validatorRules.remark]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入备注",maxLength:201,"auto-size":{minRows:3,maxRows:5}}})],1)],1)],1),t("a-row",[t("a-form-item",[t("a-col",[t("a-space",[t("a-button",{attrs:{disabled:!e.workOrderId,type:"primary"},on:{click:function(t){e.returnVisible=!0}}},[e._v("新增")])],1)],1)],1)],1),t("a-row",{staticStyle:{height:"calc(100vh - 450px)",padding:"0 12px"},attrs:{gutter:24}},[t("vxe-table",{attrs:{height:"auto",border:"",data:e.detailList,"show-overflow":"tooltip"}},[t("vxe-table-column",{attrs:{field:"materialTypeCode",title:"物资编码"}}),t("vxe-table-column",{attrs:{field:"materialTypeSpec",width:"320","header-align":"center",align:"left",title:"物资描述"}}),t("vxe-table-column",{attrs:{field:"applyAmount",width:"120",title:"领用数量"}}),t("vxe-table-column",{attrs:{field:"returnAmount",title:"退回数量"},scopedSlots:e._u([{key:"default",fn:function(r){var a=r.row;return[t("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"输入退回数量",min:1,max:a.applyAmount},model:{value:a.returnAmount,callback:function(t){e.$set(a,"returnAmount",t)},expression:"row.returnAmount"}})]}}])}),t("vxe-table-column",{attrs:{field:"sourceLocationName",title:"退回库位"},scopedSlots:e._u([{key:"default",fn:function(r){var a=r.row;return[t("a-input",{ref:"locationSelect",staticStyle:{width:"100%"},attrs:{placeholder:"选择库位"},on:{click:function(t){return e.openlocationModal(a)}},model:{value:a.sourceLocationName,callback:function(t){e.$set(a,"sourceLocationName",t)},expression:"row.sourceLocationName"}},[t("a-icon",{attrs:{slot:"suffix",type:"ellipsis"},slot:"suffix"})],1)]}}])})],1)],1)],1)],1),t("work-order-select",{ref:"workOrderSelect",attrs:{workGroupId:e.curDepartId,"order-status":[7,3,4],"select-status":[7,3,4]},on:{ok:e.onSelectOrder}}),t("user-list",{ref:"userSelectModal",attrs:{"dep-id":e.dispatchGroupId,multiple:!1},on:{ok:e.userSelect}}),t("LocationList",{ref:"locationModal",on:{ok:e.onSelectLocation}})],1),t("a-modal",{attrs:{title:"选择退料物资",width:"80%",visible:e.returnVisible,bodyStyle:{minHeight:"450px"},destroyOnClose:!0},on:{ok:e.returnAddOk,cancel:function(t){e.returnVisible=!1}}},[t("a-row",{staticStyle:{height:"calc(100vh - 250px)",padding:"0 12px"},attrs:{gutter:24}},[t("vxe-table",{ref:"tableList",attrs:{"checkbox-config":{trigger:"row",highlight:!0,range:!0},height:"auto",border:"",data:e.selectData,"show-overflow":"tooltip"}},[t("vxe-table-column",{attrs:{align:"center",type:"checkbox",width:"40",fixed:"left"}}),t("vxe-table-column",{attrs:{field:"materialTypeCode",title:"物资编码"}}),t("vxe-table-column",{attrs:{field:"materialTypeSpec",width:"320","header-align":"center",align:"left",title:"物资描述"}}),t("vxe-table-column",{attrs:{field:"applyAmount",width:"120",title:"领用数量"}})],1)],1)],1)],1)},n=[],i=r("ca00"),o=r("5633"),l=r("c54ca"),s=r("b098"),c=r("c1df"),u=r.n(c),d=r("fe54"),f=r("b245"),h=r("13f1"),p=r("673e");function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return(t=v(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e){var t=w(e,"string");return"symbol"==m(t)?t:t+""}function w(e,t){if("object"!=m(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=m(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var k={name:"WillChangeItemModal",components:{JTreeSelect:s["default"],UserList:f["default"],JSelectDepart:d["default"],LineSelectList:o["default"],LocationList:h["default"],WorkOrderSelect:p["default"]},data:function(){return{selectData:[],title:"操作",visible:!1,returnVisible:!1,model:{},curDepartId:"",workOrderId:"",handleUserId:"",dispatchGroupId:"",userList:[],detailList:[],labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:14}},labelCol1:{xs:{span:24},sm:{span:3}},wrapperCol1:{xs:{span:24},sm:{span:20}},confirmLoading:!1,form:this.$form.createForm(this),deptId:"",validatorRules:{workOrderName:{rules:[{required:!0,message:"请选择工单!"}]},billDate:{rules:[{required:!0,message:"请选择退料日期!"}]},handleUserName:{rules:[{required:!1,message:"请选择办理人员!"}]},remark:{rules:[{required:!1,max:255,message:"输入长度不能超过255个字符!"}]}}}},computed:{billName:function(){return"".concat(this.form.getFieldValue("workOrderName"),"【退料】")}},created:function(){},methods:{returnAddOk:function(){var e=this,t=this.$refs.tableList.getCheckboxRecords();t.map((function(t){if(e.detailList.find((function(e){return e.materialTypeId===t.materialTypeId})))e.$message.warning("物资".concat(t.materialTypeCode,"列表中已存在"));else{var r;try{r=g(g({},t),{},{returnAmount:1,tradeNo:t.assignDetailList[0].tradeNo,locationWbs:t.assignDetailList[0].locationWbs||t.assignDetailList[0].warehouseWbs,locationName:t.assignDetailList[0].locationName||t.assignDetailList[0].warehouseName,sourceLocationName:t.assignDetailList[0].sourceLocationName})}catch(a){r=g(g({},t),{},{returnAmount:1})}delete r.assignDetailList,e.detailList.push(r)}})),this.returnVisible=!1},openOrderModel:function(){this.$refs.workOrderSelect.showModal()},onSelectOrder:function(e){var t=this;this.form.setFieldsValue({workOrderName:e[0].orderName}),this.workOrderId=e[0].id,e?Object(l["bb"])({orderId:this.workOrderId,status:[2,3]}).then((function(e){t.selectData=[],t.detailList=[],e.success&&e.result.length&&e.result.forEach((function(e){t.selectData.push({assignDetailList:e.assignDetailList,materialTypeId:e.materialTypeId,returnAmount:"",locationWbs:"",locationName:"",sourceLocationName:"",materialTypeCode:e.materialTypeCode,materialTypeSpec:e.materialTypeSpec,orderMaterialId:e.id,applyAmount:e.amount})}))})):(this.selectData=[],this.detailList=[]),this.$refs.myOrderSelect.blur()},openUserSelectModal:function(){this.$refs.userSelectModal.showModal(),this.$refs.myUserSelect.blur()},userSelect:function(e){Object(i["e"])(e)||(this.handleUserId=e[0].id,this.form.setFieldsValue({handleUserName:e[0].realname}))},openlocationModal:function(e){this.selectRow=e,this.$refs.locationModal.showModal(this.selectRow.materialTypeId,null,null)},onSelectLocation:function(e){1==e.length&&(this.$set(this.selectRow,"locationWbs",e[0].warehouseWbs),this.$set(this.selectRow,"locationName",e[0].warehouseName),this.$set(this.selectRow,"sourceLocationName",e[0].sourceLocationName))},add:function(){var e=this;this.visible=!0,this.$nextTick((function(){e.form.setFieldsValue({billDate:u()().format("YYYY-MM-DD")})})),this.edit({})},edit:function(e){var t=this;this.visible=!0,this.form.resetFields(),this.model=Object.assign({},e),this.detailList=[],e.id&&(this.$nextTick((function(){t.form.setFieldsValue({workOrderName:t.model.workOrderName,billCode:t.model.billCode,billDate:t.model.billDate,handleUserName:t.model.handleUserName,remark:t.model.remark,id:t.model.id})})),this.handleUserId=this.model.handleUserId,this.workOrderId=this.model.workOrderId,Object(l["rb"])({id:e.id}).then((function(e){e.success&&e.result.detailList.length&&(t.detailList=e.result.detailList)})))},handleOk:function(){var e=this,t=this;t.form.validateFields((function(r,a){if(!r){for(var n=e.detailList,i=!0,o=0,s=n.length;o<s;o++){var c=n[o];if(!c.returnAmount){e.$message.warning("物资".concat(c.materialTypeCode,"的退回数量不能小于1")),i=!1;break}if(!(c.locationWbs&&c.locationName&&c.sourceLocationName)){e.$message.warning("物资".concat(c.materialTypeCode,"的退回库位不能为空")),i=!1;break}if(!c.tradeNo){e.$message.warning("物资".concat(c.materialTypeCode,"的退回批次不能为空")),i=!1;break}}if(0==n.length)return void e.$message.warning("请添加退回物料");if(!i)return;t.confirmLoading=!0;var u,d=Object.assign(t.model,a,{handleUserId:e.handleUserId,detailList:n,billName:e.billName,workOrderId:e.workOrderId});u=(t.model.id,Object(l["dc"])(d)),u.then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok"),t.close()):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1}))}}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.detailList=[],this.workOrderName="",this.workOrderId="",this.visible=!1}}},O=k,x=(r("3ddc"),r("2877")),j=Object(x["a"])(O,a,n,!1,null,null,null);t["default"]=j.exports},f680:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return"checkbox"==e.tagType?t("a-checkbox-group",{attrs:{value:e.arrayValue,disabled:e.disabled},on:{change:e.onChange}},e._l(e.dictOptions,(function(r,a){return t("a-checkbox",{key:a,attrs:{value:r.value}},[e._v(e._s(r.text||r.label))])})),1):"select"==e.tagType?t("a-select",{attrs:{value:e.arrayValue,disabled:e.disabled,mode:"multiple",placeholder:e.placeholder,getPopupContainer:function(e){return e.parentNode},allowClear:""},on:{change:e.onChange}},e._l(e.dictOptions,(function(r,a){return t("a-select-option",{key:a,attrs:{value:r.value}},[t("span",{staticStyle:{display:"inline-block",width:"100%"},attrs:{title:r.text||r.label}},[e._v(" "+e._s(r.text||r.label)+" ")])])})),1):e._e()},n=[],i=r("4ec3");function o(e){return u(e)||c(e)||s(e)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(e){if("string"==typeof e)return d(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}function c(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function u(e){if(Array.isArray(e))return d(e)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}var f={name:"JMultiSelectTag",props:{dictCode:String,placeholder:String,disabled:Boolean,value:String,type:String,options:Array},data:function(){return{dictOptions:[],tagType:"",arrayValue:this.value?this.value.split(","):[]}},created:function(){this.type&&"list_multi"!==this.type?this.tagType=this.type:this.tagType="select"},watch:{options:function(e){this.setCurrentDictOptions(e)},dictCode:{immediate:!0,handler:function(){this.initDictData()}},value:function(e){this.arrayValue=e?this.value.split(","):[]}},methods:{initDictData:function(){var e=this;if(this.options&&this.options.length>0)this.dictOptions=o(this.options);else{if(Object(i["u"])(this.dictCode))return void(this.dictOptions=Object(i["u"])(this.dictCode));Object(i["f"])(this.dictCode,null).then((function(t){t.success&&(e.dictOptions=t.result)}))}},onChange:function(e){this.$emit("change",e.join(","))},setCurrentDictOptions:function(e){this.dictOptions=e},getCurrentDictOptions:function(){return this.dictOptions}},model:{prop:"value",event:"change"}},h=f,p=r("2877"),m=Object(p["a"])(h,a,n,!1,null,null,null);t["default"]=m.exports},f76d:function(e,t,r){"use strict";r("9527")},fe54:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"components-input-demo-presuffix"},[t("a-input",{attrs:{placeholder:"请点击选择部门",readOnly:"",disabled:e.disabled},on:{click:e.openModal},model:{value:e.departNames,callback:function(t){e.departNames=t},expression:"departNames"}},[t("a-icon",{attrs:{slot:"prefix",type:"cluster",title:"部门选择控件"},slot:"prefix"}),e.departIds?t("a-icon",{attrs:{slot:"suffix",type:"close-circle",title:"清空"},on:{click:e.handleEmpty},slot:"suffix"}):e._e()],1),t("j-select-depart-modal",{ref:"innerDepartSelectModal",attrs:{"modal-width":e.modalWidth,multi:e.multi,rootOpened:e.rootOpened,"depart-id":e.departIds},on:{ok:e.handleOK,initComp:e.initComp}})],1)},n=[],i=r("b0cd"),o={name:"JSelectDepart",components:{JSelectDepartModal:i["default"]},props:{modalWidth:{type:Number,default:500,required:!1},multi:{type:Boolean,default:!1,required:!1},rootOpened:{type:Boolean,default:!0,required:!1},value:{type:String,required:!1},disabled:{type:Boolean,required:!1,default:!1},customReturnField:{type:String,default:"id"}},data:function(){return{visible:!1,confirmLoading:!1,departNames:"",departIds:""}},mounted:function(){this.departIds=this.value},watch:{value:function(e){"id"===this.customReturnField&&(this.departIds=e)}},methods:{initComp:function(e){this.departNames=e},openModal:function(){this.$refs.innerDepartSelectModal.show()},handleOK:function(e,t){var r=this,a="";!e&&e.length<=0?(this.departNames="",this.departIds=""):(a=e.map((function(e){return e[r.customReturnField]})).join(","),this.departNames=e.map((function(e){return e["departName"]})).join(","),this.departIds=t),this.$emit("change",a)},getDepartNames:function(){return this.departNames},handleEmpty:function(){this.handleOK("")}},model:{prop:"value",event:"change"}},l=o,s=(r("c94f"),r("2877")),c=Object(s["a"])(l,a,n,!1,null,"4d448922",null);t["default"]=c.exports},fef4:function(e,t,r){}}]);