(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d207efa"],{a33e:function(e,a,r){"use strict";r.r(a);var t=function(){var e=this,a=e._self._c;return a("a-modal",{attrs:{title:e.title,width:1100,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"设备名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["name",e.validatorRules.name],expression:"[ 'name', validatorRules.name]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"物资类型"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["materialName",e.validatorRules.materialName],expression:"[ 'materialName', validatorRules.materialName]",modifiers:{trim:!0}}],ref:"mymaterSelect",attrs:{placeholder:"请选择物资类型",open:!1,showArrow:!0},on:{focus:e.openmaterModal}},[a("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"物资编码"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["code",e.validatorRules.code],expression:"[ 'code', validatorRules.code]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入",disabled:""}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"线路"}},[a("line-select-list",{directives:[{name:"decorator",rawName:"v-decorator",value:["lineId",e.validatorRules.lineId],expression:"['lineId', validatorRules.lineId]"}]})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"车间"}},[a("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["workshopId",e.validatorRules.workshopId],expression:"[ 'workshopId', validatorRules.workshopId ]",modifiers:{trim:!0}}],attrs:{triggerChange:!0,dictCode:"bu_mtr_workshop,name,id"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"状态"}},[a("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["status",e.validatorRules.status],expression:"[ 'status', validatorRules.status ]",modifiers:{trim:!0}}],attrs:{triggerChange:!0,dictCode:"bu_tools_status"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"资产编码"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["assetCode",e.validatorRules.assetCode],expression:"[ 'assetCode', validatorRules.assetCode]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"类别"}},[a("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["toolType",e.validatorRules.toolType],expression:"[ 'toolType', validatorRules.toolType ]",modifiers:{trim:!0}}],attrs:{triggerChange:!0,dictCode:"bu_tools_type"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"生产厂家"}},[a("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["supplierId",e.validatorRules.supplierId],expression:"['supplierId', validatorRules.supplierId ]",modifiers:{trim:!0}}],attrs:{triggerChange:!0,dictCode:"bu_base_supplier,name,id"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"入场使用日期"}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["entraceDate",e.validatorRules.entraceDate],expression:"[ 'entraceDate', validatorRules.entraceDate]",modifiers:{trim:!0}}],staticStyle:{width:"100%"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"使用寿命"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["lifetime",e.validatorRules.lifetime],expression:"[ 'lifetime', validatorRules.lifetime]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"入库日期"}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["entryDate",e.validatorRules.entryDate],expression:"[ 'entryDate', validatorRules.entryDate]",modifiers:{trim:!0}}],staticStyle:{width:"100%"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"所属工班"}},[a("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["groupId",e.validatorRules.groupId],expression:"[ 'groupId', validatorRules.groupId ]",modifiers:{trim:!0}}],attrs:{triggerChange:!0,dictCode:e.dictGroupStr}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"所属仓库"}},[a("j-tree-select",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["warehouseId",e.validatorRules.warehouseId],expression:"[ 'warehouseId', validatorRules.warehouseId ]",modifiers:{trim:!0}}],attrs:{dict:"bu_mtr_warehouse,name,id",pidField:"parent_id"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"下次送检日期"}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["nextCheckTime",e.validatorRules.nextCheckTime],expression:"[ 'nextCheckTime', validatorRules.nextCheckTime]",modifiers:{trim:!0}}],staticStyle:{width:"100%"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"保养周期"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["serviceInterval",e.validatorRules.serviceInterval],expression:"[ 'serviceInterval', validatorRules.serviceInterval]",modifiers:{trim:!0}}],staticStyle:{width:"100%"},attrs:{placeholder:"请输入",max:999999}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"规格"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["model",e.validatorRules.model],expression:"[ 'model', validatorRules.model]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入"}})],1)],1)],1)],1)],1),a("material-list",{ref:"materModalForm",attrs:{multiple:!1},on:{ok:e.selectmater}})],1)},l=[],o=r("c1df"),s=r.n(o),i=r("c54ca"),d=r("7164"),m=r("5633"),c=r("b098"),n=r("4ec3"),p=r("ca00"),u={name:"EquipmentItemModal",components:{MaterialList:d["default"],LineSelectList:m["default"],JTreeSelect:c["default"]},data:function(){return{dictGroupStr:"bu_mtr_workshop_group,group_name,id,workshop_id='"+this.$store.getters.userInfo.workshopId+"'|workshop_id",value:1,title:"操作",visible:!1,materName:"",materId:"",matercode:"",model:{},labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:14}},isClose:!1,confirmLoading:!1,form:this.$form.createForm(this),validatorRules:{name:{rules:[{required:!0,message:"请选择物资名称!"}]},code:{rules:[{required:!0,message:"请输入物资编码!"}]},assetCode:{rules:[{required:!0,message:"请填写资产编码!"},{validator:this.validateCode}]},supplierId:{rules:[]},groupId:{rules:[]},entraceDate:{rules:[]},lifetime:{rules:[]},entryDate:{rules:[]},warehouseId:{rules:[]},nextCheckTime:{rules:[]},toolType:{rules:[{required:!0,message:"请选择类别!"}]},status:{rules:[{required:!0,message:"请选择状态!"}]},serviceInterval:{rules:[]},model:{rules:[{max:200,message:"输入长度不能超过200个字符!"}]},materialName:{rules:[{required:!0,message:"请选择物资类型!"}]},lineId:{rules:[{required:!0,message:"请选择线路!"}]},workshopId:{rules:[{required:!0,message:"请选择车间!"}]}}}},created:function(){},methods:{validateCode:function(e,a,r){var t={tableName:"bu_material_tools",fieldName:"asset_code",fieldVal:a,dataId:this.model.id};Object(p["e"])(a)?r():Object(n["m"])(t).then((function(e){e.success?r():r(e.message)}))},changeClose:function(e){this.isClose=e},add:function(){this.edit({})},edit:function(e){var a=this;e.id?this.isClose=!(!e["close"]||1!=e["close"]):this.isClose=!1,this.model=Object.assign({},e),this.visible=!0,this.$nextTick((function(){a.form.setFieldsValue({name:a.model.name,materialName:a.model.materialName,code:a.model.code,lineId:a.model.lineId,workshopId:a.model.workshopId,assetCode:a.model.assetCode,supplierId:a.model.supplierId,groupId:a.model.groupId,entraceDate:s()(a.model.entraceDate||new Date,"YYYY-MM-DD"),lifetime:a.model.lifetime,entryDate:s()(a.model.entryDate||new Date,"YYYY-MM-DD"),warehouseId:a.model.warehouseId,nextCheckTime:s()(a.model.nextCheckTime||new Date,"YYYY-MM-DD"),toolType:a.model.toolType,serviceInterval:a.model.serviceInterval,status:a.model.status,model:a.model.model})}))},openmaterModal:function(){this.$refs.materModalForm.showModal(),this.$refs.mymaterSelect.blur()},selectmater:function(e){e.length&&(this.materName=e[0].name,this.materId=e[0].id,this.matercode=e[0].code),this.form.setFieldsValue({materialName:this.materName,code:this.matercode,materialTypeId:this.materId,model:e[0]?e[0].spec:""})},handleOk:function(){var e=this,a=this;a.form.validateFields((function(r,t){if(!r){a.confirmLoading=!0;var l,o=Object.assign(a.model,t,{entraceDate:s()(t.entraceDate).format("YYYY-MM-DD"),entryDate:s()(t.entryDate).format("YYYY-MM-DD"),nextCheckTime:s()(t.nextCheckTime).format("YYYY-MM-DD")});a.model.id?l=Object(i["G"])(o):(o["materialTypeId"]=a.materId,l=Object(i["c"])(o)),l.then((function(e){e.success?(a.$message.success(e.message),a.$emit("ok")):a.$message.warning(e.message)})).finally((function(){a.confirmLoading=!1,a.close()})),e.visible=!1}}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},v=u,C=r("2877"),f=Object(C["a"])(v,t,l,!1,null,"c2e2b41a",null);a["default"]=f.exports}}]);