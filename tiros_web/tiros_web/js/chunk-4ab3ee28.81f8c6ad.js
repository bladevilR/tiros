(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4ab3ee28","chunk-524e071e","chunk-3345997a"],{17625:function(e,t,o){"use strict";o("d685")},"310d":function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e._self._c;return t("div",[t("a-modal",{attrs:{title:"车辆设备选择",width:"80%",bodyStyle:{height:"83vh"},visible:e.visible,confirmLoading:e.confirmLoading,closable:!0,centered:"",destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.close}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchQuery.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"名称"}},[t("a-input",{attrs:{placeholder:"名称或编码"},model:{value:e.queryParam.title,callback:function(t){e.$set(e.queryParam,"title",t)},expression:"queryParam.title"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"线路"}},[t("j-dict-select-tag",{attrs:{triggerChange:!0,dictCode:"bu_mtr_line,line_name,line_id"},on:{change:e.changeLine},model:{value:e.lineId_A,callback:function(t){e.lineId_A=t},expression:"lineId_A"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"车辆"}},[t("j-dict-select-seach-tag",{attrs:{triggerChange:!0,dictCode:e.dictTrainStr},model:{value:e.trainNo_A,callback:function(t){e.trainNo_A=t},expression:"trainNo_A"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"状态"}},[t("j-dict-select-tag",{attrs:{triggerChange:!0,placeholder:"请选择状态",dictCode:"bu_valid_status"},model:{value:e.queryParam.status,callback:function(t){e.$set(e.queryParam,"status",t)},expression:"queryParam.status"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-space",[t("a-button",{on:{click:e.searchQuery}},[e._v("查询")])],1)],1)])],1)],1)],1),t("div",{staticClass:"tableHeight"},[t("vxe-table",{ref:"listTable",attrs:{border:"",resizable:"","row-id":"id",align:e.allAlign,height:"auto",data:e.tableData,"show-overflow":"tooltip","max-height":"100%","radio-config":{trigger:e.multiple?"default":"row",highlight:!0,checkMethod:e.checkRadioMethod},"checkbox-config":{trigger:e.multiple?"row":"default",highlight:!0,checkStrictly:!0,checkMethod:e.checkRadioMethod},"tree-config":{lazy:!0,children:"children",hasChild:"hasChildren",loadMethod:e.loadChildrenMethod}}},[e.multiple?t("vxe-table-column",{attrs:{type:"checkbox",width:"40",fixed:"left"}}):t("vxe-table-column",{attrs:{type:"radio",width:"40",fixed:"left"}}),t("vxe-table-column",{attrs:{field:"name",title:"名称","tree-node":"",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{align:"left","header-align":"center",field:"code",title:"编码",width:"180"}}),t("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",align:"center","header-align":"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(o){var r=o.row;return[t("div",{style:{backgroundColor:e.statusColor[r.status+""],borderRadius:"4px"}},[e._v(" "+e._s(r.status_dictText)+" ")])]}}])}),t("vxe-table-column",{attrs:{field:"maximoAssetType",title:"maximo设备类型",width:"150",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"locationName",title:"位置",width:"400",align:"left","header-align":"center"}})],1)],1)])],1)},n=[],a=o("8fad"),i={props:{multiple:{type:Boolean,default:!0},trainNo:{type:[Number,String]},lineId:{type:[Number,String]}},data:function(){return{statusColor:{0:"#dedede",1:"#bad795"},dictTrainStr:"",trainNo_A:void 0,lineId_A:void 0,allAlign:"center",tableData:[],visible:!1,confirmLoading:!1,queryParam:{trainNo:"",searchText:"",status:1}}},created:function(){},methods:{changeLine:function(e,t){this.dictTrainStr="",e&&(this.dictTrainStr="bu_train_info,train_no,train_no,line_id="+e+"|train_struct_id")},checkRadioMethod:function(e){e.row;return!0},searchQuery:function(){this.findList()},loadChildrenMethod:function(e){var t=this,o=e.row,r={trainNo:this.trainNo_A,parentId:o.id,searchText:this.queryParam.searchText,status:this.queryParam.status};return new Promise((function(e){Object(a["Wb"])(r).then((function(o){o.success?e(o.result):t.$message.error("".concat(o.msg))}))}))},handleOk:function(){var e=[];this.multiple?e=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&e.push(this.$refs.listTable.getRadioRecord()),Array.from(e,(function(e,t){e.assetName=e.name})),this.$emit("ok",e),this.visible=!1},showModal:function(){this.visible=!0,this.lineId_A=this.lineId,this.trainNo_A=this.trainNo,this.findList()},close:function(){this.visible=!1},findList:function(){var e=this;this.queryParam.trainNo=this.trainNo_A,this.loading=!0,Object(a["Wb"])(this.queryParam).then((function(t){t.success&&(e.loading=!1,e.tableData=t.result)}))}}},l=i,s=(o("4677"),o("2877")),c=Object(s["a"])(l,r,n,!1,null,"3967f3d4",null);t["default"]=c.exports},"3f22":function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"OutinEntrance"},[t("a-modal",{attrs:{title:"新增"+(0===e.orderType?"出库单":"入库单"),width:"100%",visible:e.visible,confirmLoading:e.confirmLoading,dialogClass:"fullDialog",destroyOnClose:!0},on:{cancel:e.handleCancel,ok:e.saveOutInInfo}},[0===e.orderType?t("div",[t("div",{staticClass:"fieldset-wrapper"},[t("h4",{staticClass:"title"},[e._v("交接信息")]),t("a-form-model",{ref:"outInfoForm",staticClass:"work-form",attrs:{layout:"inline",model:e.outModelInfo,"label-col":{span:6},"wrapper-col":{span:18},rules:e.outRules}},[t("a-row",[t("a-col",{attrs:{span:11}},[t("a-form-model-item",{attrs:{label:"交接单号","wrapper-col":{span:18},prop:"billNo"}},[t("a-input",{attrs:{placeholder:"交接单号",disabled:""},model:{value:e.outModelInfo.billNo,callback:function(t){e.$set(e.outModelInfo,"billNo",t)},expression:"outModelInfo.billNo"}})],1)],1),t("a-col",{attrs:{span:11}},[t("a-form-model-item",{attrs:{label:"交接单名","wrapper-col":{span:18},prop:"outinName"}},[t("a-input",{attrs:{placeholder:"交接单名"},model:{value:e.outModelInfo.outinName,callback:function(t){e.$set(e.outModelInfo,"outinName",t)},expression:"outModelInfo.outinName"}})],1)],1),t("a-col",{attrs:{span:11}},[t("a-form-model-item",{attrs:{label:"线路","wrapper-col":{span:18},prop:"lineId"}},[t("j-dict-select-tag",{ref:"lineSelect",attrs:{triggerChange:!0,dictCode:"bu_mtr_line,line_name,line_id"},on:{change:e.onLineChange},model:{value:e.outModelInfo.lineId,callback:function(t){e.$set(e.outModelInfo,"lineId",t)},expression:"outModelInfo.lineId"}})],1)],1),t("a-col",{attrs:{span:11}},[t("a-form-model-item",{attrs:{label:"车号","wrapper-col":{span:18},prop:"trainNo"}},[t("j-dict-select-seach-tag",{attrs:{triggerChange:!0,dictCode:e.dictTrainStr},on:{select:e.onTrainSelect},model:{value:e.outModelInfo.trainNo,callback:function(t){e.$set(e.outModelInfo,"trainNo",t)},expression:"outModelInfo.trainNo"}})],1)],1),t("a-col",{attrs:{span:11}},[t("a-form-model-item",{key:e.oTransferDateMKey,attrs:{label:"交接日期","wrapper-col":{span:18},prop:"transferDateM"}},[t("a-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"交接日期"},on:{change:e.otransFerDateMkey},model:{value:e.outModelInfo.transferDateM,callback:function(t){e.$set(e.outModelInfo,"transferDateM",t)},expression:"outModelInfo.transferDateM"}})],1)],1),t("a-col",{attrs:{span:11}},[t("a-form-model-item",{attrs:{label:"工程师","wrapper-col":{span:18},prop:"engineerId"}},[t("div",{on:{click:function(t){return e.showUserModal(2)}}},[t("a-select",{ref:"userSelect2",attrs:{placeholder:"请选择人员",open:!1},model:{value:e.outModelInfo.engineerName,callback:function(t){e.$set(e.outModelInfo,"engineerName",t)},expression:"outModelInfo.engineerName"}},[t("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)])],1),t("a-col",{attrs:{span:11}},[t("a-form-model-item",{attrs:{label:"作业班组","wrapper-col":{span:18},prop:"sendGroupId"}},[t("j-dict-select-tag",{attrs:{triggerChange:!0,dictCode:e.dictGroupStr},model:{value:e.outModelInfo.sendGroupId,callback:function(t){e.$set(e.outModelInfo,"sendGroupId",t)},expression:"outModelInfo.sendGroupId"}})],1)],1),t("a-col",{attrs:{span:11}},[t("a-form-model-item",{attrs:{label:"移交人","wrapper-col":{span:18},prop:"transferUserId"}},[t("div",{on:{click:function(t){return e.showUserModal(1)}}},[t("a-select",{ref:"userSelect1",attrs:{placeholder:"请选择人员",open:!1},model:{value:e.outModelInfo.transferUserName,callback:function(t){e.$set(e.outModelInfo,"transferUserName",t)},expression:"outModelInfo.transferUserName"}},[t("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)])],1),t("a-col",{attrs:{span:11}},[t("a-form-model-item",{attrs:{label:"接收厂商","wrapper-col":{span:18},prop:"supplierId"}},[t("a-select",{ref:"mySupplierSelectOut",attrs:{placeholder:"请选择厂商",open:!1,showArrow:!0},on:{focus:function(t){return e.openSupplierModal(1)}},model:{value:e.outModelInfo.supplierName,callback:function(t){e.$set(e.outModelInfo,"supplierName",t)},expression:"outModelInfo.supplierName"}},[t("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)],1),t("a-col",{attrs:{span:11}},[t("a-form-model-item",{attrs:{label:"接收人员","wrapper-col":{span:18},prop:"receiveUser"}},[t("a-input",{attrs:{placeholder:"接收人员"},model:{value:e.outModelInfo.receiveUser,callback:function(t){e.$set(e.outModelInfo,"receiveUser",t)},expression:"outModelInfo.receiveUser"}})],1)],1),t("a-col",{attrs:{span:11}},[t("a-form-model-item",{attrs:{label:"所属合同","wrapper-col":{span:18},prop:"contractId"}},[t("j-dict-select-tag",{attrs:{"trigger-change":!0,dictCode:"bu_contract_info,contract_name,id,status<>2"},model:{value:e.outModelInfo.contractId,callback:function(t){e.$set(e.outModelInfo,"contractId",t)},expression:"outModelInfo.contractId"}})],1)],1),t("a-col",{attrs:{span:11}},[t("a-form-model-item",{attrs:{label:"备注","wrapper-col":{span:18},prop:"remark"}},[t("a-input",{attrs:{placeholder:"备注"},model:{value:e.outModelInfo.remark,callback:function(t){e.$set(e.outModelInfo,"remark",t)},expression:"outModelInfo.remark"}})],1)],1)],1)],1)],1),t("div",{staticClass:"fieldset-wrapper",staticStyle:{height:"calc(100% - 284px)"}},[t("h4",{staticClass:"title"},[e._v("交接部件")]),t("div",{staticStyle:{"padding-bottom":"10px"}},[t("a-space",[t("a-button",{on:{click:e.onAddOutPart}},[e._v("添加")]),t("a-button",{on:{click:e.onDeleteOutPart}},[e._v("删除")])],1)],1),t("vxe-table",{key:"outTable",ref:"outTable",attrs:{border:"",align:"center",data:e.outModelInfo.outinDetails,"show-overflow":"tooltip","checkbox-config":{trigger:"row",highlight:!0,range:!0}}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),t("vxe-table-column",{attrs:{field:"trainNo",title:"车号",width:"100"}}),t("vxe-table-column",{attrs:{field:"assetName",title:"委外部件","header-align":"center",align:"left","min-width":"140"}}),t("vxe-table-column",{attrs:{field:"assetNo",title:"部件编号","min-width":"140",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"facadeStatus_dictText",title:"外观状态",width:"100"}}),t("vxe-table-column",{attrs:{field:"mixtoolStatus_dictText",title:"工装状态",width:"100"}}),t("vxe-table-column",{attrs:{field:"fault_dictText",title:"是否故障",width:"100"}}),t("vxe-table-column",{attrs:{field:"remark",title:"备注","min-width":"160","header-align":"center",align:"left"}})],1)],1)]):1===e.orderType?t("div",[t("div",{staticClass:"fieldset-wrapper"},[t("h4",{staticClass:"title"},[e._v("交接信息")]),t("a-form-model",{ref:"inInfoForm",staticClass:"work-form",attrs:{layout:"inline",model:e.inModelInfo,"label-col":{span:6},"wrapper-col":{span:18},rules:e.inRules}},[t("a-row",[t("a-col",{attrs:{span:11}},[t("a-form-model-item",{attrs:{label:"交接单号",wrapperCol:{span:18},prop:"billNo"}},[t("a-input",{attrs:{placeholder:"交接单号",disabled:""},model:{value:e.inModelInfo.billNo,callback:function(t){e.$set(e.inModelInfo,"billNo",t)},expression:"inModelInfo.billNo"}})],1)],1),t("a-col",{attrs:{span:11}},[t("a-form-model-item",{attrs:{label:"交接单名",wrapperCol:{span:18},prop:"outinName"}},[t("a-input",{attrs:{placeholder:"交接单名"},model:{value:e.inModelInfo.outinName,callback:function(t){e.$set(e.inModelInfo,"outinName",t)},expression:"inModelInfo.outinName"}})],1)],1),t("a-col",{attrs:{span:11}},[t("a-form-model-item",{attrs:{label:"线路",wrapperCol:{span:18},prop:"lineId"}},[t("j-dict-select-tag",{attrs:{triggerChange:!0,dictCode:"bu_mtr_line,line_name,line_id"},on:{change:e.onLineChange},model:{value:e.inModelInfo.lineId,callback:function(t){e.$set(e.inModelInfo,"lineId",t)},expression:"inModelInfo.lineId"}})],1)],1),t("a-col",{attrs:{span:11}},[t("a-form-model-item",{attrs:{label:"车号",wrapperCol:{span:18},prop:"trainNo"}},[t("j-dict-select-seach-tag",{attrs:{triggerChange:!0,dictCode:e.dictTrainStr},on:{select:e.onTrainSelect},model:{value:e.inModelInfo.trainNo,callback:function(t){e.$set(e.inModelInfo,"trainNo",t)},expression:"inModelInfo.trainNo"}})],1)],1),t("a-col",{attrs:{span:11}},[t("a-form-model-item",{attrs:{label:"接收日期",wrapperCol:{span:18},prop:"transferDateM"}},[t("a-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"交接日期"},model:{value:e.inModelInfo.transferDateM,callback:function(t){e.$set(e.inModelInfo,"transferDateM",t)},expression:"inModelInfo.transferDateM"}})],1)],1),t("a-col",{attrs:{span:11}},[t("a-form-model-item",{attrs:{label:"工程师",wrapperCol:{span:18},prop:"engineerId"}},[t("div",{on:{click:function(t){return e.showUserModal(2)}}},[t("a-select",{ref:"userSelect2",attrs:{placeholder:"请选择人员",open:!1},model:{value:e.inModelInfo.engineerName,callback:function(t){e.$set(e.inModelInfo,"engineerName",t)},expression:"inModelInfo.engineerName"}},[t("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)])],1),t("a-col",{attrs:{span:11}},[t("a-form-model-item",{attrs:{label:"作业班组",wrapperCol:{span:18},prop:"sendGroupId"}},[t("j-dict-select-tag",{attrs:{triggerChange:!0,dictCode:e.dictGroupStr},model:{value:e.inModelInfo.sendGroupId,callback:function(t){e.$set(e.inModelInfo,"sendGroupId",t)},expression:"inModelInfo.sendGroupId"}})],1)],1),t("a-col",{attrs:{span:11}},[t("a-form-model-item",{attrs:{label:"接收人",wrapperCol:{span:18},prop:"receiveUser"}},[t("div",{on:{click:function(t){return e.showUserModal(1)}}},[t("a-select",{ref:"userSelect1",attrs:{placeholder:"请选择人员",open:!1},model:{value:e.inModelInfo.receiveUserName,callback:function(t){e.$set(e.inModelInfo,"receiveUserName",t)},expression:"inModelInfo.receiveUserName"}},[t("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)])],1),t("a-col",{attrs:{span:11}},[t("a-form-model-item",{attrs:{label:"移交厂商",wrapperCol:{span:18},prop:"supplierId"}},[t("a-select",{ref:"mySupplierSelectIn",attrs:{placeholder:"请选择厂商",open:!1,showArrow:!0},on:{focus:function(t){return e.openSupplierModal(2)}},model:{value:e.inModelInfo.supplierName,callback:function(t){e.$set(e.inModelInfo,"supplierName",t)},expression:"inModelInfo.supplierName"}},[t("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)],1),t("a-col",{attrs:{span:11}},[t("a-form-model-item",{attrs:{label:"移交人员",wrapperCol:{span:18},prop:"transferUserId"}},[t("a-input",{attrs:{maxLength:17,placeholder:"移交人员"},model:{value:e.inModelInfo.transferUserId,callback:function(t){e.$set(e.inModelInfo,"transferUserId",t)},expression:"inModelInfo.transferUserId"}})],1)],1),t("a-col",{attrs:{span:11}},[t("a-form-model-item",{attrs:{label:"所属合同",wrapperCol:{span:18},prop:"contractId"}},[t("j-dict-select-tag",{attrs:{"trigger-change":!0,dictCode:"bu_contract_info,contract_name,id,status<>2"},model:{value:e.inModelInfo.contractId,callback:function(t){e.$set(e.inModelInfo,"contractId",t)},expression:"inModelInfo.contractId"}})],1)],1),t("a-col",{attrs:{span:11}},[t("a-form-model-item",{attrs:{label:"备注",wrapperCol:{span:18},prop:"remark"}},[t("a-input",{attrs:{maxLength:201,placeholder:"备注"},model:{value:e.inModelInfo.remark,callback:function(t){e.$set(e.inModelInfo,"remark",t)},expression:"inModelInfo.remark"}})],1)],1)],1)],1)],1),t("div",{staticClass:"fieldset-wrapper",staticStyle:{height:"calc(100% - 284px)"}},[t("h4",{staticClass:"title"},[e._v("交接部件")]),t("div",{staticStyle:{"padding-bottom":"10px"}},[t("a-space",[t("a-button",{on:{click:e.onAddInPart}},[e._v("添加")]),t("a-button",{on:{click:e.onDeleteInPart}},[e._v("删除")])],1)],1),t("vxe-table",{key:"inTable",ref:"inTable",attrs:{border:"",align:"center",data:e.inModelInfo.outinDetails,"edit-config":{trigger:"manual",mode:"row"},"show-overflow":"tooltip","checkbox-config":{trigger:"row",highlight:!0,range:!0}}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),t("vxe-table-column",{attrs:{field:"trainNo",title:"车号",width:"100"}}),t("vxe-table-column",{attrs:{field:"assetName",title:"委外部件","header-align":"center",align:"left","min-width":"140"}}),t("vxe-table-column",{attrs:{field:"assetNo",title:"部件编号","min-width":"140"}}),t("vxe-table-column",{attrs:{field:"facadeStatus_dictText",title:"外观状态",width:"100"}}),t("vxe-table-column",{attrs:{field:"mixtoolStatus_dictText",title:"工装状态",width:"100"}}),t("vxe-table-column",{attrs:{field:"remark",title:"备注","min-width":"160","header-align":"center",align:"left"}})],1)],1)]):e._e()]),t("supplier-list",{ref:"supplierModal",attrs:{multiple:!1},on:{ok:e.supplierSelect}}),t("out-part-modal",{ref:"outPartModal",attrs:{lineId:e.outModelInfo.lineId,trainNo:e.outModelInfo.trainNo,"exist-assets":e.outModelInfo.outinDetails},on:{ok:e.onOutPartOk}}),t("user-list",{ref:"tUserModalForm",attrs:{multiple:!1},on:{ok:e.onUserSelect}}),t("in-part-modal",{ref:"inPartModal",attrs:{lineId:e.inModelInfo.lineId,trainNo:e.inModelInfo.trainNo,"exist-assets":e.outModelInfo.outinDetails},on:{ok:e.onInPartOk}})],1)},n=[],a=o("ca00"),i=o("769e"),l=o("d4bc"),s=o("b245"),c=o("a6df"),u=o("b9c3"),d=(o("8fad"),o("c1df")),f=o.n(d),m={components:{UserList:s["default"],SupplierList:i["default"],OutPartModal:l["default"],InPartModal:c["default"]},data:function(){return{transferDateMKey:0,orderType:0,visible:!1,confirmLoading:!1,dictTrainStr:"",oTransferDateMKey:0,userSelectType:1,supplierSelectType:1,curSelectTrainStructId:"",dictGroupStr:"",outModelInfo:{billType:0,transferDateM:"",billNo:"",outinName:"",lineId:"",trainNo:"",engineerId:"",engineerName:"",sendGroupId:"",transferUserId:"",transferUserName:"",supplierId:"",supplierName:"",receiveUser:"",contractId:"",remark:"",outinDetails:[]},inModelInfo:{billType:1,billNo:"",outinName:"",lineId:"",trainNo:"",transferDateM:"",engineerId:"",engineerName:"",sendGroupId:"",receiveUser:"",receiveUserName:"",supplierName:"",transferUserId:"",contractId:"",supplierId:"",remark:"",outinDetails:[]},outRules:{billNo:[{required:!1,message:"请填写交接单号!"}],outinName:[{required:!0,message:"请填写交接单名称!"}],lineId:[{required:!0,message:"请选择线路!"}],trainNo:[{required:!0,message:"请选择车辆!"}],transferUserId:[{required:!0,message:"请选择移交人!"}],receiveUser:[{max:32,message:"不能超过32个字符!"}],transferDateM:[{required:!0,message:"请选择交接日期!"}],engineerId:[{required:!0,message:"请选择工程师!"}],sendGroupId:[{required:!0,message:"请选择作业班组!"}],supplierId:[{required:!0,message:"请选择接收厂商!"}],contractId:[{required:!0,message:"请选择所属合同!"}],remark:[{required:!1,max:200,message:"不能超过200个字符!"}]},inRules:{billNo:[{required:!1,message:"请填写交接单号!"}],outinName:[{required:!0,message:"请填写交接单名称!"}],lineId:[{required:!0,message:"请选择线路!"}],trainNo:[{required:!0,message:"请选择车辆!"}],receiveUser:[{required:!0,message:"请选择接收人!"}],transferUserId:[{max:32,message:"不能超过32个字符!"}],transferDateM:[{required:!0,message:"请选择交接日期!"}],engineerId:[{required:!0,message:"请选择工程师!"}],sendGroupId:[{required:!0,message:"请选择作业班组!"}],supplierId:[{required:!0,message:"请选择移交厂商!"}],contractId:[{required:!0,message:"请选择所属合同!"}],remark:[{required:!1,max:200,message:"不能超过200个字符!"}]}}},methods:{saveOutInInfo:function(){0===this.orderType&&this.saveOutInfo(),1===this.orderType&&this.saveInInfo()},saveOutInfo:function(){var e=this;this.$refs.outInfoForm.validate((function(t){if(t){if(!e.outModelInfo.outinDetails||e.outModelInfo.outinDetails.length<1)return void e.$message.warning("没有添加任何交接部件，请添加");e.outModelInfo.transferDate=e.outModelInfo.transferDateM.format("YYYY-MM-DD"),e.confirmLoading=!0,Object(u["db"])(e.outModelInfo).then((function(t){t.success?(e.$message.success("保存成功"),e.$emit("ok"),e.handleCancel()):e.$message.error("保存失败")})).finally((function(){e.confirmLoading=!1}))}}))},saveInInfo:function(){var e=this;this.$refs.inInfoForm.validate((function(t){if(t){if(!e.inModelInfo.outinDetails||e.inModelInfo.outinDetails.length<1)return void e.$message.warning("没有添加任何交接部件，请添加");e.inModelInfo.transferDate=e.inModelInfo.transferDateM.format("YYYY-MM-DD"),e.confirmLoading=!0,Object(u["db"])(e.inModelInfo).then((function(t){t.success?(e.$message.success("保存成功"),e.$emit("ok"),e.handleCancel()):e.$message.error("保存失败")})).finally((function(){e.confirmLoading=!1}))}}))},add:function(e){this.edit(!1,e)},edit:function(e,t){Object.assign(this.$data,this.$options.data()),this.dictGroupStr="bu_mtr_workshop_group,group_name,id,workshop_id='"+this.$store.getters.userInfo.workshopId+"'|workshop_id",this.visible=!0,e?(this.isEditor=!0,this.orderType=e.billType,0===e.billType?(this.outModelInfo=Object.assign(this.outModelInfo,e),this.outModelInfo.transferDateM=f()(e.transferDateM)):(this.inModelInfo=Object.assign(this.inModelInfo,e),this.inModelInfo.transferDateM=f()(e.transferDateM))):this.orderType=t},handleCancel:function(){this.close()},onDeleteOutPart:function(){var e=this,t=this.$refs.outTable.getCheckboxRecords(),o=t.map((function(e){return e.id}));t.length>0?this.$confirm({content:"是否删除选中".concat(t.length,"条数据？"),onOk:function(){for(var t=e.outModelInfo.outinDetails.length-1;t>=0;t--){var r=e.outModelInfo.outinDetails[t];o.indexOf(r.id)>-1&&e.outModelInfo.outinDetails.splice(t,1)}}}):this.$message.error("尚未选中任何数据!")},openSupplierModal:function(e){1===e?(this.supplierSelectType=1,this.$refs.supplierModal.showModal(),this.$refs.mySupplierSelectOut.blur()):(this.supplierSelectType=2,this.$refs.supplierModal.showModal(),this.$refs.mySupplierSelectIn.blur())},onUserSelect:function(e){e.length&&(1===this.userSelectType?0===this.orderType?(this.outModelInfo.transferUserId=e[0].id,this.outModelInfo.transferUserName=e[0].realname,this.$refs.outInfoForm.validateField("transferUserId")):1===this.orderType&&(this.inModelInfo.receiveUser=e[0].id,this.inModelInfo.receiveUserName=e[0].realname,this.$refs.inInfoForm.validateField("receiveUser")):2===this.userSelectType&&(0===this.orderType?(this.outModelInfo.engineerId=e[0].id,this.outModelInfo.engineerName=e[0].realname,this.$refs.outInfoForm.validateField("engineerId")):1===this.orderType&&(this.inModelInfo.engineerId=e[0].id,this.inModelInfo.engineerName=e[0].realname,this.$refs.inInfoForm.validateField("engineerId")))),this.$forceUpdate()},supplierSelect:function(e){Object(a["e"])(e)||(1===this.supplierSelectType?(this.outModelInfo.supplierId=e[0].id,this.outModelInfo.supplierName=e[0].name,this.$refs.outInfoForm.validateField("supplierId")):(this.inModelInfo.supplierId=e[0].id,this.inModelInfo.supplierName=e[0].name,this.$refs.inInfoForm.validateField("supplierId")))},onOutPartOk:function(e){this.outModelInfo.outinDetails.push(e)},onInPartOk:function(e){this.inModelInfo.outinDetails.push(e)},showUserModal:function(e){switch(this.userSelectType=e,this.$refs.tUserModalForm.showModal(),e){case 1:this.$refs.userSelect1.blur();break;case 2:this.$refs.userSelect2.blur();break}},close:function(){this.$emit("close"),this.visible=!1},onAddOutPart:function(){this.outModelInfo.lineId&&this.outModelInfo.trainNo?(this.outModelInfo.outinDetails||(this.outModelInfo.outinDetails=[]),this.$refs.outPartModal.showModal(this.curSelectTrainStructId)):this.$message.warning("请先选择线路和车辆！")},onDeleteInPart:function(){var e=this,t=this.$refs.inTable.getCheckboxRecords(),o=t.map((function(e){return e.id}));t.length>0?this.$confirm({content:"是否删除选中".concat(t.length,"条数据？"),onOk:function(){for(var t=e.inModelInfo.outinDetails.length-1;t>=0;t--){var r=e.inModelInfo.outinDetails[t];o.indexOf(r.id)>-1&&e.inModelInfo.outinDetails.splice(t,1)}}}):this.$message.error("尚未选中任何数据!")},onAddInPart:function(){this.inModelInfo.lineId&&this.inModelInfo.trainNo?(this.inModelInfo.outinDetails||(this.inModelInfo.outinDetails=[]),this.$refs.inPartModal.showModal(this.curSelectTrainStructId)):this.$message.warning("请先选择线路和车辆！")},otransFerDateMkey:function(){var e=this;this.oTransferDateMKey++,this.$nextTick((function(){e.$refs.outInfoForm.validateField("transferDateM")}))},onTrainSelect:function(e,t){t&&(this.curSelectTrainStructId=t.extFields[0].train_struct_id)},onLineChange:function(e,t){this.dictTrainStr=e?"bu_train_info,train_no,train_no,line_id="+e+"|train_struct_id":""}}},p=m,h=(o("17625"),o("2877")),b=Object(h["a"])(p,r,n,!1,null,"18c3855e",null);t["default"]=b.exports},"412f":function(e,t,o){},4677:function(e,t,o){"use strict";o("412f")},"769e":function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"80%",title:"厂商选择",visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",centered:"",destroyOnClose:!0,bodyStyle:{height:"80vh"}},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"名称"}},[t("a-input",{attrs:{placeholder:"请输入名称"},model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,"name",t)},expression:"queryParam.name"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"修程类型"}},[t("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_repair_program,name,id"},model:{value:e.queryParam.repairProgramId,callback:function(t){e.$set(e.queryParam,"repairProgramId",t)},expression:"queryParam.repairProgramId"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"所属线路"}},[t("line-select-list",{model:{value:e.queryParam.lineId,callback:function(t){e.$set(e.queryParam,"lineId",t)},expression:"queryParam.lineId"}})],1)],1),t("a-col",{attrs:{md:4,sm:24}},[t("a-form-item",{attrs:{label:"状态"}},[t("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_effective"},model:{value:e.queryParam.status,callback:function(t){e.$set(e.queryParam,"status",t)},expression:"queryParam.status"}})],1)],1),t("a-col",{attrs:{md:4,sm:8}},[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-space",[t("a-button",{on:{click:e.findList}},[e._v("查询")])],1)],1)])],1)],1)],1),t("div",{staticStyle:{height:"calc(80vh - 130px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(80vh - 130px)"},attrs:{border:"","max-height":"100%",align:e.allAlign,data:e.tableData,"highlight-current-row":"","show-overflow":"tooltip","radio-config":e.multiple?{}:{trigger:"row"},"checkbox-config":e.multiple?{trigger:"row",highlight:!0,range:!0}:{},"edit-config":{trigger:"click",mode:"cell",showIcon:"true"}}},[e.multiple?t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}):t("vxe-table-column",{attrs:{type:"radio",width:"40"}}),t("vxe-table-column",{attrs:{field:"name",title:"厂商名称","min-width":"140","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{field:"shortName",title:"厂商简称","min-width":"120"}}),t("vxe-table-column",{attrs:{field:"category_dictText",title:"厂商类别",width:"80"}}),t("vxe-table-column",{attrs:{field:"repairProgramName",title:"所属修程",width:"8%"}}),t("vxe-table-column",{attrs:{field:"lineName",title:"所属线路",width:"8%"}}),t("vxe-table-column",{attrs:{field:"contactName",title:"联系人员",width:"80"}}),t("vxe-table-column",{attrs:{field:"contactPhone",title:"联系电话",width:"100","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{field:"email",title:"邮箱",width:"100","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{field:"address",title:"地址","min-width":"120","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{field:"appraise",title:"评分",width:"80","header-align":"center",align:"right"}}),t("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",width:"80"}}),t("vxe-table-column",{attrs:{field:"remarks",title:"备注","min-width":"120","header-align":"center",align:"left"}})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1)])},n=[],a=o("d214"),i=o("5633"),l={name:"SupplierList",components:{LineSelectList:i["default"]},props:{multiple:{type:Boolean,default:!0}},data:function(){return{queryParam:{category:null,name:"",objTypeId:"",status:null,lineId:"",repairProgramId:"",pageNo:1,pageSize:10},allAlign:"center",totalResult:0,tableData:[],visible:!1,confirmLoading:!1,formItemLayout:{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}}}},methods:{showModal:function(){this.visible=!0,this.findList()},findList:function(){var e=this;this.loading=!0,Object(a["eb"])(this.queryParam).then((function(t){e.totalResult=t.result.total,e.loading=!1,e.tableData=t.result.records}))},handlePageChange:function(e){var t=e.currentPage,o=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=o,this.findList()},handleOk:function(){var e=[];this.multiple?e=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&e.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",e),this.close()},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,this.queryParam.searchText=""}}},s=l,c=(o("cc0c"),o("2877")),u=Object(c["a"])(s,r,n,!1,null,"2c33e9dc",null);t["default"]=u.exports},9527:function(e,t,o){},a6df:function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,width:800,visible:e.visible,confirmLoading:e.confirmLoading,centered:"",cancelText:"关闭",destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("div",{staticStyle:{padding:"0px 20px"}},[t("a-form-model",{ref:"outPartForm",attrs:{model:e.modalInfo,rules:e.modalRules,"label-col":{span:5},"wrapper-col":{span:18}}},[t("a-form-model-item",{attrs:{"label-col":e.labelCol,"wrapper-col":e.wrapperCol,label:"线路",prop:"lineId"}},[t("j-dict-select-tag",{attrs:{disabled:"",triggerChange:!0,dictCode:"bu_mtr_line,line_name,line_id"},on:{change:e.onLineChange},model:{value:e.modalInfo.lineId,callback:function(t){e.$set(e.modalInfo,"lineId",t)},expression:"modalInfo.lineId"}})],1),t("a-form-model-item",{attrs:{"label-col":e.labelCol,"wrapper-col":e.wrapperCol,label:"车号",prop:"trainNo"}},[t("j-dict-select-seach-tag",{attrs:{disabled:"",triggerChange:!0,dictCode:e.dictTrainStr},model:{value:e.modalInfo.trainNo,callback:function(t){e.$set(e.modalInfo,"trainNo",t)},expression:"modalInfo.trainNo"}})],1),t("a-form-model-item",{attrs:{"label-col":e.labelCol,"wrapper-col":e.wrapperCol,label:"设备选择",prop:"turnoverAssetId"}},[t("div",{on:{click:e.selectAsset}},[t("a-select",{ref:"assetSelect",attrs:{placeholder:"请选择送修设备","allow-clear":"",open:!1,showArrow:!0},model:{value:e.modalInfo.assetName,callback:function(t){e.$set(e.modalInfo,"assetName",t)},expression:"modalInfo.assetName"}},[t("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)]),t("a-form-model-item",{attrs:{"label-col":e.labelCol,"wrapper-col":e.wrapperCol,label:"外观状态",prop:"facadeStatus"}},[t("a-select",{model:{value:e.modalInfo.facadeStatus,callback:function(t){e.$set(e.modalInfo,"facadeStatus",t)},expression:"modalInfo.facadeStatus"}},[t("a-select-option",{attrs:{value:"0"}},[e._v(" 无问题 ")]),t("a-select-option",{attrs:{value:"1"}},[e._v(" 有问题 ")])],1)],1),"1"===e.modalInfo.facadeStatus?t("a-form-model-item",{attrs:{"label-col":e.labelCol,"wrapper-col":e.wrapperCol,label:"外观描述",prop:"facadeDesc"}},[t("a-input",{model:{value:e.modalInfo.facadeDesc,callback:function(t){e.$set(e.modalInfo,"facadeDesc",t)},expression:"modalInfo.facadeDesc"}})],1):e._e(),t("a-form-model-item",{attrs:{"label-col":e.labelCol,"wrapper-col":e.wrapperCol,label:"工装状态",prop:"mixtoolStatus"}},[t("a-select",{model:{value:e.modalInfo.mixtoolStatus,callback:function(t){e.$set(e.modalInfo,"mixtoolStatus",t)},expression:"modalInfo.mixtoolStatus"}},[t("a-select-option",{attrs:{value:"0"}},[e._v(" 无问题 ")]),t("a-select-option",{attrs:{value:"1"}},[e._v(" 有问题 ")])],1)],1),"1"===e.modalInfo.mixtoolStatus?t("a-form-model-item",{attrs:{"label-col":e.labelCol,"wrapper-col":e.wrapperCol,label:"工装描述",prop:"mixtoolDesc"}},[t("a-input",{model:{value:e.modalInfo.mixtoolDesc,callback:function(t){e.$set(e.modalInfo,"mixtoolDesc",t)},expression:"modalInfo.mixtoolDesc"}})],1):e._e(),t("a-form-model-item",{attrs:{"label-col":e.labelCol,"wrapper-col":e.wrapperCol,label:"备注",prop:"remark"}},[t("a-textarea",{attrs:{"auto-size":{minRows:3,maxRows:6},placeholder:"请输入备注信息"},model:{value:e.modalInfo.remark,callback:function(t){e.$set(e.modalInfo,"remark",t)},expression:"modalInfo.remark"}})],1)],1)],1),t("out-asset-list",{ref:"assetSelectModal",on:{ok:e.onSelectAsset}})],1)},n=[],a=o("ca00"),i=o("a821"),l={name:"OutPartModal",components:{OutAssetList:i["default"]},props:{title:{type:String,default:"部件添加"},lineId:{type:String,default:""},trainNo:{type:String,default:""},existAssets:{type:Array,default:function(){return[]}}},data:function(){return{visible:!1,confirmLoading:!1,modalInfo:{turnoverAssetId:"",facadeStatus:"0",mixtoolStatus:"0",fault:"0",remark:""},modalRules:{turnoverAssetId:[{required:!0,message:"请选择部件"}],facadeStatus:[{required:!0,message:"请选择外观状态"}],mixtoolStatus:[{required:!0,message:"请选择工装状态"}]},dictTrainStr:"",structureId:"",labelCol:{span:3},wrapperCol:{span:20}}},methods:{showModal:function(e){this.structureId=e,this.visible=!0,this.modalInfo.lineId=this.lineId,this.lineId&&(this.dictTrainStr="bu_train_info,train_no,id,line_id="+this.lineId),this.modalInfo.trainNo=this.trainNo,this.modalInfo.assetName="",this.modalInfo.turnoverAssetId="",this.modalInfo.remark=""},onLineChange:function(e,t){this.dictTrainStr=t?"bu_train_info,train_no,id,line_id="+t.value:""},handleOk:function(){var e=this;this.$refs.outPartForm.validate((function(t){if(t){if(e.checkAssetIsExist(e.modalInfo.turnoverAssetId))return void e.$message.warning("你选择的设备已经存在委外设备列表中,不能重复添加");e.$emit("ok",e.modalInfo),e.close()}}))},checkAssetIsExist:function(e){var t=this.existAssets.filter((function(t){return t.turnoverAssetId===e}));return t.length>0},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1},selectAsset:function(){this.$refs.assetSelectModal.showModal(this.modalInfo.trainNo),this.$refs.assetSelect.blur()},onSelectAsset:function(e){if(e&&e.length>0){var t=e[0];this.modalInfo.id=Object(a["p"])(),this.modalInfo.outinId="",this.modalInfo.assetNo=t.assetNo,this.modalInfo.assetName=t.assetName,this.modalInfo.amount=t.amount,this.modalInfo.assetTypeId=t.assetTypeId,this.modalInfo.assetTypeName=t.assetTypeName,this.modalInfo.trainNo=t.trainNo,this.modalInfo.turnoverAssetId=t.turnoverAssetId,this.modalInfo.facadeStatus=t.facadeStatus,this.modalInfo.facadeStatus_dictText="1"===this.modalInfo.facadeStatus?"有问题":"无问题",this.modalInfo.facadeDesc=t.facadeDesc,this.modalInfo.mixtoolStatus=t.mixtoolStatus,this.modalInfo.mixtoolStatus_dictText="1"===this.modalInfo.mixtoolStatus?"有问题":"无问题",this.modalInfo.mixtoolDesc=t.mixtoolDesc,this.modalInfo.fault=t.fault,this.modalInfo.fault_dictText="1"===this.modalInfo.fault?"是":"否",this.modalInfo.returnStatus=1,this.modalInfo.returnStatus_dictText="是",this.modalInfo.returnTime=t.returnTime,this.modalInfo.delayReason=t.delayReason,this.modalInfo.remark=t.remark,this.modalInfo.outDetailId=t.outDetailId,this.modalInfo.qualityDate=t.qualityDate,this.modalInfo.qualityDay=t.qualityDay,this.$forceUpdate()}}}},s=l,c=o("2877"),u=Object(c["a"])(s,r,n,!1,null,"411b84f8",null);t["default"]=u.exports},a821:function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"90%",title:"委外设备选择",visible:e.visible,confirmLoading:e.loading,cancelText:"关闭",destroyOnClose:!0,centered:"",bodyStyle:{height:"80vh"}},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.findList.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:7,sm:24}},[t("a-form-item",{attrs:{label:"设备名称"}},[t("a-input",{attrs:{placeholder:"请输入工器具名称或编码",allowClear:""},model:{value:e.queryParam.assetName,callback:function(t){e.$set(e.queryParam,"assetName",t)},expression:"queryParam.assetName"}})],1)],1),t("a-col",{attrs:{md:3,sm:8}},[t("a-button",{on:{click:e.findList}},[e._v("查询")])],1)],1)],1)],1),t("div",{staticStyle:{height:"calc(80vh - 130px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(80vh - 130px)"},attrs:{border:"","max-height":"100%",align:e.allAlign,data:e.tableData,"show-overflow":"ellipsis","radio-config":e.multiple?{}:{trigger:"row"},"checkbox-config":e.multiple?{trigger:"row",highlight:!0,range:!0}:{},"edit-config":{trigger:"click",mode:"cell",showIcon:"true"}}},[e.multiple?t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}):t("vxe-table-column",{attrs:{type:"radio",width:"40"}}),t("vxe-table-column",{attrs:{field:"assetNo",title:"部件编号"}}),t("vxe-table-column",{attrs:{field:"assetName",title:"部件名称"}}),t("vxe-table-column",{attrs:{field:"lineName",title:"所属线路"}}),t("vxe-table-column",{attrs:{field:"trainNo",title:"所属车辆"}}),t("vxe-table-column",{attrs:{field:"outinNo",title:"出厂单编号"}}),t("vxe-table-column",{attrs:{field:"outinName",title:"出厂单编号"}}),t("vxe-table-column",{attrs:{field:"transferDate",title:"移交日期"}}),t("vxe-table-column",{attrs:{field:"contractNo",title:"所属合同编号"}}),t("vxe-table-column",{attrs:{field:"contractName",title:"所属合同名称"}}),t("vxe-table-column",{attrs:{field:"remark",title:"出厂备注"}})],1)],1)])},n=[],a=o("b9c3"),i={name:"OutAssetList",props:{multiple:{type:Boolean,default:!1}},data:function(){return{visible:!1,loading:!1,queryParam:{assetTypeId:"",trainNo:"",assetName:""},allAlign:"center",totalResult:0,tableData:[]}},methods:{showModal:function(e){this.queryParam.trainNo=e,this.visible=!0,this.findList()},findList:function(){var e=this;this.loading=!0,Object(a["y"])(this.queryParam).then((function(t){t.success?(e.loading=!1,e.tableData=t.result):e.$message.error("查询设备失败")}))},handleOk:function(){var e=[];this.multiple?e=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&e.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",e),this.visible=!1},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},l=i,s=o("2877"),c=Object(s["a"])(l,r,n,!1,null,"2cc8c558",null);t["default"]=c.exports},b245:function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"85%",title:"人员选择",visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",bodyStyle:{height:"70vh"},destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-row",[t("a-col",{attrs:{md:4,sm:24}},[t("div",{staticStyle:{height:"calc(70vh - 20px)","border-right":"1px solid #e3e1e1","margin-right":"15px"}},[e.treeData&&e.treeData.length>0?t("a-tree",{staticClass:"limitHeight",attrs:{defaultSelectedKeys:[e.queryParam.depId],defaultExpandAll:!0,"tree-data":e.treeData},on:{select:e.onSelect}}):e._e()],1)]),t("a-col",{attrs:{md:20,sm:24}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.findList.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"账号"}},[t("a-input",{attrs:{placeholder:"请输入用户账号"},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"真实名字"}},[t("a-input",{attrs:{placeholder:"请输入真实名字"},model:{value:e.queryParam.realname,callback:function(t){e.$set(e.queryParam,"realname",t)},expression:"queryParam.realname"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"手机号码"}},[t("a-input",{attrs:{placeholder:"请输入手机号码"},model:{value:e.queryParam.phone,callback:function(t){e.$set(e.queryParam,"phone",t)},expression:"queryParam.phone"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"角色"}},[t("j-dict-select-tag",{attrs:{triggerChange:!0,dictCode:"sys_role,role_name,id",placeholder:"选择角色"},model:{value:e.queryParam.roleId,callback:function(t){e.$set(e.queryParam,"roleId",t)},expression:"queryParam.roleId"}})],1)],1),t("a-col",{attrs:{md:2,sm:8}},[t("a-button",{on:{click:e.findList}},[e._v("查询")])],1)],1)],1)],1),t("div",{staticStyle:{height:"calc(70vh - 130px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(70vh - 130px)"},attrs:{border:"",align:e.allAlign,data:e.tableData,"max-height":"100%","show-overflow":"tooltip","radio-config":e.multiple?{}:{trigger:"row"},"checkbox-config":e.multiple?{trigger:"row",highlight:!0,range:!0}:{},"edit-config":{trigger:"manual",mode:"row"}}},[e.multiple?t("vxe-table-column",{attrs:{type:"checkbox",width:"5%"}}):t("vxe-table-column",{attrs:{type:"radio",width:"5%"}}),t("vxe-table-column",{attrs:{field:"workNo",title:"工号",width:"100",align:"center"}}),t("vxe-table-column",{attrs:{field:"username",title:"用户账号",width:"150",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"realname",title:"用户名字",width:"100",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"roleNames",title:"角色","min-width":"180",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"sex_dictText",title:"性别",width:"80"}}),t("vxe-table-column",{attrs:{field:"phone",title:"手机号码",width:"120"}}),t("vxe-table-column",{attrs:{field:"orgCode",title:"部门",width:"120",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",width:"80"}})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1)])],1)],1)},n=[],a=o("8fad"),i={name:"UserList",props:{multiple:{type:Boolean,default:!0},depId:{type:String,default:""}},data:function(){return{queryParam:{username:"",realname:"",phone:"",orgCode:"",roleId:void 0,pageNo:1,pageSize:10},allAlign:"center",totalResult:0,tableData:[],visible:!1,confirmLoading:!1,treeData:[]}},watch:{depId:function(e){this.$set(this.queryParam,"depId",e||"")}},mounted:function(){this.$set(this.queryParam,"depId",this.depId||"")},methods:{showModal:function(){this.visible=!0,this.findList(),this.getTreeList()},getTreeList:function(){var e=this;Object(a["mb"])().then((function(t){t.success&&(e.treeData=t.result)}))},onSelect:function(e,t){if(e.length){var o=t.node.dataRef;this.queryParam.depId=o.id,this.findList()}else this.queryParam.orgCode="",this.findList()},findList:function(){var e=this;this.loading=!0,Object(a["gc"])(this.queryParam).then((function(t){e.loading=!1,t.success?(e.totalResult=t.result.total,e.tableData=t.result.records):e.$message.error("加载用户数据失败")})).catch((function(t){e.$message.error("加载用户数据异常")})).finally((function(){}))},handlePageChange:function(e){var t=e.currentPage,o=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=o,this.findList()},handleOk:function(){var e=[];this.multiple?e=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&e.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",e),this.visible=!1},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,Object.assign(this.$data,this.$options.data())}}},l=i,s=(o("f76d"),o("2877")),c=Object(s["a"])(l,r,n,!1,null,"4aa7956f",null);t["default"]=c.exports},b9c3:function(e,t,o){"use strict";o.d(t,"lb",(function(){return i})),o.d(t,"f",(function(){return l})),o.d(t,"i",(function(){return s})),o.d(t,"v",(function(){return c})),o.d(t,"b",(function(){return f})),o.d(t,"l",(function(){return m})),o.d(t,"p",(function(){return p})),o.d(t,"G",(function(){return h})),o.d(t,"c",(function(){return d})),o.d(t,"B",(function(){return g})),o.d(t,"k",(function(){return v})),o.d(t,"A",(function(){return I})),o.d(t,"x",(function(){return w})),o.d(t,"g",(function(){return k})),o.d(t,"E",(function(){return x})),o.d(t,"C",(function(){return y})),o.d(t,"M",(function(){return O})),o.d(t,"kb",(function(){return M})),o.d(t,"O",(function(){return N})),o.d(t,"N",(function(){return C})),o.d(t,"jb",(function(){return _})),o.d(t,"t",(function(){return P})),o.d(t,"d",(function(){return T})),o.d(t,"W",(function(){return D})),o.d(t,"X",(function(){return q})),o.d(t,"e",(function(){return R})),o.d(t,"o",(function(){return A})),o.d(t,"V",(function(){return U})),o.d(t,"R",(function(){return z})),o.d(t,"Q",(function(){return F})),o.d(t,"K",(function(){return Y})),o.d(t,"L",(function(){return K})),o.d(t,"fb",(function(){return ge})),o.d(t,"bb",(function(){return H})),o.d(t,"Y",(function(){return W})),o.d(t,"J",(function(){return V})),o.d(t,"hb",(function(){return ae})),o.d(t,"U",(function(){return ie})),o.d(t,"eb",(function(){return X})),o.d(t,"cb",(function(){return Z})),o.d(t,"a",(function(){return ee})),o.d(t,"j",(function(){return ue})),o.d(t,"nb",(function(){return de})),o.d(t,"gb",(function(){return fe})),o.d(t,"m",(function(){return me})),o.d(t,"H",(function(){return Ie})),o.d(t,"T",(function(){return E})),o.d(t,"S",(function(){return L})),o.d(t,"mb",(function(){return G})),o.d(t,"z",(function(){return pe})),o.d(t,"db",(function(){return he})),o.d(t,"y",(function(){return be})),o.d(t,"u",(function(){return u})),o.d(t,"F",(function(){return b})),o.d(t,"ob",(function(){return $})),o.d(t,"q",(function(){return S})),o.d(t,"D",(function(){return j})),o.d(t,"ib",(function(){return te})),o.d(t,"n",(function(){return oe})),o.d(t,"I",(function(){return Q})),o.d(t,"P",(function(){return B})),o.d(t,"s",(function(){return le})),o.d(t,"Z",(function(){return se})),o.d(t,"ab",(function(){return ce})),o.d(t,"h",(function(){return re})),o.d(t,"w",(function(){return ne})),o.d(t,"r",(function(){return J}));var r=o("0fea"),n=o("4328"),a=o.n(n),i=function(e){return Object(r["j"])("/group/fault/info/submit",e)},l=function(e){return Object(r["j"])("/group/fault/info/cancel",e)},s=function(e){return Object(r["j"])("/group/fault/info/delete",e)},c=function(e){return Object(r["d"])("/group/fault/info/page",e)},u=function(e){return Object(r["d"])("/group/fault/info/get",e)},d=function(e){return Object(r["j"])("/group/safeassume/read/add",e)},f=function(e){return Object(r["j"])("/group/safeassume/add",e)},m=function(e){return Object(r["j"])("/group/safeassume/delete",e)},p=function(e){return Object(r["j"])("/group/safeassume/edit",e)},h=function(e){return Object(r["d"])("/group/safeassume/page",e)},b=function(e){return Object(r["d"])("/group/safeassume/get",e)},g=function(e){return Object(r["d"])("/group/turnoverchange/page",e)},I=function(e){return Object(r["d"])("/material/spare-part/get",e)},v=function(e){return Object(r["j"])("/group/turnoverchange/delete",e)},w=function(e){return Object(r["d"])("/group/measurealert/page",e)},k=function(e){return Object(r["j"])("/group/measurealert/close",e)},x=function(e){return Object(r["d"])("/group/spare-part/page",e)},y=function(e){return Object(r["d"])("/group/spare-part/get",e)},j=function(e){return Object(r["d"])("/produce/train/history/asset/use/page",e)},O=function(e){return Object(r["d"])("/group/toolequipment/page",e)},M=function(e){return Object(r["j"])("/group/toolequipment/setStatus",e)},S=function(e){return Object(r["d"])("/group/toolequipment/usage",e)},N=function(e){return Object(r["d"])("/group/tool/page",e)},C=function(e){return Object(r["d"])("/group/tool/get",e)},_=function(e){return Object(r["j"])("/group/tool/setDutyUser",e)},$=function(e){return Object(r["d"])("/group/tool/usage",e)},P=function(e){return Object(r["d"])("/group/information/basic",e)},T=function(e){return Object(r["j"])("/group/information/tools/add",e)},D=function(e){return Object(r["d"])("/group/information/workstation/page-related",e)},q=function(e){return Object(r["d"])("/group/information/workstation/page-unrelated",e)},R=function(e){return Object(r["j"])("/group/information/workstation/add",e)},A=function(e){return Object(r["j"])("/group/information/workstation/delete",e)},L=function(e){return Object(r["d"])("/workGroup/workOrder/relevanceInfo/".concat(e))},G=function(e){return Object(r["j"])("/workGroup/workOrder/submit-to-dispatcher",a.a.stringify(e))},U=function(e){return Object(r["d"])("/workGroup/workRecord/list",e)},F=function(e){return Object(r["d"])("/serialPlan/plan/forms/online-form/get",e)},z=function(e){return Object(r["d"])("/serialPlan/plan/forms/work-record/get",e)},B=function(e){return Object(r["d"])("/serialPlan/plan/forms/check-record/get",e)},E=function(e){return Object(r["d"])("/workGroup/workOrder/page",e)},J=function(e){return Object(r["d"])("/workGroup/workOrder/apply/page",e)},Y=function(e){return Object(r["d"])("/workGroup/workRecord/recordForm",e)},K=function(e){return Object(r["d"])("/workGroup/workRecord/relevanceInfo/".concat(e))},Q=function(e){return Object(r["d"])("/workGroup/workRecord/relevanceInfo/bookSteps/".concat(e))},H=function(e){return Object(r["j"])("/workGroup/workRecord/save/form-result",e)},W=function(e){return Object(r["j"])("/workGroup/workRecord/check",e)},V=function(e){return Object(r["j"])("/workGroup/workRecord/getTaskQRCode",e)},X=function(e){return Object(r["j"])("/workGroup/workRecord/work-record/save-manufNo",a.a.stringify(e))},Z=function(e){return Object(r["j"])("/workGroup/workRecord/save/material",e)},ee=function(e){return Object(r["j"])("/workGroup/workRecord/save/actMaterial",e)},te=function(e){return Object(r["j"])("/workGroup/workRecord/save/work-time",e)},oe=function(e){return Object(r["j"])("/workGroup/workRecord/arrange/delete",e)},re=function(e){return Object(r["j"])("/workGroup/workOrder/material/commit-temp-apply",e)},ne=function(e){return Object(r["d"])("/workGroup/workOrder/material/apply/list",e)},ae=function(e){return Object(r["j"])("/workGroup/workRecord/check/saveExcelData",e)},ie=function(e){return Object(r["d"])("/workGroup/workRecord/get/excelData/".concat(e))},le=function(e){return Object(r["d"])("/serialPlan/plan/forms/check-record/item/list",e)},se=function(e){return Object(r["j"])("/workGroup/workRecord/check-record/set-check",e)},ce=function(e){return Object(r["j"])("/workGroup/workRecord/check-record/set-time",e)},ue=function(e){return Object(r["j"])("/workGroup/workRecord/delete/material",a.a.stringify(e))},de=function(e){return Object(r["j"])("/workGroup/workRecord/submit-task",e)},fe=function(e){return Object(r["j"])("/workGroup/workRecord/save/tool",e)},me=function(e){return Object(r["j"])("/workGroup/workRecord/delete/tool",a.a.stringify(e))},pe=function(e){return Object(r["d"])("/workGroup/workRecord/outsourceOutin",e)},he=function(e){return Object(r["j"])("/workGroup/workRecord/save/outsourceOutin",e)},be=function(e){return Object(r["d"])("/workGroup/workRecord/outin/not-returns",e)},ge=function(e){return Object(r["j"])("/group/safeassume/read/add",a.a.stringify(e))},Ie=function(e){return Object(r["d"])("/serialPlan/plan/page",e)}},cc0c:function(e,t,o){"use strict";o("cdfd")},cdfd:function(e,t,o){},d214:function(e,t,o){"use strict";o.d(t,"h",(function(){return n})),o.d(t,"D",(function(){return a})),o.d(t,"eb",(function(){return i})),o.d(t,"r",(function(){return l})),o.d(t,"b",(function(){return s})),o.d(t,"w",(function(){return c})),o.d(t,"H",(function(){return u})),o.d(t,"I",(function(){return h})),o.d(t,"k",(function(){return d})),o.d(t,"c",(function(){return b})),o.d(t,"x",(function(){return g})),o.d(t,"l",(function(){return v})),o.d(t,"K",(function(){return I})),o.d(t,"a",(function(){return w})),o.d(t,"v",(function(){return k})),o.d(t,"j",(function(){return y})),o.d(t,"F",(function(){return x})),o.d(t,"J",(function(){return f})),o.d(t,"G",(function(){return m})),o.d(t,"t",(function(){return p})),o.d(t,"Q",(function(){return j})),o.d(t,"u",(function(){return O})),o.d(t,"db",(function(){return C})),o.d(t,"q",(function(){return _})),o.d(t,"bb",(function(){return $})),o.d(t,"cb",(function(){return P})),o.d(t,"C",(function(){return N})),o.d(t,"g",(function(){return S})),o.d(t,"P",(function(){return M})),o.d(t,"X",(function(){return q})),o.d(t,"ab",(function(){return A})),o.d(t,"f",(function(){return L})),o.d(t,"p",(function(){return R})),o.d(t,"jb",(function(){return D})),o.d(t,"kb",(function(){return T})),o.d(t,"Z",(function(){return U})),o.d(t,"e",(function(){return F})),o.d(t,"A",(function(){return z})),o.d(t,"n",(function(){return B})),o.d(t,"m",(function(){return J})),o.d(t,"O",(function(){return Q})),o.d(t,"Y",(function(){return H})),o.d(t,"V",(function(){return V})),o.d(t,"gb",(function(){return X})),o.d(t,"hb",(function(){return Z})),o.d(t,"L",(function(){return ee})),o.d(t,"ib",(function(){return te})),o.d(t,"B",(function(){return G})),o.d(t,"y",(function(){return Y})),o.d(t,"d",(function(){return K})),o.d(t,"z",(function(){return W})),o.d(t,"W",(function(){return oe})),o.d(t,"o",(function(){return E})),o.d(t,"fb",(function(){return re})),o.d(t,"i",(function(){return ne})),o.d(t,"E",(function(){return ae})),o.d(t,"s",(function(){return ie})),o.d(t,"M",(function(){return le})),o.d(t,"N",(function(){return se})),o.d(t,"S",(function(){return ce})),o.d(t,"T",(function(){return ue})),o.d(t,"U",(function(){return de})),o.d(t,"R",(function(){return fe}));var r=o("0fea"),n=function(e){return Object(r["j"])("/outsource/supplier/add",e)},a=function(e){return Object(r["j"])("/outsource/supplier/edit",e)},i=function(e){return Object(r["d"])("/outsource/supplier/page",e)},l=function(e){return Object(r["j"])("/outsource/supplier/delete",e)},s=function(e){return Object(r["j"])("/outsource/contractInfo/add",e)},c=function(e){return Object(r["j"])("/outsource/contractInfo/edit",e)},u=function(e){return Object(r["d"])("/outsource/contractInfo/page",e)},d=function(e){return Object(r["j"])("/outsource/contractInfo/delete",e)},f=function(e){return Object(r["d"])("/outsource/contractInfo/monitor",e)},m=function(e){return Object(r["d"])("/outsource/contract/annex/list",e)},p=function(e){return Object(r["j"])("/outsource/contract/annex/delete",e)},h=function(e){return Object(r["d"])("/outsource/contractInfo/price",e)},b=function(e){return Object(r["j"])("/outsource/contractPay/add",e)},g=function(e){return Object(r["j"])("/outsource/contractPay/edit",e)},I=function(e){return Object(r["d"])("/outsource/contractPay/page",e)},v=function(e){return Object(r["j"])("/outsource/contractPay/delete",e)},w=function(e){return Object(r["j"])("/outsource/contractBakMoney/add",e)},k=function(e){return Object(r["j"])("/outsource/contractBakMoney/edit",e)},x=function(e){return Object(r["d"])("/outsource/contractBakMoney/page",e)},y=function(e){return Object(r["j"])("/outsource/contractBakMoney/delete",e)},j=function(e){return Object(r["d"])("/outsource/outin/page",e)},O=function(e){return Object(r["j"])("/outsource/outin/delete",e)},M=function(e){return Object(r["d"])("/outsource/outin/page/detail",e)},S=function(e){return Object(r["j"])("/outsource/supervise/add",e)},N=function(e){return Object(r["j"])("/outsource/supervise/edit",e)},C=function(e){return Object(r["d"])("/outsource/supervise/page",e)},_=function(e){return Object(r["j"])("/outsource/supervise/delete",e)},$=function(e){return Object(r["d"])("/outsource/supervise/get",{id:e})},P=function(e){return Object(r["d"])("/outsource/supervise/get-by-order",e)},T=function(e){return Object(r["d"])("/outsource/perform/vendor/tree",e)},D=function(e){return Object(r["j"])("/outsource/perform/delayReason",e)},q=function(e){return Object(r["d"])("/outsource/perform/page",e)},R=function(e){return Object(r["j"])("/outsource/perform/delete/resource",e)},A=function(e){return Object(r["d"])("/outsource/perform/resource",e)},L=function(e){return Object(r["j"])("/outsource/perform/resource/add",e)},G=function(e){return Object(r["j"])("/outsource/perform/resource/edit",e)},U=function(e){return Object(r["d"])("/outsource/rateing/page",e)},F=function(e){return Object(r["j"])("/outsource/rateing/add",e)},z=function(e){return Object(r["j"])("/outsource/rateing/edit",e)},B=function(e){return Object(r["j"])("/outsource/rateing/delete",e)},E=function(e){return Object(r["j"])("/outsource/rateing/delete/attachment",e)},J=function(e){return Object(r["j"])("/outsource/otherSource/delete",e)},Y=function(e){return Object(r["j"])("/outsource/otherSource/edit",e)},K=function(e){return Object(r["j"])("/outsource/otherSource/add",e)},Q=function(e){return Object(r["d"])("/outsource/otherSource/page",e)},H=function(e){return Object(r["d"])("/outsource/quality/page",e)},W=function(e){return Object(r["j"])("/outsource/quality/edit",e)},V=function(e){return Object(r["d"])("/outsource/part/page",e)},X=function(e){return Object(r["d"])("/outsource/fault/countFault",e)},Z=function(e){return Object(r["d"])("/outsource/fault/countFaultGroupBySystem",e)},ee=function(e){return Object(r["d"])("/outsource/fault/page",e)},te=function(e){return Object(r["j"])("/outsource/fault/countFaultGroupByPhaseAndSystem",e)},oe=function(e){return Object(r["d"])("/outsource/contractPay/page",e)},re=function(e){return Object(r["d"])("/training/record/page",e)},ne=function(e){return Object(r["j"])("/training/record/add",e)},ae=function(e){return Object(r["j"])("/training/record/edit",e)},ie=function(e){return Object(r["j"])("/training/record/delete",e)},le=function(e){return Object(r["d"])("/base/finance/project/list",e)},se=function(e){return Object(r["d"])("/base/finance/task/list",e)},ce=function(e){return Object(r["d"])("/outsource/cost/listCost",e)},ue=function(e){return Object(r["d"])("/outsource/cost/detail",e)},de=function(e){return Object(r["d"])("/outsource/cost/part",e)},fe=function(e){return Object(r["d"])("/outsource/cost/asset",e)}},d4bc:function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,width:800,visible:e.visible,confirmLoading:e.confirmLoading,centered:"",destroyOnClose:!0,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("div",{staticStyle:{padding:"0px 20px"}},[t("a-form-model",{ref:"outPartForm",attrs:{model:e.modalInfo,rules:e.modalRules}},[t("a-form-model-item",{attrs:{"label-col":e.labelCol,"wrapper-col":e.wrapperCol,label:"线路",prop:"lineId"}},[t("j-dict-select-tag",{attrs:{disabled:"",triggerChange:!0,dictCode:"bu_mtr_line,line_name,line_id"},on:{change:e.onLineChange},model:{value:e.modalInfo.lineId,callback:function(t){e.$set(e.modalInfo,"lineId",t)},expression:"modalInfo.lineId"}})],1),t("a-form-model-item",{attrs:{"label-col":e.labelCol,"wrapper-col":e.wrapperCol,label:"车号",prop:"trainNo"}},[t("j-dict-select-seach-tag",{attrs:{disabled:"",triggerChange:!0,dictCode:e.dictTrainStr},model:{value:e.modalInfo.trainNo,callback:function(t){e.$set(e.modalInfo,"trainNo",t)},expression:"modalInfo.trainNo"}})],1),t("a-form-model-item",{attrs:{"label-col":e.labelCol,"wrapper-col":e.wrapperCol,label:"设备选择",prop:"turnoverAssetId"}},[t("div",{on:{click:e.selectAsset}},[t("a-select",{ref:"assetSelect",attrs:{placeholder:"请选择送修设备","allow-clear":"",open:!1,showArrow:!0},model:{value:e.modalInfo.assetName,callback:function(t){e.$set(e.modalInfo,"assetName",t)},expression:"modalInfo.assetName"}},[t("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)]),t("a-form-model-item",{attrs:{"label-col":e.labelCol,"wrapper-col":e.wrapperCol,label:"外观状态",prop:"facadeStatus"}},[t("a-select",{model:{value:e.modalInfo.facadeStatus,callback:function(t){e.$set(e.modalInfo,"facadeStatus",t)},expression:"modalInfo.facadeStatus"}},[t("a-select-option",{attrs:{value:"0"}},[e._v(" 无问题 ")]),t("a-select-option",{attrs:{value:"1"}},[e._v(" 有问题 ")])],1)],1),"1"===e.modalInfo.facadeStatus?t("a-form-model-item",{attrs:{"label-col":e.labelCol,"wrapper-col":e.wrapperCol,label:"外观描述",prop:"facadeDesc"}},[t("a-input",{model:{value:e.modalInfo.facadeDesc,callback:function(t){e.$set(e.modalInfo,"facadeDesc",t)},expression:"modalInfo.facadeDesc"}})],1):e._e(),t("a-form-model-item",{attrs:{"label-col":e.labelCol,"wrapper-col":e.wrapperCol,label:"工装状态",prop:"mixtoolStatus"}},[t("a-select",{model:{value:e.modalInfo.mixtoolStatus,callback:function(t){e.$set(e.modalInfo,"mixtoolStatus",t)},expression:"modalInfo.mixtoolStatus"}},[t("a-select-option",{attrs:{value:"0"}},[e._v(" 无问题 ")]),t("a-select-option",{attrs:{value:"1"}},[e._v(" 有问题 ")])],1)],1),"1"===e.modalInfo.mixtoolStatus?t("a-form-model-item",{attrs:{"label-col":e.labelCol,"wrapper-col":e.wrapperCol,label:"工装描述",prop:"mixtoolDesc"}},[t("a-input",{model:{value:e.modalInfo.mixtoolDesc,callback:function(t){e.$set(e.modalInfo,"mixtoolDesc",t)},expression:"modalInfo.mixtoolDesc"}})],1):e._e(),t("a-form-model-item",{attrs:{"label-col":e.labelCol,"wrapper-col":e.wrapperCol,label:"存在故障",prop:"fault"}},[t("a-select",{model:{value:e.modalInfo.fault,callback:function(t){e.$set(e.modalInfo,"fault",t)},expression:"modalInfo.fault"}},[t("a-select-option",{attrs:{value:"0"}},[e._v(" 不存在 ")]),t("a-select-option",{attrs:{"label-col":e.labelCol,"wrapper-col":e.wrapperCol,value:"1"}},[e._v(" 存在 ")])],1)],1),t("a-form-model-item",{attrs:{"label-col":e.labelCol,"wrapper-col":e.wrapperCol,label:"备注",prop:"remark"}},[t("a-textarea",{attrs:{"auto-size":{minRows:3,maxRows:6},placeholder:"请输入备注信息"},model:{value:e.modalInfo.remark,callback:function(t){e.$set(e.modalInfo,"remark",t)},expression:"modalInfo.remark"}})],1)],1)],1),t("CarDeviceSelectNew",{ref:"assetSelectModal",attrs:{trainNo:e.modalInfo.trainNo,lineId:e.modalInfo.lineId,multiple:!1},on:{ok:e.onSelectAsset}})],1)},n=[],a=o("ca00"),i=o("310d"),l={name:"OutPartModal",components:{CarDeviceSelectNew:i["default"]},props:{title:{type:String,default:"部件添加"},lineId:{type:String,default:""},trainNo:{type:String,default:""},existAssets:{type:Array,default:function(){return[]}}},data:function(){return{visible:!1,confirmLoading:!1,modalInfo:{turnoverAssetId:"",facadeStatus:"0",mixtoolStatus:"0",fault:"0",remark:""},modalRules:{turnoverAssetId:[{required:!0,message:"请选择部件"}],facadeStatus:[{required:!0,message:"请选择外观状态"}],mixtoolStatus:[{required:!0,message:"请选择工装状态"}],fault:[{required:!0,message:"请选择是否存在故障"}]},dictTrainStr:"",structureId:"",labelCol:{span:3},wrapperCol:{span:20}}},methods:{showModal:function(e){this.structureId=e,this.visible=!0,this.modalInfo.lineId=this.lineId,this.lineId&&(this.dictTrainStr="bu_train_info,train_no,id,line_id="+this.lineId),this.modalInfo.trainNo=this.trainNo,this.modalInfo.assetName="",this.modalInfo.turnoverAssetId="",this.modalInfo.remark=""},onLineChange:function(e,t){this.dictTrainStr=t?"bu_train_info,train_no,id,line_id="+t.value:""},handleOk:function(){var e=this;this.$refs.outPartForm.validate((function(t){if(t){if(e.checkAssetIsExist(e.modalInfo.turnoverAssetId))return void e.$message.warning("你选择的设备"+e.modalInfo.assetNo+"已经存在委外设备列表中,不能重复添加");e.$emit("ok",Object.assign({},e.modalInfo)),e.close()}}))},checkAssetIsExist:function(e){var t=this.existAssets.filter((function(t){return t.turnoverAssetId===e}));return t.length>0},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1},selectAsset:function(){this.$refs.assetSelectModal.showModal(),this.$refs.assetSelect.blur()},onSelectAsset:function(e){if(e&&e.length>0){var t=e[0];this.modalInfo.id=Object(a["p"])(),this.modalInfo.assetTypeId=t.id,this.modalInfo.assetTypeName=t.assetName,this.modalInfo.turnoverAssetId=t.id,this.modalInfo.assetName=t.assetName,this.modalInfo.assetNo=t.code,this.modalInfo.facadeStatus_dictText="1"===this.modalInfo.facadeStatus?"有问题":"无问题",this.modalInfo.mixtoolStatus_dictText="1"===this.modalInfo.mixtoolStatus?"有问题":"无问题",this.modalInfo.fault_dictText="1"===this.modalInfo.fault?"是":"否",this.$forceUpdate()}}}},s=l,c=o("2877"),u=Object(c["a"])(s,r,n,!1,null,"745ed50c",null);t["default"]=u.exports},d685:function(e,t,o){},f76d:function(e,t,o){"use strict";o("9527")}}]);