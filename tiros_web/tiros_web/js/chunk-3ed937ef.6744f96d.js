(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ed937ef"],{"61ca":function(e,t,a){"use strict";a("c35c")},"85df":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"90%",visible:e.visible,title:"作业指导步骤选择",centered:"",bodyStyle:{height:"80vh"},confirmLoading:e.confirmLoading,cancelText:"关闭",destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("na-splitter",{staticClass:"booksetp-body",staticStyle:{},attrs:{defaultSize:300}},[t("div",{staticStyle:{"overflow-y":"auto","overflow-x":"hidden","padding-right":"2px",height:"100%"},attrs:{slot:"left-panel"},slot:"left-panel"},[t("a-card",{attrs:{id:"bookStepsContent",height:"100%"}},[t("div",{staticClass:"typeTitle"},[e._v("作业指导书")]),t("a-input-search",{staticStyle:{margin:"8px 0",width:"90%"},attrs:{placeholder:"输入名称"},model:{value:e.serchValue,callback:function(t){e.serchValue=t},expression:"serchValue"}}),t("div",{staticStyle:{width:"70%",margin:"0 auto","min-height":"100%"}},[t("a-tree",{attrs:{showLine:"",selectedKeys:e.selectedKeys,"tree-data":e.showTreeData,replaceFields:{title:"fileName",key:"id"}},on:{select:e.onSelect}})],1)],1)],1),t("div",{staticStyle:{"padding-left":"5px","padding-right":"3px"},attrs:{slot:"right-panel"},slot:"right-panel"},[t("div",{staticStyle:{height:"100%"}},[t("vxe-table",{ref:"listTable",staticStyle:{},attrs:{border:"","row-id":"id",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","radio-config":{trigger:"row"},"checkbox-config":{trigger:"row",highlight:!0,range:!0}}},[e.multiple?t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}):t("vxe-table-column",{attrs:{type:"radio",width:"40"}}),t("vxe-table-column",{attrs:{field:"stepNum",title:"步骤",width:"120px"}}),t("vxe-table-column",{attrs:{field:"stepTitle",title:"标题",align:"left","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.stepTitle)+" ")]}}])})],1)],1)])])],1)},l=[],s=a("8fad"),r={name:"SopDetailList",props:{multiple:{type:Boolean,default:!0},id:{type:String,default:""}},data:function(){return{fileType:[],queryParam:{bookId:""},allAlign:"center",totalResult:0,treeKey:0,tableData:[],visible:!1,confirmLoading:!1,treeData:[],showTreeData:[],serchValue:"",selectedKeys:[]}},watch:{serchValue:function(){var e=this;this.showTreeData=this.treeData.map((function(t){return t.fileName.indexOf(e.serchValue)>-1?t:null})).filter((function(e){return e}))}},methods:{selectTree:function(){var e=this;Object(s["cc"])({pageNo:1,pageSize:1e3,searchText:""}).then((function(t){t.success&&(e.treeData=t.result.records,e.showTreeData=t.result.records,e.treeData.length>0&&(e.queryParam.bookId=e.treeData[0].id,e.selectedKeys[0]=e.treeData[0].id,e.selectData=e.treeData[0],e.findList()))}))},showModal:function(){this.visible=!0,this.selectTree()},onSelect:function(e,t){if(e.length){var a=t.node.dataRef;this.queryParam.bookId=a.id,this.selectedKeys[0]=a.id,this.selectData=a,this.findList()}},findList:function(){var e=this;Object(s["ac"])(this.queryParam).then((function(t){e.tableData=t.result}))},handleOk:function(){var e=this,t=[];this.multiple?t=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&t.push(this.$refs.listTable.getRadioRecord()),Array.from(t,(function(t){t.bookName=e.selectData.fileName})),this.$emit("ok",t),this.visible=!1},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},n=r,o=(a("61ca"),a("2877")),c=Object(o["a"])(n,i,l,!1,null,null,null);t["default"]=c.exports},c35c:function(e,t,a){}}]);