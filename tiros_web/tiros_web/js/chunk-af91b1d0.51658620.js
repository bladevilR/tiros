(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-af91b1d0","chunk-4ac5cba6"],{"2cb5":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"90%",centered:"",title:e.title,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",destroyOnClose:!0,bodyStyle:{height:"80vh"}},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchQuery.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:7,sm:24}},[t("a-form-item",{attrs:{label:"名称"}},[t("a-input",{attrs:{placeholder:"名称或编码","allow-clear":""},model:{value:e.queryParam.searchText,callback:function(t){e.$set(e.queryParam,"searchText",t)},expression:"queryParam.searchText"}})],1)],1),t("a-col",{attrs:{md:7,sm:24}},[t("a-form-item",{attrs:{label:"状态"}},[t("j-dict-select-tag",{attrs:{dictCode:"bu_enable"},model:{value:e.queryParam.status,callback:function(t){e.$set(e.queryParam,"status",t)},expression:"queryParam.status"}})],1)],1),t("a-col",{attrs:{md:3,sm:12}},[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-button",{on:{click:e.searchQuery}},[e._v("查询")])],1)])],1)],1)],1),t("div",{staticStyle:{height:"calc(80vh - 85px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(80vh - 85px)"},attrs:{border:"","max-height":"100%","row-id":"id",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","radio-config":e.multiple?{}:{trigger:"row",checkMethod:e.checkRadioMethod},"checkbox-config":e.multiple?{trigger:"row",highlight:!0,checkMethod:e.checkRadioMethod}:{},"tree-config":{lazy:!0,children:"children",hasChild:"hasChildren",loadMethod:e.loadChildrenMethod}}},[e.multiple?t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}):t("vxe-table-column",{attrs:{type:"radio",width:"40"}}),t("vxe-table-column",{attrs:{field:"name",title:"名称","tree-node":"",align:"left"}}),t("vxe-table-column",{attrs:{align:"left","header-align":"center",field:"code",title:"编码",width:"15%"}}),t("vxe-table-column",{attrs:{field:"structType_dictText",title:"类型",width:"10%"}}),t("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",width:"10%"}}),t("vxe-table-column",{attrs:{field:"placeCode",title:"位置编码",width:"15%"}}),t("vxe-table-column",{attrs:{field:"placeDesc",title:"位置描述",width:"15%"}})],1)],1)])},l=[],i=a("8fad"),s={name:"TrainAssetType",props:{trainTypeId:{type:String,default:""},parentId:{type:String,default:null},multiple:{type:Boolean,default:!0},title:{type:String,default:"设备类型选择"},canSelectType:{type:Array,default:function(){return[1,2,3,4]}}},data:function(){return{queryParam:{trainTypeId:"",id:"",searchText:"",status:null,structType:null},allAlign:"center",tableData:[],treeData:[],selectParent:"",visible:!1,confirmLoading:!1}},mounted:function(){},methods:{showModal:function(){this.visible=!0,this.queryParam.trainTypeId=this.trainTypeId,this.findList()},handleOk:function(){var e=[];this.multiple?e=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&e.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",e),this.visible=!1},handleCancel:function(){this.$emit("cancel"),this.close()},close:function(){this.$emit("close"),this.visible=!1},findList:function(){var e=this;this.loading=!0,this.parentId&&(this.queryParam.id=this.parentId),this.selectParent&&(this.queryParam.id=this.selectParent),Object(i["Zc"])(this.queryParam).then((function(t){t.success&&(e.loading=!1,e.tableData=t.result)}))},findSelectList:function(){var e=this,t={id:this.parentId,trainTypeId:this.trainTypeId};this.parentId&&(t.id=this.parentId),Object(i["Zc"])(t).then((function(t){t.success&&(e.loading=!1,e.treeData=t.result.map((function(t){return e.genSelectTreeNode(t)})))}))},loadChildrenMethod:function(e){var t=this,a=e.row,r={trainTypeId:this.trainTypeId,id:a.id};return new Promise((function(e){Object(i["Zc"])(r).then((function(a){a.success?e(a.result):t.$message.error("".concat(a.msg))}))}))},loadSelectNodeMethod:function(e){var t=this,a={trainTypeId:this.trainTypeId,id:e.dataRef.id,searchText:this.queryParam.searchText,status:this.queryParam.status,structType:this.queryParam.structType};return new Promise((function(e){Object(i["Zc"])(a).then((function(e){e.success?e.result.map((function(e){t.treeData=t.treeData.concat(t.genSelectTreeNode(e))})):t.$message.warning(e.message)})),e()}))},genSelectTreeNode:function(e){return{id:e.id,pId:e.parentId,value:e.id,title:e.name,isLeaf:!e.hasChildren}},searchQuery:function(){this.findList()},checkRadioMethod:function(e){var t=e.row;return this.canSelectType.indexOf(t.structType)>-1}}},o=s,n=(a("9589"),a("2877")),d=Object(n["a"])(o,r,l,!1,null,"52968c59",null);t["default"]=d.exports},7237:function(e,t,a){},7341:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,width:1100,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"物资名称"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["name",e.validatorRules.name],expression:"['name', validatorRules.name]",modifiers:{trim:!0}}],ref:"mymaterSelect",attrs:{placeholder:"请选择关联设备",open:!1,showArrow:!0},on:{focus:e.openmaterModal}},[t("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)],1),t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"物资编码"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["materialCode",e.validatorRules.materialCode],expression:"['materialCode', validatorRules.materialCode]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入",disabled:""}})],1)],1),t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"资产编码"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["assetCode",e.validatorRules.assetCode],expression:"['assetCode', validatorRules.assetCode]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"线路"}},[t("line-select-list",{directives:[{name:"decorator",rawName:"v-decorator",value:["lineId",e.validatorRules.lineId],expression:"['lineId', validatorRules.lineId]"}]})],1)],1),t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"车间"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["workshopId",e.validatorRules.workshopId],expression:"['workshopId', validatorRules.workshopId]",modifiers:{trim:!0}}],attrs:{triggerChange:!0,dictCode:"bu_mtr_workshop,name,id"},on:{change:e.changeWorkShop}})],1)],1),t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"所属班组"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["groupId",e.validatorRules.groupId],expression:"['groupId', validatorRules.groupId]",modifiers:{trim:!0}}],attrs:{triggerChange:!0,dictCode:e.dictCodeStr}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"序列号"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["manufNo",e.validatorRules.manufNo],expression:"['manufNo', validatorRules.manufNo]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入"}})],1)],1),t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"单价"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["price",e.validatorRules.price],expression:"['price', validatorRules.price]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入"}})],1)],1),t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"设备类型"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["assetTypeName",e.validatorRules.assetTypeName],expression:"['assetTypeName', validatorRules.assetTypeName]",modifiers:{trim:!0}}],ref:"mySelect",attrs:{placeholder:"请选择关联设备",open:!1,showArrow:!0},on:{focus:e.openModal}},[t("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"保管人员"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["dutyUserName",e.validatorRules.dutyUserName],expression:"['dutyUserName', validatorRules.dutyUserName]",modifiers:{trim:!0}}],ref:"myuserSelect",attrs:{placeholder:"请选择保管人员",open:!1,showArrow:!0},on:{focus:e.openuserModal}},[t("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)],1),t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"状态"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["status",e.validatorRules.status],expression:"['status', validatorRules.status]",modifiers:{trim:!0}}],attrs:{triggerChange:!0,dictCode:"bu_turnover_status"}})],1)],1),t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"当前位置"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["currentLocation",e.validatorRules.currentLocation],expression:"['currentLocation', validatorRules.currentLocation]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"出库日期",width:"40"}},[t("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["outDate",e.validatorRules.outDate],expression:"['outDate', validatorRules.outDate]",modifiers:{trim:!0}}]})],1)],1),t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"出库单号"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["outOrderNo",e.validatorRules.outOrderNo],expression:"['outOrderNo', validatorRules.outOrderNo]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入"}})],1)],1),t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"规格型号"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["model",e.validatorRules.model],expression:"['model', validatorRules.model]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入"}})],1)],1)],1)],1)],1),t("train-asset-type",{ref:"selectForm",attrs:{multiple:!1},on:{ok:e.selectTrainSys}}),t("user-list",{ref:"UserModalForm",attrs:{multiple:!1},on:{ok:e.addTarget}}),t("material-list",{ref:"materModalForm",attrs:{multiple:!1},on:{ok:e.selectmater}})],1)},l=[],i=a("c54ca"),s=a("7164"),o=a("b245"),n=a("2cb5"),d=a("c1df"),c=a.n(d),u=a("5633"),m={name:"RotablesItemModal",components:{MaterialList:s["default"],UserList:o["default"],TrainAssetType:n["default"],LineSelectList:u["default"]},data:function(){return{dictCodeStr:"bu_mtr_workshop_group,group_name,id",value:1,title:"操作",visible:!1,model:{},labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},trainTypeSysId:"",trainTypeSysName:"",dutyUsername:"",dutyUserid:"",systemIds:"",systemNames:"",materName:"",materId:"",matercode:"",isClose:!1,confirmLoading:!1,form:this.$form.createForm(this),dictcode:"",validatorRules:{name:{rules:[{required:!0,message:"请选择物资名称!"}]},materialCode:{rules:[{required:!0,message:"请输入物资编码!"}]},materialTypeId:{rules:[]},assetCode:{rules:[]},workshopId:{rules:[]},groupId:{rules:[]},manufNo:{rules:[]},lineId:{rules:[{required:!0,message:"请选择线路!"}]},price:{rules:[]},assetTypeName:{rules:[{required:!0,message:"请选择设备类型!"}]},assetTypeId:{rules:[{required:!0,message:"请选择设备类型!"}]},dutyUserName:{rules:[{required:!0,message:"请选择保管人员!"}]},status:{rules:[{required:!0,message:"请选择状态!"}]},currentLocation:{rules:[]},outDate:{rules:[]},outOrderNo:{rules:[]},model:{rules:[]}}}},created:function(){},methods:{changeWorkShop:function(e){this.dictCodeStr=e?"bu_mtr_workshop_group,group_name,id,workshop_id="+e:"bu_mtr_workshop_group,group_name,id,workshop_id='"+this.$store.getters.userInfo.workshopId+"'|workshop_id"},changeClose:function(e){this.isClose=e},add:function(){this.edit({})},edit:function(e){var t=this;e.id?this.isClose=!(!e["close"]||1!=e["close"]):this.isClose=!1,this.model=Object.assign({},e),this.visible=!0,this.$nextTick((function(){t.form.setFieldsValue({name:t.model.name,materialCode:t.model.materialCode,materialTypeId:t.model.materialTypeId,assetCode:t.model.assetCode,workshopId:t.model.workshopId,groupId:t.model.groupId,manufNo:t.model.manufNo,lineId:t.model.lineId,price:t.model.price,assetTypeId:t.model.assetTypeId,assetTypeName:t.model.assetTypeName,dutyUserId:t.model.dutyUserId,dutyUserName:t.model.dutyUserName,status:t.model.status,currentLocation:t.model.currentLocation,outDate:c()(t.model.outDate||new Date,"YYYY-MM-DD"),outOrderNo:t.model.outOrderNo,model:t.model.model})}))},openModal:function(){this.$refs.selectForm.showModal(),this.$refs.mySelect.blur()},openuserModal:function(){this.$refs.UserModalForm.showModal(),this.$refs.myuserSelect.blur()},openmaterModal:function(){this.$refs.materModalForm.showModal(),this.$refs.mymaterSelect.blur()},selectTrainSys:function(e){var t=this;e.length&&(this.assetTypeId=e[0].id,this.assetTypeName=e[0].name,Object(i["Bb"])({id:this.assetTypeId}).then((function(e){t.systemNames=e.result.name}))),this.form.setFieldsValue({assetTypeName:this.assetTypeName,assetTypeId:this.assetTypeId})},addTarget:function(e){e.length&&(this.dutyUsername=e[0].realname,this.dutyUserid=e[0].id),this.form.setFieldsValue({dutyUserName:this.dutyUsername,dutyUserId:this.dutyUserid})},selectmater:function(e){e.length&&(this.materName=e[0].name,this.materId=e[0].id,this.matercode=e[0].code),this.form.setFieldsValue({name:this.materName,materialCode:this.matercode,materialTypeId:this.materId})},handleOk:function(){var e=this,t=this;t.form.validateFields((function(a,r){if(!a){t.confirmLoading=!0;var l,s=Object.assign(t.model,r,{outDate:c()(r.outDate).format("YYYY-MM-DD HH:mm:ss")});t.model.id?l=Object(i["K"])(s):(s["assetTypeId"]=t.assetTypeId,s["dutyUserId"]=t.dutyUserid,s["materialTypeId"]=t.materId,s["materialCode"]=t.matercode,l=Object(i["g"])(s)),l.then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok")):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1,t.close()})),e.visible=!1}}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},p=m,h=a("2877"),f=Object(h["a"])(p,r,l,!1,null,null,null);t["default"]=f.exports},"7c93":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:"导入EXCEL",width:600,visible:e.visible,confirmLoading:e.uploading},on:{cancel:e.handleClose}},[t("a-upload",{attrs:{name:"file",multiple:!1,accept:".xls,.xlsx",fileList:e.fileList,remove:e.handleRemove,beforeUpload:e.beforeUpload}},[t("a-button",{attrs:{disabled:e.fileList.length>=e.sum}},[t("a-icon",{attrs:{type:"upload"}}),e._v(" 选择导入文件 ")],1)],1),t("template",{slot:"footer"},[t("a-button",{on:{click:e.handleClose}},[e._v("关闭")]),t("a-button",{attrs:{type:"primary",disabled:0===e.fileList.length,loading:e.uploading},on:{click:e.handleImport}},[e._v(" "+e._s(e.uploading?"导入中...":"开始导入")+" ")])],1)],2)},l=[],i=a("0fea");function s(e){return c(e)||d(e)||n(e)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(e,t){if(e){if("string"==typeof e)return u(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?u(e,t):void 0}}function d(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function c(e){if(Array.isArray(e))return u(e)}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}var m={name:"JImportModal",props:{url:{type:String,default:"",required:!1},biz:{type:String,default:"",required:!1},sum:{type:Number,default:6}},data:function(){return{visible:!1,uploading:!1,fileList:[],uploadAction:"",foreignKeys:""}},watch:{url:function(e){e&&(this.uploadAction=e)}},created:function(){this.uploadAction=this.url},methods:{handleClose:function(){this.visible=!1},show:function(e){this.fileList=[],this.uploading=!1,this.visible=!0,this.foreignKeys=e},handleRemove:function(e){var t=this.fileList.indexOf(e),a=this.fileList.slice();a.splice(t,1),this.fileList=a},beforeUpload:function(e){return this.fileList=[].concat(s(this.fileList),[e]),!1},handleImport:function(){var e=this,t=this.fileList,a=new FormData;this.biz&&a.append("isSingleTableImport",this.biz),this.foreignKeys&&this.foreignKeys.length>0&&a.append("foreignKeys",this.foreignKeys),t.forEach((function(e){a.append("file",e)})),this.uploading=!0,Object(i["j"])(this.uploadAction,a).then((function(t){e.uploading=!1,t.success?(e.$message.success(t.message),e.visible=!1,e.$emit("ok")):e.$message.warning(t.message)}))}}},p=m,h=a("2877"),f=Object(h["a"])(p,r,l,!1,null,"1a506ff3",null);t["default"]=f.exports},9527:function(e,t,a){},9589:function(e,t,a){"use strict";a("7237")},b245:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"85%",title:"人员选择",visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",bodyStyle:{height:"70vh"},destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-row",[t("a-col",{attrs:{md:4,sm:24}},[t("div",{staticStyle:{height:"calc(70vh - 20px)","border-right":"1px solid #e3e1e1","margin-right":"15px"}},[e.treeData&&e.treeData.length>0?t("a-tree",{staticClass:"limitHeight",attrs:{defaultSelectedKeys:[e.queryParam.depId],defaultExpandAll:!0,"tree-data":e.treeData},on:{select:e.onSelect}}):e._e()],1)]),t("a-col",{attrs:{md:20,sm:24}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.findList.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"账号"}},[t("a-input",{attrs:{placeholder:"请输入用户账号"},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"真实名字"}},[t("a-input",{attrs:{placeholder:"请输入真实名字"},model:{value:e.queryParam.realname,callback:function(t){e.$set(e.queryParam,"realname",t)},expression:"queryParam.realname"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"手机号码"}},[t("a-input",{attrs:{placeholder:"请输入手机号码"},model:{value:e.queryParam.phone,callback:function(t){e.$set(e.queryParam,"phone",t)},expression:"queryParam.phone"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"角色"}},[t("j-dict-select-tag",{attrs:{triggerChange:!0,dictCode:"sys_role,role_name,id",placeholder:"选择角色"},model:{value:e.queryParam.roleId,callback:function(t){e.$set(e.queryParam,"roleId",t)},expression:"queryParam.roleId"}})],1)],1),t("a-col",{attrs:{md:2,sm:8}},[t("a-button",{on:{click:e.findList}},[e._v("查询")])],1)],1)],1)],1),t("div",{staticStyle:{height:"calc(70vh - 130px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(70vh - 130px)"},attrs:{border:"",align:e.allAlign,data:e.tableData,"max-height":"100%","show-overflow":"tooltip","radio-config":e.multiple?{}:{trigger:"row"},"checkbox-config":e.multiple?{trigger:"row",highlight:!0,range:!0}:{},"edit-config":{trigger:"manual",mode:"row"}}},[e.multiple?t("vxe-table-column",{attrs:{type:"checkbox",width:"5%"}}):t("vxe-table-column",{attrs:{type:"radio",width:"5%"}}),t("vxe-table-column",{attrs:{field:"workNo",title:"工号",width:"100",align:"center"}}),t("vxe-table-column",{attrs:{field:"username",title:"用户账号",width:"150",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"realname",title:"用户名字",width:"100",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"roleNames",title:"角色","min-width":"180",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"sex_dictText",title:"性别",width:"80"}}),t("vxe-table-column",{attrs:{field:"phone",title:"手机号码",width:"120"}}),t("vxe-table-column",{attrs:{field:"orgCode",title:"部门",width:"120",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",width:"80"}})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1)])],1)],1)},l=[],i=a("8fad"),s={name:"UserList",props:{multiple:{type:Boolean,default:!0},depId:{type:String,default:""}},data:function(){return{queryParam:{username:"",realname:"",phone:"",orgCode:"",roleId:void 0,pageNo:1,pageSize:10},allAlign:"center",totalResult:0,tableData:[],visible:!1,confirmLoading:!1,treeData:[]}},watch:{depId:function(e){this.$set(this.queryParam,"depId",e||"")}},mounted:function(){this.$set(this.queryParam,"depId",this.depId||"")},methods:{showModal:function(){this.visible=!0,this.findList(),this.getTreeList()},getTreeList:function(){var e=this;Object(i["mb"])().then((function(t){t.success&&(e.treeData=t.result)}))},onSelect:function(e,t){if(e.length){var a=t.node.dataRef;this.queryParam.depId=a.id,this.findList()}else this.queryParam.orgCode="",this.findList()},findList:function(){var e=this;this.loading=!0,Object(i["gc"])(this.queryParam).then((function(t){e.loading=!1,t.success?(e.totalResult=t.result.total,e.tableData=t.result.records):e.$message.error("加载用户数据失败")})).catch((function(t){e.$message.error("加载用户数据异常")})).finally((function(){}))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()},handleOk:function(){var e=[];this.multiple?e=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&e.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",e),this.visible=!1},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,Object.assign(this.$data,this.$options.data())}}},o=s,n=(a("f76d"),a("2877")),d=Object(n["a"])(o,r,l,!1,null,"4aa7956f",null);t["default"]=d.exports},d4e9:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"bodyWrapper"},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"部件"}},[t("a-input",{attrs:{placeholder:"请输入名称或编码",allowClear:""},model:{value:e.queryParam.searchText,callback:function(t){e.$set(e.queryParam,"searchText",t)},expression:"queryParam.searchText"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"资产编码"}},[t("a-input",{attrs:{placeholder:"请输入资产编码或序列号",allowClear:""},model:{value:e.queryParam.assetCode,callback:function(t){e.$set(e.queryParam,"assetCode",t)},expression:"queryParam.assetCode"}})],1)],1),t("a-col",{attrs:{md:4,sm:24}},[t("a-form-item",{attrs:{label:"状态"}},[t("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_turnover_status"},model:{value:e.queryParam.status,callback:function(t){e.$set(e.queryParam,"status",t)},expression:"queryParam.status"}})],1)],1),t("a-col",{attrs:{md:4,sm:24}},[t("a-form-item",{attrs:{label:"线路"}},[t("line-select-list",{model:{value:e.queryParam.lineId,callback:function(t){e.$set(e.queryParam,"lineId",t)},expression:"queryParam.lineId"}})],1)],1),t("a-col",{attrs:{md:5,sm:8}},[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-space",[t("a-button",{on:{click:e.findList}},[e._v("查询")]),t("a-button",{on:{click:function(t){return e.$refs.importModal.show()}}},[e._v("导入")])],1)],1)])],1)],1)],1),t("div",{staticStyle:{height:"calc(100vh - 225px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(100vh - 225px)"},attrs:{border:"","auto-resize":"","max-height":"100%",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","checkbox-config":{trigger:"row",highlight:!0,range:!0},"edit-config":{trigger:"manual",mode:"row"}}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),t("vxe-table-column",{attrs:{title:"部件名称",align:"left","header-align":"center",width:"15%"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("a",{on:{click:function(t){return t.stopPropagation(),e.jumpInfo(r)}}},[e._v(e._s(r.name))])]}}])}),t("vxe-table-column",{attrs:{field:"materialCode",title:"部件编码",width:"15%"}}),t("vxe-table-column",{attrs:{field:"assetCode",title:"资产编码",width:"15%"}}),t("vxe-table-column",{attrs:{field:"manufNo",title:"序列号",width:"10%"}}),t("vxe-table-column",{attrs:{field:"status_dictText",title:"目前状态",width:"10%"}}),t("vxe-table-column",{attrs:{field:"dutyUserName",align:"left","header-align":"center",title:"保管人员",width:"10%"}}),t("vxe-table-column",{attrs:{field:"groupName",align:"left","header-align":"center",title:"所属工班",width:"10%"}}),t("vxe-table-column",{attrs:{field:"price",align:"right","header-align":"center",title:"单价",width:"10%"}}),t("vxe-table-column",{attrs:{field:"systemName",title:"所属系统",width:"10%"}}),t("vxe-table-column",{attrs:{field:"currentLocation",title:"当前位置",width:"15%"}}),t("vxe-table-column",{attrs:{field:"outDate",title:"出库日期",width:"10%"}}),t("vxe-table-column",{attrs:{field:"outOrderNo",title:"出库单号",width:"10%"}}),t("vxe-table-column",{attrs:{field:"lineName",title:"所属线路",width:"10%"}}),t("vxe-table-column",{attrs:{field:"model",align:"left","header-align":"center",title:"规格型号",width:"15%"}})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1),t("rotables-item-modal",{ref:"modalForm",on:{ok:function(t){return e.loadData()}}}),t("rotable-manage-info",{ref:"rotableInfo"}),t("j-import-modal",{ref:"importModal",attrs:{sum:1,url:"/import/materialSparePart"},on:{ok:function(t){return e.loadData()}}})],1)},l=[],i=a("c54ca"),s=a("7341"),o=a("5633"),n=a("4aa3"),d=a("7c93"),c={name:"RotablesPage",components:{RotablesItemModal:s["default"],LineSelectList:o["default"],RotableManageInfo:n["default"],JImportModal:d["default"]},data:function(){return{queryParam:{assetCode:"",lineId:"",searchText:"",status:"",pageNo:1,pageSize:10},totalResult:0,allAlign:"center",tableData:[]}},created:function(){this.findList()},methods:{findList:function(){var e=this;this.loading=!0,Object(i["ub"])(this.queryParam).then((function(t){e.totalResult=t.result.total,e.loading=!1,e.tableData=t.result.records}))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()},loadData:function(){this.findList()},handleAdd:function(){this.$refs.modalForm.add(),this.$refs.modalForm.title="新增"},handleEdit:function(e){this.$refs.modalForm.edit(e),this.$refs.modalForm.title="编辑"},deleteRecord:function(){var e=this,t=this.$refs.listTable.getCheckboxRecords();t.length>0?this.$confirm({content:"是否删除选中".concat(t.length,"数据？"),onOk:function(){var a=t.map((function(e,t){return e.id})).join(",");Object(i["w"])("ids="+a).then((function(t){e.findList(),e.$message.success(t.message)}))}}):this.$message.error("尚未选中任何数据!")},jumpInfo:function(e){this.$refs.rotableInfo.show(e.id)}}},u=c,m=a("2877"),p=Object(m["a"])(u,r,l,!1,null,"9b9f7404",null);t["default"]=p.exports},f76d:function(e,t,a){"use strict";a("9527")}}]);