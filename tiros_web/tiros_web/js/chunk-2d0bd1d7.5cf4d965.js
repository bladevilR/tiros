(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0bd1d7"],{"2b2c":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:"选择作业项目",width:"80%",visible:e.visible,cancelText:"关闭",destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.findList.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:12}},[t("a-col",{attrs:{md:7,sm:24}},[t("a-form-item",{attrs:{label:"名称"}},[t("a-input",{attrs:{placeholder:"名称",allowClear:""},model:{value:e.queryParam.title,callback:function(t){e.$set(e.queryParam,"title",t)},expression:"queryParam.title"}})],1)],1),t("a-col",{attrs:{md:7,sm:24}},[t("a-form-item",{attrs:{label:"规程"}},[t("a-select",{attrs:{"show-search":"",allowClear:"",placeholder:"Select a person","option-filter-prop":"children","filter-option":e.filterOption},model:{value:e.queryParam.reguId,callback:function(t){e.$set(e.queryParam,"reguId",t)},expression:"queryParam.reguId"}},[t("a-select-option",{attrs:{value:void 0}},[e._v(" 请选择 ")]),e._l(e.treeData,(function(a,i){return t("a-select-option",{key:i,attrs:{value:a.id}},[e._v(" "+e._s(a.title)+" ")])}))],2)],1)],1),t("a-col",{attrs:{md:7,sm:24}},[t("span",{staticClass:"table-page-search-submitButtons"},[t("a-space",[t("a-button",{on:{click:e.findList}},[e._v("查询")])],1)],1)])],1)],1)],1),t("div",{staticClass:"tableHeight",staticStyle:{height:"calc(100vh - 350px)"}},[t("vxe-table",{ref:"listTableRadio",staticStyle:{},attrs:{border:"",resizable:"","row-id":"id",align:"center",data:e.tableData,"show-overflow":"tooltip","max-height":"100%","edit-config":{trigger:"manual",mode:"row"},"radio-config":{trigger:"row",highlight:!0,checkMethod:e.checkMethod},"tree-config":{lazy:!0,children:"children",hasChild:"hasChildren",loadMethod:e.loadChildrenMethod},"keep-source":!0}},[t("vxe-table-column",{attrs:{type:"radio",width:"40"}}),t("vxe-table-column",{attrs:{field:"no",title:"序号",width:"60"}}),t("vxe-table-column",{attrs:{field:"title",title:"名称","tree-node":"",align:"left","header-align":"center","min-width":"140"}}),t("vxe-table-column",{attrs:{field:"type_dictText",title:"类型",width:"100"}}),t("vxe-table-column",{attrs:{field:"method_dictText",title:"维保手段",width:"100"}}),t("vxe-table-column",{attrs:{field:"qualityLevel_dictText",title:"质保等级",width:"80"}}),t("vxe-table-column",{attrs:{field:"outsource_dictText",title:"是否委外",width:"80"}}),t("vxe-table-column",{attrs:{field:"safeNotice",title:"安全提示","min-width":"140",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"remark",title:"备注","min-width":"120",align:"left","header-align":"center"}})],1)],1)])},r=[],l=a("8fad"),n={data:function(){return{visible:!1,selectIds:[],queryParam:{reguId:void 0,title:""},tableData:[],treeData:[]}},methods:{show:function(e,t){e&&(this.queryParam.reguId=e),this.visible=!0,this.selectIds=t,this.queryTreeData(),this.findList()},queryTreeData:function(){var e=this;Object(l["Wb"])().then((function(t){if(t.success){var a=t.result;Array.from(a,(function(e,t){e.title=e.name&&JSON.parse(JSON.stringify(e.name)),e.version&&(e.title+=".".concat(e.version))})),e.treeData=a}}))},checkMethod:function(e){var t=e.row;return 2==t.type},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},findList:function(){var e=this;this.loading=!0,Object(l["Vb"])(this.queryParam).then((function(t){t.success&&(e.loading=!1,e.tableData=t.result)}))},handleOk:function(){var e=this,t=this.$refs.listTableRadio.getRadioRecord();t?this.$confirm({content:"导入操作将覆盖原有的指导书数据，确认继续？",onOk:function(){var a={targetReguItemId:t.id,toReguItemIds:e.selectIds};return Object(l["Ac"])(a).then((function(t){t.success?(e.$message.success(t.message),e.$emit("ok"),e.handleCancel()):e.$message.warning(t.message)}))}}):this.$message.warning("请选择作业项目")},handleCancel:function(){this.visible=!1,this.selectIds=[],Object.assign(this.queryParam,this.$options.data().queryParam)},loadChildrenMethod:function(e){var t=this,a=e.row,i={reguId:this.queryParam.reguId,parentId:a.id};return new Promise((function(e){Object(l["Vb"])(i).then((function(i){i.success?(i.result.length||(a.hasChildren=!1),e(i.result)):t.$message.error("".concat(i.msg))}))}))}}},s=n,o=a("2877"),c=Object(o["a"])(s,i,r,!1,null,"263b8320",null);t["default"]=c.exports}}]);