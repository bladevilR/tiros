(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e557ef9e","chunk-e557ef9e","chunk-0950fc2f","chunk-c47b85c2"],{"0e7b":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"70%",title:"故障代码选择",visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",centered:"",destroyOnClose:!0,bodyStyle:{height:"80vh"}},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline","label-col":e.formItemLayout.labelCol,"wrapper-col":e.formItemLayout.wrapperCol},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.findList.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:""}},[t("a-input",{attrs:{placeholder:"请输入编码和描述"},model:{value:e.queryParam.searchText,callback:function(t){e.$set(e.queryParam,"searchText",t)},expression:"queryParam.searchText"}})],1)],1),t("a-col",{attrs:{md:3,sm:8}},[t("a-form-item",[t("a-button",{on:{click:e.findList}},[e._v("查询")])],1)],1)],1)],1)],1),t("div",{staticStyle:{height:"calc(80vh - 82px)"}},[t("vxe-table",{ref:"listTable",attrs:{border:"",height:"auto",align:e.allAlign,data:e.tableData,"highlight-current-row":"","show-overflow":"tooltip","radio-config":e.multiple?{}:{trigger:"row",checkMethod:e.checkMethod},"checkbox-config":e.multiple?{trigger:"row",highlight:!0,range:!0,checkMethod:e.checkMethod}:{},"tree-config":{lazy:!1,children:"children",hasChild:"hasChildren",loadMethod:e.loadChildrenMethod}}},[e.multiple?t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}):t("vxe-table-column",{attrs:{type:"radio",width:"40"}}),t("vxe-table-column",{attrs:{field:"fltCode",align:"left","header-align":"center",title:"故障代码",width:"260","tree-node":""}}),t("vxe-table-column",{attrs:{field:"fltLevel_dictText",title:"类型",width:"150"}}),t("vxe-table-column",{attrs:{field:"fltName",title:"代码描述",align:"left","header-align":"center"}})],1)],1)])},l=[],o=a("b47d"),i=a("ca00"),n=a("a396");function s(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=c(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,l=function(){};return{s:l,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,n=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){n=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(n)throw o}}}}function c(e,t){if(e){if("string"==typeof e)return u(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}var d={name:"FaultCodeList",components:{FaultCategoryList:n["default"]},props:{multiple:{type:Boolean,default:!0},type:{type:String,default:""}},data:function(){return{categoryCode:"",queryParam:{searchText:""},allAlign:"center",totalResult:0,tableData:[],visible:!1,confirmLoading:!1,formItemLayout:{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}}}},methods:{showModal:function(e){this.visible=!0,this.queryParam.categoryId=e,this.findList()},findList:function(){var e=this;this.loading=!0,Object(o["bb"])(this.queryParam).then((function(t){t.success?(e.tableData=e.listToTreeList(t.result),e.$nextTick((function(){e.tableData.length&&e.$refs.listTable.setTreeExpand(e.tableData.find((function(e){return e.children})),!0)}))):e.$message.error(t.message)}))},loadChildrenMethod:function(e){var t=e.row;return Object(o["cb"])({code:t.fltCode}).then((function(e){return e.success?((e.result||[]).forEach((function(e){e.children=[]})),e.result||[]):[]}))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()},handleOk:function(){var e=[];this.multiple?e=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&e.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",e),this.close()},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,this.categoryCode="",this.queryParam.searchText="",this.queryParam.categoryId=""},openSelectTypeModal:function(){this.$refs.categorySelect.showModal(),this.$refs.categoryIdSelect.blur()},addCategoryTarget:function(e){Object(i["e"])(e)?this.queryParam.categoryId="":(this.queryParam.categoryId=e[0].id,this.categoryCode=e[0].categoryCode)},checkMethod:function(e){var t=e.row;return"unit"!=this.type||3==t.fltLevel},listToTreeList:function(e){if(!e||!e.length)return[];var t,a={},r=s(e);try{for(r.s();!(t=r.n()).done;){var l=t.value;a[l.fltCode]=l}}catch(i){r.e(i)}finally{r.f()}for(var o=0;o<e.length;o++)e[o].parentCode&&a[e[o].parentCode]&&(a[e[o].parentCode].children||(a[e[o].parentCode].children=[]),a[e[o].parentCode].children.push(e[o]),e.splice(o,1),o--);return e.sort((function(e,t){return e.fltCode-t.fltCode})),e}}},h=d,f=(a("191b"),a("2877")),g=Object(f["a"])(h,r,l,!1,null,"e6e31b9e",null);t["default"]=g.exports},"191b":function(e,t,a){"use strict";a("d4ad")},"2a71":function(e,t,a){"use strict";a("30f7")},"30f7":function(e,t,a){},6034:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"70%",title:"故障原因选择",visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",centered:"",bodyStyle:{height:"80vh"},destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline","label-col":e.formItemLayout.labelCol,"wrapper-col":e.formItemLayout.wrapperCol},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.findList.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:""}},[t("a-input",{attrs:{placeholder:"请输入故障原因编码或者描述"},model:{value:e.queryParam.searchText,callback:function(t){e.$set(e.queryParam,"searchText",t)},expression:"queryParam.searchText"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"所属分类"}},[t("a-input",{ref:"categoryIdSelect",attrs:{readonly:"",allowClear:"",placeholder:"请选择所属分类"},on:{click:function(t){return e.openSelectTypeModal(1)}},model:{value:e.categoryCode,callback:function(t){e.categoryCode=t},expression:"categoryCode"}},[t("a-icon",{attrs:{slot:"suffix",type:"ellipsis"},slot:"suffix"})],1)],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"所属故障代码"}},[t("a-input",{ref:"faultCodeIdSelect",attrs:{readonly:"",allowClear:"",placeholder:"请选择所属故障代码"},on:{focus:function(t){return e.openSelectTypeModal(2)}},model:{value:e.faultCode,callback:function(t){e.faultCode=t},expression:"faultCode"}},[t("a-icon",{attrs:{slot:"suffix",type:"ellipsis"},slot:"suffix"})],1)],1)],1),t("a-col",{attrs:{md:3,sm:8}},[t("a-form-item",[t("a-button",{on:{click:e.findList}},[e._v("查询")])],1)],1)],1)],1)],1),t("div",{staticStyle:{height:"calc(80vh - 130px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(80vh - 130px)"},attrs:{border:"","max-height":"100%",align:e.allAlign,data:e.tableData,"highlight-current-row":"","show-overflow":"tooltip","radio-config":e.multiple?{}:{trigger:"row"},"checkbox-config":e.multiple?{trigger:"row",highlight:!0,range:!0}:{},"edit-config":{trigger:"click",mode:"cell",showIcon:"true"}}},[e.multiple?t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}):t("vxe-table-column",{attrs:{type:"radio",width:"40"}}),t("vxe-table-column",{attrs:{type:"seq",width:"60",title:"序号"}}),t("vxe-table-column",{attrs:{field:"reasonCode",title:"故障原因代码",width:"150"}}),t("vxe-table-column",{attrs:{field:"reasonDesc",title:"故障原因描述",align:"left","header-align":"center"}})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1),t("fault-category-list",{ref:"categorySelect",attrs:{multiple:!1},on:{ok:e.addCategoryTarget}}),t("fault-code-list",{ref:"codeSelect",attrs:{multiple:!1},on:{ok:e.addCodeTarget}})],1)},l=[],o=a("b47d"),i=a("a396"),n=a("0e7b"),s=a("ca00"),c={name:"FaultReasonList",components:{FaultCategoryList:i["default"],FaultCodeList:n["default"]},props:{multiple:{type:Boolean,default:!0}},data:function(){return{categoryCode:"",faultCode:"",queryParam:{searchText:"",categoryId:"",faultCodeId:"",pageNo:1,pageSize:10},allAlign:"center",totalResult:0,tableData:[],visible:!1,confirmLoading:!1,formItemLayout:{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}}}},watch:{categoryCode:function(e,t){e||(this.queryParam.categoryId=null)},faultCode:function(e,t){e||(this.queryParam.faultCodeId=null)}},methods:{showModal:function(e){this.visible=!0,this.queryParam.faultCodeId=e,this.findList()},findList:function(){var e=this;this.loading=!0,Object(o["R"])(this.queryParam).then((function(t){e.totalResult=t.result.total,e.loading=!1,e.tableData=t.result.records}))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()},handleOk:function(){var e=[];this.multiple?e=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&e.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",e),this.close()},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,this.categoryCode="",this.faultCode="",this.queryParam.searchText="",this.queryParam.categoryId="",this.queryParam.faultCodeId=""},openSelectTypeModal:function(e){switch(e){case 1:this.$refs.categorySelect.showModal(),this.$refs.categoryIdSelect.blur();break;case 2:this.$refs.codeSelect.showModal(),this.$refs.faultCodeIdSelect.blur();break;default:break}},addCategoryTarget:function(e){Object(s["e"])(e)?this.queryParam.categoryId="":(this.queryParam.categoryId=e[0].id,this.categoryCode=e[0].categoryCode)},addCodeTarget:function(e){Object(s["e"])(e)?this.queryParam.faultCodeId="":(this.queryParam.faultCodeId=e[0].id,this.faultCode=e[0].fltCode)}}},u=c,d=(a("ef2b0"),a("2877")),h=Object(d["a"])(u,r,l,!1,null,"ba47c754",null);t["default"]=h.exports},7616:function(e,t,a){},a396:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"70%",title:"故障分类选择",visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",centered:"",destroyOnClose:!0,bodyStyle:{height:"80vh"}},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline","label-col":e.formItemLayout.labelCol,"wrapper-col":e.formItemLayout.wrapperCol},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.findList.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:""}},[t("a-input",{attrs:{placeholder:"请输入故障分类编码或者描述"},model:{value:e.queryParam.searchText,callback:function(t){e.$set(e.queryParam,"searchText",t)},expression:"queryParam.searchText"}})],1)],1),t("a-col",{attrs:{md:3,sm:8}},[t("a-form-item",[t("a-button",{on:{click:e.findList}},[e._v("查询")])],1)],1)],1)],1)],1),t("div",{staticStyle:{height:"calc(80vh - 130px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(80vh - 130px)"},attrs:{border:"","max-height":"100%",align:e.allAlign,data:e.tableData,"highlight-current-row":"","show-overflow":"tooltip","radio-config":e.multiple?{}:{trigger:"row"},"checkbox-config":e.multiple?{trigger:"row",highlight:!0,range:!0}:{},"edit-config":{trigger:"click",mode:"cell",showIcon:"true"}}},[e.multiple?t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}):t("vxe-table-column",{attrs:{type:"radio",width:"40"}}),t("vxe-table-column",{attrs:{type:"seq",width:"60",title:"序号"}}),t("vxe-table-column",{attrs:{field:"categoryCode",title:"故障分类编码",width:"150"}}),t("vxe-table-column",{attrs:{field:"categoryDesc",title:"故障分类描述",align:"left","header-align":"center"}})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1)])},l=[],o=a("b47d"),i={name:"FaultCategoryList",props:{multiple:{type:Boolean,default:!0}},data:function(){return{queryParam:{searchText:"",pageNo:1,pageSize:10},allAlign:"center",totalResult:0,tableData:[],visible:!1,confirmLoading:!1,formItemLayout:{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}}}},methods:{showModal:function(){this.visible=!0,this.findList()},findList:function(){var e=this;this.loading=!0,Object(o["O"])(this.queryParam).then((function(t){e.totalResult=t.result.total,e.loading=!1,e.tableData=t.result.records}))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()},handleOk:function(){var e=[];this.multiple?e=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&e.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",e),this.close()},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,this.queryParam.searchText=""}}},n=i,s=(a("2a71"),a("2877")),c=Object(s["a"])(n,r,l,!1,null,"124b546c",null);t["default"]=c.exports},d4ad:function(e,t,a){},ef2b0:function(e,t,a){"use strict";a("7616")}}]);