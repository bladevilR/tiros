(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0be16a"],{"2f88":function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:"导入EXCEL",width:600,visible:e.visible,confirmLoading:e.uploading},on:{cancel:e.handleClose}},[t("a-form-model",{attrs:{form:e.form}},[t("a-row",[t("a-col",[t("a-form-model-item",{attrs:{prop:"fileList",labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"请选择文件"}},[t("a-upload",{attrs:{name:"file",multiple:!1,accept:".xls,.xlsx",fileList:e.form.fileList,remove:e.handleRemove,beforeUpload:e.beforeUpload}},[t("a-button",{attrs:{disabled:e.form.fileList.length>=e.sum}},[t("a-icon",{attrs:{type:"upload"}}),e._v(" 选择导入文件 ")],1)],1)],1)],1),t("a-col",[t("a-form-model-item",{attrs:{prop:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"清除已有数据"}},[t("a-switch",{model:{value:e.form.clear,callback:function(t){e.$set(e.form,"clear",t)},expression:"form.clear"}})],1)],1)],1)],1),t("template",{slot:"footer"},[t("a-button",{on:{click:e.handleClose}},[e._v("关闭")]),t("a-button",{attrs:{type:"primary",disabled:0===e.form.fileList.length,loading:e.uploading},on:{click:e.handleImport}},[e._v(" "+e._s(e.uploading?"导入中...":"开始导入")+" ")])],1)],2)},r=[],n=o("0fea");function a(e){return p(e)||f(e)||s(e)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(e){if("string"==typeof e)return u(e,t);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?u(e,t):void 0}}function f(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function p(e){if(Array.isArray(e))return u(e)}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,i=Array(t);o<t;o++)i[o]=e[o];return i}var c={name:"GroupStockImport",props:{url:{type:String,default:"",required:!1},biz:{type:String,default:"",required:!1},sum:{type:Number,default:1}},data:function(){return{visible:!1,uploading:!1,form:{fileList:[],clear:!0},uploadAction:"",foreignKeys:"",labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}}},watch:{url:function(e){e&&(this.uploadAction=e)}},created:function(){this.uploadAction=this.url},mounted:function(){},methods:{handleClose:function(){this.visible=!1},show:function(e){Object.assign(this.form,this.$options.data().form),this.uploading=!1,this.visible=!0,this.foreignKeys=e},handleRemove:function(e){var t=this.form.fileList.indexOf(e),o=this.form.fileList;o.splice(t,1),this.fileList=JSON.parse(JSON.stringify(o))},beforeUpload:function(e){return this.form.fileList=[].concat(a(this.form.fileList),[e]),!1},handleImport:function(){var e=this,t=this.form.fileList,o=new FormData;this.biz&&o.append("isSingleTableImport",this.biz),this.foreignKeys&&this.foreignKeys.length>0&&o.append("foreignKeys",this.foreignKeys),t.forEach((function(e){o.append("file",e)})),o.append("cleanup",this.form.clear),this.uploading=!0,Object(n["j"])(this.uploadAction,o).then((function(t){e.uploading=!1,t.success?(e.$message.success(t.message),e.visible=!1,e.$emit("ok"),Object.assign(e.form,e.$options.data().form)):e.$message.warning(t.message)}))}}},m=c,d=o("2877"),h=Object(d["a"])(m,i,r,!1,null,"0e723c8c",null);t["default"]=h.exports}}]);