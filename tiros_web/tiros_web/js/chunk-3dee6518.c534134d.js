(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3dee6518","chunk-2d0a3c7a"],{"0444":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,width:800,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"所属车辆段"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["depotId",e.validatorRules.depotId],expression:"[ 'depotId', validatorRules.depotId]",modifiers:{trim:!0}}],attrs:{placeholder:"请选择",triggerChange:!0,dictCode:"bu_mtr_depot,name,id"},on:{change:e.handleDep}})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"编号"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["code",e.validatorRules.code],expression:"[ 'code', validatorRules.code]",modifiers:{trim:!0}}],attrs:{placeholder:"编号"}})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"状态"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["status",e.validatorRules.status],expression:"[ 'status', validatorRules.status]",modifiers:{trim:!0}}],attrs:{triggerChange:!0,placeholder:"请选择股道状态",dictCode:"bu_valid_status"}})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"备注"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["remark",e.validatorRules.remark],expression:"[ 'remark', validatorRules.remark]",modifiers:{trim:!0}}]})],1)],1)],1)],1)},i=[],o=a("8fad"),l=a("4ec3"),s=a("ca00"),n={name:"TrackModal",data:function(){return{value:1,title:"操作",visible:!1,depId:"",model:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,form:this.$form.createForm(this),validatorRules:{code:{rules:[{required:!0,message:"请输入编号!"},{validator:this.validateCode},{max:32,message:"输入长度不能超过32字符!"}]},status:{rules:[{required:!0,message:"请选择状态!"}]},depotId:{rules:[{required:!0,message:"请选择所属车辆段!"}]},remark:{rules:[{max:256,message:"输入长度不能超过255字符!"}]}}}},created:function(){},methods:{handleDep:function(e){this.depId=e},validateCode:function(e,t,a){var r={tableName:"bu_mtr_track",fieldName:"code",fieldVal:t,dataId:this.model.id,filterFields:[{name:"depot_id",val:this.model.depotId?this.model.depotId:this.depId}]};Object(s["e"])(t)?a():Object(l["m"])(r).then((function(e){e.success?a():a(e.message)}))},add:function(){this.edit({})},edit:function(e){var t=this;e.id?this.visiblekey=!0:this.visiblekey=!1,this.form.resetFields(),this.model=Object.assign({},e),this.visible=!0,this.$nextTick((function(){t.form.setFieldsValue({code:t.model.code,depotId:t.model.depotId,status:t.model.status,remark:t.model.remark})}))},handleOk:function(){var e=this;e.form.validateFields((function(t,a){if(!t){e.confirmLoading=!0;var r,i=Object.assign(e.model,a);r=e.model.id?Object(o["lb"])(i):Object(o["l"])(i),r.then((function(t){t.success?(e.$message.success(t.message),e.$emit("ok"),e.close()):e.$message.warning(t.message)})).finally((function(){e.confirmLoading=!1}))}}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},d=n,c=a("2877"),u=Object(c["a"])(d,r,i,!1,null,null,null);t["default"]=u.exports},"8bf1":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.findList.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"车辆段"}},[t("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_mtr_depot,name,id"},model:{value:e.queryParam.train,callback:function(t){e.$set(e.queryParam,"train",t)},expression:"queryParam.train"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"股道"}},[t("a-input",{attrs:{placeholder:"股道编号",allowClear:""},model:{value:e.queryParam.code,callback:function(t){e.$set(e.queryParam,"code",t)},expression:"queryParam.code"}})],1)],1),t("a-col",{attrs:{md:6,sm:8}},[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-space",[t("a-button",{on:{click:e.findList}},[e._v("查询")]),t("a-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增")]),t("a-button",{attrs:{disabled:1!=e.records.length},on:{click:function(t){return e.handleEdit(e.records[0])}}},[e._v("编辑")]),t("a-button",{attrs:{disabled:e.records.length<1},on:{click:e.deleteRecord}},[e._v("删除")])],1)],1)])],1)],1)],1),t("div",{staticStyle:{height:"calc(100vh - 225px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(100vh - 225px)"},attrs:{border:"","auto-resize":"","max-height":"100%",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","checkbox-config":{trigger:"row",highlight:!0,range:!0},"edit-config":{trigger:"manual",mode:"row"}},on:{"checkbox-change":e.checkboxChange,"checkbox-all":e.checkboxChange}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),t("vxe-table-column",{attrs:{field:"code",title:"股道编号",width:"15%"}}),t("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",width:"15%"}}),t("vxe-table-column",{attrs:{field:"depot",title:"所属车辆段"}}),t("vxe-table-column",{attrs:{field:"remark",title:"备注","header-align":"center",align:"left"}})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1),t("track-item-modal",{ref:"modalForm",on:{ok:e.loadData}})],1)},i=[],o=a("0444"),l=a("8fad"),s={components:{TrackItemModal:o["default"]},data:function(){return{records:[],queryParam:{depotId:"",code:"",pageNo:1,pageSize:10},totalResult:0,allAlign:"center",tableData:[]}},created:function(){this.findList()},methods:{checkboxChange:function(e){this.records=e.records},findList:function(){var e=this;this.loading=!0,Object(l["hc"])(this.queryParam).then((function(t){t.success&&(e.totalResult=t.result.total,e.loading=!1,e.records=[],e.tableData=t.result.records)}))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()},handleEdit:function(e){this.$refs.modalForm.edit(e),this.$refs.modalForm.title="编辑"},handleAdd:function(){this.$refs.modalForm.add(),this.$refs.modalForm.title="新增"},deleteRecord:function(){var e=this,t=this.$refs.listTable.getCheckboxRecords();t.length>0?this.$confirm({content:"是否删除选中".concat(t.length,"条数据？"),okText:"确定",cancelText:"取消",onOk:function(){var a=t.map((function(e,t){return e.id})).join(",");Object(l["O"])({ids:a}).then((function(t){t.success?(e.findList(),e.$message.success(t.message)):e.$message.warning(t.message)}))}}):this.$message.error("尚未选中任何数据!")},loadData:function(){this.findList()}}},n=s,d=a("2877"),c=Object(d["a"])(n,r,i,!1,null,null,null);t["default"]=c.exports}}]);