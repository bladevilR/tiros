(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-181b16ad"],{"00b0":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e._self._c;return t("div",[t("a-modal",{attrs:{title:"阈值设置",width:"100%",visible:e.visible,dialogClass:"fullDialog",destroyOnClose:""},on:{cancel:e.handleCancel}},[t("a-row",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"flex",justify:"space-between"}},[t("a-col",{attrs:{span:18}},[e.selectItem?t("div",{staticStyle:{"line-height":"32px","padding-left":"15px","font-weight":"bold",color:"red"}},[e._v(" "+e._s(e.selectItem.itemName)+"："+e._s(e.selectItem.linkDomain)+" "+e._s(e.selectItem.operator_dictText)+" "+e._s(e.selectItem.threshold)+" "),e.selectItem.operator2&&e.selectItem.threshold2?t("span",[e._v(" 且 "+e._s(e.selectItem.operator2_dictText)+" "+e._s(e.selectItem.threshold2)+" ")]):e._e(),t("span",{staticStyle:{"margin-left":"10px",color:"#cccccc"}},[e._v(" 提示："+e._s(e.selectItem.template)+" ")])]):e._e()]),t("a-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[t("a-space",[t("a-button",{directives:[{name:"show",rawName:"v-show",value:e.selectFormId,expression:"selectFormId"}],staticClass:"primary-color",attrs:{type:"dashed"},on:{click:e.showDrawer}},[e._v(" 已设置列表 ")])],1)],1)],1),t("div",{staticClass:"listBox"},[t("div",{staticStyle:{margin:"0px",padding:"0px",width:"60%",height:"100%"},attrs:{id:"luckysheet"}}),t("div",{staticClass:"form_bnox"},[t("a-form-model",{ref:"form",attrs:{model:e.form,rules:e.rules}},[t("a-row",[t("a-col",{attrs:{span:24}},[t("a-form-model-item",{attrs:{label:"测量项名",prop:"itemName"}},[t("a-input",{attrs:{placeholder:"请输入测量项名称"},model:{value:e.form.itemName,callback:function(t){e.$set(e.form,"itemName",t)},expression:"form.itemName"}})],1)],1)],1),t("a-row",[t("a-col",{attrs:{span:5}},[t("a-form-model-item",{attrs:{label:"比较值",prop:"linkDomain"}},[e._v(" "+e._s(e.form.linkDomain)+" ")])],1),t("a-col",{attrs:{span:5}},[t("a-form-model-item",{attrs:{label:"比较符",prop:"operator"}},[t("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_operator"},model:{value:e.form.operator,callback:function(t){e.$set(e.form,"operator",t)},expression:"form.operator"}})],1)],1),t("a-col",{attrs:{span:13,offset:1}},[t("a-form-model-item",{attrs:{label:"阈值",prop:"threshold"}},[t("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入阈值"},model:{value:e.form.threshold,callback:function(t){e.$set(e.form,"threshold",t)},expression:"form.threshold"}})],1)],1)],1),t("a-row",[t("a-col",{attrs:{span:5}},[t("a-form-model-item",[e._v(" - ")])],1),t("a-col",{attrs:{span:5}},[t("a-form-model-item",{attrs:{label:"比较符2",prop:"operator2"}},[t("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_operator"},model:{value:e.form.operator2,callback:function(t){e.$set(e.form,"operator2",t)},expression:"form.operator2"}})],1)],1),t("a-col",{attrs:{span:13,offset:1}},[t("a-form-model-item",{attrs:{label:"阈值2",prop:"threshold2"}},[t("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入阈值"},model:{value:e.form.threshold2,callback:function(t){e.$set(e.form,"threshold2",t)},expression:"form.threshold2"}})],1)],1)],1),t("a-row",[t("a-col",{attrs:{span:24}},[t("a-form-model-item",{attrs:{label:"提示消息模版"}},[t("a-textarea",{attrs:{placeholder:"请输入提示模版,支持${value}","auto-size":{minRows:2,maxRows:3}},model:{value:e.form.template,callback:function(t){e.$set(e.form,"template",t)},expression:"form.template"}})],1)],1)],1),t("a-row",[t("a-col",{attrs:{span:24}},[t("a-form-model-item",{attrs:{label:"指定设备"}},[t("a-select",{ref:"assetType",attrs:{placeholder:"请选择设备",open:!1},on:{focus:e.openAssetTypeModal},model:{value:e.form.assetTypeName,callback:function(t){e.$set(e.form,"assetTypeName",t)},expression:"form.assetTypeName"}},[t("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},on:{click:e.openAssetTypeModal},slot:"suffixIcon"})],1)],1)],1)],1)],1)],1)]),t("template",{slot:"footer"},[t("a-button",{on:{click:e.handleCancel}},[e._v(" 关闭 ")])],1)],2)],1)},n=[],a=r("b7b4"),s=r("8fad"),c=r("2410"),i=r.n(c),l={data:function(){var e=this;return{selectFormId:"",visible:!1,colNames:[],curFormId:null,selectZones:"",selectZoneNames:"",editVisible:!1,selectItem:null,defaultOptions:{container:"luckysheet",title:"sheet",column:26,row:50,lang:"zh",allowEdit:!1,showinfobar:!1,sheetFormulaBar:!1,showsheetbar:!1,showstatisticBar:!1,enableAddRow:!1,enableAddCol:!1,showtoolbar:!1,hook:{cellMousedown:function(t,r,o,n){e.getRowColData(r.r,r.c)}}},form:{customId:"",itemName:"",operator:"",threshold:"",operator2:"",threshold2:"",template:"${trainNo} > ${assetTypeName} > ${name} ${operator} ${value}",linkDomain:"",assetTypeId:"",assetTypeName:"",row1:0,row2:0,col1:0,col2:0},rules:{itemName:[{required:!0,message:"请输入测量项名称",trigger:"blur"}],operator:[{required:!0,message:"请选择比较符",trigger:"blur"}],threshold:[{required:!0,message:"请输入阈值",trigger:"blur"}],linkDomain:[{required:!0,message:"请选择范围",trigger:"blur"}]}}},mounted:function(){for(var e=65;e<91;e++)this.colNames.push(String.fromCharCode(e))},methods:{showModal:function(e){var t=this;this.visible=!0,this.$nextTick((function(){t.curFormId=e.id,t.loadForm(e.id).then((function(){var e=luckysheet.getRange();if(e){var r=[],o=[];e.forEach((function(e){var n=t.colNames[e.column[0]]+e.row[0]+":"+t.colNames[e.column[1]]+e.row[1];o.push(n),r.push({row:e.row,col:e.column})})),t.selectZones=r[0],t.selectZoneNames=o[0],t.editVisible=!0,t.form.linkDomain=t.zoneNames,t.form.row1=t.zones.row[0],t.form.row2=t.zones.row[1],t.form.col1=t.zones.col[0],t.form.col2=t.zones.col[1],t.form.customId=t.formId}}))}))},loadForm:function(e){var t=this;return new Promise((function(r,o){luckysheet.destroy(),Object(s["Db"])(e).then((function(n){if(n.success){t.selectFormId=e;var a=JSON.parse(n.result),s=i()(t.defaultOptions);s.data=[a],luckysheet.create(s),r()}else t.selectFormId="",t.$message.warning(n.message),o()})).catch((function(e){t.$message.error("加载表单内容异常"),o()}))}))},handleCancel:function(){this.visible=!1,Object.assign(this.$data,this.$options.data())},getRowColData:function(e,t){var r=this;this.selectItem=null,Object(a["y"])({customId:this.curFormId,row1:e,row2:e,col1:t,col2:t}).then((function(e){e.success&&(r.selectItem=e.result)}))},openAssetTypeModal:function(){this.$refs.assetTypeModal.showModal(),this.$refs.assetType.blur()},onAssetTypeSelect:function(e){if(e.length>0){var t=e[0];t?(this.form.assetTypeName=t.name,this.form.assetTypeId=t.id):(this.form.assetTypeName="",this.form.assetTypeId=""),this.$forceUpdate(),this.$refs.form.validateField("assetType")}else this.form.assetTypeId=""},showDrawer:function(){this.loadFormThresholds(),this.drawerVisible=!0},loadFormThresholds:function(){var e=this;getFormThresholds(this.curFormId).then((function(t){t.success?e.settingList=t.result:e.$message.error("加载已设置的数据错误")})).catch((function(t){e.$message.error("加载已设置的数据错误")}))}}},u=l,d=(r("4234"),r("2877")),f=Object(d["a"])(u,o,n,!1,null,"23a3dd1a",null);t["default"]=f.exports},4234:function(e,t,r){"use strict";r("82d76")},"82d76":function(e,t,r){},b7b4:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"j",(function(){return a})),r.d(t,"n",(function(){return s})),r.d(t,"c",(function(){return i})),r.d(t,"v",(function(){return l})),r.d(t,"x",(function(){return c})),r.d(t,"p",(function(){return d})),r.d(t,"F",(function(){return f})),r.d(t,"H",(function(){return m})),r.d(t,"r",(function(){return h})),r.d(t,"o",(function(){return b})),r.d(t,"l",(function(){return y})),r.d(t,"y",(function(){return j})),r.d(t,"a",(function(){return g})),r.d(t,"i",(function(){return w})),r.d(t,"m",(function(){return O})),r.d(t,"s",(function(){return q})),r.d(t,"B",(function(){return I})),r.d(t,"C",(function(){return k})),r.d(t,"G",(function(){return x})),r.d(t,"J",(function(){return T})),r.d(t,"g",(function(){return N})),r.d(t,"k",(function(){return $})),r.d(t,"t",(function(){return _})),r.d(t,"e",(function(){return C})),r.d(t,"u",(function(){return F})),r.d(t,"E",(function(){return R})),r.d(t,"z",(function(){return D})),r.d(t,"A",(function(){return S})),r.d(t,"d",(function(){return v})),r.d(t,"f",(function(){return z})),r.d(t,"q",(function(){return p})),r.d(t,"D",(function(){return A})),r.d(t,"I",(function(){return M})),r.d(t,"h",(function(){return P})),r.d(t,"w",(function(){return u}));var o=r("0fea"),n=function(e){return Object(o["j"])("/quality/rectify/add",e)},a=function(e){return Object(o["j"])("/quality/rectify/delete",e)},s=function(e){return Object(o["j"])("/quality/rectify/edit",e)},c=function(e){return Object(o["d"])("/quality/rectify/page",e)},i=function(e){return Object(o["j"])("/quality/rectify/close",e)},l=function(e){return Object(o["d"])("/quality/rectify/get",e)},u=function(e){return Object(o["d"])("/quality/rectify/getCode",e)},d=function(e){return Object(o["d"])("/quality/measurealert/page",e)},f=function(e){return Object(o["d"])("/quality/measurethreshold/form/page-data-form",e)},m=function(e){return Object(o["j"])("/quality/measurethreshold/threshold/save",e)},h=function(e){return Object(o["d"])("/quality/measurethreshold/threshold/list/".concat(e))},p=function(e){return Object(o["d"])("/serialPlan/plan/forms/online-form/alert-records",{dataRecordId:e})},b=function(e){return Object(o["j"])("/quality/measurethreshold/threshold/edit",e)},y=function(e){return Object(o["j"])("/quality/measurethreshold/threshold/delete",e)},j=function(e){return Object(o["d"])("/quality/measurethreshold/threshold/get",e)},g=function(e){return Object(o["j"])("/quality/leaverecord/add",e)},w=function(e){return Object(o["j"])("/quality/leaverecord/delete",e)},v=function(e){return Object(o["j"])("/quality/leaverecord/close",e)},O=function(e){return Object(o["j"])("/quality/leaverecord/edit",e)},q=function(e){return Object(o["d"])("/quality/leaverecord/page",e)},I=function(e,t){return Object(o["c"])("/quality/leaverecord/workLeaveRecordExport",e,t)},k=function(e){return Object(o["d"])("/quality/exception-transfer/page",e)},x=function(e){return Object(o["j"])("/quality/exception-transfer/add",e)},T=function(e){return Object(o["j"])("/quality/exception-transfer/edit",e)},N=function(e){return Object(o["j"])("/quality/exception-transfer/decide",e)},$=function(e){return Object(o["j"])("/quality/exception-transfer/delete",e)},_=function(e){return Object(o["d"])("/quality/record-confirm/list",e)},C=function(e){return Object(o["j"])("/quality/record-confirm/confirm",e)},F=function(e){return Object(o["d"])("/quality/record-confirm/work-record/get",e)},D=function(e){return Object(o["d"])("/serialPlan/plan/forms/check-record/get",e)},S=function(e){return Object(o["d"])("/workcheck/get",e)},z=function(e){return Object(o["j"])("/quality/record-confirm/confirm",e)},R=function(e){return Object(o["d"])("/quality/record-confirm/page",e)},A=function(e){return Object(o["d"])("/quality/record-confirm/page/check-record",e)},M=function(e){return Object(o["j"])("/serialPlan/plan/forms/judge/save",e)},P=function(e){return Object(o["j"])("/serialPlan/plan/forms/judge/delete",e)}}}]);