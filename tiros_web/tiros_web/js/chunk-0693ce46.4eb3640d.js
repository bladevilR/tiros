(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0693ce46"],{"815e":function(e,t,a){},"9f49":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e._self._c;return t("a-modal",{class:{"na-footer-none":2===e.modeType},attrs:{title:"托盘选择",width:"80%",bodyStyle:{height:"70vh"},visible:e.visible,confirmLoading:e.confirmLoading,closable:!0,centered:!0,forceRender:!0,destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"托盘编码"}},[t("a-input",{on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.findList.apply(null,arguments)}},model:{value:e.queryParam.searchText,callback:function(t){e.$set(e.queryParam,"searchText",t)},expression:"queryParam.searchText"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"物资类型"}},[t("a-select",{ref:"materialSelect",staticStyle:{width:"100%"},attrs:{allowClear:"",placeholder:"请选择物料",open:!1},on:{change:e.clearMaterialChange,dropdownVisibleChange:e.openMaterialSelectModal},model:{value:e.materialTypeName,callback:function(t){e.materialTypeName=t},expression:"materialTypeName"}},[t("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},on:{click:function(t){t.stopPropagation(),e.queryParam.typeId=""}},slot:"suffixIcon"})],1)],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"使用状态"}},[t("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_pallet_use_status"},model:{value:e.queryParam.useStatus,callback:function(t){e.$set(e.queryParam,"useStatus",t)},expression:"queryParam.useStatus"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"托盘状态"}},[t("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_valid_status"},model:{value:e.queryParam.status,callback:function(t){e.$set(e.queryParam,"status",t)},expression:"queryParam.status"}})],1)],1),t("a-col",{attrs:{md:4}},[t("a-space",[t("a-button",{attrs:{type:"primary"},on:{click:e.findList}},[e._v("查询")])],1)],1)],1)],1)],1),e.loading?t("div",{staticStyle:{height:"calc(100% - 110px)"},attrs:{id:"pallet_table_main"}},[t("vxe-table",{ref:"listTable",attrs:{border:"",align:"center",height:"auto",data:e.tableData,"show-overflow":"tooltip","radio-config":{highlight:!0,trigger:"row"},"row-class-name":e.setRowClass},on:{"cell-click":e.onCurrentChange}},[1===e.modeType?t("vxe-table-column",{attrs:{type:"radio",width:"60px"}}):e._e(),t("vxe-table-column",{attrs:{field:"code",title:"托盘编码"}}),t("vxe-table-column",{attrs:{field:"name",title:"托盘名称"}}),t("vxe-table-column",{attrs:{field:"materialTypeNames",title:"物资类型","min-width":"100",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"size",title:"尺寸"}}),t("vxe-table-column",{attrs:{field:"texture",title:"材质"}}),t("vxe-table-column",{attrs:{field:"useStatus_dictText",title:"使用状态",width:"120"}}),t("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",width:"80"}}),t("vxe-table-column",{attrs:{field:"remark",title:"备注"}})],1)],1):e._e(),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.page.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}}),t("material-list",{ref:"materialForm",attrs:{multiple:!1},on:{ok:e.onSelectMaterial}})],1)},i=[],r=a("c54ca"),n=a("7164"),s={name:"PalletList",components:{MaterialList:n["default"]},props:{multiple:{type:Boolean,default:!1},modeType:{type:Number,default:1}},data:function(){return{visible:!1,confirmLoading:!1,loading:!1,tableData:[],selectMaterialTypeId:"",materialTypeName:"",queryParam:{pageNo:1,pageSize:10,searchText:"",typeId:null,useStatus:null,status:null},page:{totalResult:3}}},updated:function(){var e=this;this.$nextTick((function(){e.loading=!0}))},created:function(){},methods:{showModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.visible=!0,this.selectMaterialTypeId=e,this.materialTypeName=t,this.queryParam.typeId=e,this.findList()},findList:function(){var e=this;Object(r["mb"])(this.queryParam).then((function(t){t.success&&(e.tableData=t.result.records,e.page.totalResult=t.result.total)}))},handleOk:function(){var e=this,t=this.$refs.listTable.getRadioRecord();t&&t.useStatus?this.$confirm({content:"该托盘正在使用中，确认继续选择该托盘？",okText:"确定",cancelText:"取消",onOk:function(){e.$emit("ok",t?[t]:[]),e.visible=!1}}):(this.$emit("ok",t?[t]:[]),this.visible=!1)},saveOk:function(){this.close()},saveFail:function(){this.confirmLoading=!1},handleCancel:function(){this.close()},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()},close:function(){this.visible=!1},openMaterialSelectModal:function(e){e&&(this.$refs.materialForm.showModal(),this.$refs.materialSelect.blur())},clearMaterialChange:function(e){e||(this.queryParam.typeId=null,this.materialTypeName=null)},onSelectMaterial:function(e){e.length&&(this.queryParam.typeId=e[0].id,this.materialTypeName=e[0].name)},onCurrentChange:function(e){var t=e.row;e.$event;2===this.modeType&&(this.$emit("ok",[t]),this.visible=!1)},setRowClass:function(){return 2===this.modeType?"mode-type-choose":""}}},o=s,u=(a("b0c8"),a("2877")),c=Object(u["a"])(o,l,i,!1,null,null,null);t["default"]=c.exports},b0c8:function(e,t,a){"use strict";a("815e")}}]);