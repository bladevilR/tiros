(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2245ba"],{e092:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"table-page-search-wrapper"},[e("a-form",{attrs:{layout:"inline"}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:6,sm:24}},[e("a-form-item",{attrs:{label:"培训名称"}},[e("a-input",{attrs:{placeholder:"请输入名称",allowClear:""},model:{value:t.queryParam.title,callback:function(e){t.$set(t.queryParam,"title",e)},expression:"queryParam.title"}})],1)],1),e("a-col",{attrs:{md:5,sm:24}},[e("a-form-item",{attrs:{label:"培训时间"}},[e("a-date-picker",{model:{value:t.queryParam.trainTime,callback:function(e){t.$set(t.queryParam,"trainTime",e)},expression:"queryParam.trainTime"}})],1)],1),e("a-col",{attrs:{md:6,sm:8}},[e("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[e("a-button",{on:{click:t.searchQuery}},[t._v("查询")]),e("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v("新增")]),e("a-button",{staticStyle:{"margin-left":"8px"},on:{click:t.deleteRecord}},[t._v("删除")])],1)])],1)],1)],1),e("div",{staticStyle:{height:"calc(100vh - 185px)"}},[e("vxe-table",{ref:"listTable",staticStyle:{height:"calc(100vh - 235px)"},attrs:{border:"","max-height":"100%",align:t.allAlign,data:t.trainingList,"edit-rules":t.validatorRules,"show-overflow":"tooltip","keep-source":!0,"checkbox-config":{trigger:"row",highlight:!0},"edit-config":{key:"id",trigger:"manual",mode:"row",autoClear:!1,showStatus:!0}}},[e("vxe-table-column",{attrs:{type:"checkbox",width:"60"}}),e("vxe-table-column",{attrs:{field:"title",title:"培训名称","min-width":"160",align:"left","header-align":"center","edit-render":{name:"input"}}}),e("vxe-table-column",{attrs:{field:"trainType_dictText",title:"培训类型","min-width":"120","edit-render":{name:"input"}},scopedSlots:t._u([{key:"edit",fn:function(i){var a=i.row;return[e("j-dict-select-tag",{staticStyle:{width:"100%"},attrs:{triggerChange:!0,dictCode:"bu_train_type"},model:{value:a.trainType,callback:function(e){t.$set(a,"trainType",e)},expression:"row.trainType"}})]}}])}),e("vxe-table-column",{attrs:{field:"address",title:"培训地点","min-width":"160","edit-render":{name:"input"}}}),e("vxe-table-column",{attrs:{field:"teacher",title:"讲师","min-width":"120","edit-render":{name:"input"}}}),e("vxe-table-column",{attrs:{field:"trainTime",title:"培训时间","min-width":"120","edit-render":{name:"input"}},scopedSlots:t._u([{key:"edit",fn:function(i){var a=i.row;return[e("a-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择培训时间",format:"YYYY-MM-DD"},model:{value:a.trainTime,callback:function(e){t.$set(a,"trainTime",e)},expression:"row.trainTime"}})]}}])}),e("vxe-table-column",{attrs:{field:"timeLength",title:"课时",width:"120","edit-render":{name:"input"}},scopedSlots:t._u([{key:"edit",fn:function(i){var a=i.row;return[e("a-input-number",{staticStyle:{width:"100%"},attrs:{defaultValue:1,min:1,max:1e4},model:{value:a.timeLength,callback:function(e){t.$set(a,"timeLength",e)},expression:"row.timeLength"}})]}}])}),e("vxe-table-column",{attrs:{field:"remark",title:"备注","min-width":"160",align:"left","header-align":"center","edit-render":{name:"input"}}}),e("vxe-table-column",{attrs:{title:"操作",width:"120",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(i){var a=i.row;return[t.$refs.listTable.isActiveByRow(a)?[e("a-button",{attrs:{type:"dashed",size:"small"},on:{click:function(e){return e.stopPropagation(),t.saveRowEvent(a)}}},[t._v("保存")]),e("a-button",{staticStyle:{"margin-left":"2px"},attrs:{type:"dashed",size:"small"},on:{click:function(e){return e.stopPropagation(),t.cancelRowEvent(a)}}},[t._v("取消")])]:[e("a-button",{attrs:{type:"dashed",size:"small"},on:{click:function(e){return e.stopPropagation(),t.editRowEvent(a)}}},[t._v("编辑")])]]}}])})],1),e("vxe-pager",{attrs:{perfect:"","current-page":t.queryParam.pageNo,"page-size":t.queryParam.pageSize,total:t.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(e){return t.$set(t.queryParam,"pageNo",e)},"update:current-page":function(e){return t.$set(t.queryParam,"pageNo",e)},"update:pageSize":function(e){return t.$set(t.queryParam,"pageSize",e)},"update:page-size":function(e){return t.$set(t.queryParam,"pageSize",e)}}})],1)])},r=[],n=i("8fad"),s=i("ca00"),l=i("c1df"),o=i.n(l),u=i("4ec3"),c={name:"TrainingInfo",props:{userId:{type:String,default:""}},data:function(){return{curEditMode:0,curRow:null,form:this.$form.createForm(this),queryParam:{title:"",trainTime:"",userId:"",pageNo:1,pageSize:10},trainingList:[],totalResult:0,allAlign:"center",validatorRules:{title:[{required:!0,message:"请输入培训名称!"},{max:32,message:"输入长度不能超过32个字符!"}],trainType_dictText:[{required:!0,message:"请选择培训类型!"}],address:[{required:!0,message:"请输入培训地点!"},{max:64,message:"输入长度不能超过64个字符!"}],trainTime:[{required:!0,message:"请选择培训时间!"}],remark:[{max:200,message:"备注长度不能超过200个字符!"}],teacher:[{max:32,message:"备注长度不能超过32个字符!"}]}}},mounted:function(){var t=this;Object(n["tc"])({id:this.userId}).then((function(e){e.success&&(t.trainingList=e.result.trainingList,t.totalResult=e.result.trainingList.length,t.$emit("trainingListMethod",t.trainingList))})),this.$forceUpdate()},methods:{editRowEvent:function(t){this.curEditMode=2,this.$refs.listTable.setActiveRow(t)},delRowEvent:function(t){var e=this;this.taskTools.map((function(i,a){t.id===i.id&&(e.trainingList.splice(a,1),e.$emit("update:trainingList",e.trainingList))}))},saveRowEvent:function(t){var e=this;t["trainType_dictText"]=t.trainType,this.$refs.listTable.validate(t,(function(i){if(i)for(var a in i){var r=i[a];r.forEach((function(t){t.rule&&e.$message.error(t.rule.message)}))}else 1===e.curEditMode&&(t["trainTime"]=o()(t.trainTime).format("YYYY-MM-DD"),Object(u["f"])("bu_train_type").then((function(i){i.success&&(i.result.map((function(e){e.value===t.trainType&&(t["trainType_dictText"]=e.title)})),e.trainingList.push(t),e.$emit("trainingListMethod",e.trainingList))}))),e.$refs.listTable.clearActived(),e.curEditMode=0}))},cancelRowEvent:function(t){this.$refs.listTable.clearActived(),1===this.curEditMode?this.$refs.listTable.remove(t):2===this.curEditMode&&this.$refs.listTable.revertData(t),this.curEditMode=0},handleAdd:function(){var t=this;if(!this.$refs.listTable.getActiveRecord()){this.curEditMode=1;var e={id:Object(s["p"])()};this.$refs.listTable.insertAt(e,-1).then((function(e){var i=e.row;t.$refs.listTable.setActiveCell(i,"title")}))}},searchTrainingPage:function(){var t=this;this.queryParam.trainTime=this.queryParam.trainTime?o()(this.queryParam.trainTime).format("YYYY-MM-DD"):"",Object(n["ad"])(this.queryParam).then((function(e){e.success&&(t.totalResult=e.result.total,t.trainingList=e.result.records)}))},searchQuery:function(){this.queryParam.userId=this.userId,this.searchTrainingPage()},searchReset:function(){},deleteRecord:function(){var t=this,e=this.$refs.listTable.getCheckboxRecords();e.length>0?this.$confirm({content:"是否删除选中".concat(e.length,"数据？"),onOk:function(){var i=e.map((function(t){return t.id}));t.trainingList=t.trainingList.filter((function(t){return!i.includes(t.id)})),t.$emit("trainingListMethod",t.trainingList)}}):this.$message.error("尚未选中任何数据!")}}},d=c,m=i("2877"),h=Object(m["a"])(d,a,r,!1,null,null,null);e["default"]=h.exports}}]);