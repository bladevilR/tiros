(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d13f948","chunk-2d0cc598"],{"4e0a":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{width:"90%",title:"车辆设备选择",centered:"",visible:t.visible,bodyStyle:{height:"80vh"},cancelText:"关闭",destroyOnClose:!0},on:{ok:t.handleOk,cancel:t.handleCancel}},[e("div",{staticClass:"table-page-search-wrapper"},[e("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.findList.apply(null,arguments)}}},[e("a-row",{attrs:{gutter:8}},[e("a-col",{attrs:{md:5,sm:24}},[e("a-form-item",{attrs:{label:"名称",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[e("a-input",{attrs:{placeholder:"名称或编码","allow-clear":""},model:{value:t.queryParam.searchText,callback:function(e){t.$set(t.queryParam,"searchText",e)},expression:"queryParam.searchText"}})],1)],1),e("a-col",{attrs:{md:9,sm:24}},[e("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[e("a-space",[e("a-button",{on:{click:t.findList}},[t._v("查询")])],1)],1)])],1)],1)],1),e("div",{staticClass:"tableHeight",staticStyle:{height:"calc(80vh - 85px)"}},[e("vxe-table",{ref:"listTable",staticStyle:{height:"calc(80vh - 85px)"},attrs:{border:"","row-id":"id",align:t.allAlign,data:t.tableData,"show-overflow":"tooltip","max-height":"100%","radio-config":{trigger:t.multiple?"default":"row",highlight:!0,checkMethod:t.checkRadioMethod},"checkbox-config":{trigger:t.multiple?"row":"default",highlight:!0,checkStrictly:!0,checkMethod:t.checkRadioMethod},"tree-config":{lazy:!0,children:"children",hasChild:"hasChildren",loadMethod:t.loadChildrenMethod}}},[t.multiple?e("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}):e("vxe-table-column",{attrs:{type:"radio",width:"40"}}),e("vxe-table-column",{attrs:{field:"name",title:"名称","tree-node":"",align:"left","header-align":"center"}}),e("vxe-table-column",{attrs:{align:"left","header-align":"center",field:"code",title:"编码",width:"150"}}),e("vxe-table-column",{attrs:{field:"structType_dictText",title:"类型",width:"120"}}),e("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",width:"100"}}),e("vxe-table-column",{attrs:{field:"placeId",title:"位置编码",width:"150"}}),e("vxe-table-column",{attrs:{field:"placeDesc",title:"位置描述",width:"200",align:"left","header-align":"center"}})],1)],1)])},r=[],l=a("8fad"),n={name:"TrainStructureList",props:{multiple:{type:Boolean,default:!1},canSelectType:{type:Array,default:function(){return[1,2,3,4]}},lineId:{type:String,default:""}},data:function(){return{visible:!1,queryParam:{id:"",searchText:"",status:null,trainStructId:""},selectParent:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:19}},allAlign:"center",tableData:[],trainStructId:""}},methods:{showModal:function(t){this.queryParam.trainStructId=t,this.queryParam.lineId=this.lineId,this.trainStructId=t,this.visible=!0,this.findList()},findList:function(){var t=this;Object(l["pc"])(this.queryParam).then((function(e){e.success&&(t.tableData=e.result)}))},loadChildrenMethod:function(t){var e=this,a=t.row,i={trainStructId:this.trainStructId,id:a.id};return new Promise((function(t){Object(l["pc"])(i).then((function(a){a.success?t(a.result):e.$message.error("".concat(a.msg))}))}))},handleOk:function(){var t=[];this.multiple?t=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&t.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",t),this.close()},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1},checkRadioMethod:function(t){var e=t.row;return this.canSelectType.indexOf(e.structType)>-1}}},s=n,c=a("2877"),o=Object(c["a"])(s,i,r,!1,null,"5f613a8e",null);e["default"]=o.exports},"95c6":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",[t.readOnly?t._e():e("a-form",{attrs:{layout:"inline"}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:6,sm:8}},[e("a-form-item",[e("a-space",[e("a-button",{staticClass:"primary-color",attrs:{type:"dashed"},on:{click:function(e){return t.$refs.assetSelect.showModal()}}},[t._v("添加")]),e("a-button",{attrs:{type:"dashed"},on:{click:t.handleDel}},[t._v("删除")])],1)],1)],1)],1)],1),e("vxe-table",{ref:"listTable",attrs:{border:"",align:t.allAlign,"show-overflow":"tooltip",data:t.targetDeviceList,"checkbox-config":{trigger:"row",highlight:!0}}},[e("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),e("vxe-table-column",{attrs:{field:"structDetailCode",title:"编码",width:"300"}}),e("vxe-table-column",{attrs:{field:"structDetailName",title:"名称",align:"left","header-align":"center"}}),e("vxe-table-column",{attrs:{field:"structDetailStructType_dictText",title:"类型",width:"300"}})],1),e("train-structure-list",{ref:"assetSelect",attrs:{lineId:t.lineId,multiple:!0,canSelectType:[3,4]},on:{ok:t.addAsset}})],1)},r=[],l=a("4e0a");function n(t){return d(t)||o(t)||c(t)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t,e){if(t){if("string"==typeof t)return u(t,e);var a={}.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?u(t,e):void 0}}function o(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function d(t){if(Array.isArray(t))return u(t)}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=Array(e);a<e;a++)i[a]=t[a];return i}var h={name:"TargetDevice",components:{TrainStructureList:l["default"]},props:{readOnly:{type:Boolean,default:!1},equipments:{type:Array,default:function(){return[]}},planInfo:{type:Object,default:function(){return{}}},lineId:{default:""},taskInfo:{type:Object,default:function(){return{}}}},watch:{equipments:{handler:function(t){this.targetDeviceList=t},deep:!0,immediate:!0}},data:function(){return{allAlign:"center",targetDeviceList:[]}},methods:{handleDel:function(){var t=this,e=this.$refs.listTable.getCheckboxRecords();e.length<1?this.$message.warn("请选择要删除的数据"):this.$confirm({content:"确认删除选中的数据？",onOk:function(){e.map((function(e){t.targetDeviceList.map((function(a,i){e.id==a.id&&t.targetDeviceList.splice(i,1)}))}))}})},addAsset:function(t){var e=this,a=[];t.forEach((function(t){e.targetDeviceList.filter((function(e){return e.id==t.id})).length?e.$message.warning("".concat(t.name,"-").concat(t.code,"已存在列表中")):a.push({assetTypeId:t.assetTypeId,assetTypeName:t.assetTypeName,structDetailId:t.id,structDetailCode:t.code,structDetailName:t.name,structDetailStructType_dictText:t.structType_dictText,planId:e.planInfo.id,planTaskId:e.taskInfo.taskId})})),this.targetDeviceList=[].concat(n(this.targetDeviceList),a),this.$emit("update:equipments",this.targetDeviceList)}}},f=h,p=a("2877"),m=Object(p["a"])(f,i,r,!1,null,null,null);e["default"]=m.exports}}]);