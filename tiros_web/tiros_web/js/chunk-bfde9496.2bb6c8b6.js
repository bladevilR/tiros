(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bfde9496"],{"2a4a":function(t,e,r){},"314e":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bodyWrapper"},[e("div",{staticClass:"table-page-search-wrapper"},[e("a-form",{attrs:{layout:"inline"}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:5,sm:12}},[e("a-form-item",{attrs:{label:"合同"}},[e("a-input",{attrs:{placeholder:"输入编码或者名称",allowClear:""},model:{value:t.queryParam.searchText,callback:function(e){t.$set(t.queryParam,"searchText",e)},expression:"queryParam.searchText"}})],1)],1),e("a-col",{attrs:{md:4,sm:12}},[e("a-form-item",{attrs:{label:"线路"}},[e("line-select-list",{attrs:{"trigger-change":!0},model:{value:t.queryParam.lineId,callback:function(e){t.$set(t.queryParam,"lineId",e)},expression:"queryParam.lineId"}})],1)],1),e("a-col",{attrs:{md:4,sm:12}},[e("a-form-item",{staticClass:"a-form-item-width-gy",attrs:{label:"厂商"}},[e("a-input",{attrs:{placeholder:"输入厂商名称"},model:{value:t.queryParam.supplier,callback:function(e){t.$set(t.queryParam,"supplier",e)},expression:"queryParam.supplier"}})],1)],1),e("a-col",{attrs:{md:6,sm:12}},[e("a-form-item",{attrs:{label:"时间"}},[e("a-range-picker",{attrs:{format:"YYYY-MM-DD",placeholder:["开始时间","结束时间"],defaultPickerValue:t.defaultDateRange},on:{change:t.onDateChange}})],1)],1),e("a-col",{attrs:{md:2,sm:24}},[e("a-button",{on:{click:t.findList}},[t._v("查询")])],1),e("a-col",{attrs:{md:24,sm:24}},[e("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[e("a-space",[e("a-button",{attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v("新增")]),e("a-button",{attrs:{disabled:!t.btnStatus.edit},on:{click:t.handleEdit}},[t._v("编辑")]),e("a-button",{attrs:{disabled:!t.btnStatus.del},on:{click:t.deleteRecord}},[t._v("删除")])],1)],1)])],1)],1)],1),e("div",{staticStyle:{height:"calc(100vh - 258px)"}},[e("vxe-table",{ref:"listTable",staticStyle:{height:"calc(100vh - 258px)"},attrs:{border:"","max-height":"100%",data:t.tableData,align:t.allAlign,"show-overflow":"tooltip","checkbox-config":{trigger:"row",highlight:!0,range:!0},"edit-config":{trigger:"manual",mode:"row"}},on:{"checkbox-change":t.rowSelectChange,"checkbox-all":function(e){return t.btnStatus.update()}}},[e("vxe-table-column",{attrs:{type:"checkbox",width:"40",fixed:"left"}}),e("vxe-table-column",{attrs:{field:"contractNo","header-align":"center",title:"合同编号",width:"150"}}),e("vxe-table-column",{attrs:{field:"contractName","header-align":"center",title:"合同名称",width:"220"}}),e("vxe-table-column",{attrs:{field:"supplierName","header-align":"center",title:"培训厂商",width:"150"}}),e("vxe-table-column",{attrs:{field:"title",align:"left","header-align":"center",title:"培训标题",width:"220"}}),e("vxe-table-column",{attrs:{field:"startDate",title:"培训开始日期",width:"150"}}),e("vxe-table-column",{attrs:{field:"days","header-align":"center",title:"培训天数",width:"100"}}),e("vxe-table-column",{attrs:{field:"manTimes","header-align":"center",title:"培训人次",width:"100"}}),e("vxe-table-column",{attrs:{field:"trainingUsers",align:"left","header-align":"center",title:"培训名单",width:"200"}}),e("vxe-table-column",{attrs:{field:"remark",align:"left","header-align":"center",title:"备注",width:"200"}}),e("vxe-table-column",{attrs:{field:"fujian",align:"left","header-align":"center",title:"附件",width:"200"},scopedSlots:t._u([{key:"default",fn:function(r){var n=r.row;return[n.trainingAnnexList?e("div",t._l(n.trainingAnnexList,(function(r,a){return e("span",{key:a},[e("a",{staticStyle:{"font-size":"12px"},attrs:{href:"javascript:;"},on:{click:function(e){return e.stopPropagation(),t.handleSeeing(r)}}},[t._v(t._s(r.name))]),a<n.trainingAnnexList.length-1?e("i",[t._v("，")]):t._e()])})),0):t._e()]}}])})],1)],1),e("vxe-pager",{attrs:{perfect:"","current-page":t.queryParam.pageNo,"page-size":t.queryParam.pageSize,total:t.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(e){return t.$set(t.queryParam,"pageNo",e)},"update:current-page":function(e){return t.$set(t.queryParam,"pageNo",e)},"update:pageSize":function(e){return t.$set(t.queryParam,"pageSize",e)},"update:page-size":function(e){return t.$set(t.queryParam,"pageSize",e)},"page-change":t.handlePageChange}}),e("TrainingRecordItemModel",{ref:"modalForm",on:{ok:function(e){return t.loadData()}}}),e("doc-preview-modal",{ref:"docPreview",attrs:{title:t.fileName}})],1)},a=[],i=r("5633"),o=r("d214"),l=r("7a81"),s=r("353a"),c=r("8fad"),u=r("54f6");function f(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function i(r,n,a,i){var s=n&&n.prototype instanceof l?n:l,c=Object.create(s.prototype);return d(c,"_invoke",function(r,n,a){var i,l,s,c=0,u=a||[],f=!1,d={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,r){return i=e,l=0,s=t,d.n=r,o}};function h(r,n){for(l=r,s=n,e=0;!f&&c&&!a&&e<u.length;e++){var a,i=u[e],h=d.p,p=i[2];r>3?(a=p===n)&&(s=i[(l=i[4])?5:(l=3,3)],i[4]=i[5]=t):i[0]<=h&&((a=r<2&&h<i[1])?(l=0,d.v=n,d.n=i[1]):h<p&&(a=r<3||i[0]>n||n>p)&&(i[4]=r,i[5]=n,d.n=p,l=0))}if(a||r>1)return o;throw f=!0,n}return function(a,u,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===u&&h(u,p),l=u,s=p;(e=l<2?t:s)||!f;){i||(l?l<3?(l>1&&(d.n=-1),h(l,s)):d.n=s:d.v=s);try{if(c=2,i){if(l||(a="next"),e=i[a]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=i.return)&&e.call(i),l<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),l=1);i=t}else if((e=(f=d.n<0)?s:r.call(n,d))!==o)break}catch(e){i=t,l=1,s=e}finally{c=1}}return{value:e,done:f}}}(r,a,i),!0),c}var o={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][n]?e(e([][n]())):(d(e={},n,(function(){return this})),e),h=c.prototype=l.prototype=Object.create(u);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,d(t,a,"GeneratorFunction")),t.prototype=Object.create(h),t}return s.prototype=c,d(h,"constructor",c),d(c,"constructor",s),s.displayName="GeneratorFunction",d(c,a,"GeneratorFunction"),d(h),d(h,a,"Generator"),d(h,n,(function(){return this})),d(h,"toString",(function(){return"[object Generator]"})),(f=function(){return{w:i,m:p}})()}function d(t,e,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}d=function(t,e,r,n){function i(e,r){d(t,e,(function(t){return this._invoke(e,r,t)}))}e?a?a(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},d(t,e,r,n)}function h(t,e,r,n,a,i,o){try{var l=t[i](o),s=l.value}catch(t){return void r(t)}l.done?e(s):Promise.resolve(s).then(n,a)}function p(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var i=t.apply(e,r);function o(t){h(i,n,a,o,l,"next",t)}function l(t){h(i,n,a,o,l,"throw",t)}o(void 0)}))}}var m={name:"List",components:{LineSelectList:i["default"],TrainingRecordItemModel:l["default"],DocPreviewModal:s["default"]},data:function(){return{btnStatus:new u["a"](this,"listTable",{}),queryParam:{endTime:"",startTime:"",searchText:"",lineId:"",supplier:"",pageNo:1,pageSize:10},totalResult:0,allAlign:"center",tableData:[],tableHeight:{top:"height: calc(100vh - 280px)",bottom:"height: calc(100vh - 225px)",size:"100%"},filePath:"",fileName:"",status:!1}},created:function(){this.findList()},methods:{rowSelectChange:function(){this.btnStatus.update()},onDateChange:function(t,e){this.queryParam.startTime=e[0],this.queryParam.endTime=e[1]},findList:function(){var t=this;Object(o["fb"])(this.queryParam).then((function(e){t.totalResult=e.result.total,t.loading=!1,t.tableData=e.result.records}))},handlePageChange:function(t){var e=t.currentPage,r=t.pageSize;this.queryParam.pageNo=e,this.queryParam.pageSize=r,this.findList()},loadData:function(){this.findList(),this.$emit("load")},handleAdd:function(){this.$refs.modalForm.add(),this.$refs.modalForm.title="新增"},handleEdit:function(){var t=this.$refs.listTable.getCheckboxRecords();1==t.length?(this.$refs.modalForm.edit(t[0]),this.$refs.modalForm.title="编辑"):this.$message.error("请选中一项数据!")},deleteRecord:function(){var t=this,e=this.$refs.listTable.getCheckboxRecords();e.length>0?this.$confirm({content:"是否删除选中".concat(e.length,"数据？"),onOk:function(){var r=e.map((function(t,e){return t.id})).join(",");Object(o["s"])("ids="+r).then((function(e){t.findList(),t.$message.success(e.message)}))}}):this.$message.error("尚未选中任何数据!")},handlePrivilege:function(){var t=p(f().m((function t(e,r){var n,a=this;return f().w((function(t){while(1)switch(t.n){case 0:return n={id:e,operation:r},t.n=1,Object(c["xc"])(n).then((function(t){a.status=t.result}));case 1:return t.a(2)}}),t)})));function e(e,r){return t.apply(this,arguments)}return e}(),handleSeeing:function(){var t=p(f().m((function t(e){return f().w((function(t){while(1)switch(t.n){case 0:return t.n=1,this.handlePrivilege(e.id,2);case 1:this.status?(this.fileName=e.name,this.$refs.docPreview.handleFilePath(e.savepath)):this.$message.error("您没有权限!");case 2:return t.a(2)}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},g=m,b=(r("7015"),r("2877")),v=Object(b["a"])(g,n,a,!1,null,null,null);e["default"]=v.exports},"54f6":function(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,l(n.key),n)}}function o(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(t){var e=s(t,"string");return"symbol"==n(e)?e:e+""}function s(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!=n(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}r.d(e,"a",(function(){return c}));var c=function(){function t(e,r){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a(this,t),this.options={attrs:[]},Object.assign(this.options,i),this.options.attrs.find((function(t){return"edit"===t.key}))||this.options.attrs.push({key:"edit"}),this.options.attrs.forEach((function(t){Object.hasOwnProperty.call(t,"key")&&(n[t.key]=!1),Object.hasOwnProperty.call(t,"judge")||(t["judge"]=function(t){return!0})})),this.del=!1,this.nextTick=e.$nextTick,this.refs=e.$refs,this.refName=r,e.$nextTick((function(){n.vxeTable=e.$refs[r]}))}return o(t,[{key:"editRow",get:function(){if(this.edit){var t=this.vxeTable.getCheckboxRecords();return t.length?t[0]:{}}return{}}},{key:"update",value:function(){var t=this;this.nextTick((function(){t.vxeTable||(t.vxeTable=t.refs[t.refName]);var e=t.vxeTable.getCheckboxRecords();t.del=e.length>0,t.options.attrs.forEach((function(r){for(var n in r)Object.hasOwnProperty.call(r,n)&&(r["isDel"]?e.length?t[r.key]=e.length>0&&r.judge(e[0]):t[r.key]=!1:e.length?t[r.key]=1===e.length&&r.judge(e[0]):t[r.key]=!1)}))}))}}])}()},7015:function(t,e,r){"use strict";r("2a4a")}}]);