(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ef4005c8","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7"],{"43f7":function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return u})),a.d(t,"v",(function(){return o})),a.d(t,"e",(function(){return n})),a.d(t,"q",(function(){return s})),a.d(t,"m",(function(){return l})),a.d(t,"d",(function(){return y})),a.d(t,"t",(function(){return b})),a.d(t,"r",(function(){return d})),a.d(t,"p",(function(){return c})),a.d(t,"u",(function(){return h})),a.d(t,"o",(function(){return p})),a.d(t,"b",(function(){return f})),a.d(t,"n",(function(){return g})),a.d(t,"s",(function(){return m})),a.d(t,"f",(function(){return q})),a.d(t,"h",(function(){return P})),a.d(t,"g",(function(){return Y})),a.d(t,"l",(function(){return D})),a.d(t,"j",(function(){return v})),a.d(t,"i",(function(){return w})),a.d(t,"k",(function(){return k}));var r=a("0fea"),n=function(e){return Object(r["d"])("/report/excel/get",{tempCode:e})},i=function(e){return Object(r["d"])("/report/daily/get",e)},u=function(e){return Object(r["d"])("/report/daily/generate",e)},o=function(e){return Object(r["j"])("/report/daily/save",e)},s=function(e){return Object(r["d"])("/report/fault/count/trains",e)},l=function(e){return Object(r["d"])("/report/fault/count/systems",e)},c=function(e){return Object(r["d"])("/report/fault/detail/list",e)},d=function(e){return Object(r["d"])("/report/cost/detail/statistic-consume",e)},m=function(e){return Object(r["d"])("/report/cost/detail/statistic-must-random",e)},h=function(e){return Object(r["d"])("/report/turnover/detail/page",e)},p=function(e){return Object(r["d"])("/report/cost/kpi/page",e)},f=function(e,t){return Object(r["c"])("/report/cost/kpi/export",e,t)},y=function(e){return Object(r["d"])("/report/fault/train-count/sys",e)},b=function(e){return Object(r["d"])("/report/cost/train/statistic",e)},g=function(e){return Object(r["d"])("/report/cost/train/get-cars-number",e)},q=function(e){return Object(r["d"])("/produce/plan/summary/cost",e)},P=function(e){return Object(r["d"])("/produce/plan/summary/fault",e)},Y=function(e){return Object(r["d"])("/produce/plan/summary/total",e)},D=function(e){return Object(r["d"])("/produce/plan/summary/work-time",e)},v=function(e){return Object(r["d"])("/produce/plan/summary/period",e)},w=function(e){return Object(r["d"])("/produce/plan/summary/outsource",e)},k=function(e){return Object(r["d"])("/produce/plan/summary/progress",e)}},"528f":function(e,t,a){},5633:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("span",[t("a-select",{key:e.key,attrs:{"allow-clear":"",value:e.getValueSting,disabled:e.disabled,placeholder:"线路"},on:{change:e.handleChange,select:e.onSelect}},[t("a-select-option",{attrs:{value:void 0}},[e._v("请选择")]),e._l(e.optionData,(function(a,r){return t("a-select-option",{key:r,attrs:{value:a.lineId}},[t("span",{staticStyle:{display:"inline-block",width:"100%"},attrs:{title:a.lineName}},[e._v(" "+e._s(a.lineName)+" ")])])}))],2)],1)},n=[],i=a("8fad"),u={name:"LineSelectList",props:{value:[String],triggerChange:Boolean,disabled:Boolean,defaultFirst:Boolean},data:function(){return{optionData:[],selectValue:"",key:0}},created:function(){this.findList()},computed:{getValueSting:function(){return null!=this.value?this.value.toString():void 0}},methods:{findList:function(){var e=this;Object(i["Jb"])().then((function(t){t.success&&(e.optionData=t.result,e.defaultFirst&&e.optionData&&e.optionData.length>0&&setTimeout((function(){e.$emit("change",e.optionData[0].lineId),e.$emit("input",e.optionData[0].lineId)}),500))}))},handleChange:function(e,t){var a="";if(t&&t.componentOptions.children[0].data&&(a=t.componentOptions.children[0].data.attrs.title),this.$emit("change",e),this.$emit("input",e),this.$emit("changeName",a),this.triggerChange)if(e){var r=this.optionData[t.key];this.$emit("change",e,r)}else this.$emit("change",e,null)},onSelect:function(e,t){if(e){var a=this.optionData[t.data.key];this.$emit("select",e,a)}else this.$emit("select","",null)}}},o=u,s=a("2877"),l=Object(s["a"])(o,r,n,!1,null,"77265147",null);t["default"]=l.exports},"696e":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"s-na-select-date",style:e.naStyle},[t("a-form-item",{style:{height:"32px"},attrs:{label:"日期:"}},[t("a-row",{attrs:{gutter:6}},[t("a-col",{attrs:{md:6}},[t("j-dict-select-tag",{staticClass:"na-select-clear",attrs:{allowClear:!0,hiddenArray:e.hiddenArray,placeholder:"请选择",dictCode:e.dictDateCode},on:{select:e.dateTypeChange},model:{value:e.queryParam.dateType,callback:function(t){e.$set(e.queryParam,"dateType",t)},expression:"queryParam.dateType"}})],1),1===Number(e.queryParam.dateType)||2===Number(e.queryParam.dateType)?t("a-col",{attrs:{md:2===Number(e.queryParam.dateType)?6:18}},[t("a-form-item",{style:{height:"32px"}},[t("a-date-picker",{staticStyle:{width:"100%"},attrs:{mode:"year",placeholder:"请选择年份",format:"YYYY",showToday:!0,allowClear:!0,open:e.yearOpen,defaultPickerValue:this.$moment(new Date)},on:{panelChange:e.changeYear,focus:function(t){e.yearOpen=!0}},model:{value:e.queryParam.year,callback:function(t){e.$set(e.queryParam,"year",t)},expression:"queryParam.year"}})],1)],1):e._e(),2===Number(e.queryParam.dateType)?t("a-col",{attrs:{md:12}},[t("a-form-item",{style:{height:"32px"}},[t("j-dict-select-tag",{staticClass:"na-select-clear",attrs:{placeholder:"请选择",dictCode:"bu_quarter_type",allowClear:!0},on:{select:e.dateChange},model:{value:e.queryParam.quarter,callback:function(t){e.$set(e.queryParam,"quarter",t)},expression:"queryParam.quarter"}})],1)],1):e._e(),3===Number(e.queryParam.dateType)?t("a-col",{attrs:{md:18}},[t("a-form-item",{style:{height:"32px"}},[t("a-month-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"选择月份",format:"YYYY-MM",showToday:!0,allowClear:!0,defaultPickerValue:this.$moment(new Date)},on:{change:e.dateChange},model:{value:e.queryParam.month,callback:function(t){e.$set(e.queryParam,"month",t)},expression:"queryParam.month"}})],1)],1):e._e(),4===Number(e.queryParam.dateType)?t("a-col",{attrs:{md:18}},[t("a-form-item",{style:{height:"32px"}},[t("a-range-picker",{staticStyle:{width:"100%"},attrs:{showToday:!0,allowClear:!0,format:"YYYY-MM-DD"},on:{change:e.dateChange},model:{value:e.queryParam.dateRef,callback:function(t){e.$set(e.queryParam,"dateRef",t)},expression:"queryParam.dateRef"}})],1)],1):e._e()],1)],1)],1)},n=[];function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}var u={name:"na-select-date",data:function(){return{yearOpen:!1,queryParam:{dateType:this.defaultType,quarter:1,year:this.$moment(new Date),month:this.$moment(new Date),dateRef:[this.$moment(new Date),this.$moment(new Date)]},result:{dateType:1,quarter:1,year:null,month:null,dateRef:[null,null]}}},model:{prop:"modelVal",event:"change"},props:{hiddenArray:Array,dictDateCode:{type:String,default:"bu_date_type"},defaultType:{type:Number,default:1},modelVal:{dateType:1,quarter:1,year:null,month:null,dateRef:[]},naStyle:{type:String,default:""}},methods:{dateTypeChange:function(){this.dateChange()},changeYear:function(e,t){this.yearValue=e,this.queryParam.year=e.format("YYYY"),this.yearOpen=!1,this.dateChange()},reset:function(){this.queryParam.dateType=null,this.queryParam.quarter=1,this.queryParam.year=this.$moment(new Date),this.queryParam.month=this.$moment(new Date),this.queryParam.dateRef=[this.$moment(new Date),this.$moment(new Date)]},dateChange:function(){this.yearOpen=!1,this.queryParam.dateType?this.$set(this.result,"dateType",Number(this.queryParam.dateType)):this.$set(this.result,"dateType",null),3===this.result.dateType?this.$set(this.result,"year",Number(this.queryParam.month.format("YYYY"))):this.$set(this.result,"year","object"===i(this.queryParam.year)?Number(this.queryParam.year.format("YYYY")):Number(this.queryParam.year)),this.$set(this.result,"month","object"===i(this.queryParam.month)?Number(this.queryParam.month.format("MM")):Number(this.queryParam.month)),this.result.quarter=Number(this.queryParam.quarter),this.result.dateRef=[this.queryParam.dateRef[0].format("YYYY-MM-DD"),this.queryParam.dateRef[1].format("YYYY-MM-DD")],this.$set(this.result.dateRef,0,"object"===i(this.queryParam.dateRef[0])?this.queryParam.dateRef[0].format("YYYY-MM-DD"):this.queryParam.dateRef[0]),this.$set(this.result.dateRef,1,"object"===i(this.queryParam.dateRef[1])?this.queryParam.dateRef[1].format("YYYY-MM-DD"):this.queryParam.dateRef[1]),this.$emit("change",this.result)}}},o=u,s=a("2877"),l=Object(s["a"])(o,r,n,!1,null,null,null);t["default"]=l.exports},7911:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"bodyWrapper",staticStyle:{display:"flex","flex-direction":"column"}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.findList.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24,type:"flex"}},[t("a-col",{attrs:{md:3}},[t("a-form-item",{attrs:{label:"线路:"}},[t("line-select-list",{on:{change:e.onLineChange},model:{value:e.queryParam.lineId,callback:function(t){e.$set(e.queryParam,"lineId",t)},expression:"queryParam.lineId"}})],1)],1),t("a-col",{attrs:{md:3,sm:24}},[t("a-form-item",{attrs:{label:"车辆:"}},[t("j-dict-select-seach-tag",{attrs:{dictCode:e.dictTrainStr},on:{focus:e.handleSysFocus},model:{value:e.queryParam.trainNo,callback:function(t){e.$set(e.queryParam,"trainNo",t)},expression:"queryParam.trainNo"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"日期"}},[t("a-range-picker",{attrs:{defaultPickerValue:e.defaultDateRange},on:{change:e.onDateChange},model:{value:e.dateTime,callback:function(t){e.dateTime=t},expression:"dateTime"}})],1)],1),t("a-col",{attrs:{md:4,sm:24}},[t("a-form-item",{attrs:{label:"统计维度"}},[t("a-select",{on:{change:e.typeChange},model:{value:e.queryParam.type,callback:function(t){e.$set(e.queryParam,"type",t)},expression:"queryParam.type"}},[t("a-select-option",{attrs:{value:1}},[e._v("员工")]),t("a-select-option",{attrs:{value:2}},[e._v("班组")])],1)],1)],1),1==e.queryParam.type?t("a-col",{attrs:{md:4,sm:24}},[t("a-form-item",{attrs:{label:"班组"}},[t("j-dict-select-tag",{attrs:{placeholder:"请选择班组",dictCode:e.dictGroupStr},model:{value:e.queryParam.groupId,callback:function(t){e.$set(e.queryParam,"groupId",t)},expression:"queryParam.groupId"}})],1)],1):e._e(),t("a-col",{attrs:{md:3,sm:24}},[t("a-space",[t("a-button",{on:{click:e.findList}},[e._v("查询")]),t("a-button",{on:{click:e.downloadExcel}},[e._v("导出")])],1)],1)],1)],1)],1),t("div",{staticClass:"table-page-body-wrapper"},[t("div",{staticClass:"table-body-context",staticStyle:{height:"calc(100vh - 220px)"}},[t("vxe-table",{ref:"listTable",attrs:{border:"",align:"center",height:"auto",data:e.tableData}},[t("vxe-table-column",{attrs:{field:"lineName",title:"线路","min-width":"80px"}}),t("vxe-table-column",{attrs:{field:"trainNo",title:"车辆","min-width":"80px"}}),1===e.queryParam.type?t("vxe-table-column",{attrs:{field:"workNo",title:"工号","min-width":"100px"}}):e._e(),1===e.queryParam.type?t("vxe-table-column",{attrs:{field:"userName",title:"姓名","min-width":"100px"}}):e._e(),t("vxe-table-column",{attrs:{field:"groupName",title:"班组","min-width":"140px"}}),t("vxe-table-column",{attrs:{field:"repairTime",title:"维修工时",width:"120px"}}),t("vxe-table-column",{attrs:{field:"faultTime",title:"故障处理工时",width:"120px"}}),t("vxe-table-column",{attrs:{field:"totalTime",title:"总计工时",width:"120px"}})],1)],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.page.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1)])},n=[],i=a("5633"),u=a("696e"),o=a("43f7"),s={name:"CostKpi",components:{LineSelectList:i["default"],NaSelectDate:u["default"]},data:function(){return{dictGroupStr:"bu_mtr_workshop_group,group_name,id,workshop_id='"+this.$store.getters.userInfo.workshopId+"'|workshop_id",moreVisible:!1,dictTrainStr:"",tableData:[],dateTime:[this.$moment(new Date).startOf("month").format("YYYY-MM-DD"),this.$moment(new Date).endOf("month").format("YYYY-MM-DD")],queryParam:{groupId:void 0,lineId:null,trainNo:"",pageNo:1,pageSize:10,startDate:this.$moment(new Date).startOf("month").format("YYYY-MM-DD"),endDate:this.$moment(new Date).endOf("month").format("YYYY-MM-DD"),type:1},page:{totalResult:1}}},mounted:function(){this.findList()},methods:{handleSysFocus:function(){this.queryParam.lineId||this.$message.warn("请先选择线路!")},typeChange:function(){2==this.queryParam.type&&(this.queryParam.groupId=void 0),this.findList()},findList:function(){var e=this;Object(o["o"])(this.queryParam).then((function(t){t.success?(e.page.totalResult=t.result.total,e.tableData=t.result.records):e.$message.error(t.message)}))},onLineChange:function(e,t){this.dictTrainStr="bu_train_info,train_no,train_no,status=1 and line_id='"+e+"'"},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()},onDateChange:function(){this.dateTime[0]?this.queryParam.startDate=this.dateTime[0].format("YYYY-MM-DD"):this.queryParam.startDate="",this.dateTime[1]?this.queryParam.endDate=this.dateTime[1].format("YYYY-MM-DD"):this.queryParam.endDate=""},downloadExcel:function(){Object(o["b"])("人工成本明细-".concat(this.$moment(new Date).format("YYYYMMDDhhmmss"),".xls"),{lineId:this.queryParam.lineId,trainNo:this.queryParam.trainNo,startDate:this.queryParam.startDate,endDate:this.queryParam.endDate,type:this.queryParam.type})}}},l=s,c=(a("9dfc"),a("2877")),d=Object(c["a"])(l,r,n,!1,null,"2ea520ad",null);t["default"]=d.exports},"9dfc":function(e,t,a){"use strict";a("528f")}}]);