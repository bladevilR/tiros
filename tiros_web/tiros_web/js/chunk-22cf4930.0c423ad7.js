(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-22cf4930","chunk-24cb054c","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7"],{2515:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"descriptionBox"},[t("a-descriptions",{attrs:{bordered:"",column:6}},[t("a-descriptions-item",{attrs:{span:2,label:"线路"}},[e._v(e._s(e.formCopy.lineName))]),t("a-descriptions-item",{attrs:{span:2,label:"车辆"}},[e._v(e._s(e.formCopy.trainNo))]),t("a-descriptions-item",{attrs:{span:2,label:"走行公里数"}},[e._v(e._s(e.formCopy.acceptMileage))]),t("a-descriptions-item",{attrs:{span:2,label:"接车日期"}},[e._v(e._s(e.formCopy.acceptDate))]),t("a-descriptions-item",{attrs:{span:2,label:"计划交车日期"}},[e._v(e._s(e.formCopy.planFinishDate))]),t("a-descriptions-item",{attrs:{span:2,label:"修程"}},[e._v(e._s(e.formCopy.programName))]),t("a-descriptions-item",{attrs:{span:2,label:"交付部门"}},[e._v(e._s(e.formCopy.sendDeptName))]),t("a-descriptions-item",{attrs:{span:2,label:"交付人"}},[e._v(e._s(e.formCopy.sendUserName))]),t("a-descriptions-item",{attrs:{span:2,label:"总列次"}},[e._v(e._s(e.formCopy.trainIndex))]),t("a-descriptions-item",{attrs:{span:2,label:"修程次数"}},[e._v(e._s(e.formCopy.itemNo))]),t("a-descriptions-item",{attrs:{span:2,label:"备注"}},[e._v(e._s(e.formCopy.remark))])],1)],1)])},n=[],r=a("dec3"),s={name:"ReceiveCarView",mixins:[r["a"]],data:function(){return{formCopy:{}}}},o=s,l=(a("d653"),a("2877")),d=Object(l["a"])(o,i,n,!1,null,"50d30731",null);t["default"]=d.exports},5633:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("span",[t("a-select",{key:e.key,attrs:{"allow-clear":"",value:e.getValueSting,disabled:e.disabled,placeholder:"线路"},on:{change:e.handleChange,select:e.onSelect}},[t("a-select-option",{attrs:{value:void 0}},[e._v("请选择")]),e._l(e.optionData,(function(a,i){return t("a-select-option",{key:i,attrs:{value:a.lineId}},[t("span",{staticStyle:{display:"inline-block",width:"100%"},attrs:{title:a.lineName}},[e._v(" "+e._s(a.lineName)+" ")])])}))],2)],1)},n=[],r=a("8fad"),s={name:"LineSelectList",props:{value:[String],triggerChange:Boolean,disabled:Boolean,defaultFirst:Boolean},data:function(){return{optionData:[],selectValue:"",key:0}},created:function(){this.findList()},computed:{getValueSting:function(){return null!=this.value?this.value.toString():void 0}},methods:{findList:function(){var e=this;Object(r["Jb"])().then((function(t){t.success&&(e.optionData=t.result,e.defaultFirst&&e.optionData&&e.optionData.length>0&&setTimeout((function(){e.$emit("change",e.optionData[0].lineId),e.$emit("input",e.optionData[0].lineId)}),500))}))},handleChange:function(e,t){var a="";if(t&&t.componentOptions.children[0].data&&(a=t.componentOptions.children[0].data.attrs.title),this.$emit("change",e),this.$emit("input",e),this.$emit("changeName",a),this.triggerChange)if(e){var i=this.optionData[t.key];this.$emit("change",e,i)}else this.$emit("change",e,null)},onSelect:function(e,t){if(e){var a=this.optionData[t.data.key];this.$emit("select",e,a)}else this.$emit("select","",null)}}},o=s,l=a("2877"),d=Object(l["a"])(o,i,n,!1,null,"77265147",null);t["default"]=d.exports},9527:function(e,t,a){},b245:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"85%",title:"人员选择",visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",bodyStyle:{height:"70vh"},destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-row",[t("a-col",{attrs:{md:4,sm:24}},[t("div",{staticStyle:{height:"calc(70vh - 20px)","border-right":"1px solid #e3e1e1","margin-right":"15px"}},[e.treeData&&e.treeData.length>0?t("a-tree",{staticClass:"limitHeight",attrs:{defaultSelectedKeys:[e.queryParam.depId],defaultExpandAll:!0,"tree-data":e.treeData},on:{select:e.onSelect}}):e._e()],1)]),t("a-col",{attrs:{md:20,sm:24}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.findList.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"账号"}},[t("a-input",{attrs:{placeholder:"请输入用户账号"},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"真实名字"}},[t("a-input",{attrs:{placeholder:"请输入真实名字"},model:{value:e.queryParam.realname,callback:function(t){e.$set(e.queryParam,"realname",t)},expression:"queryParam.realname"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"手机号码"}},[t("a-input",{attrs:{placeholder:"请输入手机号码"},model:{value:e.queryParam.phone,callback:function(t){e.$set(e.queryParam,"phone",t)},expression:"queryParam.phone"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"角色"}},[t("j-dict-select-tag",{attrs:{triggerChange:!0,dictCode:"sys_role,role_name,id",placeholder:"选择角色"},model:{value:e.queryParam.roleId,callback:function(t){e.$set(e.queryParam,"roleId",t)},expression:"queryParam.roleId"}})],1)],1),t("a-col",{attrs:{md:2,sm:8}},[t("a-button",{on:{click:e.findList}},[e._v("查询")])],1)],1)],1)],1),t("div",{staticStyle:{height:"calc(70vh - 130px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(70vh - 130px)"},attrs:{border:"",align:e.allAlign,data:e.tableData,"max-height":"100%","show-overflow":"tooltip","radio-config":e.multiple?{}:{trigger:"row"},"checkbox-config":e.multiple?{trigger:"row",highlight:!0,range:!0}:{},"edit-config":{trigger:"manual",mode:"row"}}},[e.multiple?t("vxe-table-column",{attrs:{type:"checkbox",width:"5%"}}):t("vxe-table-column",{attrs:{type:"radio",width:"5%"}}),t("vxe-table-column",{attrs:{field:"workNo",title:"工号",width:"100",align:"center"}}),t("vxe-table-column",{attrs:{field:"username",title:"用户账号",width:"150",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"realname",title:"用户名字",width:"100",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"roleNames",title:"角色","min-width":"180",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"sex_dictText",title:"性别",width:"80"}}),t("vxe-table-column",{attrs:{field:"phone",title:"手机号码",width:"120"}}),t("vxe-table-column",{attrs:{field:"orgCode",title:"部门",width:"120",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",width:"80"}})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1)])],1)],1)},n=[],r=a("8fad"),s={name:"UserList",props:{multiple:{type:Boolean,default:!0},depId:{type:String,default:""}},data:function(){return{queryParam:{username:"",realname:"",phone:"",orgCode:"",roleId:void 0,pageNo:1,pageSize:10},allAlign:"center",totalResult:0,tableData:[],visible:!1,confirmLoading:!1,treeData:[]}},watch:{depId:function(e){this.$set(this.queryParam,"depId",e||"")}},mounted:function(){this.$set(this.queryParam,"depId",this.depId||"")},methods:{showModal:function(){this.visible=!0,this.findList(),this.getTreeList()},getTreeList:function(){var e=this;Object(r["yb"])().then((function(t){t.success&&(e.treeData=t.result)}))},onSelect:function(e,t){if(e.length){var a=t.node.dataRef;this.queryParam.depId=a.id,this.findList()}else this.queryParam.orgCode="",this.findList()},findList:function(){var e=this;this.loading=!0,Object(r["uc"])(this.queryParam).then((function(t){e.loading=!1,t.success?(e.totalResult=t.result.total,e.tableData=t.result.records):e.$message.error("加载用户数据失败")})).catch((function(t){e.$message.error("加载用户数据异常")})).finally((function(){}))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()},handleOk:function(){var e=[];this.multiple?e=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&e.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",e),this.visible=!1},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,Object.assign(this.$data,this.$options.data())}}},o=s,l=(a("f76d"),a("2877")),d=Object(l["a"])(o,i,n,!1,null,"4aa7956f",null);t["default"]=d.exports},d653:function(e,t,a){"use strict";a("e3a6")},dec3:function(e,t,a){"use strict";var i=a("b47d"),n=a("c1df"),r=a.n(n),s=a("ca00"),o=a("5633"),l=a("b245"),d=a("c63e"),c=a("8fad");t["a"]={components:{LineSelectList:o["default"],UserList:l["default"],departWindow:d["default"]},props:{carStateData:{required:!0},isReadonly:{type:Boolean,default:!1}},data:function(){return{dictCodeStr:"bu_train_info,train_no,train_no,exists(select id from bu_repair_exchang where bu_repair_exchang.train_no=bu_train_info.train_no and bu_repair_exchang.status=2 order by bu_repair_exchang.create_time desc limit 1)",labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:15}},model:{},validatorRules:{trainNo:{rules:[{required:!0,message:"请选择车辆!"}]},acceptMileage:{rules:[{required:!0,message:"请输入走形公里数!"}]},programId:{rules:[{required:!0,message:"请选择修程!"}]},acceptDate:{rules:[{required:!0,message:"请选择接车日期!"}]},planFinishDate:{rules:[{required:!0,message:"请选择接车日期!"}]},sendDeptId:{rules:[]},sendUserId:{rules:[]},lineId:{rules:[{required:!0,message:"请选择线路!"}]},remark:{rules:[{max:255,message:"输入长度不能超过255字符!"}]}},allAlign:"center",tableData:[],trainList:[],receiveCarOpenItemData:[],receiveCarRectifyData:[]}},created:function(){var e=this;Object(i["fb"])().then((function(t){t.success&&t.result&&t.result.length>0&&(e.trainList=t.result)}))},mounted:function(){var e=this;this.findList(),this.$bus.$on("setReceiveCarOpenItemData",(function(t){e.receiveCarOpenItemData=t||[]})),this.$bus.$on("setReceiveCarRectifyData",(function(t){e.receiveCarRectifyData=t||[]}))},methods:{changeLine:function(e){this.form.setFieldsValue({trainNo:""}),this.dictCodeStr=e?"bu_train_info,train_no,train_no,line_id="+e+" and exists(select id from bu_repair_exchang where bu_repair_exchang.train_no=bu_train_info.train_no and bu_repair_exchang.status=2 order by bu_repair_exchang.create_time desc limit 1)":"bu_train_info,train_no,train_no,exists(select id from bu_repair_exchang where bu_repair_exchang.train_no=bu_train_info.train_no and bu_repair_exchang.status=2 order by bu_repair_exchang.create_time desc limit 1)"},acceptMileageChange:function(e){this.$emit("update:acceptMileage",e)},handleTrainNo:function(e){var t=this;if(e){var a=this.trainList.filter((function(t){return t.trainNo===e}));a.length>0&&(this.model.receiveId=a[0].id,this.form.setFieldsValue({receiveId:a[0].id})),Object(i["T"])({trainNo:e}).then((function(e){if(e.success){var a=e.result;a?(t.$emit("update:acceptMileage",a.acceptMileage),t.$nextTick((function(){t.form.setFieldsValue({programId:a.programId,acceptMileage:a.acceptMileage,acceptDate:a.acceptDate?r()(a.acceptDate,"YYYY-MM-DD"):null,trainIndex:a.trainIndex,itemNo:a.itemNo})}))):t.$nextTick((function(){t.form.setFieldsValue({programId:void 0,acceptDate:void 0,acceptMileage:void 0,trainIndex:void 0,itemNo:void 0})}))}}))}else this.form.setFieldsValue({trainNo:void 0,receiveId:void 0});this.model.trainNo=e,this.$emit("update:carStateData",this.model)},onUserSelect:function(e){Object(s["e"])(e)||(this.sendUserId=e[0].id,this.form.setFieldsValue({sendUserName:e[0].realname}))},showUserModal:function(){this.$refs.tUserModalForm.showModal(),this.$refs.tmyuserSelect.blur()},showGroupModal:function(){this.$refs.departWindow.add([],this.$store.getters.userInfo.id),this.$refs.groupSelect.blur()},modalFormOk:function(e){Object(s["e"])(e)||(this.form.setFieldsValue({sendDeptId:e.departIdList[0].value}),this.form.setFieldsValue({sendDeptName:e.departIdList[0].title}),this.sendDeptName=e.departIdList[0].title)},changeClose:function(e){this.isClose=e},findList:function(){var e=this;this.model=Object.assign({},this.carStateData),this.model.sendDeptId||(this.model.sendDeptId=this.$store.getters.userInfo.departId,this.model.sendDeptName=this.$store.getters.userInfo.departName),this.model.sendUserId||(this.model.sendUserId=this.$store.getters.userInfo.id,this.model.sendUserName=this.$store.getters.userInfo.realname),this.$bus.$emit("setExchangeId",this.model.id),this.$nextTick((function(){e.form?(e.form.getFieldDecorator("sendDeptName",{}),e.form.setFieldsValue({trainNo:e.model.trainNo,receiveId:e.model.receiveId,acceptMileage:e.model.acceptMileage,programId:e.model.programId,acceptDate:e.model.acceptDate?r()(e.model.acceptDate,"YYYY-MM-DD"):void 0,planFinishDate:e.model.planFinishDate?r()(e.model.planFinishDate,"YYYY-MM-DD"):r()(new Date,"YYYY-MM-DD"),sendDeptName:e.model.sendDeptName,sendUserName:e.model.sendUserName||e.$store.getters.userInfo.realname,lineId:e.model.lineId,itemNo:e.model.itemNo,remark:e.model.remark,trainIndex:e.model.trainIndex})):e.formCopy=JSON.parse(JSON.stringify(e.model)),e.sendDeptId=e.model.sendDeptId,e.sendUserId=e.model.sendUserId||e.$store.getters.userInfo.id,e.model.sendDeptId||Object(c["yb"])().then((function(t){if(t.success){var a=function(e,t,i){e.forEach((function(e){e.key!==t?e.children&&a(e.children,t,i):i(e)}))};a(t.result,e.$store.getters.userInfo.departId,(function(i){a(t.result,e.$store.getters.userInfo.departId,(function(t){e.form.setFieldsValue({sendDeptName:t.title}),e.sendDeptId=t.id}))}))}}))}))},handleOk:function(){var e=this,t=this;return new Promise((function(a,n){t.form.validateFields((function(o,l){if(o)n("请先填写完接车信息!");else{t.confirmLoading=!0;var d,c=Object.assign(t.model,l,{acceptDate:r()(l.acceptDate).format("YYYY-MM-DD"),planFinishDate:r()(l.planFinishDate).format("YYYY-MM-DD"),tradeType:1,sendDeptId:e.sendDeptId,sendUserId:e.sendUserId});if(t.model.id)d=Object(i["G"])(c);else{var u=s["b"];c["id"]=u,e.model["id"]=u,d=Object(i["c"])(c)}c.leaveList=e.receiveCarOpenItemData,c.rectifyList=e.receiveCarRectifyData,d.then((function(e){e.success?a(e.message):n(e.message)})).finally((function(){t.confirmLoading=!1}))}}))}))},save:function(){var e=this,t=this;return new Promise((function(a,n){t.form.validateFields((function(o,l){if(o)n("请先填写完接车信息!");else{t.confirmLoading=!0;var d,c=Object.assign(t.model,l,{acceptDate:r()(l.acceptDate).format("YYYY-MM-DD"),planFinishDate:r()(l.planFinishDate).format("YYYY-MM-DD"),tradeType:1,sendDeptId:e.sendDeptId,sendUserId:e.sendUserId});if(t.model.id)d=Object(i["G"])(c);else{var u=s["b"];c["id"]=u,e.model["id"]=u,d=Object(i["c"])(c)}c.leaveList=e.receiveCarOpenItemData,c.rectifyList=e.receiveCarRectifyData,d.then((function(e){e.success?a(e.message):n(e.message)})).finally((function(){t.confirmLoading=!1}))}}))}))}}}},e3a6:function(e,t,a){},f76d:function(e,t,a){"use strict";a("9527")}}]);