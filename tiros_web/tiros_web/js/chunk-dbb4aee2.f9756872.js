(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dbb4aee2"],{5924:function(t,e,a){"use strict";a("b9ab")},b9ab:function(t,e,a){},e111:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",[e("a-card",{attrs:{id:"farPlanItemContent"}},[e("div",{staticClass:"info-wrapper info-top-wrapper"},[e("h4",[t._v("基本信息")]),e("div",{staticClass:"descriptionBox"},[e("a-descriptions",{attrs:{bordered:"",column:3}},[e("a-descriptions-item",{attrs:{span:1,label:"标题"}},[t._v(t._s(t.formCopy.title))]),e("a-descriptions-item",{attrs:{span:1,label:"车辆段"}},[t._v(t._s(t.formCopy.depotName))]),e("a-descriptions-item",{attrs:{span:1,label:"车间"}},[t._v(t._s(t.formCopy.workshopName))]),e("a-descriptions-item",{attrs:{span:1,label:"开始年份"}},[t._v(t._s(t.formCopy.startYear))]),e("a-descriptions-item",{attrs:{span:1,label:"结束年份"}},[t._v(t._s(t.formCopy.endYear))]),e("a-descriptions-item",{attrs:{span:1,label:"备注"}},[t._v(t._s(t.formCopy.remark))])],1)],1)]),e("div",{staticClass:"info-wrapper info-top-wrapper"},[e("h4",[t._v("计划明细信息")]),e("vxe-table",{attrs:{"show-overflow":"tooltip","print-config":{},border:"",align:"center",data:t.tableDatas}},[e("vxe-table-column",{attrs:{field:"title",title:"明细标题"}}),e("vxe-table-column",{attrs:{field:"lineName",title:"线路"}}),e("vxe-table-column",{attrs:{field:"year",title:"年份"}}),e("vxe-table-colgroup",{attrs:{title:"架修"}},[e("vxe-table-column",{attrs:{field:"middleRepair_type",title:"类型"}}),e("vxe-table-column",{attrs:{field:"middleRepair_num",title:"数量"}})],1),e("vxe-table-colgroup",{attrs:{title:"大修"}},[e("vxe-table-column",{attrs:{field:"hightRepair_type",title:"类型"}}),e("vxe-table-column",{attrs:{field:"hightRepair_num",title:"数量"}})],1)],1)],1)])],1)},r=[],l=a("c1df"),s=a.n(l),n=a("b47d"),o=a("ca00"),d=a("5633"),p={name:"planListView",components:{LineSelectList:d["default"]},data:function(){return{formCopy:{},detailInfoFormCopy:{},tableDatas:[],disabled:!1,title:"操作",planId:"",startYear:null,endYear:null,endYearPickShow:!1,basicInfoIsOk:!1,detailTotal:0,tempDetailList:[]}},props:{businessKey:{type:String,default:null},isReadonly:{type:Boolean,default:!0},fromFlow:{type:Boolean,default:!1}},mounted:function(){this.businessKey&&this.show(this.businessKey)},methods:{moment:s.a,show:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.disabled=a,this.planId=t,this.form&&this.detailInfoForm&&(this.detailInfoForm.resetFields(),this.form.resetFields()),this.startYear=null,this.endYear=null,Object(o["e"])(this.planId)?this.$emit("loaded"):Object(n["Y"])({id:this.planId}).then((function(t){var a=t.result,i={title:a.title,depotId:a.depotId,startYear:s()(a.startYear||new Date,"YYYY"),endYear:s()(a.endYear||new Date,"YYYY"),remark:a.remark};if(e.$nextTick((function(){i.depotName=a.depotName,i.workshopName=a.workshopName,i.startYear=s()(i.startYear).format("YYYY"),i.endYear=s()(i.endYear).format("YYYY"),e.formCopy=i})),e.startYear=parseInt(a.startYear),e.endYear=parseInt(a.endYear),a.detailList.length){e.detailInfoForm&&e.detailInfoForm.resetFields(),e.detailTotal=a.detailList.length,e.tempDetailList=a.detailList,e.basicInfoIsOk=!0;var r={};if(e.detailInfoForm)a.detailList.forEach((function(t,e){var a={},i={},l={},s=t.middleRepair.split("#"),n=t.hightRepair.split("#");s.forEach((function(t){var i="ref_"+e+"_0_"+t.split(":")[0];a[i]=t.split(":")[1]})),n.forEach((function(t){var a="ref_"+e+"_1_"+t.split(":")[0];i[a]=t.split(":")[1]})),l["title_"+e]=t.title,l["line_"+e]=t.lineId;var o={};Object.assign(o,a,i,l),Object.assign(r,o)})),e.$nextTick((function(){e.detailInfoForm.setFieldsValue(r)}));else{var l=a.detailList,n=[],o=function(t){for(var e=t.split("#"),a=0,i=e.length;a<i;a++)e[a]=e[a].split(":");return e};Array.from(l,(function(t,e){t.hightRepair=o(t.hightRepair),t.middleRepair=o(t.middleRepair);var a={title:t.title,lineName:t.lineName,year:"",hightRepair_type:"大修",hightRepair_num:"",middleRepair_type:"架修",middleRepair_num:""};Array.from(t.hightRepair,(function(e,i){var r=t.middleRepair[i];e[0]==r[0]&&(a.year=e[0],a.hightRepair_num=e[1],a.middleRepair_num=r[1],n.push(JSON.parse(JSON.stringify(a))))}))})),e.tableDatas=n,e.detailInfoFormCopy=l}}e.$emit("loaded")}))}},computed:{tableData:function(){var t=[],e={name:"架修数",id:"0",num:0},a={name:"大修数",id:"1",num:0};return t.push(e),t.push(a),t}}},m=p,f=(a("5924"),a("2877")),c=Object(f["a"])(m,i,r,!1,null,"144a2862",null);e["default"]=c.exports}}]);