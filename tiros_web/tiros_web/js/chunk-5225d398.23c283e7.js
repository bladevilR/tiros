(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5225d398"],{"16c3":function(t,e,i){},"4f7c":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{title:"进度核实",width:"100%",dialogClass:"fullDialog no-footer",visible:t.visible,okText:null,footer:null,destroyOnClose:!0},on:{cancel:t.handleCancel,ok:t.saveOutInInfo}},[e("div",{staticStyle:{padding:"20px"}},[e("a-row",[e("a-col",{attrs:{span:3}},[e("a-statistic",{staticStyle:{"margin-right":"50px"},attrs:{title:"任务总数",value:t.total}})],1),e("a-col",{attrs:{span:3}},[e("a-statistic",{staticStyle:{"margin-right":"50px"},attrs:{title:"已完成","value-style":{color:"#3f8600"},value:t.finished}})],1),e("a-col",{attrs:{span:3}},[e("a-statistic",{staticStyle:{"margin-right":"50px"},attrs:{title:"未完成","value-style":{color:"#cf1322"},value:t.unFinished}})],1)],1)],1),e("div",{staticStyle:{padding:"0 20px 20px 20px"}},[e("div",{staticClass:"table-page-search-wrapper"},[e("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getListData.apply(null,arguments)}}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:4,sm:24}},[e("a-form-item",{staticClass:"a-form-item-width-gy",attrs:{label:"所属班组"}},[e("j-dict-select-tag",{attrs:{dictCode:"bu_mtr_workshop_group,group_name,id"},model:{value:t.groupId,callback:function(e){t.groupId=e},expression:"groupId"}})],1)],1),e("a-col",{attrs:{md:4,sm:24}},[e("a-form-item",{staticClass:"a-form-item-width-gy",attrs:{label:"任务状态"}},[e("j-dict-select-tag",{attrs:{dictCode:"bu_task_status"},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}})],1)],1),e("a-col",{attrs:{md:4,sm:24}},[e("a-button",{attrs:{type:"primary"},on:{click:t.getListData}},[t._v(" 筛选 ")])],1)],1)],1)],1),e("div",{staticStyle:{"padding-bottom":"20px"}},[e("a-button",{attrs:{type:"primary",loading:t.loading,disabled:t.selectRecords.length<1},on:{click:t.okEvent}},[t._v(" 确认完成 ")])],1),e("div",{staticStyle:{height:"calc(100vh - 216px)"}},[e("vxe-table",{key:"inTable",ref:"listTable",attrs:{border:"",height:"auto",align:"center",data:t.unFinishedList,"edit-config":{trigger:"manual",mode:"row"},"show-overflow":"tooltip","checkbox-config":{trigger:"row",highlight:!0,range:!0}},on:{"checkbox-change":t.rowSelectChange,"checkbox-all":t.rowSelectChange}},[e("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),e("vxe-table-column",{attrs:{field:"taskName",title:"任务名称","header-align":"center",align:"left",width:"200"}}),e("vxe-table-column",{attrs:{field:"startTime",title:"开始时间","min-width":"140"}}),e("vxe-table-column",{attrs:{field:"finishTime",title:"结束时间","min-width":"140"}}),e("vxe-table-column",{attrs:{field:"dayIndex",title:"第几天","header-align":"center",align:"right",width:"100"}}),e("vxe-table-column",{attrs:{field:"workGroupName",title:"所属班组","header-align":"center",align:"left",width:"120"}}),e("vxe-table-column",{attrs:{field:"status_dictText",title:"任务状态","min-width":"80"}}),e("vxe-table-column",{attrs:{field:"genOrder_dictText",title:"需生产工单?","min-width":"100"}}),e("vxe-table-column",{attrs:{field:"hasGen_dictText",title:"已生成工单?","min-width":"100"}}),e("vxe-table-column",{attrs:{field:"orderCode",title:"工单号","min-width":"120"}}),e("vxe-table-column",{attrs:{field:"orderName",title:"工单名称","min-width":"160","header-align":"center",align:"left"}}),e("vxe-table-column",{attrs:{field:"orderStatus_dictText",title:"工单状态","min-width":"100","header-align":"center",align:"left"}}),e("vxe-table-column",{attrs:{field:"orderTaskName",title:"工单任务名称","min-width":"160","header-align":"center",align:"left"}}),e("vxe-table-column",{attrs:{field:"orderTaskStatus_dictText",title:"工单任务状态","min-width":"100","header-align":"center",align:"left"}})],1)],1)])])},s=[],l=i("b47d"),n={data:function(){return{visible:!1,planId:"",loading:!1,groupId:"",status:null,selectRecords:[],finished:0,total:0,unFinished:0,unFinishedList:[],brush:!1}},methods:{okEvent:function(){var t=this,e=this.selectRecords.map((function(t){return t.id})).join(",");this.$confirm({content:"是确认已完成选中".concat(this.selectRecords.length,"条任务？"),onOk:function(){return t.loading=!0,Object(l["Qb"])("planId=".concat(t.planId,"&planTaskIds=").concat(e)).then((function(e){t.loading=!1,e.success?(t.$message.success(e.message),t.brush=!0,t.getListData()):t.$message.warning(e.message)}))}})},rowSelectChange:function(){this.selectRecords=this.$refs.listTable.getCheckboxRecords()},show:function(t){Object.assign(this.$data,this.$options.data()),this.visible=!0,this.planId=t.id,this.getListData()},getListData:function(){var t=this;Object(l["xb"])({planId:this.planId,groupId:this.groupId,status:this.status}).then((function(e){e.success&&(t.selectRecords=[],t.finished=e.result.finished,t.total=e.result.total,t.unFinished=e.result.unFinished,t.unFinishedList=e.result.unFinishedList)}))},saveOutInInfo:function(){},handleCancel:function(){this.$emit("close",this.brush),this.visible=!1}}},r=n,o=(i("b031"),i("2877")),c=Object(o["a"])(r,a,s,!1,null,"58f24872",null);e["default"]=c.exports},b031:function(t,e,i){"use strict";i("16c3")}}]);