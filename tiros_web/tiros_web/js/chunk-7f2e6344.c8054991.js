(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7f2e6344"],{6948:function(e,t,a){},ac2a:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"main"},[t("a-form",{ref:"formLogin",staticClass:"user-layout-login",attrs:{form:e.form,id:"formLogin"}},[t("a-form-item",[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username",{initialValue:"",rules:e.validatorRules.username.rules}],expression:"['username',{initialValue:'', rules: validatorRules.username.rules}]"}],ref:"userName",attrs:{size:"large",type:"text",placeholder:"请输入帐户名"}},[t("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),t("a-form-item",[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{initialValue:"",rules:e.validatorRules.password.rules}],expression:"['password',{initialValue:'', rules: validatorRules.password.rules}]"}],attrs:{size:"large",type:"password",autocomplete:"false",placeholder:"密码"}},[t("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),e.NeedValid?t("a-row",{attrs:{gutter:0}},[t("a-col",{attrs:{span:16}},[t("a-form-item",[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["inputCode",e.validatorRules.inputCode],expression:"['inputCode',validatorRules.inputCode]"}],attrs:{size:"large",type:"text",placeholder:"请输入验证码"},on:{change:e.inputCodeChange}},[t("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"smile"},slot:"prefix"})],1)],1)],1),t("a-col",{staticStyle:{"text-align":"right"},attrs:{span:8}},[e.requestCodeSuccess?t("img",{staticStyle:{"margin-top":"2px"},attrs:{src:e.randCodeImage},on:{click:e.handleChangeCheckCode}}):t("img",{staticStyle:{"margin-top":"2px"},attrs:{src:a("d5ac")},on:{click:e.handleChangeCheckCode}})])],1):e._e(),t("a-form-item",[t("a-checkbox",{directives:[{name:"decorator",rawName:"v-decorator",value:["rememberMe",{initialValue:!0,valuePropName:"checked"}],expression:"['rememberMe', {initialValue: true, valuePropName: 'checked'}]"}]},[e._v("记住密码")]),t("a-checkbox",{directives:[{name:"decorator",rawName:"v-decorator",value:["autoLogin",{initialValue:!0,valuePropName:"checked"}],expression:"['autoLogin', {initialValue: true, valuePropName: 'checked'}]"}],staticStyle:{float:"right"}},[e._v("自动登陆")])],1),t("div",{staticStyle:{"margin-top":"24px"}},[t("a-row",{attrs:{gutter:10}},[t("a-col",{attrs:{span:24}},[t("a-button",{staticClass:"login-button",attrs:{size:"large",type:"primary",htmlType:"submit",loading:e.loginBtn,disabled:e.loginBtn},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[e._v(e._s(e.sumitText)+" ")])],1)],1)],1)],1),e.requiredTwoStepCaptcha?t("two-step-captcha",{attrs:{visible:e.stepCaptchaVisible},on:{success:e.stepCaptchaSuccess,cancel:e.stepCaptchaCancel}}):e._e(),t("a-modal",{attrs:{title:"登录部门选择",width:450,visible:e.departVisible,closable:!1,maskClosable:!1}},[t("template",{slot:"footer"},[t("a-button",{attrs:{type:"primary"},on:{click:e.departOk}},[e._v("确认")])],1),t("a-form",[t("a-form-item",{staticStyle:{"margin-bottom":"10px"},attrs:{labelCol:{span:4},wrapperCol:{span:20},"validate-status":e.validate_status}},[t("a-tooltip",{attrs:{placement:"topLeft"}},[t("template",{slot:"title"},[t("span",[e._v("您隶属于多部门，请选择登录部门")])]),t("a-avatar",{staticStyle:{backgroundColor:"#87d068"},attrs:{icon:"gold"}})],2),t("a-select",{class:{"valid-error":"error"==e.validate_status},staticStyle:{"margin-left":"10px",width:"80%"},attrs:{placeholder:"请选择登录部门"},on:{change:e.departChange}},[t("a-icon",{attrs:{slot:"suffixIcon",type:"gold"},slot:"suffixIcon"}),e._l(e.departList,(function(a){return t("a-select-option",{key:a.id,attrs:{value:a.orgCode}},[e._v(" "+e._s(a.departName)+" ")])}))],2)],1)],1)],2)],1)},r=[],s=a("9fb0"),o=a("2ca2"),n=a("2f62"),c=a("ca00"),l=a("2b0e"),u=a("0fea"),d=a("9da4"),p=a("4360"),m=a("ed3b");function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){A(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function A(e,t,a){return(t=g(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function g(e){var t=v(e,"string");return"symbol"==b(t)?t:t+""}function v(e,t){if("object"!=b(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=b(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}var w={components:{TwoStepCaptcha:o["default"]},data:function(){return{sumitText:"确定",customActiveKey:"tab1",loginBtn:!1,loginType:0,inputCodeNull:!0,requiredTwoStepCaptcha:!1,stepCaptchaVisible:!1,form:this.$form.createForm(this),encryptedString:{key:"",iv:""},state:{time:60,smsSendBtn:!1},validatorRules:{username:{rules:[{required:!0,message:"请输入用户名!"},{validator:this.handleUsernameOrEmail}]},password:{rules:[{required:!0,message:"请输入密码!",validator:"click"}]},mobile:{rules:[{validator:this.validateMobile}]},inputCode:{rules:[{required:!0,message:"请输入验证码!"}]}},verifiedCode:"",inputCodeContent:"",NeedValid:!1,departList:[],departVisible:!1,departSelected:"",currentUsername:"",validate_status:"",currdatetime:"",randCodeImage:"",requestCodeSuccess:!1,ssoLoginUrl:window._CONFIG["domianURL"]+"/sso/login"}},created:function(){this.currdatetime=(new Date).getTime(),l["default"].ls.remove(s["a"]),this.getRouterData(),this.handleChangeCheckCode(),m["a"].destroyAll()},mounted:function(){this.$refs.userName.focus()},methods:h(h({},Object(n["b"])(["Login","Logout","PhoneLogin","ThirdLogin"])),{},{ssoLogin:function(){var e=this.ssoLoginUrl,t=850,a=500,i=(window.screen.height-30-a)/2,r=(window.screen.width-10-t)/2,s=window.open(e,"单点登录","height="+a+", width="+t+", top="+i+", left="+r+", toolbar=no, menubar=no, scrollbars=no, resizable=no,location=no, status=no");window.onfocus=function(){s.focus()},window.onclick=function(){s.focus()}},onThirdLogin:function(e){var t=window._CONFIG["domianURL"]+"/thirdLogin/render/".concat(e);window.open(t,"login ".concat(e),"height=500, width=500, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, resizable=no,location=n o, status=no");var a=this,i=function(e){e.origin;var t=e.data;a.ThirdLogin(t).then((function(e){e.success?a.loginSuccess():a.requestFailed(e)}))};window.addEventListener("message",i,!1)},handleUsernameOrEmail:function(e,t,a){var i=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/;i.test(t)?this.loginType=0:this.loginType=1,a()},handleTabClick:function(e){this.customActiveKey=e},handleSubmit:function(){var e=this,t=this,a={};if(t.loginBtn=!0,"tab1"===t.customActiveKey){var i=["username","password","rememberMe","autoLogin"];this.NeedValid&&i.push("inputCode"),t.form.validateFields(i,{force:!0},(function(i,r){i?t.loginBtn=!1:(a.username=r.username,a.password=r.password,a.captcha=t.inputCodeContent,a.checkKey=t.currdatetime,t.Login(a).then((function(t){if(t.success&&200==t.code){var a={username:r.username,password:r.rememberMe?r.password:"",rememberMe:!!r.rememberMe,autoLogin:!!r.autoLogin};l["default"].ls.set("LOGIN_INFO",a)}e.departConfirm(t)})).catch((function(e){t.requestFailed(e)})))}))}else t.form.validateFields(["mobile","captcha","rememberMe"],{force:!0},(function(i,r){i||(a.mobile=r.mobile,a.captcha=r.captcha,a.remember_me=r.rememberMe,t.PhoneLogin(a).then((function(t){e.departConfirm(t)})).catch((function(e){t.requestFailed(e)})))}))},getCaptcha:function(e){var t=this;e.preventDefault();var a=this;this.form.validateFields(["mobile"],{force:!0},(function(e,i){if(i.mobile){if(!e){t.state.smsSendBtn=!0;var r=window.setInterval((function(){a.state.time--<=0&&(a.state.time=60,a.state.smsSendBtn=!1,window.clearInterval(r))}),1e3),s=t.$message.loading("验证码发送中..",0),o={};o.mobile=i.mobile,o.smsmode="0",Object(u["j"])("/sys/sms",o).then((function(e){e.success||(setTimeout(s,0),t.cmsFailed(e.message)),setTimeout(s,500)})).catch((function(e){setTimeout(s,1),clearInterval(r),a.state.time=60,a.state.smsSendBtn=!1,t.requestFailed(e)}))}}else a.cmsFailed("请输入手机号")}))},stepCaptchaSuccess:function(){this.loginSuccess()},stepCaptchaCancel:function(){var e=this;this.Logout().then((function(){e.loginBtn=!1,e.stepCaptchaVisible=!1}))},handleChangeCheckCode:function(){var e=this;this.currdatetime=(new Date).getTime(),Object(u["d"])("/sys/randomImage/".concat(this.currdatetime)).then((function(t){t.success?"NoNeed"===t.result?e.NeedValid=!1:(e.randCodeImage=t.result,e.requestCodeSuccess=!0,e.NeedValid=!0):(e.$message.error(t.message),e.requestCodeSuccess=!1)})).catch((function(){e.requestCodeSuccess=!1}))},loginSuccess:function(){var e=this.$store.getters.userInfo.departId;if(this.departList&&this.departList.length>0){var t=this.departList.filter((function(t){return t.id===e}));t&&t.length>0&&p["a"].commit("SET_DEPARTNAME",t[0].departName)}this.$router.push({path:s["m"]}),this.$notification.success({message:"欢迎",description:"".concat(Object(c["s"])(),"，欢迎回来")})},cmsFailed:function(e){this.$notification["error"]({message:"登录失败",description:e,duration:4})},requestFailed:function(e){this.$notification["error"]({message:"登录失败",description:((e.response||{}).data||{}).message||e.message||"请求出现错误，请稍后再试",duration:4}),this.loginBtn=!1},validateMobile:function(e,t,a){!t||new RegExp(/^1([38][0-9]|4[579]|5[0-3,5-9]|6[6]|7[0135678]|9[89])\d{8}$/).test(t)?a():a("您的手机号码格式不正确!")},validateInputCode:function(e,t,a){t&&this.verifiedCode!=this.inputCodeContent?a("您输入的验证码不正确!"):a()},generateCode:function(e){this.verifiedCode=e.toLowerCase()},inputCodeChange:function(e){this.inputCodeContent=e.target.value},departConfirm:function(e){if(e.success){this.departList=e.result.departs;var t=e.result.multi_depart;0===t?(this.loginSuccess(),this.$notification.warn({message:"提示",description:"您尚未归属部门,请确认账号信息",duration:3})):2===t?(this.departVisible=!0,this.currentUsername=this.form.getFieldValue("username"),this.departList=e.result.departs):this.loginSuccess()}else this.requestFailed(e),this.Logout()},departOk:function(){var e=this;if(!this.departSelected)return this.validate_status="error",!1;var t={orgCode:this.departSelected,username:this.form.getFieldValue("username")};Object(u["k"])("/sys/selectDepart",t).then((function(t){if(t.success){var a=t.result.userInfo;l["default"].ls.set(s["s"],a,6048e5),p["a"].commit("SET_INFO",a),e.loginSuccess(),e.departClear()}else e.requestFailed(t),e.Logout().then((function(){e.departClear()}))}))},departClear:function(){this.departList=[],this.departSelected="",this.currentUsername="",this.departVisible=!1,this.validate_status=""},departChange:function(e){this.validate_status="success",this.departSelected=e},getRouterData:function(){var e=this;this.$nextTick((function(){var t=l["default"].ls.get("LOGIN_INFO");t?(e.form.setFieldsValue(h({},t)),t.autoLogin&&e.$nextTick((function(){e.sumitText="自动登录中...",e.handleSubmit()}))):e.form.setFieldsValue({rememberMe:!1,autoLogin:!1})}))},getEncrypte:function(){var e=this,t=l["default"].ls.get(s["k"]);null==t?Object(d["a"])().then((function(t){e.encryptedString=t})):this.encryptedString=t}})},C=w,y=(a("b74a"),a("efa6"),a("2877")),x=Object(y["a"])(C,i,r,!1,null,"619ba687",null);t["default"]=x.exports},b74a:function(e,t,a){"use strict";a("f024")},d5ac:function(e,t){e.exports="data:image/png;base64,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"},efa6:function(e,t,a){"use strict";a("6948")},f024:function(e,t,a){}}]);