(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5602dfad"],{"1afe":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"85%",visible:e.visible,confirmLoading:e.confirmLoading,closable:!0,footer:null,destroyOnClose:!0},on:{cancel:e.handleCancel}},[t("div",{staticStyle:{height:"calc(100vh - 200px)"}},[t("a-tabs",{attrs:{"active-key":e.activeKey},on:{change:e.handleActive}},[t("a-tab-pane",{key:"1",attrs:{tab:"基本信息"}},[t("a-form",{attrs:{form:e.form}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"线路"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["lineName",e.validatorRules.lineName],expression:"[ 'lineName', validatorRules.lineName]",modifiers:{trim:!0}}],attrs:{disabled:""}})],1)],1),t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"车号"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["trainNo",e.validatorRules.trainNo],expression:"[ 'trainNo', validatorRules.trainNo]",modifiers:{trim:!0}}],attrs:{disabled:""}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"委外部件"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["assetName",e.validatorRules.assetName],expression:"[ 'assetName', validatorRules.assetName]",modifiers:{trim:!0}}],attrs:{disabled:""}})],1)],1),t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"委外厂商"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["supplierName",e.validatorRules.supplierName],expression:"[ 'supplierName', validatorRules.supplierName]",modifiers:{trim:!0}}],attrs:{disabled:""}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"送检日期"}},[t("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["transferDate",e.validatorRules.transferDate],expression:"[ 'transferDate', validatorRules.transferDate]",modifiers:{trim:!0}}],staticStyle:{width:"100%"},attrs:{disabled:""}})],1)],1),t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"返回时间"}},[t("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["returnTime",e.validatorRules.returnTime],expression:"[ 'returnTime', validatorRules.returnTime]",modifiers:{trim:!0}}],staticStyle:{width:"100%"},attrs:{disabled:""}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"送检班组"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["sendGroupName",e.validatorRules.sendGroupName],expression:"[ 'sendGroupName', validatorRules.sendGroupName]",modifiers:{trim:!0}}],attrs:{disabled:""}})],1)],1),t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"状态"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["status_dictText",e.validatorRules.status_dictText],expression:"[ 'status_dictText', validatorRules.status_dictText]",modifiers:{trim:!0}}],attrs:{disabled:""}})],1)],1)],1)],1)],1),t("a-tab-pane",{key:"7",attrs:{tab:"文档资料"}},[t("perform-other-resource",{attrs:{outinDetailId:e.outinDetail.id}})],1)],1)],1)])},i=[],l=a("c1df"),o=a.n(l),s=a("aae0"),n=a("1bd2"),d=a("76bc"),u={name:"PerformDetail",components:{PerformResource:s["default"],PerformRate:n["default"],PerformOtherResource:d["default"]},data:function(){return{title:"",confirmLoading:!1,visible:!1,activeKey:"1",outinDetail:{},form:this.$form.createForm(this),validatorRules:{supplierName:{rules:[{required:!0,message:"请选择委外厂商!"}]},sendGroupName:{rules:[{required:!0,message:"请选择送检班组!"}]},returnTime:{rules:[{required:!0,message:"请选择返厂时间!"}]},transferDate:{rules:[{required:!0,message:"请选择送修时间!"}]},assetName:{rules:[{required:!0,message:"请选择部件!"}]},trainNo:{rules:[{required:!0,message:"请选择车号!"}]},lineName:{rules:[{required:!0,message:"请选择线路!"}]},status_dictText:{rules:[{required:!0,message:"请选择状态!"}]}},labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:15}}}},methods:{show:function(e){this.outinDetail=e,this.visible=!0,this.initFrom()},handleBack:function(){this.$router.back()},initFrom:function(){var e=this;this.$nextTick((function(){e.form.setFieldsValue({lineName:e.outinDetail.lineName,trainNo:e.outinDetail.trainNo,assetName:e.outinDetail.assetName,supplierName:e.outinDetail.supplierName,transferDate:o()(e.outinDetail.transferDate||void 0),returnTime:o()(e.outinDetail.returnTime||void 0),sendGroupName:e.outinDetail.sendGroupName,status_dictText:e.outinDetail.status_dictText})}))},handleActive:function(e){this.activeKey=e},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,this.activeKey="1"}}},c=u,m=a("2877"),f=Object(m["a"])(c,r,i,!1,null,"28bf971d",null);t["default"]=f.exports},"76bc":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"bodyWrapper"},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{label:"文件名称"}},[t("a-input",{attrs:{placeholder:"请输入文件名称",allowClear:""},model:{value:e.queryParam.fileName,callback:function(t){e.$set(e.queryParam,"fileName",t)},expression:"queryParam.fileName"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"资料类型"}},[t("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_outin_other_file_type"},model:{value:e.queryParam.fileType,callback:function(t){e.$set(e.queryParam,"fileType",t)},expression:"queryParam.fileType"}})],1)],1),t("a-col",{attrs:{md:10,sm:8}},[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-space",[t("a-button",{on:{click:e.findList}},[e._v("查询")]),t("a-button",{on:{click:e.handleUpload}},[e._v("上传")]),t("a-button",{on:{click:e.deleteRecord}},[e._v("删除")])],1)],1)])],1)],1)],1),t("div",{staticStyle:{height:"calc(100vh - 318px)"}},[t("vxe-table",{ref:"listTable",attrs:{border:"",height:"auto",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","checkbox-config":{trigger:"row",highlight:!0,range:!0},"edit-config":{trigger:"manual",mode:"row"}}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"5%"}}),t("vxe-table-column",{attrs:{title:"-",width:"8%"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("span",[t("a-space",[t("a",{on:{click:function(t){return t.stopPropagation(),e.handleSeeing(r)}}},[e._v("查看")]),t("a",{on:{click:function(t){return t.stopPropagation(),e.handleDownload(r)}}},[e._v("下载")])])],1)]}}])}),t("vxe-table-column",{attrs:{field:"name",title:"资料名称",width:"25%","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{field:"type",title:"文件类型",width:"8%"}}),t("vxe-table-column",{attrs:{field:"fileSize",title:"大小(KB)",width:"8%","header-align":"center",align:"right"}}),t("vxe-table-column",{attrs:{field:"uploadDate",title:"上传日期",width:"10%"}}),t("vxe-table-column",{attrs:{field:"remark",title:"备注",width:"25%","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{title:"操作",width:"11%"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("a",{on:{click:function(t){return t.stopPropagation(),e.handleEdit(r)}}},[e._v("编辑")])]}}])})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1),t("resource-upload-module",{ref:"modalForm",attrs:{outinDetailId:e.outinDetailId,other:!0},on:{ok:function(t){return e.loadData()}}}),t("edit-file-modal",{ref:"editModalForm",attrs:{other:!0},on:{ok:function(t){return e.loadData()}}}),t("doc-preview-modal",{ref:"docPreview",attrs:{title:e.fileName}})],1)},i=[],l=a("d214"),o=a("85dfa"),s=a("b824"),n=a("353a"),d=a("e2aa"),u={name:"PerformOtherResource",props:["outinDetailId"],components:{ResourceUploadModule:s["default"],EditFileModal:o["default"],DocPreviewModal:n["default"]},data:function(){return{queryParam:{fileName:"",outinDetailId:"",fileType:null,pageNo:1,pageSize:10},fileName:"",filePath:"",totalResult:0,allAlign:"center",tableData:[]}},created:function(){this.findList()},methods:{findList:function(){var e=this;this.queryParam.outinDetailId=this.outinDetailId,Object(l["O"])(this.queryParam).then((function(t){e.totalResult=t.result.total,e.loading=!1,e.tableData=t.result.records}))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()},loadData:function(){this.findList(),this.$emit("load")},handleUpload:function(){this.$refs.modalForm.handleAdd()},handleSeeing:function(e){this.fileName=e.name,this.$refs.docPreview.handleFilePath(e.savepath)},handleDownload:function(e){Object(d["b"])(e.savepath)},handleEdit:function(e){this.$refs.editModalForm.edit(e),this.$refs.editModalForm.title="编辑"},deleteRecord:function(){var e=this,t=this.$refs.listTable.getCheckboxRecords();t.length>0?this.$confirm({content:"是否删除选中".concat(t.length,"数据？"),okText:"确认",cancelText:"取消",onOk:function(){var a=t.map((function(e,t){return e.id})).join(",");Object(l["m"])("ids="+a).then((function(t){t.success&&e.findList(),e.$message.success(t.message)}))}}):this.$message.error("尚未选中任何数据!")}}},c=u,m=a("2877"),f=Object(m["a"])(c,r,i,!1,null,"25805215",null);t["default"]=f.exports},"85dfa":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,width:700,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:24,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"名称"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["name",e.validatorRules.name],expression:"[ 'name', validatorRules.name]",modifiers:{trim:!0}}],attrs:{placeholder:"文件名称"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:24,sm:24}},[t("a-form-item",{attrs:{label:"备注",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark",e.validatorRules.remark],expression:"[ 'remark',validatorRules.remark]"}]})],1)],1)],1)],1)],1)],1)},i=[],l=a("d214"),o={name:"EditFileModal",props:["other"],data:function(){return{title:"操作",visible:!1,model:{},labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:15}},confirmLoading:!1,form:this.$form.createForm(this),validatorRules:{name:{rules:[{required:!0,message:"请输入名称!"},{max:100,message:"输入长度不能超过100字符!"}]},remark:{rules:[{max:255,message:"输入长度不能超过255字符!"}]}}}},created:function(){},methods:{edit:function(e){var t=this;this.form.resetFields(),this.model=Object.assign({},e),this.visible=!0,this.$nextTick((function(){t.form.setFieldsValue({name:t.model.name,remark:t.model.remark})}))},handleOk:function(){var e=this,t=this;t.form.validateFields((function(a,r){if(!a){t.confirmLoading=!0;var i,o=Object.assign(t.model,r);i=e.other?Object(l["y"])(o):Object(l["B"])(o),i.then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok"),t.close()):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1}))}}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},s=o,n=a("2877"),d=Object(n["a"])(s,r,i,!1,null,null,null);t["default"]=d.exports},aae0:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"bodyWrapper"},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{label:"资料名称"}},[t("a-input",{attrs:{placeholder:"请输入文件名称",allowClear:""},model:{value:e.queryParam.fileName,callback:function(t){e.$set(e.queryParam,"fileName",t)},expression:"queryParam.fileName"}})],1)],1),t("a-col",{attrs:{md:10,sm:8}},[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-space",[t("a-button",{on:{click:e.findList}},[e._v("查询")]),t("a-button",{on:{click:e.handleUpload}},[e._v("上传")]),t("a-button",{on:{click:e.deleteRecord}},[e._v("删除")])],1)],1)])],1)],1)],1),t("div",{staticStyle:{height:"calc(100vh - 330px)"}},[t("vxe-table",{ref:"listTable",attrs:{border:"",height:"auto",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","checkbox-config":{trigger:"row",highlight:!0,range:!0},"edit-config":{trigger:"manual",mode:"row"}}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"5%"}}),t("vxe-table-column",{attrs:{title:"-",width:"10%"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("span",[t("a-space",[t("a",{on:{click:function(t){return t.stopPropagation(),e.handleSeeing(r)}}},[e._v("查看")]),t("a",{on:{click:function(t){return t.stopPropagation(),e.handleDownload(r)}}},[e._v("下载")])])],1)]}}])}),t("vxe-table-column",{attrs:{field:"name",title:"资料名称",width:"20%",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"type",title:"文件类型",width:"10%"}}),t("vxe-table-column",{attrs:{field:"fileSize",title:"大小(KB)",width:"10%",align:"right","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"remark",title:"备注",width:"10%",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{title:"操作",width:"10%"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("a",{on:{click:function(t){return t.stopPropagation(),e.handleEdit(r)}}},[e._v("编辑")])]}}])})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1),t("resource-upload-module",{ref:"modalForm",attrs:{contractId:e.contractId,other:!1},on:{ok:function(t){return e.loadData()}}}),t("doc-preview-modal",{ref:"docPreview",attrs:{title:e.fileName}}),t("edit-file-modal",{ref:"editModalForm",attrs:{other:!1},on:{ok:function(t){return e.loadData()}}})],1)},i=[],l=a("d214"),o=a("353a"),s=a("85dfa"),n=a("e2aa"),d=a("b824"),u={name:"PerformResource",props:["contractId","fileType"],components:{ResourceUploadModule:d["default"],DocPreviewModal:o["default"],EditFileModal:s["default"]},data:function(){return{queryParam:{fileName:"",contractId:"",fileType:null,pageNo:1,pageSize:10},totalResult:0,allAlign:"center",tableData:[],fileName:"",filePath:""}},created:function(){this.findList()},methods:{findList:function(){var e=this;this.queryParam.contractId=this.contractId,this.queryParam.fileType=this.fileType,this.loading=!0,Object(l["ab"])(this.queryParam).then((function(t){e.loading=!1,t.success&&(e.totalResult=t.result.total,e.tableData=t.result.records)}))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()},loadData:function(){this.findList(),this.$emit("load")},handleUpload:function(){this.$refs.modalForm.handleAdd(this.fileType)},handleSeeing:function(e){this.fileName=e.name,this.$refs.docPreview.handleFilePath(e.savepath)},handleDownload:function(e){Object(n["b"])(e.savepath)},handleEdit:function(e){this.$refs.editModalForm.edit(e),this.$refs.editModalForm.title="编辑"},deleteRecord:function(){var e=this,t=this.$refs.listTable.getCheckboxRecords();t.length>0?this.$confirm({content:"是否删除选中".concat(t.length,"数据？"),okText:"确认",cancelText:"取消",onOk:function(){var a=t.map((function(e,t){return e.id})).join(",");Object(l["p"])("ids="+a).then((function(t){t.success&&e.findList(),e.$message.success(t.message)}))}}):this.$message.error("尚未选中任何数据!")}}},c=u,m=a("2877"),f=Object(m["a"])(c,r,i,!1,null,"685a610d",null);t["default"]=f.exports}}]);