(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e1a7d00","chunk-29096d72"],{"0203":function(t,e,a){"use strict";a("272c")},"1a64":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"planTaskInfoView"}},[e("a-descriptions",{attrs:{bordered:""}},[e("a-descriptions-item",{attrs:{label:"上级任务"}},[t._v(" "+t._s(this.taskInfo.ParentName)+" ")]),e("a-descriptions-item",{attrs:{label:"任务名称",span:2}},[t._v(" "+t._s(this.taskInfo.taskName)+" ")]),e("a-descriptions-item",{attrs:{label:"作业手段"}},[t._v(" "+t._s(this.taskInfo.method_dictText)+" ")]),e("a-descriptions-item",{attrs:{label:"车辆停靠"}},[t._v(" "+t._s(this.taskInfo.trackName)+" ")]),e("a-descriptions-item",{attrs:{label:"所需工时"}},[t._v(" "+t._s(this.taskInfo.workTime)+" ")]),e("a-descriptions-item",{attrs:{label:"开始日期"}},[t._v(" "+t._s(t.taskInfo.startTime?t.taskInfo.startTime.format("YYYY-MM-DD"):"")+" ")]),e("a-descriptions-item",{attrs:{label:"结束日期"}},[t._v(" "+t._s(t.taskInfo.finishTime?t.taskInfo.finishTime.format("YYYY-MM-DD"):"")+" ")]),e("a-descriptions-item",{attrs:{label:"工期"}},[t._v(" "+t._s(this.taskInfo.taskDuration)+" ")]),e("a-descriptions-item",{attrs:{label:"第几天"}},[t._v(" 第"+t._s(this.taskInfo.dayIndex)+"天 ")]),e("a-descriptions-item",{attrs:{label:"作业工班"}},[t._v(" "+t._s(this.taskInfo.workGroupName)+" ")]),e("a-descriptions-item",{attrs:{label:"作业工位",span:2}},[t._v(" "+t._s(t.workStationName)+" ")]),e("a-descriptions-item",{attrs:{label:"是否生成工单"}},[t._v(" "+t._s(this.taskInfo.genOrder?"是":"否")+" ")]),e("a-descriptions-item",{attrs:{label:"是否委外"}},[t._v(" "+t._s(this.taskInfo.outsource?"是":"否")+" ")]),e("a-descriptions-item",{attrs:{label:"重要任务"}},[t._v(" "+t._s(this.taskInfo.important?"是":"否")+" ")]),e("a-descriptions-item",{attrs:{label:"任务描述",span:3}},[t._v(" "+t._s(this.taskInfo.remark)+" ")]),e("a-descriptions-item",{attrs:{label:"安全预想",span:3}},[e("div",{domProps:{innerHTML:t._s(t.taskInfo.safeNotice)}})])],1)],1)},i=[],n=a("c1df"),r=a.n(n),o=(a("8fad"),a("2cb5")),l={name:"TaskBasicInfoView",components:{TrainAssetType:o["default"]},props:{trainTypeId:{type:String,default:""},baseDate:{type:String,default:""},task:{type:Object,default:null},tasks:{type:Array,default:null}},data:function(){return{selectValue:2,workStationName:"",systemDictCode:"bu_train_asset_type,name,id,train_type_id='"+this.trainTypeId+"' AND struct_type=1",taskInfo:{UID:"",ParentId:"",children:null,taskName:"",genOrder:!0,trackId:"",outsource:!1,important:!1,method:"",method_dictText:"",workTime:0,systemId:"",assetTypeId:"",dayIndex:0,taskDuration:0,startTime:"",finishTime:"",workGroupId:"",workstations:[],planId:"",remark:""},replaceFields:{children:"children",title:"Name",key:"ID",value:"UID"},formRules:{taskName:[{required:!0,message:"请输入任务名称",trigger:"change"}],method:[{required:!0,message:"请选择作业手段",trigger:"change"}],systemId:[{required:!0,message:"请选择关联系统",trigger:"change"}],assetTypeId:[{required:!0,message:"请选择关联设备",trigger:"change"}],startTime:[{required:!0,message:"请选择任务开始日期",trigger:"change"}],finishTime:[{required:!0,message:"请选择任务结束日期",trigger:"change"}]},baseDateMoment:r()(this.baseDate),workStationList:[],labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}},labelCol1:{xs:{span:24},sm:{span:2}},wrapperCol1:{xs:{span:24},sm:{span:22}},labelCol2:{xs:{span:24},sm:{span:3}},wrapperCol2:{xs:{span:24},sm:{span:21}}}},computed:{canSelectAsset:function(){return!(!this.taskInfo||!this.taskInfo.systemId)}},mounted:function(){if(this.task&&(Object.assign(this.taskInfo,this.task),this.task.startTime&&(this.taskInfo.startTime=new r.a(this.task.startTime)),this.task.finishTime&&(this.taskInfo.finishTime=new r.a(this.task.finishTime)),this.taskInfo.genOrder=1===this.taskInfo.genOrder||!0===this.taskInfo.genOrder,this.taskInfo.outsource=1===this.taskInfo.outsource||!0===this.taskInfo.outsource,this.taskInfo.important=1===this.taskInfo.important||!0===this.taskInfo.important,this.taskInfo.workstations&&this.taskInfo.workstations.length>0)){var t=[];this.taskInfo.workstations.map((function(e){t.push(e.name)})),this.workStationName=t.toString()}},methods:{}},c=l,d=(a("0203"),a("2877")),h=Object(d["a"])(c,s,i,!1,null,null,null);e["default"]=h.exports},"272c":function(t,e,a){},"2cb5":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{width:"90%",centered:"",title:t.title,visible:t.visible,confirmLoading:t.confirmLoading,cancelText:"关闭",destroyOnClose:!0,bodyStyle:{height:"80vh"}},on:{ok:t.handleOk,cancel:t.handleCancel}},[e("div",{staticClass:"table-page-search-wrapper"},[e("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchQuery.apply(null,arguments)}}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:7,sm:24}},[e("a-form-item",{attrs:{label:"名称"}},[e("a-input",{attrs:{placeholder:"名称或编码","allow-clear":""},model:{value:t.queryParam.searchText,callback:function(e){t.$set(t.queryParam,"searchText",e)},expression:"queryParam.searchText"}})],1)],1),e("a-col",{attrs:{md:7,sm:24}},[e("a-form-item",{attrs:{label:"状态"}},[e("j-dict-select-tag",{attrs:{dictCode:"bu_enable"},model:{value:t.queryParam.status,callback:function(e){t.$set(t.queryParam,"status",e)},expression:"queryParam.status"}})],1)],1),e("a-col",{attrs:{md:3,sm:12}},[e("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[e("a-button",{on:{click:t.searchQuery}},[t._v("查询")])],1)])],1)],1)],1),e("div",{staticStyle:{height:"calc(80vh - 85px)"}},[e("vxe-table",{ref:"listTable",staticStyle:{height:"calc(80vh - 85px)"},attrs:{border:"","max-height":"100%","row-id":"id",align:t.allAlign,data:t.tableData,"show-overflow":"tooltip","radio-config":t.multiple?{}:{trigger:"row",checkMethod:t.checkRadioMethod},"checkbox-config":t.multiple?{trigger:"row",highlight:!0,checkMethod:t.checkRadioMethod}:{},"tree-config":{lazy:!0,children:"children",hasChild:"hasChildren",loadMethod:t.loadChildrenMethod}}},[t.multiple?e("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}):e("vxe-table-column",{attrs:{type:"radio",width:"40"}}),e("vxe-table-column",{attrs:{field:"name",title:"名称","tree-node":"",align:"left"}}),e("vxe-table-column",{attrs:{align:"left","header-align":"center",field:"code",title:"编码",width:"15%"}}),e("vxe-table-column",{attrs:{field:"structType_dictText",title:"类型",width:"10%"}}),e("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",width:"10%"}}),e("vxe-table-column",{attrs:{field:"placeCode",title:"位置编码",width:"15%"}}),e("vxe-table-column",{attrs:{field:"placeDesc",title:"位置描述",width:"15%"}})],1)],1)])},i=[],n=a("8fad"),r={name:"TrainAssetType",props:{trainTypeId:{type:String,default:""},parentId:{type:String,default:null},multiple:{type:Boolean,default:!0},title:{type:String,default:"设备类型选择"},canSelectType:{type:Array,default:function(){return[1,2,3,4]}}},data:function(){return{queryParam:{trainTypeId:"",id:"",searchText:"",status:null,structType:null},allAlign:"center",tableData:[],treeData:[],selectParent:"",visible:!1,confirmLoading:!1}},mounted:function(){},methods:{showModal:function(){this.visible=!0,this.queryParam.trainTypeId=this.trainTypeId,this.findList()},handleOk:function(){var t=[];this.multiple?t=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&t.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",t),this.visible=!1},handleCancel:function(){this.$emit("cancel"),this.close()},close:function(){this.$emit("close"),this.visible=!1},findList:function(){var t=this;this.loading=!0,this.parentId&&(this.queryParam.id=this.parentId),this.selectParent&&(this.queryParam.id=this.selectParent),Object(n["Qd"])(this.queryParam).then((function(e){e.success&&(t.loading=!1,t.tableData=e.result)}))},findSelectList:function(){var t=this,e={id:this.parentId,trainTypeId:this.trainTypeId};this.parentId&&(e.id=this.parentId),Object(n["Qd"])(e).then((function(e){e.success&&(t.loading=!1,t.treeData=e.result.map((function(e){return t.genSelectTreeNode(e)})))}))},loadChildrenMethod:function(t){var e=this,a=t.row,s={trainTypeId:this.trainTypeId,id:a.id};return new Promise((function(t){Object(n["Qd"])(s).then((function(a){a.success?t(a.result):e.$message.error("".concat(a.msg))}))}))},loadSelectNodeMethod:function(t){var e=this,a={trainTypeId:this.trainTypeId,id:t.dataRef.id,searchText:this.queryParam.searchText,status:this.queryParam.status,structType:this.queryParam.structType};return new Promise((function(t){Object(n["Qd"])(a).then((function(t){t.success?t.result.map((function(t){e.treeData=e.treeData.concat(e.genSelectTreeNode(t))})):e.$message.warning(t.message)})),t()}))},genSelectTreeNode:function(t){return{id:t.id,pId:t.parentId,value:t.id,title:t.name,isLeaf:!t.hasChildren}},searchQuery:function(){this.findList()},checkRadioMethod:function(t){var e=t.row;return this.canSelectType.indexOf(e.structType)>-1}}},o=r,l=(a("9589"),a("2877")),c=Object(l["a"])(o,s,i,!1,null,"52968c59",null);e["default"]=c.exports},7237:function(t,e,a){},9589:function(t,e,a){"use strict";a("7237")}}]);