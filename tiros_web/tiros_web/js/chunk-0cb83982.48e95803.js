(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0cb83982","chunk-48cb46bb","chunk-2d20e8a3"],{"2f09":function(e,t,n){"use strict";n("81af")},"81af":function(e,t,n){},a044:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("a-card",{attrs:{id:"leftDocument"}},[t("div",{staticClass:"typeTitle"},[t("a-icon",{staticStyle:{"margin-right":"4px"},attrs:{type:"read"}}),e._v(" 文档中心 ")],1),t("div",[t("a-row",{staticStyle:{"margin-top":"5px"},attrs:{gutter:24}},[t("a-col",{attrs:{md:19,sm:24}},[t("a-input-search",{attrs:{placeholder:"请输入内容"},on:{change:e.onSearch}})],1),t("a-col",{attrs:{md:5,sm:24,id:"extension"}},[t("a-dropdown",[t("a-menu",{attrs:{slot:"overlay"},on:{click:e.handleMenuClick},slot:"overlay"},[t("a-menu-item",{key:"1"},[e._v("展开所有")]),t("a-menu-item",{key:"2"},[e._v("折叠所有")]),t("a-menu-item",{key:"3"},[e._v("展开一级")])],1),t("a-button",[t("a-icon",{attrs:{type:"ellipsis"}})],1)],1)],1)],1)],1),t("div",{staticStyle:{width:"70%",margin:"0 auto"}},[e.treeData.length?t("a-tree",{attrs:{"tree-data":e.treeData,"auto-expand-parent":e.autoExpandParent,"expanded-keys":e.expandedKeys,replaceFields:{title:"name",key:"id"}},on:{expand:e.onExpand,select:e.onSelect},scopedSlots:e._u([{key:"title",fn:function(n){var a=n.name;return[a.indexOf(e.searchValue)>-1?t("span",[e._v(" "+e._s(a.substr(0,a.indexOf(e.searchValue)))+" "),t("span",{staticStyle:{color:"#f50"}},[e._v(e._s(e.searchValue))]),e._v(" "+e._s(a.substr(a.indexOf(e.searchValue)+e.searchValue.length))+" ")]):t("span",[e._v(e._s(a))])]}}],null,!1,367957347)}):e._e()],1)])},r=[],i=(n("4360"),n("8fad")),o={name:"LeftDocument",data:function(){return{treeData:[],dataList:[],autoExpandParent:!0,expandedKeys:[],titleTree:{title:"title"},searchValue:"",trainTypeId:"",labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}}}},created:function(){this.selectTree()},methods:{generateList:function(e){for(var t=0;t<e.length;t++){var n=e[t],a=n.id;this.dataList.push({key:a,title:n.name}),n.children&&this.generateList(n.children)}},setScopedSlots:function(e){var t=this;return e.forEach((function(e){e["scopedSlots"]=t.titleTree,e.children&&t.setScopedSlots(e.children)})),e},selectTree:function(){var e=this;Object(i["Bb"])({id:""}).then((function(t){t.success&&(e.treeData=e.setScopedSlots(t.result),e.generateList(e.treeData))}))},onExpand:function(e){this.expandedKeys=e,this.autoExpandParent=!1},getParentKey:function(e,t){for(var n,a=this,r=function(){var r=t[i];r.children&&r.children.map((function(t){t.name===e?n=r.id:a.getParentKey(e,r.children)&&(n=a.getParentKey(e,r.children))}))},i=0;i<t.length;i++)r();return n},onSearch:function(e){var t=this,n=e.target.value,a=this.dataList.map((function(e){if(e.title.indexOf(n)>-1)return t.getParentKey(e.title,t.treeData)})).filter((function(e,t,n){return e&&n.indexOf(e)===t}));Object.assign(this,{expandedKeys:a,searchValue:n,autoExpandParent:!0})},onSelect:function(e,t){this.selectedKeys=e,this.$emit("input",this.selectedKeys[0]),this.$emit("select",e,t)},getChildKey:function(e,t){var n=this;e.forEach((function(e){t.push(e.id),e.children&&n.getChildKey(e.children,t)}))},handleMenuClick:function(e){var t=this;if("1"===e.key){var n=[];this.getChildKey(this.treeData,n),this.expandedKeys=n}else"2"===e.key?this.expandedKeys=[]:"3"===e.key&&(this.expandedKeys=[],this.treeData.forEach((function(e){t.expandedKeys.push(e.id)})))}}},l=o,s=(n("2f09"),n("2877")),c=Object(s["a"])(l,a,r,!1,null,null,null);t["default"]=c.exports},b098:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("a-tree-select",{staticStyle:{width:"100%"},attrs:{allowClear:"",labelInValue:"",getPopupContainer:function(e){return e.parentNode},disabled:e.disabled,dropdownStyle:{maxHeight:"400px",overflow:"auto"},placeholder:e.placeholder,loadData:e.asyncLoadTreeData,value:e.treeValue,treeData:e.treeData,multiple:e.multiple},on:{change:e.onChange,search:e.onSearch}})},r=[],i=n("0fea");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function l(e){return u(e)||c(e)||h(e)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function u(e){if(Array.isArray(e))return f(e)}function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=h(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw i}}}}function h(e,t){if(e){if("string"==typeof e)return f(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var p={name:"JTreeSelect",props:{value:{type:String,required:!1},placeholder:{type:String,default:"请选择",required:!1},dict:{type:String,default:"",required:!1},pidField:{type:String,default:"pid",required:!1},pidValue:{type:String,default:"",required:!1},disabled:{type:Boolean,default:!1,required:!1},hasChildField:{type:String,default:"",required:!1},condition:{type:String,default:"",required:!1},multiple:{type:Boolean,default:!1},loadTriggleChange:{type:Boolean,default:!1,required:!1}},data:function(){return{treeValue:null,treeData:[],url:"/sys/dict/loadTreeData",view:"/sys/dict/loadDictItem/",tableName:"",text:"",code:""}},watch:{value:function(){this.loadItemByCode()},dict:function(){this.initDictInfo(),this.loadRoot()}},created:function(){var e=this;this.validateProp().then((function(){e.initDictInfo(),e.loadRoot(),e.loadItemByCode()}))},methods:{loadItemByCode:function(){var e=this;this.value&&"0"!=this.value?Object(i["d"])("".concat(this.view).concat(this.dict),{key:this.value}).then((function(t){if(t.success){var n=e.value.split(",");e.treeValue=t.result.map((function(e,t){return{key:n[t],value:n[t],label:e}})),e.onLoadTriggleChange(t.result[0])}})):this.treeValue=null},onLoadTriggleChange:function(e){!this.multiple&&this.loadTriggleChange&&this.$emit("change",this.value,e)},initDictInfo:function(){var e=this.dict.split(",");this.tableName=e[0],this.text=e[1],this.code=e[2]},asyncLoadTreeData:function(e){var t=this;return new Promise((function(n){if(e.$vnode.children)n();else{var a=e.$vnode.key,r={pid:a,tableName:t.tableName,text:t.text,code:t.code,pidField:t.pidField,hasChildField:t.hasChildField,condition:t.condition};Object(i["d"])(t.url,r).then((function(e){if(e.success){var r,i=d(e.result);try{for(i.s();!(r=i.n()).done;){var o=r.value;o.value=o.key,0==o.leaf?o.isLeaf=!1:1==o.leaf&&(o.isLeaf=!0)}}catch(s){i.e(s)}finally{i.f()}t.addChildren(a,e.result,t.treeData),t.treeData=l(t.treeData)}n()}))}}))},addChildren:function(e,t,n){if(n&&n.length>0){var a,r=d(n);try{for(r.s();!(a=r.n()).done;){var i=a.value;if(i.key==e){t&&0!=t.length?i.children=t:i.isLeaf=!0;break}this.addChildren(e,t,i.children)}}catch(o){r.e(o)}finally{r.f()}}},loadRoot:function(){var e=this,t={pid:this.pidValue,tableName:this.tableName,text:this.text,code:this.code,pidField:this.pidField,hasChildField:this.hasChildField,condition:this.condition};Object(i["d"])(this.url,t).then((function(t){if(t.success&&t.result){var n,a=d(t.result);try{for(a.s();!(n=a.n()).done;){var r=n.value;r.value=r.key,0==r.leaf?r.isLeaf=!1:1==r.leaf&&(r.isLeaf=!0)}}catch(i){a.e(i)}finally{a.f()}e.treeData=l(t.result)}}))},onChange:function(e){e?e instanceof Array?(this.$emit("change",e.map((function(e){return e.value})).join(",")),this.treeValue=e):(this.$emit("change",e.value,e.label),this.treeValue=e):(this.$emit("change",""),this.treeValue=null)},onSearch:function(e){},getCurrTreeData:function(){return this.treeData},validateProp:function(){var e=this,t=this.condition;return new Promise((function(n,a){if(t)try{var r=JSON.parse(t);"object"==o(r)&&r?n():(e.$message.error("组件JTreeSelect-condition传值有误，需要一个json字符串!"),a())}catch(i){e.$message.error("组件JTreeSelect-condition传值有误，需要一个json字符串!"),a()}else n()}))}},model:{prop:"value",event:"change"}},y=p,m=n("2877"),v=Object(m["a"])(y,a,r,!1,null,null,null);t["default"]=v.exports},e8de:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("a-row",{attrs:{type:"flex",gutter:16}},[t("a-col",{attrs:{md:5,sm:24}},[t("left-document",{ref:"leftDocument",on:{select:e.onSelect},model:{value:e.directoryId,callback:function(t){e.directoryId=t},expression:"directoryId"}})],1),t("a-col",{attrs:{md:19,sm:24}},[t("right-document",{attrs:{directoryId:e.directoryId,curPath:e.curPath},on:{selectTree:function(t){return e.selectTree()}}})],1)],1)},r=[],i=n("a044"),o=n("df41"),l={name:"Document",components:{LeftDocument:i["default"],RightDocument:o["default"]},data:function(){return{directoryId:"",curPath:""}},methods:{onSelect:function(e,t){this.curPath=this.buildPath(t.node)},selectTree:function(){this.$refs.leftDocument.selectTree()},buildPath:function(e){var t="/";return e.dataRef&&(t="/"+e.dataRef.name,e.dataRef.parentId)?this.buildPath(e.$parent)+t:t}}},s=l,c=n("2877"),u=Object(c["a"])(s,a,r,!1,null,"3f82dd6d",null);t["default"]=u.exports}}]);