(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-62e99c56","chunk-3949b6d4","chunk-2d0cc598","chunk-2d0b2759"],{"23ce":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:"详情",width:"70%",visible:e.visible,confirmLoading:e.confirmLoading,footer:null,destroyOnClose:!0},on:{cancel:e.handleCancel}},[t("div",{staticStyle:{height:"70vh"}},[t("a-descriptions",{attrs:{bordered:"",column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1}}},[t("a-descriptions-item",{attrs:{label:"物资编码"}},[e._v(" "+e._s(e.borrowDetail.materialTypeCode)+" ")]),t("a-descriptions-item",{attrs:{label:"物资名称"}},[e._v(" "+e._s(e.borrowDetail.materialTypeName)+" ")]),t("a-descriptions-item",{attrs:{label:"物资描述"}},[e._v(" "+e._s(e.borrowDetail.materialTypeSpec)+" ")]),t("a-descriptions-item",{attrs:{label:"借用数量"}},[e._v(" "+e._s(e.borrowDetail.amount)+" ")]),t("a-descriptions-item",{attrs:{label:"物资单位"}},[e._v(" "+e._s(e.borrowDetail.materialTypeUnit)+" ")]),t("a-descriptions-item",{attrs:{label:"所属仓库"}},[e._v(" "+e._s(e.borrowDetail.warehouseName)+" ")]),t("a-descriptions-item",{attrs:{label:"借用组织"}},[e._v(" "+e._s(e.borrowDetail.deptName)+" ")]),t("a-descriptions-item",{attrs:{label:"借用人员"}},[e._v(" "+e._s(e.borrowDetail.borrowUserName)+" ")]),t("a-descriptions-item",{attrs:{label:"借用日期"}},[e._v(" "+e._s(e.borrowDetail.borrowDate)+" ")]),t("a-descriptions-item",{attrs:{label:"归还类型"}},[e._v(" "+e._s(e.borrowDetail.returnType_dictText)+" ")]),t("a-descriptions-item",{attrs:{label:"归还状态"}},[e._v(" "+e._s(e.borrowDetail.returnStatus_dictText)+" ")]),t("a-descriptions-item",{attrs:{label:"备注"}},[e._v(" "+e._s(e.borrowDetail.remark)+" ")])],1)],1)])},i=[],o={name:"BorrowDetail",data:function(){return{visible:!1,confirmLoading:!1,borrowDetail:""}},methods:{detail:function(e){this.visible=!0,this.borrowDetail=e},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},l=o,n=a("2877"),s=Object(n["a"])(l,r,i,!1,null,null,null);t["default"]=s.exports},"4e0a":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"90%",title:"车辆设备选择",centered:"",visible:e.visible,bodyStyle:{height:"80vh"},cancelText:"关闭",destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.findList.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:8}},[t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{attrs:{placeholder:"名称或编码","allow-clear":""},model:{value:e.queryParam.searchText,callback:function(t){e.$set(e.queryParam,"searchText",t)},expression:"queryParam.searchText"}})],1)],1),t("a-col",{attrs:{md:9,sm:24}},[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-space",[t("a-button",{on:{click:e.findList}},[e._v("查询")])],1)],1)])],1)],1)],1),t("div",{staticClass:"tableHeight",staticStyle:{height:"calc(80vh - 85px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(80vh - 85px)"},attrs:{border:"","row-id":"id",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","max-height":"100%","radio-config":{trigger:e.multiple?"default":"row",highlight:!0,checkMethod:e.checkRadioMethod},"checkbox-config":{trigger:e.multiple?"row":"default",highlight:!0,checkStrictly:!0,checkMethod:e.checkRadioMethod},"tree-config":{lazy:!0,children:"children",hasChild:"hasChildren",loadMethod:e.loadChildrenMethod}}},[e.multiple?t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}):t("vxe-table-column",{attrs:{type:"radio",width:"40"}}),t("vxe-table-column",{attrs:{field:"name",title:"名称","tree-node":"",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{align:"left","header-align":"center",field:"code",title:"编码",width:"150"}}),t("vxe-table-column",{attrs:{field:"structType_dictText",title:"类型",width:"120"}}),t("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",width:"100"}}),t("vxe-table-column",{attrs:{field:"placeId",title:"位置编码",width:"150"}}),t("vxe-table-column",{attrs:{field:"placeDesc",title:"位置描述",width:"200",align:"left","header-align":"center"}})],1)],1)])},i=[],o=a("8fad"),l={name:"TrainStructureList",props:{multiple:{type:Boolean,default:!1},canSelectType:{type:Array,default:function(){return[1,2,3,4]}},lineId:{type:String,default:""}},data:function(){return{visible:!1,queryParam:{id:"",searchText:"",status:null,trainStructId:""},selectParent:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:19}},allAlign:"center",tableData:[],trainStructId:""}},methods:{showModal:function(e){this.queryParam.trainStructId=e,this.queryParam.lineId=this.lineId,this.trainStructId=e,this.visible=!0,this.findList()},findList:function(){var e=this;Object(o["pc"])(this.queryParam).then((function(t){t.success&&(e.tableData=t.result)}))},loadChildrenMethod:function(e){var t=this,a=e.row,r={trainStructId:this.trainStructId,id:a.id};return new Promise((function(e){Object(o["pc"])(r).then((function(a){a.success?e(a.result):t.$message.error("".concat(a.msg))}))}))},handleOk:function(){var e=[];this.multiple?e=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&e.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",e),this.close()},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1},checkRadioMethod:function(e){var t=e.row;return this.canSelectType.indexOf(t.structType)>-1}}},n=l,s=a("2877"),c=Object(s["a"])(n,r,i,!1,null,"5f613a8e",null);t["default"]=c.exports},"54f6":function(e,t,a){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,n(r.key),r)}}function l(e,t,a){return t&&o(e.prototype,t),a&&o(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function n(e){var t=s(e,"string");return"symbol"==r(t)?t:t+""}function s(e,t){if("object"!=r(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}a.d(t,"a",(function(){return c}));var c=function(){function e(t,a){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,e),this.options={attrs:[]},Object.assign(this.options,o),this.options.attrs.find((function(e){return"edit"===e.key}))||this.options.attrs.push({key:"edit"}),this.options.attrs.forEach((function(e){Object.hasOwnProperty.call(e,"key")&&(r[e.key]=!1),Object.hasOwnProperty.call(e,"judge")||(e["judge"]=function(e){return!0})})),this.del=!1,this.nextTick=t.$nextTick,this.refs=t.$refs,this.refName=a,t.$nextTick((function(){r.vxeTable=t.$refs[a]}))}return l(e,[{key:"editRow",get:function(){if(this.edit){var e=this.vxeTable.getCheckboxRecords();return e.length?e[0]:{}}return{}}},{key:"update",value:function(){var e=this;this.nextTick((function(){e.vxeTable||(e.vxeTable=e.refs[e.refName]);var t=e.vxeTable.getCheckboxRecords();e.del=t.length>0,e.options.attrs.forEach((function(a){for(var r in a)Object.hasOwnProperty.call(a,r)&&(a["isDel"]?t.length?e[a.key]=t.length>0&&a.judge(t[0]):e[a.key]=!1:t.length?e[a.key]=1===t.length&&a.judge(t[0]):e[a.key]=!1)}))}))}}])}()},"88de":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:"导入EXCEL",width:600,visible:e.visible,confirmLoading:e.uploading},on:{cancel:e.handleClose}},[t("a-form-model",{attrs:{form:e.form}},[t("a-row",[t("a-col",[t("a-form-model-item",{attrs:{prop:"fileList",labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"请选择文件"}},[t("a-upload",{attrs:{name:"file",multiple:!1,accept:".xls,.xlsx",fileList:e.form.fileList,remove:e.handleRemove,beforeUpload:e.beforeUpload}},[t("a-button",{attrs:{disabled:e.form.fileList.length>=e.sum}},[t("a-icon",{attrs:{type:"upload"}}),e._v(" 选择导入文件 ")],1)],1)],1)],1),t("a-col",[t("a-form-model-item",{attrs:{prop:"lineId",labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"所属线路"}},[t("line-select-list",{attrs:{value:e.form.lineId},on:{change:function(t){return e.form.lineId=t}}})],1)],1),t("a-col",[t("a-form-model-item",{attrs:{prop:"repairProgramId",labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"所属修程"}},[t("j-dict-select-tag",{attrs:{triggerChange:!0,placeholder:"请选择",dictCode:"bu_repair_program,name,id"},model:{value:e.form.repairProgramId,callback:function(t){e.$set(e.form,"repairProgramId",t)},expression:"form.repairProgramId"}})],1)],1),t("a-col",[t("a-form-model-item",{attrs:{prop:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"清除原有线路、修程"}},[t("a-switch",{model:{value:e.form.clear,callback:function(t){e.$set(e.form,"clear",t)},expression:"form.clear"}})],1)],1)],1)],1),t("template",{slot:"footer"},[t("a-button",{on:{click:e.handleClose}},[e._v("关闭")]),t("a-button",{attrs:{type:"primary",disabled:0===e.form.fileList.length||!e.form.lineId||!e.form.repairProgramId,loading:e.uploading},on:{click:e.handleImport}},[e._v(" "+e._s(e.uploading?"导入中...":"开始导入")+" ")])],1)],2)},i=[],o=a("0fea"),l=a("5633");function n(e){return u(e)||d(e)||c(e)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"==typeof e)return m(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?m(e,t):void 0}}function d(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function u(e){if(Array.isArray(e))return m(e)}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}var h={name:"willChangeImport",components:{LineSelectList:l["default"]},props:{url:{type:String,default:"",required:!1},biz:{type:String,default:"",required:!1},sum:{type:Number,default:1}},data:function(){return{visible:!1,uploading:!1,form:{fileList:[],lineId:void 0,repairProgramId:void 0,clear:!0},uploadAction:"",foreignKeys:"",labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}}},watch:{url:function(e){e&&(this.uploadAction=e)}},created:function(){this.uploadAction=this.url},mounted:function(){},methods:{handleClose:function(){this.visible=!1},show:function(e){Object.assign(this.form,this.$options.data().form),this.uploading=!1,this.visible=!0,this.foreignKeys=e},handleRemove:function(e){var t=this.form.fileList.indexOf(e),a=this.form.fileList;a.splice(t,1),this.fileList=JSON.parse(JSON.stringify(a))},beforeUpload:function(e){return this.form.fileList=[].concat(n(this.form.fileList),[e]),!1},handleImport:function(){var e=this,t=this.form.fileList,a=new FormData;this.biz&&a.append("isSingleTableImport",this.biz),this.foreignKeys&&this.foreignKeys.length>0&&a.append("foreignKeys",this.foreignKeys),t.forEach((function(e){a.append("file",e)})),a.append("lineId",this.form.lineId),a.append("repairProgramId",this.form.repairProgramId),a.append("clear",this.form.clear),this.uploading=!0,Object(o["j"])(this.uploadAction,a).then((function(t){e.uploading=!1,t.success?(e.$message.success(t.message),e.visible=!1,e.$emit("ok"),Object.assign(e.form,e.$options.data().form)):e.$message.error(t.message)}))}}},p=h,f=a("2877"),g=Object(f["a"])(p,r,i,!1,null,"15090af3",null);t["default"]=g.exports},b0cd:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:"选择部门",width:e.modalWidth,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭"},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[t("a-spin",{attrs:{tip:"Loading...",spinning:!1}},[t("a-input-search",{staticStyle:{"margin-bottom":"1px"},attrs:{placeholder:"请输入部门名称按回车进行搜索"},on:{search:e.onSearch}}),t("a-tree",{attrs:{checkable:"",treeData:e.treeData,checkStrictly:!0,autoExpandParent:e.autoExpandParent,expandedKeys:e.expandedKeys,checkedKeys:e.checkedKeys},on:{check:e.onCheck,select:e.onSelect,expand:e.onExpand},scopedSlots:e._u([{key:"title",fn:function(a){var r=a.title;return[r.indexOf(e.searchValue)>-1?t("span",[e._v(" "+e._s(r.substr(0,r.indexOf(e.searchValue)))+" "),t("span",{staticStyle:{color:"#f50"}},[e._v(e._s(e.searchValue))]),e._v(" "+e._s(r.substr(r.indexOf(e.searchValue)+e.searchValue.length))+" ")]):t("span",[e._v(e._s(r))])]}}])})],1)],1)},i=[],o=a("4ec3");function l(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=c(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,n=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){n=!0,o=e},f:function(){try{l||null==a.return||a.return()}finally{if(n)throw o}}}}function n(e){return u(e)||d(e)||c(e)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"==typeof e)return m(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?m(e,t):void 0}}function d(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function u(e){if(Array.isArray(e))return m(e)}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}var h={name:"JSelectDepartModal",props:["modalWidth","multi","rootOpened","departId"],data:function(){return{visible:!1,confirmLoading:!1,treeData:[],autoExpandParent:!0,expandedKeys:[],dataList:[],checkedKeys:[],checkedRows:[],searchValue:""}},created:function(){this.loadDepart()},watch:{departId:function(){this.initDepartComponent()},visible:{handler:function(){this.departId?this.checkedKeys=this.departId.split(","):this.checkedKeys=[]}}},methods:{show:function(){this.visible=!0,this.checkedRows=[],this.checkedKeys=[]},loadDepart:function(){var e=this;Object(o["H"])().then((function(t){if(t.success){var a=n(t.result);e.reWriterWithSlot(a),e.treeData=a,e.initDepartComponent(),e.rootOpened&&e.initExpandedKeys(t.result)}}))},initDepartComponent:function(){var e="";if(this.departId){var t,a=this.departId,r=l(this.dataList);try{for(r.s();!(t=r.n()).done;){var i=t.value;a.indexOf(i.key)>=0&&(e+=","+i.title)}}catch(o){r.e(o)}finally{r.f()}e&&(e=e.substring(1))}this.$emit("initComp",e)},reWriterWithSlot:function(e){var t,a=l(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;if(r.children&&r.children.length>0){this.reWriterWithSlot(r.children);var i=Object.assign({},r);i.children={},this.dataList.push(i)}else this.dataList.push(r),r.scopedSlots={title:"title"}}}catch(o){a.e(o)}finally{a.f()}},initExpandedKeys:function(e){if(e&&e.length>0){var t,a=[],r=l(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.children&&i.children.length>0&&a.push(i.id)}}catch(o){r.e(o)}finally{r.f()}this.expandedKeys=[].concat(a)}else this.expandedKeys=[]},onCheck:function(e,t){var a=this;if(this.multi)this.checkedKeys=e.checked,this.checkedRows=this.getCheckedRows(this.checkedKeys);else{var r=e.checked.filter((function(e){return a.checkedKeys.indexOf(e)<0}));this.checkedKeys=n(r),this.checkedRows=0===this.checkedKeys.length?[]:[t.node.dataRef]}},onSelect:function(e,t){var a=[];if(a.push(e[0]),this.checkedKeys&&0!==this.checkedKeys.length&&this.multi){var r,i=t.node.dataRef.key;if(this.checkedKeys.indexOf(i)>=0)this.checkedKeys=this.checkedKeys.filter((function(e){return e!==i}));else(r=this.checkedKeys).push.apply(r,a)}else this.checkedKeys=[].concat(a),this.checkedRows=[t.node.dataRef];this.checkedRows=this.getCheckedRows(this.checkedKeys)},onExpand:function(e){this.expandedKeys=e,this.autoExpandParent=!1},handleSubmit:function(){this.checkedKeys&&0!=this.checkedKeys.length?this.$emit("ok",this.checkedRows,this.checkedKeys.join(",")):this.$emit("ok",""),this.handleClear()},handleCancel:function(){this.handleClear()},handleClear:function(){this.visible=!1,this.checkedKeys=[]},getParentKey:function(e,t){for(var a,r=0;r<t.length;r++){var i=t[r];i.children&&(i.children.some((function(t){return t.key===e}))?a=i.key:this.getParentKey(e,i.children)&&(a=this.getParentKey(e,i.children)))}return a},onSearch:function(e){var t=this,a=this.dataList.map((function(a){return a.title.indexOf(e)>-1?t.getParentKey(a.key,t.treeData):null})).filter((function(e,t,a){return e&&a.indexOf(e)===t}));Object.assign(this,{expandedKeys:a,searchValue:e,autoExpandParent:!0})},getCheckedRows:function(e){var t,a=function(e,t){var r,i=l(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o.id===t)return o;if(o.children instanceof Array){var n=a(o.children,t);if(null!=n)return n}}}catch(s){i.e(s)}finally{i.f()}return null},r=[],i=l(e);try{for(i.s();!(t=i.n()).done;){var o=t.value,n=a(this.treeData,o);null!=n&&r.push(n)}}catch(s){i.e(s)}finally{i.f()}return r}}},p=h,f=a("2877"),g=Object(f["a"])(p,r,i,!1,null,"4907a211",null);t["default"]=g.exports},c94f:function(e,t,a){"use strict";a("fef4")},d967:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,width:"60%",visible:e.visible,confirmLoading:e.confirmLoading,bodyStyle:{minHeight:"450px"},destroyOnClose:!0,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-row",{attrs:{gutter:24}},[e.isEdit?e._e():t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"物资类型选择"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["materialTypeName"],expression:"['materialTypeName']",modifiers:{trim:!0}}],ref:"mySelect",attrs:{allowClear:"",placeholder:"请选择",open:!1,showArrow:!0,disabled:e.isEdit},on:{focus:e.openModal,change:e.clearSelectInfo}},[t("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)],1),t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"单列所需数量"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["needAmount",e.validatorRules.needAmount],expression:"['needAmount', validatorRules.needAmount]",modifiers:{trim:!0}}],staticStyle:{width:"100%"},attrs:{min:1,max:999999999,placeholder:"请输入物资单列所需数量"}})],1)],1),t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"物资编码"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["code",e.validatorRules.code],expression:"['code', validatorRules.code]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入物资编码",disabled:e.isSelectData}})],1)],1),t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"所属线路"}},[t("line-select-list",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["lineId",e.validatorRules.lineId],expression:"['lineId', validatorRules.lineId]",modifiers:{trim:!0}}]})],1)],1),t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"物资名称"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["name",e.validatorRules.name],expression:"['name', validatorRules.name]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入物资名称",disabled:e.isSelectData}})],1)],1),t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"所属修程"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["repairProgramId",e.validatorRules.repairProgramId],expression:"['repairProgramId', validatorRules.repairProgramId]",modifiers:{trim:!0}}],attrs:{triggerChange:!0,placeholder:"请选择",dictCode:"bu_repair_program,name,id"},on:{change:e.selectRepairProgram}})],1)],1),t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"物资单位"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["unit",e.validatorRules.unit],expression:"['unit', validatorRules.unit]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入物资单位",disabled:e.isSelectData}})],1)],1),t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"所属工位"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["workstationId",e.validatorRules.workstationId],expression:"['workstationId', validatorRules.workstationId]",modifiers:{trim:!0}}],attrs:{triggerChange:!0,placeholder:"请选择",dictCode:"bu_mtr_workstation,name,id"},on:{change:e.selectWorkstation}})],1)],1),t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"物资属性"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["materialTypeCategory",e.validatorRules.materialTypeCategory],expression:"['materialTypeCategory', validatorRules.materialTypeCategory]",modifiers:{trim:!0}}],attrs:{triggerChange:!0,placeholder:"请选择",dictCode:"bu_material_attr",disabled:e.isSelectData}})],1)],1),t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"安装部位"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["locationName",e.validatorRules.location],expression:"['locationName', validatorRules.location]",modifiers:{trim:!0}}],ref:"inputAssetSelect",staticStyle:{width:"100%"},attrs:{placeholder:"安装部位"},on:{focus:e.showAssetModal}},[t("a-icon",{attrs:{slot:"suffix",type:"ellipsis"},slot:"suffix"})],1)],1)],1),t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"物资描述"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["spec",e.validatorRules.spec],expression:"['spec', validatorRules.spec]"}],attrs:{disabled:e.isSelectData}})],1)],1),t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"备注"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark",e.validatorRules.remark],expression:"['remark', validatorRules.remark]"}],attrs:{allowClear:"",maxLength:201}})],1)],1),t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"所属班组"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["groupId"],expression:"['groupId']",modifiers:{trim:!0}}],attrs:{triggerChange:!0,placeholder:"请选择班组",dictCode:e.dictGroupStr}})],1)],1)],1)],1)],1),t("material-list",{ref:"MaterialModalForm",attrs:{multiple:!1,disabled:!0,"default-checked-keys":e.defaultChecked},on:{ok:e.addTarget}}),t("train-structure-list",{ref:"assetSelect",attrs:{multiple:!1},on:{ok:e.addAsset}})],1)},i=[],o=a("5633"),l=a("c54ca"),n=a("b098"),s=(a("c1df"),a("ca00")),c=a("7164"),d=a("fe54"),u=a("4e0a"),m={name:"WillChangeItemModal",components:{JTreeSelect:n["default"],MaterialList:c["default"],JSelectDepart:d["default"],LineSelectList:o["default"],TrainStructureList:u["default"]},data:function(){return{dictGroupStr:"bu_mtr_workshop_group,group_name,id,workshop_id='"+this.$store.getters.userInfo.workshopId+"'|workshop_id",title:"操作",visible:!1,materialTypeId:"",materialTypeName:"",defaultChecked:"",isSelectData:!1,isEdit:!1,model:{},userList:[],trainTypeId:"",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:14}},confirmLoading:!1,form:this.$form.createForm(this),deptId:"",validatorRules:{needAmount:{rules:[{required:!0,message:"请输入单列所需数量!"}],initialValue:1},code:{rules:[{required:!0,message:"请输入物资编码!"}]},lineId:{rules:[{required:!0,message:"请选择线路!"}]},name:{rules:[{required:!0,message:"请输入物资名称!"}]},repairProgramId:{rules:[{required:!0,message:"请选择所属修程!"}]},unit:{rules:[{required:!0,message:"请输入单位!"}]},workstationId:{rules:[{required:!0,message:"请选择所属工位!"}]},materialTypeCategory:{rules:[{required:!0,message:"请选择物资属性!"}]},location:{rules:[{required:!0,message:"请选择安装部位!"}]},spec:{rules:[{required:!0,max:200,message:"请输入物资描述，不能超过200字符!"}]},remark:{rules:[{required:!1,max:255,message:"输入长度不能超过255个字符!"}]}}}},created:function(){},methods:{openModal:function(){this.$refs.MaterialModalForm.showModal(),this.$refs.mySelect.blur()},showAssetModal:function(){this.$refs.assetSelect.showModal(),this.$refs.inputAssetSelect.blur()},addAsset:function(e){Object(s["e"])(e)||(this.form.setFieldsValue({locationName:e[0].name}),this.model.location=e[0].id)},addTarget:function(e){e&&1===e.length&&null!=e[0]&&(this.isSelectData=!0,this.materialTypeId=e[0].id,this.form.setFieldsValue({materialTypeName:e[0].name,amount:e[0].num,code:e[0].code,name:e[0].name,needAmount:e[0].num,unit:e[0].unit,materialTypeCategory:e[0].category2,spec:e[0].spec,remark:e[0].remark}))},onAssetTypeSelect:function(e){if(e.length)e[0]},onCancelAssetTypeSelect:function(){},clearSelectInfo:function(e){e.currentTarget.value||(this.isSelectData=!1,this.form.setFieldsValue({materialTypeName:"",amount:"",code:"",name:"",unit:"",materialTypeCategory:"",spec:"",needAmount:"",remark:""}))},selectRepairProgram:function(e,t){t&&this.form.setFieldsValue({repairProgramName:t.title})},selectWorkstation:function(e,t){t&&this.form.setFieldsValue({workstationName:t.title})},selectLocationName:function(e,t){t&&this.form.setFieldsValue({locationName:t.title})},add:function(){this.edit({})},edit:function(e){var t=this;this.form.resetFields(),this.visible=!0,this.model=Object.assign({},e),e.id&&(this.isEdit=!0,this.isSelectData=!0,this.$nextTick((function(){t.materialTypeId=t.model.materialTypeId,t.form.setFieldsValue({needAmount:t.model.needAmount,code:t.model.code,lineId:t.model.lineId,name:t.model.name,repairProgramId:t.model.repairProgramId,unit:t.model.unit,workstationId:t.model.workstationId,groupId:t.model.groupId,materialTypeCategory:t.model.materialTypeCategory,locationName:t.model.locationName,spec:t.model.spec,remark:t.model.remark})})))},handleOk:function(){var e=this,t=this;t.form.validateFields((function(a,r){if(!a){t.confirmLoading=!0;var i,o=Object.assign(t.model,r,{materialTypeId:e.materialTypeId,location:e.model.location});i=t.model.id?Object(l["O"])(o):Object(l["cc"])(o),i.then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok"),t.close()):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1}))}}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.isSelectData=!1,this.isEdit=!1,this.visible=!1,this.defaultChecked=""}}},h=m,p=a("2877"),f=Object(p["a"])(h,r,i,!1,null,null,null);t["default"]=f.exports},e5b8:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"bodyWrapper"},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:5,sm:12}},[t("a-form-item",{attrs:{label:"物资"}},[t("a-input",{attrs:{placeholder:"物资编码或者名称",allowClear:""},model:{value:e.queryParam.searchText,callback:function(t){e.$set(e.queryParam,"searchText",t)},expression:"queryParam.searchText"}})],1)],1),t("a-col",{attrs:{md:4,sm:24}},[t("a-form-item",{attrs:{label:"所属线路"}},[t("line-select-list",{model:{value:e.queryParam.lineId,callback:function(t){e.$set(e.queryParam,"lineId",t)},expression:"queryParam.lineId"}})],1)],1),t("a-col",{attrs:{md:4,sm:24}},[t("a-form-item",{attrs:{label:"所属修程"}},[t("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_repair_program,name,id"},model:{value:e.queryParam.repairProgramId,callback:function(t){e.$set(e.queryParam,"repairProgramId",t)},expression:"queryParam.repairProgramId"}})],1)],1),t("a-col",{attrs:{md:4,sm:24}},[t("a-form-item",{attrs:{label:"工班"}},[t("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:e.dictGroupStr},model:{value:e.queryParam.groupId,callback:function(t){e.$set(e.queryParam,"groupId",t)},expression:"queryParam.groupId"}})],1)],1),t("a-col",{attrs:{md:4,sm:24}},[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-space",[t("a-button",{on:{click:e.findList}},[e._v("查询")]),t("a-button",[t("a",{style:{fontSize:"12px"},on:{click:e.toggle}},[e._v(" 更多条件 "),t("a-icon",{attrs:{type:e.expand?"up":"down"}})],1)])],1)],1)])],1),t("a-row",{style:{display:e.expand?"block":"none"},attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"所属工位"}},[t("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:e.dictCodeStrWork},model:{value:e.queryParam.workstationId,callback:function(t){e.$set(e.queryParam,"workstationId",t)},expression:"queryParam.workstationId"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"所属系统"}},[t("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_train_asset_type,name,id,struct_type=1 and parent_id is null"},model:{value:e.queryParam.sysId,callback:function(t){e.$set(e.queryParam,"sysId",t)},expression:"queryParam.sysId"}})],1)],1)],1),t("a-row",{directives:[{name:"has",rawName:"v-has",value:"willchange:admin",expression:"'willchange:admin'"}]},[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-space",[t("a-button",{directives:[{name:"has",rawName:"v-has",value:"willchange:admin",expression:"'willchange:admin'"}],attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增")]),t("a-button",{directives:[{name:"has",rawName:"v-has",value:"willchange:admin",expression:"'willchange:admin'"}],attrs:{disabled:!e.btnStatus.edit},on:{click:e.handleEdit}},[e._v("修改")]),t("a-button",{directives:[{name:"has",rawName:"v-has",value:"willchange:admin",expression:"'willchange:admin'"}],attrs:{disabled:!e.btnStatus.del},on:{click:e.deleteRecord}},[e._v("删除")]),t("a-button",{on:{click:e.validRecord}},[e._v("启用")]),t("a-button",{on:{click:e.invalidRecord}},[e._v("禁用")]),t("a-button",{directives:[{name:"has",rawName:"v-has",value:"willchange:admin",expression:"'willchange:admin'"}],attrs:{disabled:!e.btnStatus.del},on:{click:function(t){e.groupVisible=!0}}},[e._v("设置工班")]),t("a-button",{directives:[{name:"has",rawName:"v-has",value:"willchange:admin",expression:"'willchange:admin'"}],on:{click:function(t){return e.$refs.importModal.show()}}},[e._v("导入")])],1)],1)])],1)],1),t("div",{style:{height:"calc(100vh - ".concat(e.expand?"310":"268","px)")}},[t("vxe-table",{ref:"listTable",attrs:{border:"",align:e.allAlign,height:"100%","auto-resize":"",data:e.tableData,"show-overflow":"tooltip","checkbox-config":{trigger:"row",highlight:!0,range:!0},"edit-config":{trigger:"manual",mode:"row"}},on:{"checkbox-change":function(t){return e.btnStatus.update()},"checkbox-all":function(t){return e.btnStatus.update()}}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"40",fixed:"left"}}),t("vxe-table-column",{attrs:{field:"code",title:"物资编码",width:"150"}}),t("vxe-table-column",{attrs:{field:"name",title:"物资名称","min-width":"180","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{field:"spec",title:"物资描述","min-width":"220","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{field:"lineName",title:"线路",width:"100"}}),t("vxe-table-column",{attrs:{field:"repairProgramName",title:"修程",width:"120","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{field:"sysName",title:"系统","min-width":"120","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{field:"workstationName",title:"工位",width:"140"}}),t("vxe-table-column",{attrs:{field:"groupName",title:"所属工班",align:"left","header-align":"center",width:"140"}}),t("vxe-table-column",{attrs:{field:"materialTypeCategory_dictText",title:"属性",width:"100"}}),t("vxe-table-column",{attrs:{field:"unit",title:"单位",width:"100"}}),t("vxe-table-column",{attrs:{field:"needAmount",title:"单列所需",align:"right","header-align":"center",width:"100"}}),t("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",align:"center","header-align":"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("div",{style:{backgroundColor:e.statusColor[r.status+""],borderRadius:"4px"}},[e._v(" "+e._s(r.status_dictText)+" ")])]}}])}),t("vxe-table-column",{attrs:{field:"locationName",title:"安装部位","min-width":"150","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{field:"remark",title:"备注","min-width":"100","header-align":"center",align:"left"}})],1)],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}}),t("will-change-item-modal",{ref:"modalForm",on:{ok:function(t){return e.loadData()}}}),t("willChangeImport",{ref:"importModal",attrs:{url:"/import/materialMust"},on:{ok:function(t){return e.loadData()}}}),t("borrow-detail-modal",{ref:"detailForm"}),t("a-modal",{attrs:{title:"设置工班",visible:e.groupVisible,cancelText:"关闭",destroyOnClose:!0},on:{ok:e.setGroup,cancel:function(t){e.groupVisible=!1}}},[t("div",{staticStyle:{display:"flex","align-items":"center",padding:"18px"}},[t("div",[e._v("工班：")]),t("j-dict-select-tag",{staticStyle:{width:"calc(100% - 45px)"},attrs:{placeholder:"请选择",dictCode:e.dictGroupStr},model:{value:e.settingGroup,callback:function(t){e.settingGroup=t},expression:"settingGroup"}})],1)])],1)},i=[],o=a("5633"),l=a("c54ca"),n=a("d967"),s=a("88de"),c=a("23ce"),d=a("c1df"),u=a.n(d),m=(a("5c3a"),a("ca00")),h=a("54f6"),p={name:"List",components:{WillChangeItemModal:n["default"],BorrowDetailModal:c["default"],LineSelectList:o["default"],willChangeImport:s["default"]},data:function(){return{dictGroupStr:"bu_mtr_workshop_group,group_name,id,workshop_id='"+this.$store.getters.userInfo.workshopId+"'|workshop_id",dictCodeStrWork:"bu_mtr_workstation,name,id,workshop_id='"+this.$store.getters.userInfo.workshopId+"'|workshop_id",queryParam:{searchText:"",lineId:"",programId:"",systemId:"",groupId:"",workstationId:"",pageNo:1,pageSize:10},expand:!1,totalResult:0,allAlign:"center",tableData:[],btnStatus:new h["a"](this,"listTable"),tableHeight:{top:"height: calc(100vh - 225px)",bottom:"height: calc(100vh - 225px)",size:"100%"},groupVisible:!1,settingGroup:null,statusColor:{0:"#dedede",1:"#bad795"}}},watch:{"queryParam.groupId":function(e,t){this.dictCodeStrWork=e?"bu_mtr_workstation,name,id,id in (select workstation_id from bu_group_workstation where group_id='".concat(e,"')"):"bu_mtr_workstation,name,id"}},created:function(){this.findList()},methods:{toggle:function(){this.expand=!this.expand},findList:function(){var e=this;Object(l["Hb"])(this.queryParam).then((function(t){e.totalResult=t.result.total,e.loading=!1,e.tableData=t.result.records,e.btnStatus.update()}))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()},loadData:function(){this.findList(),this.$emit("load")},handleAdd:function(){this.$refs.modalForm.add(),this.$refs.modalForm.title="新增"},handleEdit:function(){var e=this.$refs.listTable.getCheckboxRecords();1===e.length?(this.$refs.modalForm.edit(e[0]),this.$refs.modalForm.title="编辑"):this.$message.error("请选中一项数据!")},deleteRecord:function(){var e=this,t=this.$refs.listTable.getCheckboxRecords();t.length>0?this.$confirm({content:"是否删除选中".concat(t.length,"数据？"),onOk:function(){var a=t.map((function(e,t){return e.id})).join(",");Object(l["y"])("ids="+a).then((function(t){e.findList(),e.$message.success(t.message)}))}}):this.$message.error("尚未选中任何数据!")},validRecord:function(){var e=this,t=this.$refs.listTable.getCheckboxRecords();if(t.length>0){if(t.filter((function(e){return 1===e.status})).length>0)return void this.$message.warn("有效的数据不能启用");this.$confirm({content:"是否启用选中的必换件清单？",okText:"确定",cancelText:"取消",onOk:function(){var a=t.map((function(e,t){return e.id})).join(",");Object(l["qc"])("ids="+a).then((function(t){t.success?(e.$message.success("启用成功"),e.findList()):e.$message.error(t.message)})).catch((function(t){e.$message.error("启用异常")}))}})}else this.$message.error("尚未选中数据!")},invalidRecord:function(){var e=this,t=this.$refs.listTable.getCheckboxRecords();if(t.length>0){if(t.filter((function(e){return 0===e.status})).length>0)return void this.$message.warn("无效的数据不能禁用");this.$confirm({content:"是否禁用选中的必换件清单？",okText:"确定",cancelText:"取消",onOk:function(){var a=t.map((function(e,t){return e.id})).join(",");Object(l["Nb"])("ids="+a).then((function(t){t.success?(e.$message.success("禁用成功"),e.findList()):e.$message.error(t.message)})).catch((function(t){e.$message.error("禁用异常")}))}})}else this.$message.error("尚未选中数据!")},handlerReturn:function(){var e=this,t=this.$refs.listTable.getCheckboxRecords();t.length>0?this.$confirm({content:"是否设置选中".concat(t.length,"数据为已归还？"),onOk:function(){var a=t.map((function(e,t){return e.id})).join(",");Object(l["o"])("ids="+a).then((function(t){e.findList(),e.$message.success(t.message)}))}}):this.$message.error("尚未选中任何数据!")},borrowDetail:function(e){this.$refs.detailForm.detail(e)},handlerReadyMaterial:function(){var e=this.$refs.listTable.getCheckboxRecords();e.length>0?e.length>1?this.$message.warning("只能选中一条数据!"):this.$refs.readyMaterial.edit(row.id):this.$message.error("尚未选中任何数据!")},handleOpenChange:function(e){this.yearPickShow=e},handlePanelChange:function(e){this.year=e,this.queryParam.year=u()(e).format("YYYY"),this.yearPickShow=!1},handleChanYearChange:function(e){Object(m["e"])(e)&&(this.queryParam.year="")},handleMonthChange:function(e){Object(m["e"])(e)&&(this.queryParam.year="",this.queryParam.month="")},setGroup:function(){var e=this;if(this.settingGroup){var t=this.$refs.listTable.getCheckboxRecords();Object(l["mc"])({groupId:this.settingGroup,idList:t.map((function(e){return e.id}))}).then((function(t){t.success?(e.$message.success("执行成功"),e.groupVisible=!1,e.findList()):e.$message.error(t.message)}))}else this.$message.warn("请选择工班")}}},f=p,g=a("2877"),b=Object(g["a"])(f,r,i,!1,null,null,null);t["default"]=b.exports},fe54:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"components-input-demo-presuffix"},[t("a-input",{attrs:{placeholder:"请点击选择部门",readOnly:"",disabled:e.disabled},on:{click:e.openModal},model:{value:e.departNames,callback:function(t){e.departNames=t},expression:"departNames"}},[t("a-icon",{attrs:{slot:"prefix",type:"cluster",title:"部门选择控件"},slot:"prefix"}),e.departIds?t("a-icon",{attrs:{slot:"suffix",type:"close-circle",title:"清空"},on:{click:e.handleEmpty},slot:"suffix"}):e._e()],1),t("j-select-depart-modal",{ref:"innerDepartSelectModal",attrs:{"modal-width":e.modalWidth,multi:e.multi,rootOpened:e.rootOpened,"depart-id":e.departIds},on:{ok:e.handleOK,initComp:e.initComp}})],1)},i=[],o=a("b0cd"),l={name:"JSelectDepart",components:{JSelectDepartModal:o["default"]},props:{modalWidth:{type:Number,default:500,required:!1},multi:{type:Boolean,default:!1,required:!1},rootOpened:{type:Boolean,default:!0,required:!1},value:{type:String,required:!1},disabled:{type:Boolean,required:!1,default:!1},customReturnField:{type:String,default:"id"}},data:function(){return{visible:!1,confirmLoading:!1,departNames:"",departIds:""}},mounted:function(){this.departIds=this.value},watch:{value:function(e){"id"===this.customReturnField&&(this.departIds=e)}},methods:{initComp:function(e){this.departNames=e},openModal:function(){this.$refs.innerDepartSelectModal.show()},handleOK:function(e,t){var a=this,r="";!e&&e.length<=0?(this.departNames="",this.departIds=""):(r=e.map((function(e){return e[a.customReturnField]})).join(","),this.departNames=e.map((function(e){return e["departName"]})).join(","),this.departIds=t),this.$emit("change",r)},getDepartNames:function(){return this.departNames},handleEmpty:function(){this.handleOK("")}},model:{prop:"value",event:"change"}},n=l,s=(a("c94f"),a("2877")),c=Object(s["a"])(n,r,i,!1,null,"4d448922",null);t["default"]=c.exports},fef4:function(e,t,a){}}]);