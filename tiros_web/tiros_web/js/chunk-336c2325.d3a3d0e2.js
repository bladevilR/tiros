(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-336c2325","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7"],{5633:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e._self._c;return t("span",[t("a-select",{key:e.key,attrs:{"allow-clear":"",value:e.getValueSting,disabled:e.disabled,placeholder:"线路"},on:{change:e.handleChange,select:e.onSelect}},[t("a-select-option",{attrs:{value:void 0}},[e._v("请选择")]),e._l(e.optionData,(function(n,r){return t("a-select-option",{key:r,attrs:{value:n.lineId}},[t("span",{staticStyle:{display:"inline-block",width:"100%"},attrs:{title:n.lineName}},[e._v(" "+e._s(n.lineName)+" ")])])}))],2)],1)},a=[],i=n("8fad"),u={name:"LineSelectList",props:{value:[String],triggerChange:Boolean,disabled:Boolean,defaultFirst:Boolean},data:function(){return{optionData:[],selectValue:"",key:0}},created:function(){this.findList()},computed:{getValueSting:function(){return null!=this.value?this.value.toString():void 0}},methods:{findList:function(){var e=this;Object(i["Jb"])().then((function(t){t.success&&(e.optionData=t.result,e.defaultFirst&&e.optionData&&e.optionData.length>0&&setTimeout((function(){e.$emit("change",e.optionData[0].lineId),e.$emit("input",e.optionData[0].lineId)}),500))}))},handleChange:function(e,t){var n="";if(t&&t.componentOptions.children[0].data&&(n=t.componentOptions.children[0].data.attrs.title),this.$emit("change",e),this.$emit("input",e),this.$emit("changeName",n),this.triggerChange)if(e){var r=this.optionData[t.key];this.$emit("change",e,r)}else this.$emit("change",e,null)},onSelect:function(e,t){if(e){var n=this.optionData[t.data.key];this.$emit("select",e,n)}else this.$emit("select","",null)}}},o=u,c=n("2877"),l=Object(c["a"])(o,r,a,!1,null,"77265147",null);t["default"]=l.exports},b7b4:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"j",(function(){return i})),n.d(t,"n",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"v",(function(){return l})),n.d(t,"x",(function(){return o})),n.d(t,"p",(function(){return d})),n.d(t,"F",(function(){return f})),n.d(t,"H",(function(){return h})),n.d(t,"r",(function(){return m})),n.d(t,"o",(function(){return p})),n.d(t,"l",(function(){return b})),n.d(t,"y",(function(){return j})),n.d(t,"a",(function(){return y})),n.d(t,"i",(function(){return v})),n.d(t,"m",(function(){return q})),n.d(t,"s",(function(){return O})),n.d(t,"B",(function(){return P})),n.d(t,"C",(function(){return x})),n.d(t,"G",(function(){return C})),n.d(t,"J",(function(){return w})),n.d(t,"g",(function(){return I})),n.d(t,"k",(function(){return $})),n.d(t,"t",(function(){return S})),n.d(t,"e",(function(){return D})),n.d(t,"u",(function(){return N})),n.d(t,"E",(function(){return z})),n.d(t,"z",(function(){return T})),n.d(t,"A",(function(){return _})),n.d(t,"d",(function(){return k})),n.d(t,"f",(function(){return L})),n.d(t,"q",(function(){return g})),n.d(t,"D",(function(){return F})),n.d(t,"I",(function(){return J})),n.d(t,"h",(function(){return Q})),n.d(t,"w",(function(){return s}));var r=n("0fea"),a=function(e){return Object(r["j"])("/quality/rectify/add",e)},i=function(e){return Object(r["j"])("/quality/rectify/delete",e)},u=function(e){return Object(r["j"])("/quality/rectify/edit",e)},o=function(e){return Object(r["d"])("/quality/rectify/page",e)},c=function(e){return Object(r["j"])("/quality/rectify/close",e)},l=function(e){return Object(r["d"])("/quality/rectify/get",e)},s=function(e){return Object(r["d"])("/quality/rectify/getCode",e)},d=function(e){return Object(r["d"])("/quality/measurealert/page",e)},f=function(e){return Object(r["d"])("/quality/measurethreshold/form/page-data-form",e)},h=function(e){return Object(r["j"])("/quality/measurethreshold/threshold/save",e)},m=function(e){return Object(r["d"])("/quality/measurethreshold/threshold/list/".concat(e))},g=function(e){return Object(r["d"])("/serialPlan/plan/forms/online-form/alert-records",{dataRecordId:e})},p=function(e){return Object(r["j"])("/quality/measurethreshold/threshold/edit",e)},b=function(e){return Object(r["j"])("/quality/measurethreshold/threshold/delete",e)},j=function(e){return Object(r["d"])("/quality/measurethreshold/threshold/get",e)},y=function(e){return Object(r["j"])("/quality/leaverecord/add",e)},v=function(e){return Object(r["j"])("/quality/leaverecord/delete",e)},k=function(e){return Object(r["j"])("/quality/leaverecord/close",e)},q=function(e){return Object(r["j"])("/quality/leaverecord/edit",e)},O=function(e){return Object(r["d"])("/quality/leaverecord/page",e)},P=function(e,t){return Object(r["c"])("/quality/leaverecord/workLeaveRecordExport",e,t)},x=function(e){return Object(r["d"])("/quality/exception-transfer/page",e)},C=function(e){return Object(r["j"])("/quality/exception-transfer/add",e)},w=function(e){return Object(r["j"])("/quality/exception-transfer/edit",e)},I=function(e){return Object(r["j"])("/quality/exception-transfer/decide",e)},$=function(e){return Object(r["j"])("/quality/exception-transfer/delete",e)},S=function(e){return Object(r["d"])("/quality/record-confirm/list",e)},D=function(e){return Object(r["j"])("/quality/record-confirm/confirm",e)},N=function(e){return Object(r["d"])("/quality/record-confirm/work-record/get",e)},T=function(e){return Object(r["d"])("/serialPlan/plan/forms/check-record/get",e)},_=function(e){return Object(r["d"])("/workcheck/get",e)},L=function(e){return Object(r["j"])("/quality/record-confirm/confirm",e)},z=function(e){return Object(r["d"])("/quality/record-confirm/page",e)},F=function(e){return Object(r["d"])("/quality/record-confirm/page/check-record",e)},J=function(e){return Object(r["j"])("/serialPlan/plan/forms/judge/save",e)},Q=function(e){return Object(r["j"])("/serialPlan/plan/forms/judge/delete",e)}},ca72:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"bodyWrapper",staticStyle:{height:"100% !important"},attrs:{"na-flex-height-full":""}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"表单名称"}},[t("a-input",{attrs:{placeholder:"检查表单名称",allowClear:""},model:{value:e.queryParam.formSearchText,callback:function(t){e.$set(e.queryParam,"formSearchText",t)},expression:"queryParam.formSearchText"}})],1)],1),t("a-col",{attrs:{md:4,sm:24}},[t("a-form-item",{attrs:{label:"修程"}},[t("j-dict-select-tag",{attrs:{dictCode:"bu_repair_program,name,id"},model:{value:e.queryParam.repairProgramId,callback:function(t){e.$set(e.queryParam,"repairProgramId",t)},expression:"queryParam.repairProgramId"}})],1)],1),t("a-col",{attrs:{md:4,sm:24}},[t("a-form-item",{attrs:{label:"线路"}},[t("line-select-list",{model:{value:e.queryParam.lineId,callback:function(t){e.$set(e.queryParam,"lineId",t)},expression:"queryParam.lineId"}})],1)],1),t("a-col",{attrs:{md:10}},[t("a-space",[t("a-button",{on:{click:e.findList}},[e._v("查询")]),t("a-button",{attrs:{disabled:1!==e.records.length},on:{click:function(t){return e.openJudgeModal(e.records[0])}}},[e._v("质量评定")])],1)],1)],1)],1)],1),t("div",{staticStyle:{height:"calc(100% - 45px)"}},[t("vxe-table",{ref:"listTable",attrs:{border:"",align:"center",height:"auto","auto-resize":"",data:e.tableData,"checkbox-config":{trigger:"row",highlight:!0,range:!0},"show-overflow":"tooltip"},on:{"checkbox-change":e.rangeChange,"checkbox-all":e.rangeChange}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),t("vxe-table-column",{attrs:{field:"name",title:"检查表名称","min-width":"150px",align:"left","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(n){var r=n.row;return[t("a",{on:{click:function(t){return t.stopPropagation(),e.showFrom(r)}}},[e._v(e._s(r.name))])]}}])}),t("vxe-table-column",{attrs:{field:"lineName",title:"线路",width:"120px"}}),t("vxe-table-column",{attrs:{field:"repairProgramName",title:"修程",width:"120px"}}),t("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",width:"120px"}})],1)],1),t("div",{staticStyle:{height:"45px","background-color":"#fff"}},[t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.page.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1),t("JobCheckTableView",{ref:"jobCheckTableView",attrs:{fromData:e.fromData,qualityEvaluation:!0},on:{brush:function(t){return e.findList()}}}),t("a-modal",{attrs:{title:"作业质量评定",width:800,visible:e.visible,centered:"",cancelText:"关闭",destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-form",{ref:"initForm",attrs:{form:e.form}},[t("a-form-item",[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["jdContent",e.validatorRules.jdContent],expression:"['jdContent', validatorRules.jdContent]"}],attrs:{maxLength:201,"auto-size":{minRows:8,maxRows:8}}})],1)],1)],1)],1)},a=[],i=n("5633"),u=n("b7b4"),o=n("aaa8"),c={name:"QualityEvaluate",components:{LineSelectList:i["default"],pageFormCheckRecord:u["D"],JobCheckTableView:o["default"]},data:function(){return{records:[],fromData:{},visible:!1,tableData:[],form:this.$form.createForm(this),validatorRules:{jdContent:{rules:[{required:!0,message:"请输入评定内容!"},{max:200,message:"不能超过200个字符"}]}},queryParam:{pageNo:1,pageSize:10,formSearchText:null,lineId:null,repairProgramId:null},page:{totalResult:1},judgeQueryParam:{id:null,checkInstId:"",checkInstName:"",jdContent:"",jdTime:null,jdUserId:this.$store.getters.userInfo.id,jdUserName:this.$store.getters.userInfo.username}}},mounted:function(){this.findList()},methods:{rangeChange:function(e){var t=e.records;this.records=t},findList:function(){var e=this;Object(u["D"])(this.queryParam).then((function(t){t.success?(e.tableData=t.result.records,e.records=[],e.page.totalResult=t.result.total):e.$message.error(t.message)}))},handlePageChange:function(e){var t=e.currentPage,n=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=n,this.findList()},showFrom:function(e){var t=this;Object(u["z"])({task2InstId:e.task2InstId,formInstId:e.id}).then((function(n){t.fromData=e;var r=n.result;t.$refs.jobCheckTableView.show(r)}))},openJudgeModal:function(e){var t=this;this.judgeQueryParam.checkInstId=e.id,this.judgeQueryParam.checkInstName=e.name,this.visible=!0;var n=e.judgeList.find((function(e){return e.jdUserId===t.$store.getters.userInfo.id}));n?(this.judgeQueryParam.jdContent=n.jdContent,this.judgeQueryParam.id=n.id,this.form.getFieldDecorator("jdContent"),this.$nextTick((function(){t.form.setFieldsValue({jdContent:t.judgeQueryParam.jdContent})}))):(this.judgeQueryParam.jdContent="",this.judgeQueryParam.id=null,this.form.getFieldDecorator("jdContent"),this.$nextTick((function(){t.form.setFieldsValue({jdContent:""})})))},handleOk:function(){var e=this;this.form.validateFields((function(t,n){t||(Object.assign(e.judgeQueryParam,n),Object(u["I"])(e.judgeQueryParam).then((function(t){t.success?(e.$message.success("保存成功"),e.findList()):e.$message.error(t.message)})),e.visible=!1)}))},handleCancel:function(){this.visible=!1}}},l=c,s=n("2877"),d=Object(s["a"])(l,r,a,!1,null,null,null);t["default"]=d.exports}}]);