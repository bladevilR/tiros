(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8f94e15e","chunk-8b53dbe6","chunk-cfac6c42","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7"],{1158:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{width:"90%",title:"工位选择",centered:"",bodyStyle:{height:"80vh"},visible:t.visible,confirmLoading:t.confirmLoading,cancelText:"关闭",destroyOnClose:!0},on:{ok:t.handleOk,cancel:t.handleCancel}},[e("a-row",[e("a-col",{staticStyle:{"border-right":"1px dotted #D3E1F1",height:"calc(80vh - 20px)","margin-right":"8px",padding:"0px"},attrs:{md:4,sm:24}},[t.treeData.length?e("a-tree",{attrs:{defaultExpandAll:"","tree-data":t.treeData,"default-selected-keys":t.defaultKey,dropdownStyle:{maxHeight:"200px",overflow:"auto"},replaceFields:{title:"name",key:"id"}},on:{select:t.onSelect}}):t._e()],1),e("a-col",{attrs:{md:19,sm:24}},[e("div",{staticClass:"table-page-search-wrapper"},[e("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getWorkStation.apply(null,arguments)}}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:5,sm:24}},[e("a-form-item",{attrs:{label:"工位"}},[e("a-input",{attrs:{placeholder:"请输入工位名称","allow-clear":""},model:{value:t.queryParam.name,callback:function(e){t.$set(t.queryParam,"name",e)},expression:"queryParam.name"}})],1)],1),e("a-col",{attrs:{md:5,sm:24}},[e("a-form-item",{attrs:{label:"班组"}},[e("j-dict-select-tag",{attrs:{dictCode:"sys_depart,depart_name,id,org_category=4",placeholder:"请选择"},model:{value:t.queryParam.groupId,callback:function(e){t.$set(t.queryParam,"groupId",e)},expression:"queryParam.groupId"}})],1)],1),e("a-col",{attrs:{md:5,sm:24}},[e("a-space",[e("a-button",{on:{click:t.getWorkStation}},[t._v("查询")])],1)],1)],1)],1)],1),e("div",{staticClass:"limitHeight"},[e("vxe-table",{ref:"listTable",staticStyle:{height:"100%"},attrs:{border:"","row-id":"id",align:t.allAlign,data:t.tableData,"show-overflow":"tooltip","edit-config":{trigger:"manual",mode:"row"},"radio-config":{trigger:"row"},"checkbox-config":{trigger:"row",highlight:!0,range:!0,checkStrictly:!0},"max-height":"100%"}},[t.multiple?e("vxe-table-column",{attrs:{type:"checkbox",width:"40",fixed:"left"}}):e("vxe-table-column",{attrs:{type:"radio",width:"40"}}),e("vxe-table-column",{attrs:{field:"stationNo",title:"工位号",width:"100"}}),e("vxe-table-column",{attrs:{field:"name",title:"工位名称",width:"20%",align:"left"}}),e("vxe-table-column",{attrs:{field:"groupName",title:"所属班组",width:"20%",align:"left"}}),e("vxe-table-column",{attrs:{field:"location",title:"位置",width:"100",align:"left"}}),e("vxe-table-column",{attrs:{field:"content",title:"作业内容",width:"25%",align:"left"}}),e("vxe-table-column",{attrs:{field:"remark",title:"备注",width:"10%",align:"left"}})],1)],1),e("vxe-pager",{attrs:{perfect:"","current-page":t.queryParam.pageNo,"page-size":t.queryParam.pageSize,total:t.page.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(e){return t.$set(t.queryParam,"pageNo",e)},"update:current-page":function(e){return t.$set(t.queryParam,"pageNo",e)},"update:pageSize":function(e){return t.$set(t.queryParam,"pageSize",e)},"update:page-size":function(e){return t.$set(t.queryParam,"pageSize",e)},"page-change":t.handlePageChange}})],1)],1)],1)},n=[],o=a("8fad"),r={name:"WorkStationList",props:{multiple:{type:Boolean,default:!1},groupId:{type:String,default:null}},data:function(){return{visible:!1,confirmLoading:!1,treeData:[],tableData:[],allAlign:"center",defaultKey:[],queryParam:{id:"",name:"",groupId:"",pageNo:1,pageSize:10},page:{currentPage:1,pageSize:10,totalResult:3}}},mounted:function(){this.groupId&&(this.queryParam.groupId=this.groupId)},methods:{showModal:function(){this.visible=!0,this.getTreeList()},getTreeList:function(){var t=this;Object(o["fc"])().then((function(e){e.success&&(t.treeData=e.result,t.defaultKey[0]=e.result[0].id,t.queryParam.id=e.result[0].id,t.getWorkStation())}))},getWorkStation:function(){var t=this;Object(o["ec"])(this.queryParam).then((function(e){t.page.totalResult=e.result.total,t.tableData=e.result.records}))},onSelect:function(t,e){var a=e.node.dataRef;t.length>0&&(this.queryParam.id=a.id,this.queryParam.pageNo=1,this.getWorkStation())},handleOk:function(){var t=[];this.multiple?t=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&t.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",t),this.visible=!1},handlePageChange:function(t){var e=t.currentPage,a=t.pageSize;this.queryParam.pageNo=e,this.queryParam.pageSize=a,this.getTreeList()},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},l=r,s=(a("7483"),a("2877")),c=Object(s["a"])(l,i,n,!1,null,"ea42f1f8",null);e["default"]=c.exports},"2e75":function(t,e,a){},"51cf":function(t,e,a){},5633:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("span",[e("a-select",{key:t.key,attrs:{"allow-clear":"",value:t.getValueSting,disabled:t.disabled,placeholder:"线路"},on:{change:t.handleChange,select:t.onSelect}},[e("a-select-option",{attrs:{value:void 0}},[t._v("请选择")]),t._l(t.optionData,(function(a,i){return e("a-select-option",{key:i,attrs:{value:a.lineId}},[e("span",{staticStyle:{display:"inline-block",width:"100%"},attrs:{title:a.lineName}},[t._v(" "+t._s(a.lineName)+" ")])])}))],2)],1)},n=[],o=a("8fad"),r={name:"LineSelectList",props:{value:[String],triggerChange:Boolean,disabled:Boolean,defaultFirst:Boolean},data:function(){return{optionData:[],selectValue:"",key:0}},created:function(){this.findList()},computed:{getValueSting:function(){return null!=this.value?this.value.toString():void 0}},methods:{findList:function(){var t=this;Object(o["Jb"])().then((function(e){e.success&&(t.optionData=e.result,t.defaultFirst&&t.optionData&&t.optionData.length>0&&setTimeout((function(){t.$emit("change",t.optionData[0].lineId),t.$emit("input",t.optionData[0].lineId)}),500))}))},handleChange:function(t,e){var a="";if(e&&e.componentOptions.children[0].data&&(a=e.componentOptions.children[0].data.attrs.title),this.$emit("change",t),this.$emit("input",t),this.$emit("changeName",a),this.triggerChange)if(t){var i=this.optionData[e.key];this.$emit("change",t,i)}else this.$emit("change",t,null)},onSelect:function(t,e){if(t){var a=this.optionData[e.data.key];this.$emit("select",t,a)}else this.$emit("select","",null)}}},l=r,s=a("2877"),c=Object(s["a"])(l,i,n,!1,null,"77265147",null);e["default"]=c.exports},7068:function(t,e,a){"use strict";a("51cf")},7483:function(t,e,a){"use strict";a("2e75")},ab7d:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{title:"故障编辑",width:"100%",centered:"",visible:t.visible,dialogClass:"fullDialog",confirmLoading:t.confirmLoading,cancelText:"关闭"},on:{ok:t.handleOk,cancel:t.handleCancel}},[e("div",{staticStyle:{height:"calc(100vh - 5px)","overflow-y":"auto"}},[t.visible?e("BreakdownFormItem",{ref:"breakdownForm",attrs:{fromWriteReport:t.fromWriteReport,workStationsList:t.workStationsList},on:{ok:t.onSaveOk,fail:t.onSaveFail,cancel:t.onSaveCancel}}):t._e()],1)])},n=[],o=a("d0ca"),r={name:"BreakdownModal",components:{BreakdownFormItem:o["default"]},props:{showWorkStation:{type:Boolean,default:!1},fromWriteReport:{type:Boolean,default:!1}},data:function(){return{visible:!1,confirmLoading:!1,workStationsList:[]}},created:function(){},methods:{setWorkStations:function(t){var e=this;this.workStationsList.length=0,t.forEach((function(t){e.workStationsList.find((function(e){return e.workstationId===t.workstationId}))||e.workStationsList.push(t)}))},add:function(t,e,a){this.edit({workOrderId:t,orderTaskId:e,formType:a,createType:a})},edit:function(t){var e=this;this.visible=!0,this.$nextTick((function(){e.$refs.breakdownForm.edit(t)}))},handleOk:function(){this.confirmLoading=!0,this.$refs.breakdownForm.save()},onSaveOk:function(){this.confirmLoading=!1,this.visible=!1,this.$message.success("保存成功"),this.$emit("ok")},onSaveFail:function(){this.$message.error("保存失败"),this.confirmLoading=!1},onSaveCancel:function(){this.confirmLoading=!1},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.confirmLoading=!1,this.visible=!1}}},l=r,s=(a("7068"),a("2877")),c=Object(s["a"])(l,i,n,!1,null,"12e1d6e2",null);e["default"]=c.exports}}]);