(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-04d5036b","chunk-3150034c"],{"4a04":function(e,t,a){"use strict";a("b286")},"5fab":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,width:450,visible:e.visible,confirmLoading:e.confirmLoading,destroyOnClose:!0,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"作业指导书"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["teckBookName",e.validatorRules.teckBookName],expression:"['teckBookName', validatorRules.teckBookName]",modifiers:{trim:!0}}],ref:"mySelect",attrs:{placeholder:"请选择关联设备",open:!1,showArrow:!0},on:{focus:e.openModal}},[t("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1)],1)],1)],1),t("TechBookList",{ref:"selectForm",attrs:{multiple:!1},on:{ok:e.selectBook}})],1)],1)},o=[],l=a("7dc0"),r={name:"FileItemModel",components:{TechBookList:l["default"]},data:function(){return{title:"操作",visible:!1,teckBookId:"",teckBookName:"",model:{},labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:14}},confirmLoading:!1,form:this.$form.createForm(this),deptId:"",validatorRules:{teckBookName:{rules:[{required:!0,message:"请选择作业指导书!"}]}}}},created:function(){},methods:{openModal:function(){this.$refs.selectForm.showModal(),this.$refs.mySelect.blur()},selectBook:function(e){e.length&&(this.teckBookId=e[0].id,this.teckBookName=e[0].fileName),this.form.setFieldsValue({teckBookName:this.teckBookName})},add:function(){this.edit({})},edit:function(e){var t=this;this.form.resetFields(),this.visible=!0,this.model=Object.assign({},e),e._XID&&this.$nextTick((function(){t.form.setFieldsValue({})}))},handleOk:function(){var e=this,t=this;t.form.validateFields((function(a,i){if(!a){t.confirmLoading=!0;var o=Object.assign(t.model,i,{teckBookId:e.teckBookId});t.$emit("ok",o),t.close(),t.confirmLoading=!1}}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},s=r,n=a("2877"),c=Object(n["a"])(s,i,o,!1,null,null,null);t["default"]=c.exports},"7dc0":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"80%",title:"作业指导书选择",visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",centered:"",destroyOnClose:!0,bodyStyle:{height:"80vh"}},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"名称"}},[t("a-input",{attrs:{placeholder:"请输入指导书名称"},model:{value:e.queryParam.formName,callback:function(t){e.$set(e.queryParam,"formName",t)},expression:"queryParam.formName"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"修程类型"}},[t("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_repair_program,name,id"},model:{value:e.queryParam.repairProgramId,callback:function(t){e.$set(e.queryParam,"repairProgramId",t)},expression:"queryParam.repairProgramId"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"所属线路"}},[t("line-select-list",{model:{value:e.queryParam.lineId,callback:function(t){e.$set(e.queryParam,"lineId",t)},expression:"queryParam.lineId"}})],1)],1),t("a-col",{attrs:{md:4,sm:8}},[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-space",[t("a-button",{on:{click:e.findList}},[e._v("查询")])],1)],1)])],1)],1)],1),t("div",{staticStyle:{height:"calc(80vh - 130px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(80vh - 130px)"},attrs:{border:"","max-height":"100%",align:e.allAlign,data:e.tableData,"highlight-current-row":"","show-overflow":"tooltip","radio-config":e.multiple?{}:{trigger:"row"},"checkbox-config":e.multiple?{trigger:"row",highlight:!0,range:!0}:{},"edit-config":{trigger:"click",mode:"cell",showIcon:"true"}}},[e.multiple?t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}):t("vxe-table-column",{attrs:{type:"radio",width:"40"}}),t("vxe-table-column",{attrs:{field:"fileNo",title:"文件编号",width:"180"}}),t("vxe-table-column",{attrs:{field:"fileName",title:"文件名称","header-align":"center",align:"left"}}),t("vxe-table-column",{attrs:{field:"fileVer",title:"文件版本",width:"140"}}),t("vxe-table-column",{attrs:{field:"repairProgramName",title:"所属修程",width:"140"}}),t("vxe-table-column",{attrs:{field:"lineName",title:"所属线路",width:"140"}}),t("vxe-table-column",{attrs:{field:"status_dictText",title:"有效状态",width:"80"}})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1)])},o=[],l=a("5633"),r=a("8fad"),s={name:"TechBookList",components:{LineSelectList:l["default"]},props:{multiple:{type:Boolean,default:!0}},data:function(){return{queryParam:{formName:"",lineId:"",repairProgramId:"",pageNo:1,pageSize:10},allAlign:"center",totalResult:0,tableData:[],visible:!1,confirmLoading:!1,formItemLayout:{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}}}},methods:{showModal:function(){this.visible=!0,this.findList()},findList:function(){var e=this;this.loading=!0,Object(r["Rb"])(this.queryParam).then((function(t){e.totalResult=t.result.total,e.loading=!1,e.tableData=t.result.records}))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()},handleOk:function(){var e=[];this.multiple?e=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&e.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",e),this.close()},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,this.queryParam.formName=""}}},n=s,c=(a("4a04"),a("2877")),m=Object(c["a"])(n,i,o,!1,null,"83e4a944",null);t["default"]=m.exports},b286:function(e,t,a){}}]);