(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f553370c","chunk-5c4c88d1"],{8048:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,width:"80%",visible:e.visible,confirmLoading:e.confirmLoading,centered:"",cancelText:"关闭",destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-row",{staticStyle:{width:"100%"}},[t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"模板编码"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["code",e.validatorRules.code],expression:"[ 'code', validatorRules.code]"}],attrs:{maxLength:33,placeholder:"模板编码"}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"模板名称"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["tpName",e.validatorRules.tpName],expression:"[ 'tpName', validatorRules.tpName]"}],attrs:{maxLength:33,placeholder:"模板名称"}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"计划工期"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["duration",e.validatorRules.duration],expression:"[ 'duration', validatorRules.duration]"}],staticStyle:{width:"100%"},attrs:{min:1,max:999999}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"所属线路"}},[t("line-select-list",{directives:[{name:"decorator",rawName:"v-decorator",value:["lineId",e.validatorRules.lineId],expression:"['lineId', validatorRules.lineId]"}],attrs:{"trigger-change":!0},on:{change:e.handlerLine}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"编组数量"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["groupQuantity",e.validatorRules.groupQuantity],expression:"[ 'groupQuantity', validatorRules.groupQuantity]"}],staticStyle:{width:"100%"},attrs:{min:1,max:99}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"修程类型"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator",value:["repairProgramId",e.validatorRules.repairProgramId],expression:"['repairProgramId', validatorRules.repairProgramId]"}],attrs:{triggerChange:"",dictCode:"bu_repair_program,name,id"},on:{change:e.handleProgram}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"是否有效"}},[t("a-switch",{on:{change:e.handleStatus},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"基准日期"}},[t("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["baseDate",e.validatorRules.baseDate],expression:"[ 'baseDate', validatorRules.baseDate]"}],staticStyle:{width:"100%"}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"关联规程"}},[t("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator",value:["reguId",e.validatorRules.reguId],expression:"['reguId', validatorRules.reguId]"}],attrs:{triggerChange:"",dictCode:e.dicStr},on:{focus:e.handleFocusRegu}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"财务项目"}},[t("FinanceSelect",{directives:[{name:"decorator",rawName:"v-decorator",value:["fdProject",e.validatorRules.fdProject],expression:"['fdProject', validatorRules.fdProject]"}],attrs:{type:"project"},on:{change:e.financeSelectCHange}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"财务任务"}},[t("FinanceSelect",{directives:[{name:"decorator",rawName:"v-decorator",value:["fdTask",e.validatorRules.fdTask],expression:"['fdTask', validatorRules.fdTask]"}],attrs:{id:e.financeSelectId,type:"task"}})],1)],1),t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol1,wrapperCol:e.wrapperCol1,label:"备注"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark",e.validatorRules.remark],expression:"['remark', validatorRules.remark]"}],attrs:{placeholder:"请输入内容",maxLength:201}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"导入计划模板"}},[t("a-upload",{attrs:{multiple:!1,"file-list":e.fileList,accept:".xlsx,.xls",remove:e.handleRemove,"before-upload":e.beforeUpload}},[t("a-button",{attrs:{type:"primary"}},[e._v("添加文件")])],1)],1)],1)],1),t("a-row")],1)],1)],1)},o=[],a=r("8fad"),u=r("c1df"),i=r.n(u),c=r("5633"),s=r("ca00"),l=r("9ced"),d={components:{LineSelectList:c["default"],FinanceSelect:l["default"]},data:function(){return{moment:i.a,status:!0,form:this.$form.createForm(this),model:{},financeSelectId:"",fileList:[],trainTypeId:"",validatorRules:{code:{rules:[{required:!0,message:"请输入编码!"},{max:32,message:"输入长度不能超过32字符!"}]},tpName:{rules:[{required:!0,message:"请输入名称!"},{max:32,message:"输入长度不能超过32字符!"}]},duration:{rules:[{required:!0,message:"请输入工期!"}]},lineId:{rules:[{required:!0,message:"请选择线路!"}]},groupQuantity:{rules:[{required:!0,message:"请输入编组数量!"}]},repairProgramId:{rules:[{required:!0,message:"请选择修程类型!"}]},reguId:{rules:[{required:!0,message:"请选择关联规程!"}]},baseDate:{rules:[{required:!0,message:"请选择基准日期!"}]},fdProject:{rules:[{max:64,message:"输入长度不能超过64字符!"}]},fdTask:{rules:[{max:64,message:"输入长度不能超过64字符!"}]},fdCostType:{rules:[{max:64,message:"输入长度不能超过64字符!"}]},remark:{rules:[{max:200,message:"输入长度不能超过200字符!"}]}},labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}},labelCol1:{xs:{span:24},sm:{span:2}},wrapperCol1:{xs:{span:24},sm:{span:22}},title:"操作",visible:!1,confirmLoading:!1,dicStr:"",regeuStatus:!1}},methods:{financeSelectCHange:function(e){this.financeSelectId=e,this.form.setFieldsValue({fdTask:void 0})},handlerLine:function(e,t){t&&(this.trainTypeId=t.trainTypeId)},selectLine:function(e){var t=this;Object(a["yb"])({lineId:e}).then((function(e){e.success&&(t.trainTypeId=e.result.trainTypeId)}))},handleRemove:function(e){var t=this.fileList.indexOf(e),r=this.fileList.slice();r.splice(t,1),this.fileList=r},beforeUpload:function(e){this.model.id&&this.$message.warn("该操作会覆盖原有的数据,请谨慎操作!");var t=e.size/1024/1024<10;if(t){var r="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===e.type||"application/vnd.ms-excel"===e.type;if(r)return this.$set(this.fileList,0,e),!1;this.$message.error("只支持Excel文件导入!")}else this.$message.error("文件不得大于10MB!")},customRequest:function(e){var t=this,r=this.fileList;r.forEach((function(r){var n=new FormData;n.append("file",r),n.append("lineId",e.lineId),n.append("groupQuantity",e.groupQuantity),n.append("repairProgramId",e.repairProgramId),n.append("reguId",e.reguId),n.append("status",e.status),n.append("trainTypeId",t.trainTypeId),n.append("baseDate",e.baseDate),n.append("code",e.code),n.append("tpName",e.tpName),n.append("duration",e.duration),n.append("fdProject",e.fdProject?e.fdProject:""),n.append("fdTask",e.fdTask?e.fdTask:""),n.append("fdCostType",e.fdCostType?e.fdCostType:""),n.append("remark",e.remark?e.remark:""),t.model.id?n.append("id",t.model.id):n.append("id",""),Object(a["qc"])(n).then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok"),t.close()):t.$message.error(e.message)})).finally((function(){t.confirmLoading=!1}))}))},handleFocusRegu:function(){var e=this.form.getFieldValue("repairProgramId");Object(s["e"])(e)&&this.$message.warn("请先选择修程类型")},handleProgram:function(e){this.dicStr=e?"bu_repair_regu_info,name,id,status=1 and repair_pro_id='".concat(e,"'"):"",this.regeuStatus||this.form.setFieldsValue({reguId:""}),this.regeuStatus=!1},add:function(){this.edit({})},edit:function(e){var t=this;e.id?(this.visiblekey=!0,this.regeuStatus=!0):this.visiblekey=!1,this.form.resetFields(),this.model=Object.assign({},e),this.visible=!0,this.status=1===this.model.status,Object(s["e"])(this.model.lineId)||this.selectLine(this.model.lineId),this.$nextTick((function(){t.model.fdProject&&(t.financeSelectId=t.model.fdProject),t.form.setFieldsValue({code:t.model.code,tpName:t.model.tpName,duration:t.model.duration,lineId:t.model.lineId,groupQuantity:t.model.groupQuantity,repairProgramId:t.model.repairProgramId,reguId:t.model.reguId,status:t.status,baseDate:i()(t.model.baseDate||new Date,"YYYY-MM-DD"),remark:t.model.remark,fdProject:t.model.fdProject,fdTask:t.model.fdTask,fdCostType:t.model.fdCostType})}))},changeField:function(e,t){this.$store.dispatch("setBasicInfo",t)},handleStatus:function(e){this.status=e},handleOk:function(){var e=this,t=this;t.form.validateFields((function(r,n){if(!r){var o=Object.assign(t.model,n,{baseDate:i()(n.baseDate).format("YYYY-MM-DD"),status:e.status?1:0});t.confirmLoading=!0,t.fileList.length>0?t.customRequest(o):Object(a["i"])(o).then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok"),t.close()):t.$message.error(e.message)})).catch((function(e){t.$message.error("保存异常",e)})).finally((function(){t.confirmLoading=!1}))}}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,this.regeuStatus=!1,this.fileList=[]}}},f=d,p=r("2877"),m=Object(p["a"])(f,n,o,!1,null,null,null);t["default"]=m.exports},"9ced":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e._self._c;return t("div",["project"==e.type||"task"==e.type?t("a-select",{staticStyle:{width:"100%"},attrs:{allowClear:"","show-search":"",placeholder:"project"==e.type?"请选择财务项目":"task"==e.type&&"请选择财务任务","option-filter-prop":"children","filter-option":e.filterOption},on:{focus:e.handleFocus,change:e.handleChange},model:{value:e.modelValue,callback:function(t){e.modelValue=t},expression:"modelValue"}},e._l(e.selectList,(function(r,n){return t("a-select-option",{key:n,attrs:{value:r.id}},[e._v(" "+e._s(r.name)+" - "+e._s(r.code)+" ")])})),1):t("span",{staticStyle:{color:"red"}},[e._v(" 参数 “type” 不能为空 参数详阅组件 src/components/finance/index.vue ")])],1)},o=[],a=r("d214"),u={name:"finance",model:{prop:"value",event:"change"},props:["value","type","id"],data:function(){return{modelValue:void 0,selectList:[]}},watch:{value:{handler:function(e){this.modelValue=e},immediate:!0},id:{handler:function(e){this.getSelectList()},immediate:!0}},created:function(){this.getSelectList()},methods:{filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},handleFocus:function(){"task"!=this.type||this.id||this.$message.warning("请先选择财务项目！")},handleChange:function(e){this.$emit("change",e)},getSelectList:function(){var e=this;this.selectList=[];var t="project"==this.type?a["M"]:"task"==this.type&&a["N"];if(t){if("task"==this.type&&!this.id)return;t("task"==this.type&&{projectId:this.id}).then((function(t){t.success&&t.result.length&&(e.selectList=t.result)}))}}}},i=u,c=r("2877"),s=Object(c["a"])(i,n,o,!1,null,"10418fd5",null);t["default"]=s.exports},d214:function(e,t,r){"use strict";r.d(t,"h",(function(){return o})),r.d(t,"D",(function(){return a})),r.d(t,"eb",(function(){return u})),r.d(t,"r",(function(){return i})),r.d(t,"b",(function(){return c})),r.d(t,"w",(function(){return s})),r.d(t,"H",(function(){return l})),r.d(t,"I",(function(){return b})),r.d(t,"k",(function(){return d})),r.d(t,"c",(function(){return g})),r.d(t,"x",(function(){return h})),r.d(t,"l",(function(){return v})),r.d(t,"K",(function(){return j})),r.d(t,"a",(function(){return O})),r.d(t,"v",(function(){return C})),r.d(t,"j",(function(){return w})),r.d(t,"F",(function(){return y})),r.d(t,"J",(function(){return f})),r.d(t,"G",(function(){return p})),r.d(t,"t",(function(){return m})),r.d(t,"Q",(function(){return I})),r.d(t,"u",(function(){return k})),r.d(t,"db",(function(){return P})),r.d(t,"q",(function(){return R})),r.d(t,"bb",(function(){return T})),r.d(t,"cb",(function(){return N})),r.d(t,"C",(function(){return L})),r.d(t,"g",(function(){return S})),r.d(t,"P",(function(){return x})),r.d(t,"X",(function(){return $})),r.d(t,"ab",(function(){return q})),r.d(t,"f",(function(){return M})),r.d(t,"p",(function(){return _})),r.d(t,"jb",(function(){return D})),r.d(t,"kb",(function(){return F})),r.d(t,"Z",(function(){return V})),r.d(t,"e",(function(){return B})),r.d(t,"A",(function(){return Y})),r.d(t,"n",(function(){return E})),r.d(t,"m",(function(){return H})),r.d(t,"O",(function(){return z})),r.d(t,"Y",(function(){return A})),r.d(t,"V",(function(){return W})),r.d(t,"gb",(function(){return X})),r.d(t,"hb",(function(){return Z})),r.d(t,"L",(function(){return ee})),r.d(t,"ib",(function(){return te})),r.d(t,"B",(function(){return Q})),r.d(t,"y",(function(){return J})),r.d(t,"d",(function(){return U})),r.d(t,"z",(function(){return K})),r.d(t,"W",(function(){return re})),r.d(t,"o",(function(){return G})),r.d(t,"fb",(function(){return ne})),r.d(t,"i",(function(){return oe})),r.d(t,"E",(function(){return ae})),r.d(t,"s",(function(){return ue})),r.d(t,"M",(function(){return ie})),r.d(t,"N",(function(){return ce})),r.d(t,"S",(function(){return se})),r.d(t,"T",(function(){return le})),r.d(t,"U",(function(){return de})),r.d(t,"R",(function(){return fe}));var n=r("0fea"),o=function(e){return Object(n["j"])("/outsource/supplier/add",e)},a=function(e){return Object(n["j"])("/outsource/supplier/edit",e)},u=function(e){return Object(n["d"])("/outsource/supplier/page",e)},i=function(e){return Object(n["j"])("/outsource/supplier/delete",e)},c=function(e){return Object(n["j"])("/outsource/contractInfo/add",e)},s=function(e){return Object(n["j"])("/outsource/contractInfo/edit",e)},l=function(e){return Object(n["d"])("/outsource/contractInfo/page",e)},d=function(e){return Object(n["j"])("/outsource/contractInfo/delete",e)},f=function(e){return Object(n["d"])("/outsource/contractInfo/monitor",e)},p=function(e){return Object(n["d"])("/outsource/contract/annex/list",e)},m=function(e){return Object(n["j"])("/outsource/contract/annex/delete",e)},b=function(e){return Object(n["d"])("/outsource/contractInfo/price",e)},g=function(e){return Object(n["j"])("/outsource/contractPay/add",e)},h=function(e){return Object(n["j"])("/outsource/contractPay/edit",e)},j=function(e){return Object(n["d"])("/outsource/contractPay/page",e)},v=function(e){return Object(n["j"])("/outsource/contractPay/delete",e)},O=function(e){return Object(n["j"])("/outsource/contractBakMoney/add",e)},C=function(e){return Object(n["j"])("/outsource/contractBakMoney/edit",e)},y=function(e){return Object(n["d"])("/outsource/contractBakMoney/page",e)},w=function(e){return Object(n["j"])("/outsource/contractBakMoney/delete",e)},I=function(e){return Object(n["d"])("/outsource/outin/page",e)},k=function(e){return Object(n["j"])("/outsource/outin/delete",e)},x=function(e){return Object(n["d"])("/outsource/outin/page/detail",e)},S=function(e){return Object(n["j"])("/outsource/supervise/add",e)},L=function(e){return Object(n["j"])("/outsource/supervise/edit",e)},P=function(e){return Object(n["d"])("/outsource/supervise/page",e)},R=function(e){return Object(n["j"])("/outsource/supervise/delete",e)},T=function(e){return Object(n["d"])("/outsource/supervise/get",{id:e})},N=function(e){return Object(n["d"])("/outsource/supervise/get-by-order",e)},F=function(e){return Object(n["d"])("/outsource/perform/vendor/tree",e)},D=function(e){return Object(n["j"])("/outsource/perform/delayReason",e)},$=function(e){return Object(n["d"])("/outsource/perform/page",e)},_=function(e){return Object(n["j"])("/outsource/perform/delete/resource",e)},q=function(e){return Object(n["d"])("/outsource/perform/resource",e)},M=function(e){return Object(n["j"])("/outsource/perform/resource/add",e)},Q=function(e){return Object(n["j"])("/outsource/perform/resource/edit",e)},V=function(e){return Object(n["d"])("/outsource/rateing/page",e)},B=function(e){return Object(n["j"])("/outsource/rateing/add",e)},Y=function(e){return Object(n["j"])("/outsource/rateing/edit",e)},E=function(e){return Object(n["j"])("/outsource/rateing/delete",e)},G=function(e){return Object(n["j"])("/outsource/rateing/delete/attachment",e)},H=function(e){return Object(n["j"])("/outsource/otherSource/delete",e)},J=function(e){return Object(n["j"])("/outsource/otherSource/edit",e)},U=function(e){return Object(n["j"])("/outsource/otherSource/add",e)},z=function(e){return Object(n["d"])("/outsource/otherSource/page",e)},A=function(e){return Object(n["d"])("/outsource/quality/page",e)},K=function(e){return Object(n["j"])("/outsource/quality/edit",e)},W=function(e){return Object(n["d"])("/outsource/part/page",e)},X=function(e){return Object(n["d"])("/outsource/fault/countFault",e)},Z=function(e){return Object(n["d"])("/outsource/fault/countFaultGroupBySystem",e)},ee=function(e){return Object(n["d"])("/outsource/fault/page",e)},te=function(e){return Object(n["j"])("/outsource/fault/countFaultGroupByPhaseAndSystem",e)},re=function(e){return Object(n["d"])("/outsource/contractPay/page",e)},ne=function(e){return Object(n["d"])("/training/record/page",e)},oe=function(e){return Object(n["j"])("/training/record/add",e)},ae=function(e){return Object(n["j"])("/training/record/edit",e)},ue=function(e){return Object(n["j"])("/training/record/delete",e)},ie=function(e){return Object(n["d"])("/base/finance/project/list",e)},ce=function(e){return Object(n["d"])("/base/finance/task/list",e)},se=function(e){return Object(n["d"])("/outsource/cost/listCost",e)},le=function(e){return Object(n["d"])("/outsource/cost/detail",e)},de=function(e){return Object(n["d"])("/outsource/cost/part",e)},fe=function(e){return Object(n["d"])("/outsource/cost/asset",e)}}}]);