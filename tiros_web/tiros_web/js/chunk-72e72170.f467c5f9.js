(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72e72170"],{5371:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t._self._c;return e("div",[e("a-row",{staticStyle:{"padding-bottom":"10px"},attrs:{gutter:24}},[e("a-col",{attrs:{md:24,sm:24}},[e("a-upload",{attrs:{multiple:!0,"file-list":t.fileList,remove:t.handleRemove,"before-upload":t.beforeUpload,"default-file-list":t.defaultFileList}},[e("a-button",{staticClass:"border-primary-4"},[t._v("添加文件")])],1)],1)],1),e("a-row",[t.showUpload?e("a-col",{attrs:{span:5}},[e("a-button",{attrs:{type:"primary",loading:t.isLoading},on:{click:t.beginUpload}},[t._v("上传至服务器")])],1):t._e(),e("a-col",{staticStyle:{color:"#cccccc"},attrs:{span:19}},[t._v("一次最多上传"+t._s(t.fileSize)+"个文件，且单个文件不能超过10MB")])],1)],1)},r=[],o=n("e2aa");function a(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function o(n,i,r,o){var a=i&&i.prototype instanceof l?i:l,c=Object.create(a.prototype);return s(c,"_invoke",function(n,i,r){var o,a,s,l=0,c=r||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return o=e,a=0,s=t,p.n=n,u}};function d(n,i){for(a=n,s=i,e=0;!f&&l&&!r&&e<c.length;e++){var r,o=c[e],d=p.p,h=o[2];n>3?(r=h===i)&&(s=o[(a=o[4])?5:(a=3,3)],o[4]=o[5]=t):o[0]<=d&&((r=n<2&&d<o[1])?(a=0,p.v=i,p.n=o[1]):d<h&&(r=n<3||o[0]>i||i>h)&&(o[4]=n,o[5]=i,p.n=h,a=0))}if(r||n>1)return u;throw f=!0,i}return function(r,c,h){if(l>1)throw TypeError("Generator is already running");for(f&&1===c&&d(c,h),a=c,s=h;(e=a<2?t:s)||!f;){o||(a?a<3?(a>1&&(p.n=-1),d(a,s)):p.n=s:p.v=s);try{if(l=2,o){if(a||(r="next"),e=o[r]){if(!(e=e.call(o,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,a<2&&(a=0)}else 1===a&&(e=o.return)&&e.call(o),a<2&&(s=TypeError("The iterator does not provide a '"+r+"' method"),a=1);o=t}else if((e=(f=p.n<0)?s:n.call(i,p))!==u)break}catch(e){o=t,a=1,s=e}finally{l=1}}return{value:e,done:f}}}(n,r,o),!0),c}var u={};function l(){}function c(){}function f(){}e=Object.getPrototypeOf;var p=[][i]?e(e([][i]())):(s(e={},i,(function(){return this})),e),d=f.prototype=l.prototype=Object.create(p);function h(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,r,"GeneratorFunction")),t.prototype=Object.create(d),t}return c.prototype=f,s(d,"constructor",f),s(f,"constructor",c),c.displayName="GeneratorFunction",s(f,r,"GeneratorFunction"),s(d),s(d,r,"Generator"),s(d,i,(function(){return this})),s(d,"toString",(function(){return"[object Generator]"})),(a=function(){return{w:o,m:h}})()}function s(t,e,n,i){var r=Object.defineProperty;try{r({},"",{})}catch(t){r=0}s=function(t,e,n,i){function o(e,n){s(t,e,(function(t){return this._invoke(e,n,t)}))}e?r?r(t,e,{value:n,enumerable:!i,configurable:!i,writable:!i}):t[e]=n:(o("next",0),o("throw",1),o("return",2))},s(t,e,n,i)}function u(t,e,n,i,r,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(i,r)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function a(t){u(o,i,r,a,s,"next",t)}function s(t){u(o,i,r,a,s,"throw",t)}a(void 0)}))}}var c={name:"DocUpload",props:{path:{type:String,default:""},fileSize:{type:Number,default:5},defaultFileList:{type:Array,default:[]},showUpload:{type:Boolean,default:!0},isFileEmpty:{type:Boolean,default:!1}},watch:{uploadFiles:{immediate:!1,handler:function(){var t=l(a().m((function t(e){return a().w((function(t){while(1)switch(t.n){case 0:if(e.length!==this.fileList.length){t.n=1;break}return t.n=1,this.$emit("uploaded",this.uploadFiles);case 1:return t.a(2)}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},data:function(){return{fileList:[],uploadFiles:[],isLoading:!1}},methods:{beforeUpload:function(t){var e=t.size/1024/1024<10;return e?(this.fileList.push(t),this.$emit("fileNum",this.fileList.length),this.$emit("setBforeUploadStatus",!1),!1):(this.$message.error("文件不得大于10MB!"),!1)},handleRemove:function(t){var e=this.fileList.indexOf(t),n=this.fileList.slice();n.splice(e,1),this.fileList=n,this.$emit("fileNum",this.fileList.length),this.$emit("removed",t)},beginUpload:function(){var t=this;return new Promise((function(e,n){var i=t.fileList,r=t.fileSize;if(!t.isFileEmpty&&0===i.length)return t.$emit("upLoadingEnd"),t.$message.warning("请选择要上传的文件"),void n();i.length>r?(t.$message.error("一次最多上传"+r+"个文件!"),n()):t.customRequest().then((function(){e()})).catch((function(t){n()}))}))},customRequest:function(){var t=this,e=this.fileList;if(e.length<1)return this.$emit("uploaded",[]),this.$emit("upLoadingEnd"),Promise.resolve();this.isLoading=!0;var n=[];return e.forEach((function(e){var i=new FormData;i.append("file",e),n.push(t.saveFile(i,e))})),Promise.all(n).finally((function(){t.isLoading=!1,t.$emit("upLoadingEnd")}))},saveFile:function(){var t=l(a().m((function t(e,n){var i=this;return a().w((function(t){while(1)switch(t.n){case 0:return t.a(2,Object(o["d"])(e,this.path).then((function(t){t.success?(i.getUploadData(n,t),i.$emit("setUpLoadingEndStatus",!0)):(i.$message.error(t.message),i.$emit("uploadFail",n))})))}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}(),getUploadData:function(t,e){var n=this.uploadFiles,i={name:t.name,type:this.handleFileName(t),fileSize:Math.round(t.size/1024),savepath:e.result};n.push(i)},handleFileName:function(t){var e=t.name.lastIndexOf("."),n=t.name.length,i=t.name.substring(e+1,n);return i}}},f=c,p=(n("9615"),n("2877")),d=Object(p["a"])(f,i,r,!1,null,"69990be1",null);e["default"]=d.exports},"94c2d":function(t,e,n){},9615:function(t,e,n){"use strict";n("94c2d")}}]);