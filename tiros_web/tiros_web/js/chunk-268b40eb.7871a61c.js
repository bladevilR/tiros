(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-268b40eb","chunk-42391c95","chunk-72e72170"],{"01aa":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,width:700,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:24,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"名称"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["name",e.validatorRules.name],expression:"[ 'name', validatorRules.name]",modifiers:{trim:!0}}],attrs:{placeholder:"名称"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:24,sm:24}},[t("a-form-item",{attrs:{label:"备注",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark",e.validatorRules.remark],expression:"[ 'remark',validatorRules.remark]"}]})],1)],1)],1),1==e.model.isFile?t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:24,sm:24}},[t("a-form-item",{attrs:{label:"标签",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("div",{attrs:{id:"fileTag"}},[e._l(e.tags,(function(r,a){return[r.length>10?t("a-tooltip",{key:r,attrs:{title:r}},[t("a-tag",{key:r,attrs:{color:"blue",closable:!0},on:{close:function(){return e.handleClose(r)}}},[e._v(" "+e._s("".concat(r.slice(0,10),"..."))+" ")])],1):t("a-tag",{key:r,attrs:{color:"blue",closable:!0},on:{close:function(){return e.handleClose(r)}}},[e._v(" "+e._s(r)+" ")])]})),e.inputVisible?t("a-input",{ref:"input",style:{width:"78px"},attrs:{type:"text",value:e.inputValue},on:{change:e.handleInputChange,blur:e.handleInputConfirm,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm.apply(null,arguments)}}}):t("a-tag",{staticStyle:{background:"#fff",borderstyle:"dashed"},attrs:{color:"blue"},on:{click:e.showInput}},[t("a-icon",{attrs:{type:"plus"}}),e._v(" 添加标签 ")],1)],2)])],1)],1):e._e()],1)],1)],1)},n=[],i=r("8fad"),o=r("ca00");function s(e){return d(e)||u(e)||c(e)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"==typeof e)return f(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}function u(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function d(e){if(Array.isArray(e))return f(e)}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}var h={name:"EditDirectoryModal",data:function(){return{title:"操作",visible:!1,model:{},tags:[],inputVisible:!1,inputValue:"",labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:15}},confirmLoading:!1,form:this.$form.createForm(this),validatorRules:{name:{rules:[{required:!0,message:"请输入名称!"},{max:50,message:"输入长度不能超过50字符!"}]},remark:{rules:[{max:255,message:"输入长度不能超过255字符!"}]}}}},created:function(){},methods:{edit:function(e){var t=this;this.visible=!0,this.form.resetFields(),this.model=Object.assign({},e),Object(o["e"])(this.model.fileTags)||(this.tags=this.model.fileTags.split(",")),this.$nextTick((function(){t.form.setFieldsValue({name:t.model.name,remark:t.model.remark})}))},handleOk:function(){var e=this,t=this;t.form.validateFields((function(r,a){if(!r){if(t.tags.length>10)return void t.$message.warn("最多只能添加10个标签！");t.confirmLoading=!0;var n=Object.assign(t.model,a,{fileTags:t.tags.length>0?t.tags.join(","):""});Object(i["ab"])(n).then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok")):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1,t.close()})),e.visible=!1}}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,this.tags=[]},handleClose:function(e){var t=this.tags.filter((function(t){return t!==e}));this.tags=t},showInput:function(){this.inputVisible=!0,this.$nextTick((function(){this.$refs.input.focus()}))},handleInputChange:function(e){this.inputValue=e.target.value},handleInputConfirm:function(){var e=this.inputValue,t=this.tags;e&&-1===t.indexOf(e)&&(t=[].concat(s(t),[e])),Object.assign(this,{tags:t,inputVisible:!1,inputValue:""})}}},m=h,p=r("2877"),g=Object(p["a"])(m,a,n,!1,null,null,null);t["default"]=g.exports},"260f":function(e,t,r){},3348:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"800px",visible:e.visible,title:"文件上传",centered:"",bodyStyle:{height:"500px"},confirmLoading:e.confirmLoading,destroyOnClose:!0,footer:null},on:{cancel:e.handleCancel}},[t("a-form",{attrs:{form:e.form}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:24,sm:24}},[t("a-form-item",[t("DocUpload",{ref:"upload",attrs:{"default-file-list":e.defaultFileList,"show-upload":!1,path:e.save_path},on:{upLoadingEnd:e.upLoadingEnd,uploaded:e.successUploadFile,removed:e.onRemoveFile,uploadFail:e.uploadFail}})],1)],1)],1),t("a-row",[t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{label:"是否共享？"}},[t("a-switch",{model:{value:e.shared,callback:function(t){e.shared=t},expression:"shared"}})],1)],1),e.shared?t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{label:"共享到"}},[t("a-tree-select",{attrs:{"tree-data-simple-mode":"","allow-clear":"","tree-data":e.selectTreeNode,replaceFields:{title:"title",value:"id"},placeholder:"请选择","load-data":e.loadSelectNodeMethod},model:{value:e.sharedId,callback:function(t){e.sharedId=t},expression:"sharedId"}})],1)],1):e._e()],1),t("a-row",{staticStyle:{"margin-top":"8px"},attrs:{gutter:24}},[t("a-col",{attrs:{md:24,sm:24}},[t("a-textarea",{attrs:{maxLength:201,placeholder:"备注"},on:{change:e.remarkChange},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}})],1)],1)],1),t("div",{attrs:{id:"fileTag"}},[e._l(e.tags,(function(r){return[r.length>10?t("a-tooltip",{key:r,attrs:{title:r}},[t("a-tag",{key:r,attrs:{color:"blue",closable:!0},on:{close:function(){return e.handleClose(r)}}},[e._v(" "+e._s("".concat(r.slice(0,10),"..."))+" ")])],1):t("a-tag",{key:r,attrs:{color:"blue",closable:!0},on:{close:function(){return e.handleClose(r)}}},[e._v(" "+e._s(r)+" ")])]})),e.inputVisible?t("a-input",{ref:"input",style:{width:"78px"},attrs:{type:"text",value:e.inputValue},on:{change:e.handleInputChange,blur:e.handleInputConfirm,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm.apply(null,arguments)}}}):t("a-tag",{staticStyle:{background:"#fff",borderstyle:"dashed"},attrs:{color:"blue"},on:{click:e.showInput}},[t("a-icon",{attrs:{type:"plus"}}),e._v(" 添加标签 ")],1)],2),t("div",{staticStyle:{"margin-top":"80px",position:"absolute",bottom:"10px","text-align":"right","padding-right":"25px",width:"100%"}},[t("a-space",[t("a-button",{attrs:{type:"primary",loading:e.isLoading},on:{click:e.beginUpload}},[e._v("上传至服务器")]),t("a-button",{on:{click:function(t){e.visible=!1}}},[e._v("关闭")])],1)],1)],1)},n=[],i=r("b098"),o=r("8fad"),s=r("5371");function l(e){return f(e)||d(e)||u(e)||c()}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){if(e){if("string"==typeof e)return h(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}function d(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function f(e){if(Array.isArray(e))return h(e)}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}var m={name:"DocumentUpload",components:{JTreeSelect:i["default"],DocUpload:s["default"]},props:["save_path"],data:function(){return{selectTreeNode:[],form:this.$form.createForm(this),visible:!1,confirmLoading:!1,directoryId:"",isLoading:!1,defaultFileList:[],shared:!1,sharedId:"",tags:[],remark:"",inputVisible:!1,inputValue:"",labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:16}}}},watch:{shared:{immediate:!1,handler:function(e){e&&this.loadSelectNodeMethod(null)}}},methods:{loadSelectNodeMethod:function(e){var t=this;return new Promise((function(r){Object(o["Ob"])(null==e?"-1":e.dataRef.id).then((function(e){e.success?e.result.map((function(e){t.selectTreeNode=t.selectTreeNode.concat(t.genSelectTreeNode(e))})):t.$message.error(e.message)})),r()}))},genSelectTreeNode:function(e){return{id:e.id,pId:e.parentId,value:e.id,title:e.name,isLeaf:!e.hasChildren}},remarkChange:function(){return!(this.remark.length>200)||(this.$message.error("备注不能超过255个字符"),!1)},showModal:function(e){this.tags=[],this.remark="",this.shared=!1,this.sharedId="",this.directoryId=e,this.visible=!0},successUploadFile:function(e){var t=this;if(this.confirmLoading=!1,e&&!(e.length<1)){var r={directoryId:this.directoryId,sharedId:this.sharedId,remark:this.remark,fileTags:this.tags.length>0?this.tags.join(","):""};e.map((function(e){Object.assign(e,r)})),Object(o["d"])(e).then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok"),t.handleCancel()):t.$message.error(e.message)}))}},uploadFail:function(e){this.confirmLoading=!1,this.$message.error("上传失败！")},onRemoveFile:function(e){},handleClose:function(e){var t=this.tags.filter((function(t){return t!==e}));this.tags=t},showInput:function(){this.inputVisible=!0,this.$nextTick((function(){this.$refs.input.focus()}))},handleInputChange:function(e){this.inputValue=e.target.value},handleInputConfirm:function(){var e=this.inputValue,t=this.tags;e&&-1===t.indexOf(e)&&(t=[].concat(l(t),[e])),Object.assign(this,{tags:t,inputVisible:!1,inputValue:""})},beginUpload:function(){this.tags.length>10?this.$message.warn("最多只能添加10个标签！"):(this.isLoading=!0,this.confirmLoading=!0,this.$refs.upload.beginUpload())},upLoadingEnd:function(){this.isLoading=!1},handleCancel:function(){this.visible=!1,this.selectTreeNode=[]}}},p=m,g=(r("babc"),r("2877")),v=Object(g["a"])(p,a,n,!1,null,"7a8011c7",null);t["default"]=v.exports},"353a":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"80%",visible:e.visible,title:e.title,centered:"",bodyStyle:{height:"80vh"},confirmLoading:e.confirmLoading,destroyOnClose:!0,footer:null},on:{cancel:e.handleCancel}},[t("div",[t("iframe",{staticClass:"filename",staticStyle:{height:"calc(80vh - 25px)"},attrs:{src:e.filePath,width:"100%",frameborder:"0"}})])])},n=[],i=r("e2aa"),o={name:"DocPreviewModal",props:{title:{type:String,default:"文件预览"}},data:function(){return{visible:!1,confirmLoading:!1,filePath:""}},methods:{handleFilePath:function(e){var t=this;Object(i["c"])(e).then((function(e){if(e.success){var r=e.result;t.visible=!0,t.filePath=window._CONFIG["onlinePreviewDomainURL"]+"?url="+encodeURIComponent(r)}else t.$message.warning("查看文件失败")}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},s=o,l=(r("9216"),r("2877")),c=Object(l["a"])(s,a,n,!1,null,"484795fd",null);t["default"]=c.exports},5371:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("div",[t("a-row",{staticStyle:{"padding-bottom":"10px"},attrs:{gutter:24}},[t("a-col",{attrs:{md:24,sm:24}},[t("a-upload",{attrs:{multiple:!0,"file-list":e.fileList,remove:e.handleRemove,"before-upload":e.beforeUpload,"default-file-list":e.defaultFileList}},[t("a-button",{staticClass:"border-primary-4"},[e._v("添加文件")])],1)],1)],1),t("a-row",[e.showUpload?t("a-col",{attrs:{span:5}},[t("a-button",{attrs:{type:"primary",loading:e.isLoading},on:{click:e.beginUpload}},[e._v("上传至服务器")])],1):e._e(),t("a-col",{staticStyle:{color:"#cccccc"},attrs:{span:19}},[e._v("一次最多上传"+e._s(e.fileSize)+"个文件，且单个文件不能超过10MB")])],1)],1)},n=[],i=r("e2aa");function o(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",n=r.toStringTag||"@@toStringTag";function i(r,a,n,i){var o=a&&a.prototype instanceof c?a:c,u=Object.create(o.prototype);return s(u,"_invoke",function(r,a,n){var i,o,s,c=0,u=n||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,r){return i=t,o=0,s=e,f.n=r,l}};function h(r,a){for(o=r,s=a,t=0;!d&&c&&!n&&t<u.length;t++){var n,i=u[t],h=f.p,m=i[2];r>3?(n=m===a)&&(s=i[(o=i[4])?5:(o=3,3)],i[4]=i[5]=e):i[0]<=h&&((n=r<2&&h<i[1])?(o=0,f.v=a,f.n=i[1]):h<m&&(n=r<3||i[0]>a||a>m)&&(i[4]=r,i[5]=a,f.n=m,o=0))}if(n||r>1)return l;throw d=!0,a}return function(n,u,m){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,m),o=u,s=m;(t=o<2?e:s)||!d;){i||(o?o<3?(o>1&&(f.n=-1),h(o,s)):f.n=s:f.v=s);try{if(c=2,i){if(o||(n="next"),t=i[n]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,o<2&&(o=0)}else 1===o&&(t=i.return)&&t.call(i),o<2&&(s=TypeError("The iterator does not provide a '"+n+"' method"),o=1);i=e}else if((t=(d=f.n<0)?s:r.call(a,f))!==l)break}catch(t){i=e,o=1,s=t}finally{c=1}}return{value:t,done:d}}}(r,n,i),!0),u}var l={};function c(){}function u(){}function d(){}t=Object.getPrototypeOf;var f=[][a]?t(t([][a]())):(s(t={},a,(function(){return this})),t),h=d.prototype=c.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,n,"GeneratorFunction")),e.prototype=Object.create(h),e}return u.prototype=d,s(h,"constructor",d),s(d,"constructor",u),u.displayName="GeneratorFunction",s(d,n,"GeneratorFunction"),s(h),s(h,n,"Generator"),s(h,a,(function(){return this})),s(h,"toString",(function(){return"[object Generator]"})),(o=function(){return{w:i,m:m}})()}function s(e,t,r,a){var n=Object.defineProperty;try{n({},"",{})}catch(e){n=0}s=function(e,t,r,a){function i(t,r){s(e,t,(function(e){return this._invoke(t,r,e)}))}t?n?n(e,t,{value:r,enumerable:!a,configurable:!a,writable:!a}):e[t]=r:(i("next",0),i("throw",1),i("return",2))},s(e,t,r,a)}function l(e,t,r,a,n,i,o){try{var s=e[i](o),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(a,n)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var i=e.apply(t,r);function o(e){l(i,a,n,o,s,"next",e)}function s(e){l(i,a,n,o,s,"throw",e)}o(void 0)}))}}var u={name:"DocUpload",props:{path:{type:String,default:""},fileSize:{type:Number,default:5},defaultFileList:{type:Array,default:[]},showUpload:{type:Boolean,default:!0},isFileEmpty:{type:Boolean,default:!1}},watch:{uploadFiles:{immediate:!1,handler:function(){var e=c(o().m((function e(t){return o().w((function(e){while(1)switch(e.n){case 0:if(t.length!==this.fileList.length){e.n=1;break}return e.n=1,this.$emit("uploaded",this.uploadFiles);case 1:return e.a(2)}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},data:function(){return{fileList:[],uploadFiles:[],isLoading:!1}},methods:{beforeUpload:function(e){var t=e.size/1024/1024<10;return t?(this.fileList.push(e),this.$emit("fileNum",this.fileList.length),this.$emit("setBforeUploadStatus",!1),!1):(this.$message.error("文件不得大于10MB!"),!1)},handleRemove:function(e){var t=this.fileList.indexOf(e),r=this.fileList.slice();r.splice(t,1),this.fileList=r,this.$emit("fileNum",this.fileList.length),this.$emit("removed",e)},beginUpload:function(){var e=this;return new Promise((function(t,r){var a=e.fileList,n=e.fileSize;if(!e.isFileEmpty&&0===a.length)return e.$emit("upLoadingEnd"),e.$message.warning("请选择要上传的文件"),void r();a.length>n?(e.$message.error("一次最多上传"+n+"个文件!"),r()):e.customRequest().then((function(){t()})).catch((function(e){r()}))}))},customRequest:function(){var e=this,t=this.fileList;if(t.length<1)return this.$emit("uploaded",[]),this.$emit("upLoadingEnd"),Promise.resolve();this.isLoading=!0;var r=[];return t.forEach((function(t){var a=new FormData;a.append("file",t),r.push(e.saveFile(a,t))})),Promise.all(r).finally((function(){e.isLoading=!1,e.$emit("upLoadingEnd")}))},saveFile:function(){var e=c(o().m((function e(t,r){var a=this;return o().w((function(e){while(1)switch(e.n){case 0:return e.a(2,Object(i["d"])(t,this.path).then((function(e){e.success?(a.getUploadData(r,e),a.$emit("setUpLoadingEndStatus",!0)):(a.$message.error(e.message),a.$emit("uploadFail",r))})))}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}(),getUploadData:function(e,t){var r=this.uploadFiles,a={name:e.name,type:this.handleFileName(e),fileSize:Math.round(e.size/1024),savepath:t.result};r.push(a)},handleFileName:function(e){var t=e.name.lastIndexOf("."),r=e.name.length,a=e.name.substring(t+1,r);return a}}},d=u,f=(r("9615"),r("2877")),h=Object(f["a"])(d,a,n,!1,null,"69990be1",null);t["default"]=h.exports},"5e461":function(e,t,r){"use strict";r("ce67")},9216:function(e,t,r){"use strict";r("260f")},"94c2d":function(e,t,r){},9615:function(e,t,r){"use strict";r("94c2d")},"9ff8":function(e,t,r){},babc:function(e,t,r){"use strict";r("9ff8")},ce67:function(e,t,r){},df41:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("a-card",{attrs:{id:"rightDocument"}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:7,sm:24}},[t("a-form-item",{attrs:{label:"文件名称"}},[t("a-input",{attrs:{placeholder:"请输入文件名称",allowClear:""},model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,"name",t)},expression:"queryParam.name"}})],1)],1),t("a-col",{attrs:{md:7,sm:24}},[t("a-form-item",{attrs:{label:"显示"}},[t("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_file_show_type"},model:{value:e.queryParam.showType,callback:function(t){e.$set(e.queryParam,"showType",t)},expression:"queryParam.showType"}})],1)],1),t("a-col",{attrs:{md:7,sm:24}},[t("a-form-item",{attrs:{label:"文件类型"}},[t("a-select",{attrs:{placeholder:"请选择",allowClear:""},model:{value:e.queryParam.type,callback:function(t){e.$set(e.queryParam,"type",t)},expression:"queryParam.type"}},[t("a-select-option",{attrs:{value:void 0}},[e._v("请选择")]),t("a-select-option",{attrs:{value:""}},[e._v("所有文件")]),e._l(e.fileType,(function(r){return t("a-select-option",{key:r,attrs:{value:r}},[e._v(" "+e._s(r)+" ")])}))],2)],1)],1)],1),t("a-row",[t("a-col",{attrs:{md:9,sm:12}},[t("span",{staticClass:"table-page-search-submitButtons"},[t("a-space",[t("a-button",{attrs:{type:"primary"},on:{click:e.handleUpload}},[e._v("上传")]),t("a-button",{attrs:{disabled:1!=e.records.length},on:{click:function(t){return e.handleEdit(e.records[0])}}},[e._v("编辑")]),t("a-button",{on:{click:e.handleAddDic}},[e._v("新建目录")]),t("a-button",{attrs:{disabled:e.records.length<1},on:{click:e.handleAddPrivilege}},[e._v("设置权限")]),t("a-button",{attrs:{disabled:e.records.length<1},on:{click:e.deleteRecord}},[e._v("删除")]),t("a-button",{on:{click:e.findList}},[e._v("查询")])],1)],1)])],1)],1)],1),t("div",{staticStyle:{height:"calc(100vh - 282px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(100vh - 282px)"},attrs:{border:"","auto-resize":"","max-height":"100%",data:e.tableData,"show-overflow":"tooltip","edit-config":{trigger:"manual",mode:"row"},"checkbox-config":{trigger:"row",highlight:!0,range:!0},"header-align":"center",align:"center"},on:{"checkbox-change":e.checkboxChange,"checkbox-all":e.checkboxChange}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),t("vxe-table-column",{attrs:{title:"-",width:"90"},scopedSlots:e._u([{key:"default",fn:function(r){var a=r.row;return[1===a.isFile?t("span",[t("a",{on:{click:function(t){return t.stopPropagation(),e.handleSeeing(a)}}},[e._v("查看")]),t("a",{staticStyle:{"margin-left":"3px"},on:{click:function(t){return t.stopPropagation(),e.handleDownload(a)}}},[e._v("下载")])]):e._e()]}}])}),t("vxe-table-column",{attrs:{field:"name",title:"文件名称","min-width":"160",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"type",title:"文件类型",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.type)+" ")]}}])}),t("vxe-table-column",{attrs:{field:"fileSize",title:"大小(KB)",width:"100","header-align":"center",align:"right"}}),t("vxe-table-column",{attrs:{field:"uploadDate",title:"上传日期",width:"100","header-align":"center",align:"right"}}),t("vxe-table-column",{attrs:{field:"fileTags",title:"标签","min-width":"120","header-align":"center",align:"left"},scopedSlots:e._u([{key:"default",fn:function(r){var a=r.row;return[a.fileTags?t("span",e._l(a.fileTags.split(","),(function(r,a){return t("a-tag",{key:a,attrs:{color:"blue"}},[e._v(e._s(r))])})),1):e._e()]}}])}),t("vxe-table-column",{attrs:{field:"remark",title:"备注",width:"160"}})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1),t("add-directory-modal",{ref:"modalForm",attrs:{directoryId:e.directoryId},on:{ok:function(t){return e.loadData()}}}),t("edit-directory-modal",{ref:"editModalForm",on:{ok:function(t){return e.loadData()}}}),t("doc-preview-modal",{ref:"docPreview",attrs:{title:e.fileName}}),t("document-upload",{ref:"docUpload",attrs:{save_path:e.curPath},on:{ok:function(t){return e.findList()}}}),t("privilege-add",{ref:"privilegeAdd",on:{ok:function(t){return e.loadData()}}})],1)},n=[],i=r("8fad"),o=r("e2aa"),s=r("e526"),l=r("01aa"),c=r("353a"),u=r("3348"),d=r("3791"),f=r("ca00");function h(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=m(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function m(e,t){if(e){if("string"==typeof e)return p(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function g(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",n=r.toStringTag||"@@toStringTag";function i(r,a,n,i){var l=a&&a.prototype instanceof s?a:s,c=Object.create(l.prototype);return v(c,"_invoke",function(r,a,n){var i,s,l,c=0,u=n||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,r){return i=t,s=0,l=e,f.n=r,o}};function h(r,a){for(s=r,l=a,t=0;!d&&c&&!n&&t<u.length;t++){var n,i=u[t],h=f.p,m=i[2];r>3?(n=m===a)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((n=r<2&&h<i[1])?(s=0,f.v=a,f.n=i[1]):h<m&&(n=r<3||i[0]>a||a>m)&&(i[4]=r,i[5]=a,f.n=m,s=0))}if(n||r>1)return o;throw d=!0,a}return function(n,u,m){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,m),s=u,l=m;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,l)):f.n=l:f.v=l);try{if(c=2,i){if(s||(n="next"),t=i[n]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+n+"' method"),s=1);i=e}else if((t=(d=f.n<0)?l:r.call(a,f))!==o)break}catch(t){i=e,s=1,l=t}finally{c=1}}return{value:t,done:d}}}(r,n,i),!0),c}var o={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][a]?t(t([][a]())):(v(t={},a,(function(){return this})),t),d=c.prototype=s.prototype=Object.create(u);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,v(e,n,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=c,v(d,"constructor",c),v(c,"constructor",l),l.displayName="GeneratorFunction",v(c,n,"GeneratorFunction"),v(d),v(d,n,"Generator"),v(d,a,(function(){return this})),v(d,"toString",(function(){return"[object Generator]"})),(g=function(){return{w:i,m:f}})()}function v(e,t,r,a){var n=Object.defineProperty;try{n({},"",{})}catch(e){n=0}v=function(e,t,r,a){function i(t,r){v(e,t,(function(e){return this._invoke(t,r,e)}))}t?n?n(e,t,{value:r,enumerable:!a,configurable:!a,writable:!a}):e[t]=r:(i("next",0),i("throw",1),i("return",2))},v(e,t,r,a)}function b(e,t,r,a,n,i,o){try{var s=e[i](o),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(a,n)}function y(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var i=e.apply(t,r);function o(e){b(i,a,n,o,s,"next",e)}function s(e){b(i,a,n,o,s,"throw",e)}o(void 0)}))}}var w={name:"RightDocument",props:["directoryId","curPath"],components:{AddDirectoryModal:s["default"],EditDirectoryModal:l["default"],DocPreviewModal:c["default"],DocumentUpload:u["default"],PrivilegeAdd:d["default"]},data:function(){return{records:[],toggleSearchStatus:!1,fileType:[],filePath:"",fileName:"",queryParam:{id:"",name:"",showType:"2",type:null,pageNo:1,pageSize:10},totalResult:0,tableData:[],showEdit:!1,status:!1,dirParentId:""}},created:function(){this.getFileType(),this.findList()},watch:{directoryId:{immediate:!1,handler:function(e){this.queryParam.id=e,this.records=[],this.tableData=[],this.findList(),this.getDirParentId(e)}}},methods:{checkboxChange:function(e){this.records=e.records},getDirParentId:function(e){var t=this;Object(i["qb"])(e).then((function(e){e.success&&(t.dirParentId=e.result)}))},getFileType:function(){var e=this;Object(i["tb"])().then((function(t){e.fileType=t.result}))},handlePrivilege:function(){var e=y(g().m((function e(t,r){var a,n=this;return g().w((function(e){while(1)switch(e.n){case 0:return a={id:t,operation:r},e.n=1,Object(i["xc"])(a).then((function(e){n.status=e.result}));case 1:return e.a(2)}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),handleSeeing:function(){var e=y(g().m((function e(t){return g().w((function(e){while(1)switch(e.n){case 0:return e.n=1,this.handlePrivilege(t.id,2);case 1:this.status?(this.fileName=t.fileName,this.$refs.docPreview.handleFilePath(t.savepath)):this.$message.error("您没有权限!");case 2:return e.a(2)}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleDownload:function(){var e=y(g().m((function e(t){return g().w((function(e){while(1)switch(e.n){case 0:return e.n=1,this.handlePrivilege(t.id,3);case 1:this.status?Object(o["b"])(t.savepath):this.$message.error("您没有权限!");case 2:return e.a(2)}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),findList:function(){var e=this;Object(i["rb"])(this.queryParam).then((function(t){e.totalResult=t.result.total,e.loading=!1,e.records=[],e.tableData=t.result.records}))},handlePageChange:function(e){var t=e.currentPage,r=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=r,this.findList()},loadData:function(){this.findList(),this.$emit("load"),this.$emit("selectTree")},handleUpload:function(){var e=y(g().m((function e(){return g().w((function(e){while(1)switch(e.n){case 0:if(!this.directoryId){e.n=2;break}return e.n=1,this.handlePrivilege(this.directoryId,1);case 1:this.status?this.$refs.docUpload.showModal(this.directoryId):this.$message.error("您没有权限!"),e.n=3;break;case 2:this.$message.warn("请选择目录!");case 3:return e.a(2)}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleEdit:function(){var e=y(g().m((function e(t){return g().w((function(e){while(1)switch(e.n){case 0:return e.n=1,this.handlePrivilege(t.id,5);case 1:this.status?(this.$refs.editModalForm.edit(t),this.$refs.editModalForm.title="编辑"):this.$message.error("您没有权限!");case 2:return e.a(2)}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleAddDic:function(){var e=y(g().m((function e(){return g().w((function(e){while(1)switch(e.n){case 0:if(!this.directoryId){e.n=2;break}return e.n=1,this.handlePrivilege(this.directoryId,5);case 1:this.status?(this.$refs.modalForm.add(),this.$refs.modalForm.title="新增"):this.$message.error("您没有权限!"),e.n=3;break;case 2:this.$message.warn("请选择目录!");case 3:return e.a(2)}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleAddPrivilege:function(){var e=y(g().m((function e(){var t,r,a,n;return g().w((function(e){while(1)switch(e.n){case 0:if(t=this.$refs.listTable.getCheckboxRecords(),!this.directoryId&&1!==t.length){e.n=4;break}if(r=this.directoryId,a=1,1!==t.length){e.n=1;break}r=t[0].id,a=0===t[0].isFile?1:2,e.n=2;break;case 1:if(!(t.length>1)){e.n=2;break}return this.$message.warn("只能选择一条数据!"),e.a(2);case 2:return e.n=3,this.handlePrivilege(r,5);case 3:this.status?(n={directoryId:r,objType:a},this.$refs.privilegeAdd.show(n)):this.$message.error("您没有权限!"),e.n=5;break;case 4:t.length>1?this.$message.warn("只能选择一条数据!"):this.$message.warn("请选择目录或者文件!");case 5:return e.a(2)}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getSelectEvent:function(){var e=this.$refs.listTable.getCheckboxRecords();this.$XModal.alert(e.length)},deleteRecord:function(){var e=y(g().m((function e(){var t,r,a,n,o,s=this;return g().w((function(e){while(1)switch(e.p=e.n){case 0:if(t=this.$refs.listTable.getCheckboxRecords(),!(!t.length>0)){e.n=2;break}if(Object(f["e"])(this.directoryId)){e.n=2;break}if("1"===this.directoryId||"2"===this.directoryId||"3"===this.directoryId||"4"===this.directoryId){e.n=1;break}t.push({id:this.directoryId}),e.n=2;break;case 1:return this.$message.warn("初始化数据不能删除!"),e.a(2);case 2:if(!(t.length>0)){e.n=13;break}r=h(t),e.p=3,r.s();case 4:if((a=r.n()).done){e.n=9;break}if(n=a.value,"1"===n.id||"2"===n.id||"3"===n.id||"4"===n.id){e.n=7;break}return e.n=5,this.handlePrivilege(n.id,4);case 5:if(this.status){e.n=6;break}return this.$message.error("您没有权限!"),e.a(2);case 6:e.n=8;break;case 7:return this.$message.warn("初始化数据不能删除!"),e.a(2);case 8:e.n=4;break;case 9:e.n=11;break;case 10:e.p=10,o=e.v,r.e(o);case 11:return e.p=11,r.f(),e.f(11);case 12:this.$confirm({content:"是否删除选中".concat(t.length,"数据？"),okText:"确认",cancelText:"取消",onOk:function(){var e=t.map((function(e,t){return e.id})).join(",");Object(i["x"])("ids="+e).then((function(e){e.success?(s.$emit("selectTree"),s.findList(),s.$message.success(e.message)):s.$message.error(e.message)}))}}),e.n=14;break;case 13:this.$message.error("尚未选中任何数据!");case 14:return e.a(2)}}),e,this,[[3,10,11,12]])})));function t(){return e.apply(this,arguments)}return t}()}},k=w,x=(r("5e461"),r("2877")),$=Object(x["a"])(k,a,n,!1,null,null,null);t["default"]=$.exports},e526:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,width:600,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:24,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"名称"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["name",e.validatorRules.name],expression:"[ 'name', validatorRules.name]",modifiers:{trim:!0}}],attrs:{placeholder:"名称"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:24,sm:24}},[t("a-form-item",{attrs:{label:"备注",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark",e.validatorRules.remark],expression:"[ 'remark',validatorRules.remark]"}]})],1)],1)],1)],1)],1)],1)},n=[],i=r("8fad"),o={name:"AddDirectoryModal",props:["directoryId"],data:function(){return{title:"操作",visible:!1,model:{},labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:15}},confirmLoading:!1,form:this.$form.createForm(this),validatorRules:{name:{rules:[{required:!0,message:"请输入目录名称!"},{max:50,message:"输入长度不能超过50字符!"}]},remark:{rules:[{max:255,message:"输入长度不能超过255字符!"}]}}}},created:function(){},methods:{add:function(){this.edit({})},edit:function(e){var t=this;this.form.resetFields(),this.model=Object.assign({},e),this.visible=!0,this.$nextTick((function(){t.form.setFieldsValue({name:t.model.name,remark:t.model.remark})}))},handleOk:function(){var e=this,t=this;t.form.validateFields((function(r,a){if(!r){t.confirmLoading=!0;var n=Object.assign(t.model,a,{parentId:e.directoryId});Object(i["c"])(n).then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok")):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1,t.close()})),e.visible=!1}}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},s=o,l=r("2877"),c=Object(l["a"])(s,a,n,!1,null,null,null);t["default"]=c.exports}}]);