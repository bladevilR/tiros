(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5683f570","chunk-7aea4a88","chunk-41d7c2b0","chunk-4f6033d7","chunk-42391c95","chunk-535429be","chunk-24cb054c","chunk-5e4e265b","chunk-75c336bb","chunk-42d86cfa","chunk-056e7708","chunk-88e6a632","chunk-2e6aa6aa","chunk-46a3fbfc","chunk-5c0dde06","chunk-2d0c17f7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7"],{"0196":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bodyWrapper"},[e("div",{staticStyle:{height:"calc(100vh - 190px)"}},[e("vxe-table",{ref:"listTable",staticStyle:{height:"calc(100vh - 190px)"},attrs:{border:"","max-height":"100%",align:t.allAlign,data:t.tableData,"show-overflow":"tooltip","edit-config":{trigger:"manual",mode:"row"}}},[e("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),e("vxe-table-column",{attrs:{field:"name",align:"left","header-align":"center",title:"设备名称","min-width":"120"}}),e("vxe-table-column",{attrs:{field:"code",title:"设备编码",width:"120"}}),e("vxe-table-column",{attrs:{field:"maximoAssetType",title:"设备类型",width:"100"}}),e("vxe-table-column",{attrs:{field:"vendor",title:"厂商",width:"120"}}),e("vxe-table-column",{attrs:{field:"brand",title:"品牌",width:"120"}}),e("vxe-table-column",{attrs:{field:"manufNo",title:"出厂编号",width:"120"}}),e("vxe-table-column",{attrs:{field:"model",title:"规格类型","min-width":"140",align:"left","header-align":"center"}})],1)],1)])},i=[],n=a("3bcd"),o={name:"ChileInfo",props:{trainNo:{type:String,default:""},structureDetailId:{type:String,default:""}},data:function(){return{queryParam:{structureDetailId:"",trainNo:""},totalResult:0,allAlign:"center",tableData:[],count:""}},created:function(){},watch:{structureDetailId:{immediate:!0,handler:function(t){this.queryParam.parentId=t,this.queryParam.trainNo=this.trainNo,this.findList()}}},methods:{findList:function(){var t=this;this.loading=!0,Object(n["N"])(this.queryParam).then((function(e){t.loading=!1,t.tableData=e.result,null!=e.result&&null!=e.result.ext&&(t.tableData.brand=e.result.ext.brand,t.tableData.model=e.result.ext.model,t.tableData.vendor=e.result.ext.vendor,t.tableData.manufNo=e.result.ext.manufNo)}))},loadData:function(){this.findList()},jumpInfo:function(t){}}},l=o,s=a("2877"),c=Object(s["a"])(l,r,i,!1,null,"093d7b1e",null);e["default"]=c.exports},"079a":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("a-card",{attrs:{"body-style":t.cardStyle}},[e("div",[e("a-form",{attrs:{form:t.form}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:10,sm:24}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"设备编码"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["code"],expression:"[ 'code' ]",modifiers:{trim:!0}}],attrs:{disabled:""}})],1)],1),e("a-col",{attrs:{md:10,sm:24}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"设备名称"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["name"],expression:"[ 'name' ]",modifiers:{trim:!0}}],attrs:{disabled:""}})],1)],1)],1),e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:10,sm:24}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"上级设备"}},[e("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["parentName"],expression:"['parentName' ]",modifiers:{trim:!0}}],attrs:{disabled:"",triggerChange:!0}})],1)],1),e("a-col",{attrs:{md:10,sm:24}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"设备类型"}},[e("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["maximoAssetType"],expression:"['maximoAssetType' ]",modifiers:{trim:!0}}],attrs:{disabled:"",triggerChange:!0}})],1)],1)],1),e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:10,sm:24}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"设备品牌"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["brand"],expression:"[ 'brand' ]",modifiers:{trim:!0}}],attrs:{disabled:""}})],1)],1),e("a-col",{attrs:{md:10,sm:24}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"规格型号"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["model"],expression:"[ 'model' ]",modifiers:{trim:!0}}],attrs:{disabled:""}})],1)],1)],1),e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:10,sm:24}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"设备厂商"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["vendor"],expression:"[ 'vendor' ]",modifiers:{trim:!0}}],attrs:{disabled:""}})],1)],1),e("a-col",{attrs:{md:10,sm:24}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"出厂编号"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["manufNo"],expression:"[ 'manufNo' ]",modifiers:{trim:!0}}],attrs:{disabled:""}})],1)],1)],1),e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:10,sm:24}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"所属位置"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["locationCode"],expression:"[ 'locationCode' ]",modifiers:{trim:!0}}],attrs:{disabled:""}})],1)],1),e("a-col",{attrs:{md:10,sm:24}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"位置名称"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["locationName"],expression:"[ 'locationName' ]",modifiers:{trim:!0}}],attrs:{disabled:""}})],1)],1)],1),e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:24,sm:24}},[e("a-form-item",{attrs:{labelCol:t.labelCol1,wrapperCol:t.wrapperCol1,label:"备注"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["remark"],expression:"[ 'remark' ]",modifiers:{trim:!0}}],attrs:{disabled:""}})],1)],1)],1)],1)],1)])},i=[],n=a("3bcd"),o={name:"ResBasicInfo",props:["trainNo","structureDetail"],data:function(){return{cardStyle:{padding:"10px",height:"calc(100vh - 185px)"},labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:15}},labelCol1:{xs:{span:24},sm:{span:2}},wrapperCol1:{xs:{span:24},sm:{span:21}},queryParam:{structureDetailId:"",trainNo:""},allAlign:"center",tableData:[],form:this.$form.createForm(this)}},watch:{structureDetail:{immediate:!0,handler:function(t){this.queryParam.structureDetailId=t,this.findList()}}},methods:{findList:function(){var t=this;this.queryParam.maximoAssetId=this.structureDetail,this.queryParam.trainNo=this.trainNo,Object(n["t"])({maximoAssetId:this.structureDetail}).then((function(e){t.tableData=e.result,null!=e.result&&(t.form.setFieldsValue({code:t.tableData.code,name:t.tableData.name,parentName:t.tableData.parentName,maximoAssetType:t.tableData.maximoAssetType,locationCode:t.tableData.locationCode,locationName:t.tableData.locationName,remark:t.tableData.remark}),null!=e.result.ext&&t.form.setFieldsValue({brand:t.tableData.ext.brand,model:t.tableData.ext.model,vendor:t.tableData.ext.vendor,manufNo:t.tableData.ext.manufNo}))}))}}},l=o,s=a("2877"),c=Object(s["a"])(l,r,i,!1,null,"c3ff4290",null);e["default"]=c.exports},2592:function(t,e,a){"use strict";a("5538")},"25e0":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{title:t.title,centered:"",width:500,visible:t.visible,confirmLoading:t.confirmLoading,cancelText:"关闭",destroyOnClose:!0},on:{ok:t.handleOk,cancel:t.handleCancel}},[e("a-spin",{attrs:{spinning:t.confirmLoading}},[e("a-form",{attrs:{form:t.form}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"检查日期"}},[e("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["checkDate",t.validatorRules.checkDate],expression:"['checkDate', validatorRules.checkDate]"}],staticStyle:{width:"100%"},attrs:{format:"YYYY-MM-DD",placeholder:"选择检查日期"},on:{change:t.changeCheckDate}})],1),e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"检查结果"}},[e("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator",value:["checkResult",t.validatorRules.checkResult],expression:"['checkResult', validatorRules.checkResult]"}],attrs:{triggerChange:!0,placeholder:"请选择检查结果",dictCode:"bu_work_order_record_result"}})],1),e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"质量负责人"}},[e("a-input",{ref:"userSelect",staticStyle:{width:"100%"},attrs:{placeholder:"请选择质量负责人",open:!1},on:{click:function(e){return t.openSelectUser()}},model:{value:t.checkUserName,callback:function(e){t.checkUserName=e},expression:"checkUserName"}},[e("a-icon",{attrs:{slot:"suffix",type:"ellipsis"},slot:"suffix"})],1)],1),e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"备注"}},[e("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["remark"],expression:"['remark']",modifiers:{trim:!0}}],attrs:{placeholder:"请输入备注"}})],1)],1)],1),e("user-list",{ref:"userSelectModal",attrs:{multiple:!1},on:{ok:t.onSelectUser}})],1)},i=[],n=a("b245"),o=a("b7b4"),l=a("c1df"),s=a.n(l),c={name:"ConfirmForm",components:{UserList:n["default"]},data:function(){return{title:"检查确认",visible:!1,recordId:"",checkUserName:"",checkUserId:"",model:{},confirmLoading:!1,labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},form:this.$form.createForm(this),validatorRules:{checkDate:{rules:[{required:!0,message:"请选择检查日期!"}]},checkResult:{rules:[{required:!0,message:"请选择检查结果!"}]}}}},mounted:function(){},methods:{confirm:function(t){var e=this;this.form.resetFields(),this.visible=!0,this.confirmLoading=!1,this.recordId=t,this.model=Object.assign({},{checkDate:s()(new Date).format("YYYY-MM-DD")}),this.$nextTick((function(){e.form.setFieldsValue({checkDate:e.model.checkDate})})),this.checkUserName=this.$store.getters.userInfo.realname,this.checkUserId=this.$store.getters.userInfo.id},changeCheckDate:function(t){t&&(this.model.checkDate=t)},handleOk:function(){var t=this;t.form.validateFields((function(e,a){if(!e){t.confirmLoading=!0;var r=Object.assign(t.model,a,{checkDate:s()(t.model.checkDate).format("YYYY-MM-DD"),id:t.recordId,checkUserName:t.checkUserName,checkUserId:t.checkUserId});Object(o["f"])(r).then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok",r),t.close()):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1}))}}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1},openSelectUser:function(){this.$refs.userSelectModal.showModal(),this.$refs.userSelect.blur()},onSelectUser:function(t){t.length&&(this.checkUserName=t[0].realname,this.checkUserId=t[0].id,this.$forceUpdate())}}},u=c,d=a("2877"),m=Object(d["a"])(u,r,i,!1,null,null,null);e["default"]=m.exports},"260f":function(t,e,a){},"353a":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{width:"80%",visible:t.visible,title:t.title,centered:"",bodyStyle:{height:"80vh"},confirmLoading:t.confirmLoading,destroyOnClose:!0,footer:null},on:{cancel:t.handleCancel}},[e("div",[e("iframe",{staticClass:"filename",staticStyle:{height:"calc(80vh - 25px)"},attrs:{src:t.filePath,width:"100%",frameborder:"0"}})])])},i=[],n=a("e2aa"),o={name:"DocPreviewModal",props:{title:{type:String,default:"文件预览"}},data:function(){return{visible:!1,confirmLoading:!1,filePath:""}},methods:{handleFilePath:function(t){var e=this;Object(n["c"])(t).then((function(t){if(t.success){var a=t.result;e.visible=!0,e.filePath=window._CONFIG["onlinePreviewDomainURL"]+"?url="+encodeURIComponent(a)}else e.$message.warning("查看文件失败")}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},l=o,s=(a("9216"),a("2877")),c=Object(s["a"])(l,r,i,!1,null,"484795fd",null);e["default"]=c.exports},"3ab9":function(t,e,a){},"3bcd":function(t,e,a){"use strict";a.d(e,"P",(function(){return i})),a.d(e,"N",(function(){return n})),a.d(e,"F",(function(){return o})),a.d(e,"J",(function(){return l})),a.d(e,"t",(function(){return s})),a.d(e,"i",(function(){return b})),a.d(e,"j",(function(){return v})),a.d(e,"h",(function(){return w})),a.d(e,"g",(function(){return C})),a.d(e,"l",(function(){return y})),a.d(e,"c",(function(){return k})),a.d(e,"e",(function(){return x})),a.d(e,"f",(function(){return _})),a.d(e,"d",(function(){return D})),a.d(e,"b",(function(){return N})),a.d(e,"x",(function(){return P})),a.d(e,"z",(function(){return S})),a.d(e,"w",(function(){return I})),a.d(e,"H",(function(){return T})),a.d(e,"I",(function(){return j})),a.d(e,"y",(function(){return q})),a.d(e,"A",(function(){return O})),a.d(e,"B",(function(){return R})),a.d(e,"M",(function(){return L})),a.d(e,"r",(function(){return $})),a.d(e,"E",(function(){return z})),a.d(e,"k",(function(){return d})),a.d(e,"D",(function(){return m})),a.d(e,"u",(function(){return u})),a.d(e,"L",(function(){return c})),a.d(e,"a",(function(){return f})),a.d(e,"K",(function(){return A})),a.d(e,"m",(function(){return F})),a.d(e,"p",(function(){return J})),a.d(e,"o",(function(){return B})),a.d(e,"G",(function(){return h})),a.d(e,"v",(function(){return p})),a.d(e,"C",(function(){return g})),a.d(e,"n",(function(){return U})),a.d(e,"q",(function(){return E})),a.d(e,"s",(function(){return W})),a.d(e,"O",(function(){return M}));var r=a("0fea"),i=function(t){return Object(r["d"])("/produce/train/history/tree/line-train",t)},n=function(t){return Object(r["d"])("/produce/train/history/maximo-asset/list-child",t)},o=function(t){return Object(r["d"])("/produce/train/history/train/get",t)},l=function(t){return Object(r["d"])("/produce/train/history/train/period",t)},s=function(t){return Object(r["d"])("/produce/train/history/maximo-asset/get",t)},c=function(t){return Object(r["d"])("/produce/train/history/work/page",t)},u=function(t){return Object(r["d"])("/produce/train/history/measure/page",t)},d=function(t){return Object(r["d"])("/produce/train/history/fault/page",t)},m=function(t){return Object(r["d"])("/produce/train/history/forms/page",t)},f=function(t){return Object(r["d"])("/produce/train/history/change/page",t)},h=function(t){return Object(r["d"])("/produce/train/history/train/period",t)},p=function(t){return Object(r["d"])("/produce/train/history/workLeaveRecord/page",t)},g=function(t){return Object(r["d"])("/produce/train/history/workRectify/page",t)},b=function(t){return Object(r["d"])("/produce/fault/detail/count",t)},v=function(t){return Object(r["d"])("/produce/fault/detail/page",t)},y=function(t){return Object(r["d"])("/produce/fault/statistics",t)},w=function(t){return Object(r["j"])("/produce/fault/compare",t)},C=function(t){return Object(r["d"])("/produce/fault/time-effect/data",t)},k=function(t){return Object(r["d"])("/produce/cost/detail/count",t)},x=function(t){return Object(r["d"])("/produce/cost/detail/page",t)},_=function(t){return Object(r["j"])("/produce/cost/statistics",t)},D=function(t){return Object(r["d"])("/produce/cost/compare/count-6year",t)},N=function(t){return Object(r["j"])("/produce/cost/compare",t)},P=function(t){return Object(r["d"])("/produce/plan/list",t)},S=function(t){return Object(r["d"])("/produce/plan/task/listByPlanId/".concat(t))},I=function(t){return Object(r["d"])("/produce/plan/get/".concat(t))},T=function(t){return Object(r["d"])("/serialPlan/plan/get/".concat(t))},j=function(t){return Object(r["d"])("/produce/plan/task/get/".concat(t))},q=function(t){return Object(r["d"])("/produce/plan/regu/list/".concat(t))},O=function(t){return Object(r["d"])("/produce/plan/train-struct/list/".concat(t))},R=function(t){return Object(r["d"])("/produce/plan/train-struct/orders/".concat(t))},L=function(t){return Object(r["d"])("/workshop/list",t)},$=function(t){return Object(r["d"])("/produce/workshop/fault/latest",t)},z=function(t){return Object(r["d"])("/produce/workshop/workstation/list",t)},A=function(t){return Object(r["d"])("/produce/workshop/train-track",t)},F=function(t){return Object(r["d"])("/produce/kpi/group",t)},J=function(t){return Object(r["d"])("/produce/kpi/user",t)},B=function(t){return Object(r["d"])("/produce/kpi/plan/list",t)},U=function(t){return Object(r["d"])("/produce/kpi/plan/get",t)},E=function(t){return Object(r["d"])("/serialPlan/plan/material/lack",t)},W=function(t){return Object(r["d"])("/board/plan-group-statistic/get-last-working-plan",t)},M=function(t){return Object(r["d"])("/board/plan-group-statistic/list",t)}},"3cf2":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("div")},i=[],n=a("e8ae"),o=a("21a6"),l=a("b7b4"),s="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",c={name:"JobCheckTableExport",data:function(){return{}},props:{},created:function(){},mounted:function(){},methods:{sortArray:function(t){return t.sort(this.compare("sortNo")),t},compare:function(t){return function(e,a){return e[t]-a[t]}},printByRow:function(t){t.itemList=this.sortArray(t.itemList),this.initWorkBook(t)},printById:function(t){var e=this;Object(l["A"])({id:t}).then((function(t){t.success&&(t.result.itemList=e.sortArray(t.result.itemList),e.initWorkBook(t.result))}))},initWorkBook:function(t){var e=new n["Workbook"];e.creator="GY",e.lastModifiedBy="2021-10-28",e.created=new Date,e.modified=new Date,e.lastPrinted=new Date;var a=e.addWorksheet("Sheet1",{properties:{defaultRowHeight:30,defaultColWidth:22},pageSetup:{paperSize:9}});a.addRows([["车辆连挂作业过程检查项点"]]),a.getCell("A2").value="车号："+(t.trainNo||""),a.getCell("D2").value="部件名称："+(t.assetName||""),a.getCell("G2").value="作业周期："+(t.period||""),a.getCell("A3").value="部件编号："+(t.assetNo||""),a.getCell("D3").value="作业位置："+(t.location||""),a.getCell("G3").value="作业班组："+(t.groupName||""),a.getColumn("A").width=15,a.getColumn("B").width=30,a.getColumn("C").width=60,a.mergeCells("A1:J1"),a.mergeCells("A2:C2"),a.mergeCells("D2:F2"),a.mergeCells("G2:J2"),a.mergeCells("A3:C3"),a.mergeCells("D3:F3"),a.mergeCells("G3:J3"),a.addRows([["序号","项点","检查内容","等级","检查情况","结果","作业时间","检查方式","检查人","检查时间"]]);var r=[];(t.itemList||[]).forEach((function(t,e,a){for(var i="",n=0,o=5;n<o;n++)t.checkLevel>n?i+="★":i+="☆";r.push([t.sortNo||"",t.title||"",t.content||"",i,t.checkDesc||"",t.checkUserName?t.checkResult_dictText:"",t.workTime||"",t.checkMethod||"",t.checkUserName||"",t.checkTime||""])})),a.addRows(r);var i=4+(t.itemList||[]).length+1;a.mergeCells("A".concat(i,":J").concat(i)),a.getCell("A".concat(i+1)).value="参考工艺文件",a.mergeCells("A".concat(i+1,":B").concat(i+1)),a.mergeCells("C".concat(i+1,":J").concat(i+1));var l="";(t.techLinkList||[]).forEach((function(t,e,a){l+="".concat(e+1,"、").concat(t.teckBookName).concat(e<a.length-1?"\n":"")})),a.getCell("C".concat(i+1)).value=l;var c=12*((t.techLinkList||[]).length||1)+18,u=i+2;a.mergeCells("A".concat(u,":J").concat(u)),a.mergeCells("A".concat(u+1,":G").concat(u+1)),a.getCell("A".concat(u+1)).value="不合格项汇总",a.getCell("H".concat(u+1)).value="整改情况",a.getCell("I".concat(u+1)).value="复查时间",a.getCell("J".concat(u+1)).value="复查人",(t.rectifyList||[]).forEach((function(t,e,r){a.mergeCells("A".concat(u+e+2,":G").concat(u+e+2)),a.getCell("A".concat(u+e+2)).value=t.itemInfo,a.getCell("H".concat(u+e+2)).value=t.rectifyDesc,a.getCell("I".concat(u+e+2)).value=t.reviewTime,a.getCell("J".concat(u+e+2)).value=t.reviewUserName}));var d=u+(t.rectifyList||[]).length+2;a.mergeCells("A".concat(d,":J").concat(d)),a.getCell("A".concat(d+1)).value="评定",a.mergeCells("A".concat(d+1,":B").concat(d+1)),a.mergeCells("C".concat(d+1,":J").concat(d+1));var m="";(t.judgeList||[]).forEach((function(t,e,a){m+="评定人：".concat(t.jdUserName,"；评定时间：").concat(t.jdTime,"；评定内容：").concat(t.jdContent,"；").concat(e<a.length-1?"\n":"")})),a.getCell("C".concat(d+1)).value=m;var f=12*((t.judgeList||[]).length||1)+18,h=d+2;a.mergeCells("A".concat(h,":J").concat(h));var p=["表中只列出关键项点，检查人员在检查时参照工艺文件标准执行。","检查人员必须对当天作业内容进行检查。","表中所有内容全部现场检查时填写完成，并悬挂于部件上，随部件流转。","作业时间由作业班组填写，其余由检查人员填写。“检查情况”一栏详细记录检查情况；“结果”一栏对检查合格的画“√”不合格的画“×”；“检查方式”一栏写明检查手段，如：目视、测量、操作等。","检查人员对不合格项视情节严重情况开具整改单，及时提出整改意见，并督促整改，整改完成后及时进行复查。","由检查人员、质量工程师及专业工程师对整体作业质量做出最终判定。"];a.getCell("A".concat(h+1)).value="说明",a.mergeCells("A".concat(h+1,":B").concat(h+1)),a.mergeCells("C".concat(h+1,":J").concat(h+1));var g="";p.forEach((function(t,e,a){g+="".concat(e+1,"、").concat(t).concat(e<a.length-1?"\n":"")})),a.getCell("C".concat(h+1)).value=g;var b=12*(p.length||1)+18;a._rows.forEach((function(e,r){a.getRow(r+1).height=i==r?c:d==r?f:h==r?b:30,e._cells.forEach((function(e,n){var o=a.getCell(e._address);o.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},[1,2].indexOf(r)>-1||r-3>=0&&r-3<=t.itemList.length&&[1,2,4].indexOf(n)>-1||i==r&&n>=2||d>r&&u<r&&n<7||d==r&&n>=2||h==r&&n>=2?o.alignment={vertical:"middle",horizontal:"left",wrapText:!0}:o.alignment={vertical:"middle",horizontal:"center",wrapText:!0},[0,1,2,3,u].indexOf(r)>-1?(o.fill={type:"pattern",pattern:"darkGray",fgColor:{argb:"FFe9e9e9"}},o.font={name:"黑体",family:4,size:14,underline:!1,bold:!0}):o.font=r<i&&3==n?{name:"黑体",family:4,size:18,underline:!1,bold:!1}:{name:"黑体",family:4,size:12,underline:!1,bold:!1}}))})),e.xlsx.writeBuffer().then((function(e){var a=new Blob([e],{type:s});o["saveAs"](a,"".concat(t.title,".xlsx"))}))}}},u=c,d=a("2877"),m=Object(d["a"])(u,r,i,!1,null,"188fb66a",null);e["default"]=m.exports},"3ff1":function(t,e,a){},"45ff":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{ref:"calcHeight"})},i=[],n=a("e8ae"),o=a("21a6"),l=a("8fad"),s="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",c={name:"TableExport",data:function(){return{}},mounted:function(){},methods:{printById:function(t){var e=this;Object(l["Kb"])({id:t}).then((function(t){t.success?e.initWorkBook(t.result):e.$message.error("获取记录表详情失败")})).catch((function(t){e.$message.error("获取记录表详情异常")}))},printByData:function(t){this.initWorkBook(t)},initWorkBook:function(t){var e=new n["Workbook"];e.creator="GY",e.lastModifiedBy="2021-10-28",e.created=new Date,e.modified=new Date,e.lastPrinted=new Date;var a=e.addWorksheet("Sheet1",{properties:{defaultColWidth:22,alignment:{vertical:"middle",horizontal:"left",wrapText:!0}},pageSetup:{paperSize:9}}),r=[];a.mergeCells("A1:C1"),a.getCell("A1").value="车号："+(t.trainNo||""),r.push({cell:"A1",horizontal:"left",fill:!0,size:14,bold:!0}),0===t.updown?(a.mergeCells("A2:C2"),a.getCell("A2").value="部件号："+(t.manufNo||""),r.push({cell:"A2",horizontal:"left",fill:!0,size:14,bold:!0})):1===t.updown?(a.mergeCells("A2:C2"),a.getCell("A2").value="原部件序列号："+(t.manufNo||""),r.push({cell:"A2",horizontal:"left",fill:!0,size:14,bold:!0}),a.mergeCells("A3:C3"),a.getCell("A3").value="新部件序列号："+(t.manufNoUp||""),r.push({cell:"A3",horizontal:"left",fill:!0,size:14,bold:!0})):a.mergeCells("A1:C2"),1===t.updown?a.mergeCells("D1:F3"):a.mergeCells("D1:F2"),a.getCell("D1").value=t.title||t.workRecName||"",r.push({cell:"D1",fill:!0,size:14,bold:!0}),a.mergeCells("G1:H1"),a.getCell("G1").value="作业日期："+(t.workDate||""),r.push({cell:"G1",fill:!0,horizontal:"left",size:14,bold:!0}),a.mergeCells("I1:J1"),a.getCell("I1").value="完工日期："+(t.finishDate||""),r.push({cell:"I1",fill:!0,horizontal:"left",size:14,bold:!0}),1===t.updown?a.mergeCells("G2:J3"):a.mergeCells("G2:J2"),a.getCell("G2").value="作业班组："+(t.workGroupName||""),r.push({cell:"G2",fill:!0,horizontal:"left",size:14,bold:!0}),a.getColumn("A").width=15,a.getColumn("B").width=30,a.getColumn("C").width=60,a.getColumn("D").width=15,a.getColumn("E").width=60,a.getColumn("F").width=60,a.getRow(1).height=30,a.getRow(2).height=30,a.getRow(3).height=30,1===t.updown&&(a.getRow(4).height=30);var i={A:"序号",B:"项目",C:"作业内容",D:"控制点",E:"技术要求",F:"作业情况",G:"结果",H:"自检",I:"互检",J:"专检"};for(var l in i)a.getCell(l+(1===t.updown?4:3)).value=i[l],r.push({cell:l+(1===t.updown?4:3),fill:!0,size:14,bold:!0});var c=1===t.updown?5:4,u=0;t.categoryList.forEach((function(t,e){a.getCell("A".concat(c+e)).value=t.recIndex,r.push({cell:"A".concat(c+e)}),a.mergeCells("A".concat(c+e,":A").concat(c+e+t.detailList.length-1)),a.getCell("B".concat(c+e)).value=t.reguTitle,r.push({cell:"B".concat(c+e),horizontal:"left"}),a.mergeCells("B".concat(c+e,":B").concat(c+e+t.detailList.length-1)),t.detailList.forEach((function(t,i){a.getCell("C".concat(c+e+i)).value="\n".concat(t.workContent||"","\n"),r.push({cell:"C".concat(c+e+i),horizontal:"left"}),a.getCell("D".concat(c+e+i)).value=t.checkLevel_dictText||"",r.push({cell:"D".concat(c+e+i)}),a.getCell("E".concat(c+e+i)).value="\n".concat(t.techRequire||"","\n"),r.push({cell:"E".concat(c+e+i),horizontal:"left"}),a.getCell("F".concat(c+e+i)).value=0==t.isIgnore?t.workInfo:t.ignoreDesc,r.push({cell:"F".concat(c+e+i),horizontal:"left"}),a.getCell("G".concat(c+e+i)).value=t.result?"√":"□",r.push({cell:"G".concat(c+e+i)}),a.getCell("H".concat(c+e+i)).value=t.selfCheck||"",r.push({cell:"H".concat(c+e+i)}),a.getCell("I".concat(c+e+i)).value=t.guarderCheck||"",r.push({cell:"I".concat(c+e+i)}),a.getCell("J".concat(c+e+i)).value=t.monitorCheck||"",r.push({cell:"J".concat(c+e+i)})})),c+=t.detailList.length-1,u+=t.detailList.length})),u+=1===t.updown?5:4,a.mergeCells("A".concat(u,":J").concat(u)),a.getRow(u).height=30,r.push({cell:"A".concat(u),bold:!0}),u+=1;var d=t.measureToolList||[];d.length&&(a.mergeCells("A".concat(u,":B").concat(u+d.length-1)),a.getCell("A".concat(u)).value="计量器具使用",r.push({cell:"A".concat(u)}),d.forEach((function(t,e,i){a.mergeCells("C".concat(u+e,":D").concat(u+e)),a.getCell("C".concat(u+e)).value=" \n名称："+(t.name||"")+"\n",r.push({cell:"C".concat(u+e),horizontal:"left"}),a.getCell("E".concat(u+e)).value=" \n规格型号："+(t.model||"")+"\n",r.push({cell:"E".concat(u+e),horizontal:"left"}),a.getCell("F".concat(u+e)).value=" \n出厂编号："+(t.serialNo||"")+"\n",r.push({cell:"F".concat(u+e),horizontal:"left"}),a.mergeCells("G".concat(u+e,":H").concat(u+e)),a.getCell("G".concat(u+e)).value=" \n上次检验时间："+(t.lastCheckTime||"")+"\n",r.push({cell:"G".concat(u+e),horizontal:"left"}),a.mergeCells("I".concat(u+e,":J").concat(u+e)),a.getCell("I".concat(u+e)).value=" \n下次检验时间："+(t.nextCheckTime||"")+"\n",r.push({cell:"I".concat(u+e),horizontal:"left"})})),u+=d.length,a.mergeCells("A".concat(u,":J").concat(u)),a.getRow(u).height=30,r.push({cell:"A".concat(u),bold:!0}),u+=1);var m=["控制点分为H点和W点，“H”点为该项工序操作过程必须经过专业工程师现场检查确认的工序，“W”点为班组长可在工序完工后确认的工序。","“自检”栏为作业者本人进行签字；“互检”栏由作业监护人员进行检查签字；“专检”栏由班组长进行检查签字。“质量负责人”由相关专业工程师进行签字。","“作业情况”需根据实际情况填写。若该项工序无异常则由作业者在框中填入√；若该项工序存在异常，则将实际故障情况填入框内。","“结果”栏方框在完成该项作业及检查后，由工班长进行填写。若无异常则在方框内填入√，若有异常，工班长需对故障情况进行确认，在方框内填入×，并将故障在“备注”栏进行汇总。","作业内容中有数据要求的一并填入“作业情况”栏。"];a.mergeCells("A".concat(u,":J").concat(u));var f="";m.forEach((function(t,e,a){f+="".concat(e+1,"、").concat(t).concat(e<a.length-1?"\n":"")})),f="说明：\n"+f+"\n",f="\n检查结果：".concat(0===t.checkResult?"未通过":"通过","                                        检查日期：").concat(t.checkDate||"            ","                                        质量负责人：").concat(t.checkUserName||"            ","\n\n")+f,a.getCell("A".concat(u)).value=f,r.push({cell:"A".concat(u),horizontal:"left",border:top});var h=12*(m.length+4)+18;a.getRow(u).height=h,r.forEach((function(t,e,r){var i=a.getCell(t.cell);i.alignment={vertical:"middle",horizontal:t.horizontal||"center",wrapText:!0},t.fill&&(i.fill={type:"pattern",pattern:"darkGray",fgColor:{argb:"FFe9e9e9"}}),i.font={name:"黑体",family:4,size:t.size||12,underline:!1,bold:t.bold||!1},i.padding={top:10,left:10,bottom:10,right:10},i.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}})),e.xlsx.writeBuffer().then((function(e){var a=new Blob([e],{type:s});o["saveAs"](a,"".concat(t.title||t.workRecName,".xlsx"))}))}}},u=c,d=a("2877"),m=Object(d["a"])(u,r,i,!1,null,"dac1198a",null);e["default"]=m.exports},"4b54":function(t,e,a){},5538:function(t,e,a){},5633:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("span",[e("a-select",{key:t.key,attrs:{"allow-clear":"",value:t.getValueSting,disabled:t.disabled,placeholder:"线路"},on:{change:t.handleChange,select:t.onSelect}},[e("a-select-option",{attrs:{value:void 0}},[t._v("请选择")]),t._l(t.optionData,(function(a,r){return e("a-select-option",{key:r,attrs:{value:a.lineId}},[e("span",{staticStyle:{display:"inline-block",width:"100%"},attrs:{title:a.lineName}},[t._v(" "+t._s(a.lineName)+" ")])])}))],2)],1)},i=[],n=a("8fad"),o={name:"LineSelectList",props:{value:[String],triggerChange:Boolean,disabled:Boolean,defaultFirst:Boolean},data:function(){return{optionData:[],selectValue:"",key:0}},created:function(){this.findList()},computed:{getValueSting:function(){return null!=this.value?this.value.toString():void 0}},methods:{findList:function(){var t=this;Object(n["Jb"])().then((function(e){e.success&&(t.optionData=e.result,t.defaultFirst&&t.optionData&&t.optionData.length>0&&setTimeout((function(){t.$emit("change",t.optionData[0].lineId),t.$emit("input",t.optionData[0].lineId)}),500))}))},handleChange:function(t,e){var a="";if(e&&e.componentOptions.children[0].data&&(a=e.componentOptions.children[0].data.attrs.title),this.$emit("change",t),this.$emit("input",t),this.$emit("changeName",a),this.triggerChange)if(t){var r=this.optionData[e.key];this.$emit("change",t,r)}else this.$emit("change",t,null)},onSelect:function(t,e){if(t){var a=this.optionData[e.data.key];this.$emit("select",t,a)}else this.$emit("select","",null)}}},l=o,s=a("2877"),c=Object(s["a"])(l,r,i,!1,null,"77265147",null);e["default"]=c.exports},"6ee5":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("div",[e("a-row",{attrs:{type:"flex",gutter:16}},[e("a-col",{staticClass:"leftPart",attrs:{md:5,sm:24}},[e("a-card",{attrs:{id:"leftPart"}},[e("div",{staticClass:"titleDiv"},[e("a-icon",{attrs:{type:"apartment"}}),t._v(" 车辆履历树 ")],1),t.treeData.length?e("a-tree",{attrs:{"tree-data":t.treeData,replaceFields:{title:"longTitle",key:"id"},defaultExpandedKeys:t.defaultSelectedKeys,"default-selected-keys":t.defaultKey,"load-data":t.queryTreeData},on:{select:t.selectPid}}):t._e()],1)],1),e("a-col",{staticClass:"rightPart",attrs:{md:19,sm:24}},[e("a-card",{attrs:{id:"rightPart"}},[e("a-tabs",{attrs:{activeKey:t.activeKey},on:{change:t.changeTab}},[e("a-tab-pane",{key:"1",attrs:{tab:"基本信息"}},[this.type?e("train-res-basic-info",{attrs:{structureDetail:t.FstructureDetailId,"train-no":t.trainNo}}):e("res-basic-info",{attrs:{structureDetail:t.FstructureDetailId,"train-no":t.trainNo}})],1),e("a-tab-pane",{key:"2",attrs:{tab:"工单记录"}},[e("work-record",{attrs:{trainNo:t.trainNo,structureDetailId:t.FstructureDetailId}})],1),e("a-tab-pane",{key:"3",attrs:{tab:"更换记录"}},[e("replace-record",{attrs:{trainNo:t.trainNo,structureDetailId:t.FstructureDetailId}})],1),e("a-tab-pane",{key:"4",attrs:{tab:"故障记录"}},[e("fault-record",{attrs:{trainNo:t.trainNo,structureDetailId:t.FstructureDetailId}})],1),this.type?t._e():e("a-tab-pane",{key:"6",attrs:{tab:"子部件"}},[e("child-info",{attrs:{trainNo:t.trainNo,structureDetailId:t.FstructureDetailId}})],1),e("a-tab-pane",{key:"7",attrs:{tab:"作业表单"}},[e("related-form",{attrs:{trainNo:t.trainNo,structureDetailId:t.FstructureDetailId}})],1),this.type?e("a-tab-pane",{key:"8",attrs:{tab:"整改项"}},[e("rectify-record",{attrs:{trainNo:t.trainNo}})],1):t._e(),this.type?e("a-tab-pane",{key:"9",attrs:{tab:"开口项"}},[e("open-item-record",{attrs:{trainNo:t.trainNo}})],1):t._e()],1)],1)],1)],1)],1)},i=[],n=a("079a"),o=a("3bcd"),l=a("0196"),s=a("c35b"),c=a("dc2e"),u=a("8029"),d=a("abf6"),m=a("b016"),f=a("8019"),h=a("9a7a"),p=a("b2ea");function g(t){return w(t)||y(t)||v(t)||b()}function b(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(t,e){if(t){if("string"==typeof t)return C(t,e);var a={}.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?C(t,e):void 0}}function y(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function w(t){if(Array.isArray(t))return C(t)}function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=Array(e);a<e;a++)r[a]=t[a];return r}var k={name:"ResumePage",components:{TrainResBasicInfo:s["default"],ChildInfo:l["default"],ResBasicInfo:n["default"],ReplaceRecord:c["default"],FaultRecord:u["default"],MeasurementRecord:d["default"],relatedForm:f["default"],WorkRecord:m["default"],RectifyRecord:h["default"],OpenItemRecord:p["default"]},data:function(){return{activeKey:"1",defaultSelectedKeys:[],treeData:[],FstructureDetailId:"",defaultKey:[],type:"",trainNo:"",queryParam:{structureDetailId:""},isequ:""}},created:function(){this.treeLineTrains()},methods:{changeTab:function(t){this.activeKey=t},treeLineTrains:function(){var t=this;Object(o["P"])({}).then((function(e){e.success?(t.treeData=e.result,Array.from(t.treeData,(function(t){t.disabled=!1}))):t.$message.warn("获取线路车辆信息失败")}))},queryTreeData:function(t){var e=this;return new Promise((function(a){if(2===t.dataRef.type&&(e.trainNo=t.dataRef.title),t.dataRef.children&&t.dataRef.children.length>0)a();else{var r=null;3===t.dataRef.type&&(r=t.dataRef.id_);var i={trainNo:e.trainNo,parentId:r};Object(o["N"])(i).then((function(r){r.success&&(t.dataRef.children=r.result.map((function(t){return{id:e.trainNo+"$"+t.id,id_:t.id,title:t.name,longTitle:t.name,type:3,trainNo:e.trainNo}})),e.treeData=g(e.treeData),a())}))}}))},selectPid:function(t,e){var a=e.node.dataRef.type;1!=a&&(this.FstructureDetailId=e.node.dataRef.title,this.type=2===a,this.type&&(this.trainNo=e.node.dataRef.title),3===a&&(this.FstructureDetailId=e.node.dataRef.id_,this.trainNo=e.node.dataRef.trainNo))}}},x=k,_=(a("2592"),a("2877")),D=Object(_["a"])(x,r,i,!1,null,null,null);e["default"]=D.exports},8019:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bodyWrapper"},[e("div",{staticClass:"table-page-search-wrapper"},[e("a-form",{attrs:{layout:"inline"}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:4,sm:24}},[e("a-form-item",{attrs:{label:"修程"}},[e("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_repair_program,name,id"},model:{value:t.queryParam.repairProgramId,callback:function(e){t.$set(t.queryParam,"repairProgramId",e)},expression:"queryParam.repairProgramId"}})],1)],1),e("a-col",{attrs:{md:4,sm:24}},[e("a-form-item",{attrs:{label:"班组:"}},[e("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_mtr_workshop_group,group_name,id"},model:{value:t.queryParam.groupId,callback:function(e){t.$set(t.queryParam,"groupId",e)},expression:"queryParam.groupId"}})],1)],1),e("a-col",{attrs:{md:4,sm:24}},[e("a-form-item",{attrs:{label:"类型:"}},[e("a-select",{attrs:{placeholder:"请选择类型",allowClear:""},model:{value:t.queryParam.formRecordType,callback:function(e){t.$set(t.queryParam,"formRecordType",e)},expression:"queryParam.formRecordType"}},[e("a-select-option",{attrs:{value:""}},[t._v("所有")]),e("a-select-option",{attrs:{value:"1"}},[t._v("作业记录表")]),e("a-select-option",{attrs:{value:"2"}},[t._v("数据记录表")]),e("a-select-option",{attrs:{value:"3"}},[t._v("检查记录表")]),e("a-select-option",{attrs:{value:"4"}},[t._v("工单附件")])],1)],1)],1),e("a-col",{attrs:{md:6,sm:24}},[e("a-form-item",{attrs:{label:"工单日期"}},[e("a-date-picker",{attrs:{format:"YYYY-MM-DD"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)],1),e("a-col",{attrs:{md:6,sm:8}},[e("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[e("a-space",[e("a-button",{on:{click:t.findList}},[t._v("查询")])],1)],1)])],1)],1)],1),e("a-spin",{attrs:{spinning:t.loading}},[e("div",[e("vxe-table",{ref:"listTable",staticStyle:{height:"calc(100vh - 298px)"},attrs:{border:"","max-height":"90%",align:t.allAlign,data:t.tableData,"show-overflow":"tooltip","edit-config":{trigger:"manual",mode:"row"}}},[e("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),e("vxe-table-column",{attrs:{field:"formRecordName",title:"表单名称","min-width":"180",align:"left","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(a){var r=a.row;return[e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return e.stopPropagation(),t.showDetail(r)}}},[t._v(t._s(r.formRecordName))])]}}])}),e("vxe-table-column",{attrs:{field:"formRecordTypeName",title:"表单类型",width:"120"}}),e("vxe-table-column",{attrs:{field:"orderName",title:"所属工单","min-width":"160",align:"left","header-align":"center"}}),e("vxe-table-column",{attrs:{field:"orderTime",title:"工单日期",width:"100"}})],1),e("vxe-pager",{attrs:{perfect:"","current-page":t.queryParam.pageNo,"page-size":t.queryParam.pageSize,total:t.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(e){return t.$set(t.queryParam,"pageNo",e)},"update:current-page":function(e){return t.$set(t.queryParam,"pageNo",e)},"update:pageSize":function(e){return t.$set(t.queryParam,"pageSize",e)},"update:page-size":function(e){return t.$set(t.queryParam,"pageSize",e)},"page-change":t.handlePageChange}})],1)]),e("ViewWorkForm",{ref:"viewWorkForm",on:{ok:function(e){return t.loadData()}}}),e("doc-preview-modal",{ref:"docPreview",attrs:{title:t.previewFileName}})],1)},i=[],n=a("3bcd"),o=a("88da"),l=a("353a"),s=a("c1df"),c=a.n(s),u={name:"FaultRecord",props:{trainNo:{type:String,default:""},structureDetailId:{type:String,default:""}},components:{ViewWorkForm:o["default"],DocPreviewModal:l["default"]},data:function(){return{previewFileName:"",dicSysIdStr:"bu_train_asset_type,name,id,struct_type=1 and train_type_id=(select train_type_id from bu_train_info where train_no='".concat(this.trainNo,"')"),date:null,queryParam:{trainNo:this.trainNo,structureDetailId:"",repairProgramId:"",groupId:"",formRecordType:"",orderTime:"",pageNo:1,pageSize:10},totalResult:0,allAlign:"center",tableData:[],loading:!1}},watch:{structureDetailId:{immediate:!0,handler:function(t){this.queryParam.structureDetailId=t!==this.trainNo?t:"",this.findList()}},trainNo:{immediate:!0,handler:function(t){this.queryParam.trainNo=t,this.findList()}}},methods:{showDetail:function(t){switch(t.formRecordType){case 1:this.jumpFormInfo(t);break;case 2:this.jumpFormInfo(t);break;case 3:this.jumpFormInfo(t);break;case 4:this.previewImage(t);break}},jumpFormInfo:function(t){t.instType=t.formType,t.formInstId=t.formRecordId,t.formName=t.formRecordName,this.$refs.viewWorkForm.showModal(t,this.trainNo)},previewImage:function(t){this.previewFileName=t.formRecordName,this.$refs.docPreview.handleFilePath(t.orderAnnexPath)},findList:function(){var t=this;this.loading=!0,this.date?this.queryParam.orderTime=c()(this.date).format("YYYY-MM-DD"):this.queryParam.orderTime="",Object(n["D"])(this.queryParam).then((function(e){t.totalResult=e.result.total,t.tableData=e.result.records})).finally((function(){return t.loading=!1}))},handlePageChange:function(t){var e=t.currentPage,a=t.pageSize;this.queryParam.pageNo=e,this.queryParam.pageSize=a,this.findList()},loadData:function(){this.findList()}}},d=u,m=a("2877"),f=Object(m["a"])(d,r,i,!1,null,"4fa751bf",null);e["default"]=f.exports},8029:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bodyWrapper"},[e("div",{staticClass:"table-page-search-wrapper"},[e("a-form",{attrs:{layout:"inline"}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:6,sm:24}},[e("a-form-item",{attrs:{label:"故障"}},[e("a-input",{attrs:{placeholder:"故障编号或描述"},model:{value:t.queryParam.searchText,callback:function(e){t.$set(t.queryParam,"searchText",e)},expression:"queryParam.searchText"}})],1)],1),e("a-col",{attrs:{md:6,sm:24}},[e("a-form-item",{attrs:{label:"发现日期"}},[e("a-date-picker",{model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)],1),e("a-col",{attrs:{md:6,sm:8}},[e("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[e("a-space",[e("a-button",{on:{click:t.findList}},[t._v("查询")])],1)],1)])],1)],1)],1),e("a-spin",{attrs:{spinning:t.loading}},[e("div",{staticStyle:{height:"calc(100vh - 250px)"}},[e("vxe-table",{ref:"listTable",staticStyle:{height:"calc(100vh - 298px)"},attrs:{border:"","max-height":"90%",align:t.allAlign,data:t.tableData,"show-overflow":"tooltip","edit-config":{trigger:"manual",mode:"row"}}},[e("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),e("vxe-table-column",{attrs:{field:"faultSn",title:"故障编号",width:"140"}}),e("vxe-table-column",{attrs:{field:"fromType_dictText",title:"来源",width:"120"}}),e("vxe-table-column",{attrs:{field:"sysName",title:"故障系统",width:"120"}}),e("vxe-table-column",{attrs:{field:"faultAssetName",title:"故障部件",width:"120"}}),e("vxe-table-column",{attrs:{field:"faultDesc",title:"故障描述","min-width":"140","header-align":"center",align:"left"}}),e("vxe-table-column",{attrs:{field:"handleTime",title:"处理日期",width:"100"}}),e("vxe-table-column",{attrs:{field:"reportUserId",title:"提报人员",width:"100"}}),e("vxe-table-column",{attrs:{field:"reportTime",title:"提报日期",width:"100"}}),e("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",width:"80"}})],1),e("vxe-pager",{attrs:{perfect:"","current-page":t.queryParam.pageNo,"page-size":t.queryParam.pageSize,total:t.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(e){return t.$set(t.queryParam,"pageNo",e)},"update:current-page":function(e){return t.$set(t.queryParam,"pageNo",e)},"update:pageSize":function(e){return t.$set(t.queryParam,"pageSize",e)},"update:page-size":function(e){return t.$set(t.queryParam,"pageSize",e)},"page-change":t.handlePageChange}})],1)])],1)},i=[],n=a("3bcd"),o=a("c1df"),l=a.n(o),s={name:"FaultRecord",props:{trainNo:{type:String,default:""},structureDetailId:{type:String,default:""}},data:function(){return{date:null,queryParam:{assetId:"",searchText:"",happenTime:"",trainNo:this.trainNo,structureDetailId:this.structureDetailId,pageNo:1,pageSize:10},totalResult:0,allAlign:"center",tableData:[],loading:!1}},watch:{structureDetailId:{immediate:!0,handler:function(t){this.queryParam.structureDetailId=t!==this.trainNo?t:"",this.findList()}},trainNo:{immediate:!0,handler:function(t){this.queryParam.trainNo=t,this.findList()}}},methods:{findList:function(){var t=this;this.loading=!0,this.date?this.queryParam.happenTime=l()(this.date).format("YYYY-MM-DD"):this.queryParam.happenTime="",Object(n["k"])(this.queryParam).then((function(e){t.totalResult=e.result.total,t.tableData=e.result.records})).finally((function(){return t.loading=!1}))},handlePageChange:function(t){var e=t.currentPage,a=t.pageSize;this.queryParam.pageNo=e,this.queryParam.pageSize=a,this.findList()}}},c=s,u=a("2877"),d=Object(u["a"])(c,r,i,!1,null,"0274a849",null);e["default"]=d.exports},8522:function(t,e,a){"use strict";a("f000")},"88da":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{title:t.title,centered:"",visible:t.visible,width:"100%",dialogClass:6===t.operator?"fullDialog":"fullDialog no-footer",destroyOnClose:!0},on:{cancel:function(e){t.visible=!1}}},[e("a-button",{attrs:{"na-btn-type":"print",type:"primary"},on:{click:t.exportPrint}},[t._v("导出打印")]),3===t.formType&&1===t.workRecordType?e("div",{staticClass:"table-page-body",staticStyle:{height:"100%","overflow-y":"auto"}},[e("RecordSheetTable",{directives:[{name:"show",rawName:"v-show",value:t.curRecordData,expression:"curRecordData"}],ref:"recordTable"})],1):t._e(),4===t.formType?e("div",{staticClass:"table-page-body",staticStyle:{height:"100%","overflow-y":"auto"}},[e("JobCheckSheetTable",{ref:"jobCheckTable",attrs:{data:t.sheetData}})],1):t._e(),1===t.formType||3===t.formType&&2===t.workRecordType?e("div",{staticClass:"table-page-body",staticStyle:{height:"100%"}},[e("div",{attrs:{id:"luckysheet"}})]):t._e(),6===t.operator?e("template",{slot:"footer"},[e("a-button",{attrs:{type:"primary"},on:{click:t.confirmForm}},[t._v(" 检查确认")]),e("a-button",{on:{click:function(e){t.visible=!1}}},[t._v(" 关闭")])],1):t._e(),e("ConfirmForm",{ref:"confirmForm",on:{ok:t.handleOk}}),e("WorkRecordPrint",{ref:"workRecordPrint",attrs:{luckySheetId:"luckysheet"},on:{sheetPrintOk:t.onSheetPrintOk}}),e("JobCheckTableExport",{ref:"tablePrintRef"}),e("TableExport",{ref:"tablePrintRef2"})],2)},i=[],n=a("b7b4"),o=a("b9c3"),l=a("958d"),s=a("e0ce"),c=a("3cf2"),u=a("45ff"),d=a("8fad"),m=a("7268"),f=a("25e0"),h=a("10f9"),p=a("e24e"),g={name:"ViewWorkForm",components:{RecordSheetTable:l["default"],ConfirmForm:f["default"],JobCheckSheetTable:s["default"],WorkRecordPrint:h["default"],JobCheckTableExport:c["default"],TableExport:u["default"]},props:{operator:{type:Number,default:0}},data:function(){return{sheetData:{},formType:1,workRecordType:0,formName:"",trainNo:"",groupName:"",visible:!1,fileUrl:"",tableData:[],curRecordData:[],curOnlineForm:null,formSheetId:"",formInfo:{},formInstId:"",onLineInstId:"",defaultOptions:{container:"luckysheet",title:"sheet",column:26,row:50,lang:"zh",allowEdit:!1,showinfobar:!1,sheetFormulaBar:!1,showsheetbar:!1,showstatisticBar:!0,enableAddRow:!1,enableAddCol:!1,showtoolbar:!1},printType:0,allItems:!0}},computed:{title:function(){return"表单查看-"+this.trainNo+"车 "+this.formName}},beforeDestroy:function(){luckysheet.destroy()},methods:{exportPrint:function(){try{var t="";switch(this.trainNo&&(t="-"+this.trainNo+"车"),this.formType){case 1:Object(p["a"])(luckysheet.getAllSheets(),this.formName+t);break;case 3:1===this.workRecordType?this.$refs.tablePrintRef2.printByData(this.curRecordData):2===this.workRecordType&&Object(p["a"])(luckysheet.getAllSheets(),this.formName+t);break;case 4:this.$refs.tablePrintRef.printByRow(this.sheetData)}}catch(e){}},initSheet:function(t){t.scrollLeft=0,t.scrollTop=0;var e=JSON.parse(JSON.stringify(this.defaultOptions));e.data=[t],luckysheet.destroy(),luckysheet.create(e)},showModal:function(t,e){try{this.formInfo=t,this.formType=t.instType,this.workRecordType=t.workRecordType,this.trainNo=e,this.formName=t.formName,this.formInstId=t.formInstId,this.allItems=!1,this.loadFormDetail(!1)}catch(a){}},showModalAllItem:function(t,e){try{this.formInfo=t,this.formType=t.instType,this.trainNo=e,this.formName=t.formName,this.formInstId=t.formInstId,this.allItems=!0,this.loadFormDetail(!0)}catch(a){}},loadFormDetail:function(t){this.printType=0;try{switch(this.formType){case 1:this.formInfo.formObjId=this.formInfo.id,this.loadOnlineFormDetail(this.formInfo.task2InstId,this.formInfo.formInstId);break;case 3:1===this.workRecordType?this.loadRecordTableDetail(this.formInfo.task2InstId,this.formInfo.formInstId,t):2===this.workRecordType&&this.loadWorkRecordDetail(this.formInfo.formObjId,this.formInfo.formInstId);break;case 4:this.loadWorkCheckFormDetail(this.formInfo.task2InstId,this.formInfo.formInstId,t)}}catch(e){}},loadWorkRecordDetail:function(t,e){var a=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.visible=!0,Object(d["Db"])(t).then((function(t){if(t.success){var i=JSON.parse(t.result);if(!r)return void a.initSheet(i);Object(o["U"])(e).then((function(t){if(t.success){if(t.result){var e=JSON.parse(t.result);i.data=[],i.celldata=luckysheet.transToCellData(e)}a.initSheet(i)}else a.initSheet(i)}))}else a.$message.error("获取作业记录表模板数据失败")}))},loadWorkCheckFormDetail:function(t,e){var a=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(o["P"])({task2InstId:t,formInstId:e,allItems:r}).then((function(t){if(t.success&&t.result){var e=t.result;a.sheetData=e,a.visible=!0}else a.$message.error("加载记录数据异常")}))},loadOnlineFormDetail:function(t,e){var a=this;this.visible=!0,Object(o["Q"])({task2InstId:t,formInstId:e,needValues:!1}).then((function(t){if(t.success){a.curOnlineForm=t.result;var e=null;if(a.curOnlineForm){if(a.curOnlineForm.result)try{e=JSON.parse(a.curOnlineForm.result)}catch(r){return void a.$message.error("转换表单填写结果异常")}Object(d["Db"])(a.curOnlineForm.formObjId).then((function(t){if(t.success){var r=JSON.parse(t.result);e&&(r.data=[],r.celldata=luckysheet.transToCellData(e)),a.initSheet(r)}else a.$message.error("获取表单模板数据失败")}))}else a.$message.error("获取作业表单数据失败")}else a.$message.error("获取记录表内容错误")}))},loadRecordTableDetail:function(t,e){var a=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(o["R"])({task2InstId:t,formInstId:e,needChecks:!0,needCategory:!0,allItems:r}).then((function(t){t.success&&t.result?(a.curRecordData=t.result,a.curRecordData.categoryList&&a.curRecordData.categoryList.sort((function(t,e){return t.recIndex-e.recIndex})),a.$nextTick((function(){a.$refs.recordTable.loadData(a.curRecordData)})),a.visible=!0):a.$message.error("加载记录数据异常")}))},confirmForm:function(){this.$refs.confirmForm.confirm(this.formInstId)},handleOk:function(t){if(3===this.formType&&2===this.workRecordType){var e=m["a"].searchCellByText("检查结果",luckysheet.getAllSheets()[0].data),a=e.c;if(e){var r=m["a"].getCellText(e.cell),i="1"===t.checkResult?"通过":"不通过";r=r.replace("检查结果：","检查结果："+i),m["a"].setCellValue(e.r,e.c,r)}e=m["a"].searchCellByText("检查日期",luckysheet.getAllSheets()[0].data);var n=e.c;if(e){var o=m["a"].getCellText(e.cell);o=o.replace("检查日期：","检查日期："+t.checkDate),m["a"].setCellValue(e.r,e.c,o)}e=m["a"].searchCellByText("质量负责人",luckysheet.getAllSheets()[0].data);var l=e.c;if(e){var s=m["a"].getCellText(e.cell);s=s.replace("质量负责人：","质量负责人："+t.checkUserName),m["a"].setCellValue(e.r,e.c,s)}if(a===n&&n===l){var c="1"===t.checkResult?"通过":"不通过",u="检查结果："+c;u+="          检查日期："+t.checkDate,u+="          质量负责人："+t.checkUserName,m["a"].setCellValue(e.r,e.c,u)}this.saveWorkRecord(!1)}this.$emit("checkSuccess",this.formInfo,t),this.visible=!1},saveWorkRecord:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=JSON.stringify(luckysheet.getAllSheets()[0].data),r={formInstId:this.formInfo.formInstId,xlsJson:a};Object(o["hb"])(r).then((function(a){a.success?e&&t.$message.success("保存作业记录表信息成功"):e&&t.$message.error("保存作业记录表信息失败")}))},print:function(){var t={id:this.formInfo.id,instType:this.formType,formInstId:this.formInfo.formInstId,formObjId:this.formInfo.formObjId,formName:this.formName,workRecordType:this.workRecordType};0===this.printType?this.$refs.workRecordPrint.print(t):1===this.printType&&this.$refs.workRecordPrint.printNoData(t)},onSheetPrintOk:function(){0===this.printType?this.loadFormDetail(this.allItems):1===this.printType&&this.loadFormDetailNoData()},showModalNoData:function(t,e){this.formInfo=t,this.formType=t.instType,this.trainNo=e,this.formName=t.formName,this.formInstId=t.formInstId,this.loadFormDetailNoData()},loadFormDetailNoData:function(){this.printType=1;try{switch(this.formType){case 1:this.formInfo.formObjId=this.formInfo.id,this.loadOnlineDetailNoData(this.formInfo.formInstId);break;case 3:1===this.workRecordType?this.loadRecordDetailNoData(this.formInfo.formInstId):2===this.workRecordType&&this.loadWorkRecordDetail(this.formInfo.formObjId||this.formInfo.id,this.formInfo.formInstId,!1);break;case 4:this.loadCheckDetailNoData(this.formInfo.formInstId)}}catch(t){}},loadRecordDetailNoData:function(t){var e=this;Object(d["Kb"])({id:t}).then((function(t){t.success&&t.result?(e.curRecordData=t.result,e.curRecordData.categoryList&&e.curRecordData.categoryList.sort((function(t,e){return t.recIndex-e.recIndex})),e.$nextTick((function(){e.$refs.recordTable.loadData(e.curRecordData)})),e.visible=!0):e.$message.error("加载记录数据异常")}))},loadCheckDetailNoData:function(t){var e=this;Object(n["A"])({id:t}).then((function(t){try{if(t.success&&t.result){var a=t.result;e.sheetData=a,e.visible=!0}else e.$message.error("加载记录数据异常")}catch(r){e.$message.error("加载记录数据异常")}}))},loadOnlineDetailNoData:function(t){var e=this;this.visible=!0,Object(d["Db"])(t).then((function(t){if(t.success){var a=JSON.parse(t.result);e.$nextTick((function(){e.initSheet(a)}))}}))}}},b=g,v=(a("f0c5"),a("8522"),a("2877")),y=Object(v["a"])(b,r,i,!1,null,"a7b5b52c",null);e["default"]=y.exports},9216:function(t,e,a){"use strict";a("260f")},9527:function(t,e,a){},"958d":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("div",[e("table",{staticClass:"table"},[e("thead",[e("tr",[e("td",{staticStyle:{padding:"0"},attrs:{colspan:"4",rowspan:"2"}},[t.recordSheet.assetTypeId?t._e():e("span",{staticStyle:{"padding-left":"5px"}},[t._v("车号："+t._s(t.recordSheet.trainNo))]),t.recordSheet.assetTypeId&&0===t.recordSheet.updown?e("table",{staticClass:"innerTable"},[e("tr",[e("td",{staticClass:"bottom"},[t._v("车号："+t._s(t.recordSheet.trainNo))])]),e("tr",[e("td",[t._v("部件号："+t._s(t.recordSheet.manufNo))])])]):t._e(),t.recordSheet.assetTypeId&&1===t.recordSheet.updown?e("table",{staticClass:"innerTable"},[e("tr",[e("td",{staticClass:"bottom"},[t._v("车号："+t._s(t.recordSheet.trainNo))])]),e("tr",[e("td",{staticClass:"bottom"},[t._v("原部件序列号："+t._s(t.recordSheet.manufNo))])]),e("tr",[e("td",[t._v("新部件序列号："+t._s(t.recordSheet.manufNoUp))])])]):t._e()]),e("td",{staticStyle:{"text-align":"center","font-weight":"bold"},attrs:{colspan:"3",rowspan:"2"}},[t._v(" "+t._s(t.recordSheet.title||t.recordSheet.workRecName)+" ")]),e("td",{attrs:{colspan:"3"}},[t._v("作业日期："+t._s(t.recordSheet.workDate)+" 完工日期: "+t._s(t.recordSheet.finishDate))])]),e("tr",[e("td",{attrs:{colspan:"3"}},[t._v("作业班组："+t._s(t.recordSheet.workGroupName))])]),t._m(0)]),t._l(t.recordSheet.categoryList,(function(a){return e("tbody",{key:a.id},t._l(a.detailList,(function(r,i){return e("tr",{key:r.id},[0===i?e("td",{attrs:{rowspan:a.detailList.length}},[t._v(" "+t._s(a.recIndex)+" ")]):t._e(),0===i?e("td",{attrs:{rowspan:a.detailList.length}},[t._v(" "+t._s(a.reguTitle)+" ")]):t._e(),e("td",[t._v(" "+t._s(r.workContent)+" ")]),e("td",{staticStyle:{"text-align":"center"}},[t._v(" "+t._s(r.checkLevel_dictText)+" ")]),e("td",[t._v(" "+t._s(r.techRequire)+" ")]),e("td",[t._v(" "+t._s(0==r.isIgnore?r.workInfo:r.ignoreDesc)+" ")]),e("td",{staticStyle:{"text-align":"center"}},[1===r.result?e("a-checkbox",{attrs:{checked:"",disabled:""}}):t._e(),0===r.result?e("a-checkbox",{attrs:{disabled:""}}):t._e()],1),e("td",[t._v(" "+t._s(r.selfCheck)+" ")]),e("td",[t._v(" "+t._s(r.guarderCheck)+" ")]),e("td",[t._v(" "+t._s(r.monitorCheck)+" ")])])})),0)})),t._l(t.recordSheet.measureToolList,(function(a,r){return e("tr",{key:r},[0===r?e("td",{attrs:{colspan:"2",rowspan:t.recordSheet.measureToolList.length}},[t._v("计量器具使用")]):t._e(),e("td",{attrs:{colspan:"2"}},[t._v("名称: "+t._s(a.name))]),e("td",[t._v("规格型号："+t._s(a.model))]),e("td",[t._v("出厂编号："+t._s(a.serialNo))]),e("td",{attrs:{colspan:"2"}},[t._v("上次检验时间："+t._s(a.lastCheckTime))]),e("td",{attrs:{colspan:"2"}},[t._v("下次检验时间："+t._s(a.nextCheckTime))])])})),e("tr",[e("td",{staticStyle:{height:"80px"},attrs:{colspan:"10"}},[t._v("情况说明："+t._s(t.recordSheet.remark))])]),e("tr",[e("td",{staticStyle:{height:"80px"},attrs:{colspan:"10"}},[e("span",{staticStyle:{"margin-left":"5%"}},[t._v("检查结果："+t._s(0===t.recordSheet.checkResult?"未通过":"通过")+" ")]),e("span",{staticStyle:{"margin-left":"30%"}},[t._v("检查日期："+t._s(t.recordSheet.checkDate)+" ")]),e("span",{staticStyle:{"margin-left":"30%"}},[t._v("质量负责人："+t._s(t.recordSheet.checkUserName)+" ")]),t._m(1)])])],2)])},i=[function(){var t=this,e=t._self._c;return e("tr",[e("th",{staticStyle:{width:"60px"}},[t._v("序号")]),e("th",{staticStyle:{width:"100px"}},[t._v("项目")]),e("th",{staticStyle:{width:"200px"}},[t._v("作业内容")]),e("th",{staticStyle:{width:"60px"}},[t._v("控制点")]),e("th",{staticStyle:{width:"200px"}},[t._v("技术要求")]),e("th",{staticStyle:{width:"200px"}},[t._v("作业情况")]),e("th",{staticStyle:{width:"80px"}},[t._v("结果")]),e("th",{staticStyle:{width:"60px"}},[t._v("自检")]),e("th",{staticStyle:{width:"60px"}},[t._v("互检")]),e("th",{staticStyle:{width:"60px"}},[t._v("专检")])])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"padding-top":"15px"}},[t._v(" 说明："),e("br"),t._v(" 1. 控制点分为H点和W点，“H”点为该项工序操作过程必须经过专业工程师现场检查确认的工序，“W”点为班组长可在工序完工后确认的工序。"),e("br"),t._v(" 2. “自检”栏为作业者本人进行签字；“互检”栏由作业监护人员进行检查签字；“专检”栏由班组长进行检查签字。“质量负责人”由相关专业工程师进行签字。"),e("br"),t._v(" 3. “作业情况”需根据实际情况填写。若该项工序无异常则由作业者在框中填入√；若该项工序存在异常，则将实际故障情况填入框内。"),e("br"),t._v(" 4. “结果”栏方框在完成该项作业及检查后，由工班长进行填写。若无异常则在方框内填入√，若有异常，工班长需对故障情况进行确认，在方框内填入×，并将故障在“备注”栏进行汇总。"),e("br"),t._v(" 5. 作业内容中有数据要求的一并填入“作业情况”栏 。 ")])}],n={name:"RecordSheetTable",data:function(){return{recordSheet:{}}},methods:{loadData:function(t){this.recordSheet=t}}},o=n,l=(a("d88b"),a("2877")),s=Object(l["a"])(o,r,i,!1,null,"197d5722",null);e["default"]=s.exports},"9a7a":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bodyWrapper"},[e("div",{staticClass:"table-page-search-wrapper"},[e("a-form",{attrs:{layout:"inline"}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:5,sm:24}},[e("a-form-item",{attrs:{label:"整改"}},[e("a-input",{attrs:{placeholder:"请输入名称或编码"},model:{value:t.queryParam.searchText,callback:function(e){t.$set(t.queryParam,"searchText",e)},expression:"queryParam.searchText"}})],1)],1),e("a-col",{attrs:{md:4,sm:24}},[e("a-form-item",{attrs:{label:"状态"}},[e("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_work_rectify_status"},model:{value:t.queryParam.status,callback:function(e){t.$set(t.queryParam,"status",e)},expression:"queryParam.status"}})],1)],1),e("a-col",{attrs:{md:6,sm:24}},[e("a-form-item",{attrs:{label:"下发日期"}},[e("a-date-picker",{model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)],1),e("a-col",{attrs:{md:6,sm:24}},[e("a-form-item",{attrs:{label:"类型"}},[e("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_work_rectify_type"},model:{value:t.queryParam.rectifyType,callback:function(e){t.$set(t.queryParam,"rectifyType",e)},expression:"queryParam.rectifyType"}})],1)],1),e("a-col",{attrs:{md:3,sm:8}},[e("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[e("a-button",{on:{click:t.findList}},[t._v("查询")])],1)])],1)],1)],1),e("a-spin",{attrs:{spinning:t.loading}},[e("div",{staticStyle:{height:"calc(100vh - 250px)"}},[e("vxe-table",{ref:"listTable",staticStyle:{height:"calc(100vh - 298px)"},attrs:{border:"","max-height":"90%",align:t.allAlign,data:t.tableData,"show-overflow":"tooltip","edit-config":{trigger:"manual",mode:"row"}}},[e("vxe-table-column",{attrs:{field:"rectifyNo",title:"编号",width:"8%"}}),e("vxe-table-column",{attrs:{field:"lineName",title:"所属线路",width:"8%"}}),e("vxe-table-column",{attrs:{field:"trainNo",title:"所属车辆",width:"10%"}}),e("vxe-table-column",{attrs:{field:"title",title:"任务名称",align:"left","header-align":"center",width:"15%"}}),e("vxe-table-column",{attrs:{field:"rectifyType_dictText",title:"整改类型",width:"10%"}}),e("vxe-table-column",{attrs:{field:"groupName",align:"left","header-align":"center",title:"责任工班",width:"10%"}}),e("vxe-table-column",{attrs:{field:"sendDate",title:"下达日期",width:"8%"}}),e("vxe-table-column",{attrs:{field:"finishDate",title:"完成时间",width:"8%"}}),e("vxe-table-column",{attrs:{field:"status_dictText",title:"整改状态",width:"8%"}}),e("vxe-table-column",{attrs:{title:"附件描述",width:"15%",align:"left","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(a){var r=a.row;return t._l(r.annexList,(function(a,r){return e("a",{key:r,on:{click:function(e){return e.stopPropagation(),t.handleSeeing(a)}}},[t._v(t._s(a.title))])}))}}])})],1),e("vxe-pager",{attrs:{perfect:"","current-page":t.queryParam.pageNo,"page-size":t.queryParam.pageSize,total:t.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(e){return t.$set(t.queryParam,"pageNo",e)},"update:current-page":function(e){return t.$set(t.queryParam,"pageNo",e)},"update:pageSize":function(e){return t.$set(t.queryParam,"pageSize",e)},"update:page-size":function(e){return t.$set(t.queryParam,"pageSize",e)},"page-change":t.handlePageChange}})],1),e("doc-preview-modal",{ref:"docPreview",attrs:{title:t.fileName}})],1)],1)},i=[],n=a("3bcd"),o=a("c1df"),l=a.n(o),s=a("8fad"),c=a("353a");function u(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",i=a.toStringTag||"@@toStringTag";function n(a,r,i,n){var s=r&&r.prototype instanceof l?r:l,c=Object.create(s.prototype);return d(c,"_invoke",function(a,r,i){var n,l,s,c=0,u=i||[],d=!1,m={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,a){return n=e,l=0,s=t,m.n=a,o}};function f(a,r){for(l=a,s=r,e=0;!d&&c&&!i&&e<u.length;e++){var i,n=u[e],f=m.p,h=n[2];a>3?(i=h===r)&&(s=n[(l=n[4])?5:(l=3,3)],n[4]=n[5]=t):n[0]<=f&&((i=a<2&&f<n[1])?(l=0,m.v=r,m.n=n[1]):f<h&&(i=a<3||n[0]>r||r>h)&&(n[4]=a,n[5]=r,m.n=h,l=0))}if(i||a>1)return o;throw d=!0,r}return function(i,u,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,h),l=u,s=h;(e=l<2?t:s)||!d;){n||(l?l<3?(l>1&&(m.n=-1),f(l,s)):m.n=s:m.v=s);try{if(c=2,n){if(l||(i="next"),e=n[i]){if(!(e=e.call(n,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=n.return)&&e.call(n),l<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),l=1);n=t}else if((e=(d=m.n<0)?s:a.call(r,m))!==o)break}catch(e){n=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(a,i,n),!0),c}var o={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var m=[][r]?e(e([][r]())):(d(e={},r,(function(){return this})),e),f=c.prototype=l.prototype=Object.create(m);function h(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,d(t,i,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=c,d(f,"constructor",c),d(c,"constructor",s),s.displayName="GeneratorFunction",d(c,i,"GeneratorFunction"),d(f),d(f,i,"Generator"),d(f,r,(function(){return this})),d(f,"toString",(function(){return"[object Generator]"})),(u=function(){return{w:n,m:h}})()}function d(t,e,a,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}d=function(t,e,a,r){function n(e,a){d(t,e,(function(t){return this._invoke(e,a,t)}))}e?i?i(t,e,{value:a,enumerable:!r,configurable:!r,writable:!r}):t[e]=a:(n("next",0),n("throw",1),n("return",2))},d(t,e,a,r)}function m(t,e,a,r,i,n,o){try{var l=t[n](o),s=l.value}catch(t){return void a(t)}l.done?e(s):Promise.resolve(s).then(r,i)}function f(t){return function(){var e=this,a=arguments;return new Promise((function(r,i){var n=t.apply(e,a);function o(t){m(n,r,i,o,l,"next",t)}function l(t){m(n,r,i,o,l,"throw",t)}o(void 0)}))}}var h={name:"RectifyRecord",components:{DocPreviewModal:c["default"]},props:{trainNo:{type:String,default:""},structureDetailId:{type:String,default:""}},data:function(){return{date:null,queryParam:{sendDate:"",searchText:"",rectifyType:"",trainNo:this.trainNo,status:"",pageNo:1,pageSize:10},totalResult:0,allAlign:"center",tableData:[],loading:!1,filePath:"",fileName:"",status:!1}},watch:{trainNo:{immediate:!0,handler:function(t){this.queryParam.trainNo=t,this.findList()}}},methods:{handlePrivilege:function(){var t=f(u().m((function t(e,a){var r,i=this;return u().w((function(t){while(1)switch(t.n){case 0:return r={id:e,operation:a},t.n=1,Object(s["Ic"])(r).then((function(t){i.status=t.result}));case 1:return t.a(2)}}),t)})));function e(e,a){return t.apply(this,arguments)}return e}(),handleSeeing:function(){var t=f(u().m((function t(e){return u().w((function(t){while(1)switch(t.n){case 0:return t.n=1,this.handlePrivilege(e.id,2);case 1:this.status?(this.fileName=e.title,this.$refs.docPreview.handleFilePath(e.address)):this.$message.error("您没有权限!");case 2:return t.a(2)}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),findList:function(){var t=this;this.loading=!0,this.date?this.queryParam.sendDate=l()(this.date).format("YYYY-MM-DD"):this.queryParam.sendDate="",Object(n["C"])(this.queryParam).then((function(e){t.totalResult=e.result.total,t.tableData=e.result.records})).finally((function(){return t.loading=!1}))},handlePageChange:function(t){var e=t.currentPage,a=t.pageSize;this.queryParam.pageNo=e,this.queryParam.pageSize=a,this.findList()}}},p=h,g=a("2877"),b=Object(g["a"])(p,r,i,!1,null,"e9f87ede",null);e["default"]=b.exports},abf6:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bodyWrapper"},[e("div",{staticClass:"table-page-search-wrapper"},[e("a-form",{attrs:{layout:"inline"}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:6,sm:24}},[e("a-form-item",{attrs:{label:"测点名称"}},[e("a-input",{attrs:{placeholder:""},model:{value:t.queryParam.measureName,callback:function(e){t.$set(t.queryParam,"measureName",e)},expression:"queryParam.measureName"}})],1)],1),e("a-col",{attrs:{md:6,sm:8}},[e("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[e("a-space",[e("a-button",{on:{click:t.findList}},[t._v("查询")])],1)],1)])],1)],1)],1),e("a-spin",{attrs:{spinning:t.loading}},[e("div",{staticStyle:{height:"calc(100vh - 250px)"}},[e("vxe-table",{ref:"listTable",staticStyle:{height:"calc(100vh - 298px)"},attrs:{border:"","max-height":"90%",align:t.allAlign,data:t.tableData,"show-overflow":"tooltip","edit-config":{trigger:"manual",mode:"row"}}},[e("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),e("vxe-table-column",{attrs:{field:"trainName",title:"车辆",width:"100"}}),e("vxe-table-column",{attrs:{field:"trainAssetName",title:"设备",width:"120"}}),e("vxe-table-column",{attrs:{field:"measureName",title:"测量项名称","min-width":"100"}}),e("vxe-table-column",{attrs:{field:"values",title:"测量值",width:"100",align:"right","header-align":"center"}}),e("vxe-table-column",{attrs:{field:"workUser",title:"测量人",width:"100"}}),e("vxe-table-column",{attrs:{field:"workTime",title:"测量日期",width:"100"}}),e("vxe-table-column",{attrs:{field:"alertMessage",title:"预警信息","min-width":"100","header-align":"center",align:"left"}}),e("vxe-table-column",{attrs:{field:"alertReason",title:"预警原因","min-width":"100","header-align":"center",align:"left"}}),e("vxe-table-column",{attrs:{field:"fixValues",title:"修正值",width:"100",align:"right","header-align":"center"}}),e("vxe-table-column",{attrs:{field:"tools",title:"测量器具",width:"100"}})],1),e("vxe-pager",{attrs:{perfect:"","current-page":t.queryParam.pageNo,"page-size":t.queryParam.pageSize,total:t.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(e){return t.$set(t.queryParam,"pageNo",e)},"update:current-page":function(e){return t.$set(t.queryParam,"pageNo",e)},"update:pageSize":function(e){return t.$set(t.queryParam,"pageSize",e)},"update:page-size":function(e){return t.$set(t.queryParam,"pageSize",e)},"page-change":t.handlePageChange}})],1)])],1)},i=[],n=a("3bcd"),o={name:"MeasurementRecord",props:{trainNo:{type:String,default:""},structureDetailId:{type:String,default:""}},data:function(){return{queryParam:{trainNo:this.trainNo,assetId:"",measureName:"",structureDetailId:this.structureDetailId,pageNo:1,pageSize:10},totalResult:0,allAlign:"center",tableData:[],loading:!1}},watch:{structureDetailId:{immediate:!0,handler:function(t){this.queryParam.structureDetailId=t!==this.trainNo?t:"",this.findList()}},trainNo:{immediate:!0,handler:function(t){this.queryParam.trainNo=t,this.findList()}}},methods:{findList:function(){var t=this;this.loading=!0,Object(n["u"])(this.queryParam).then((function(e){t.totalResult=e.result.total,t.tableData=e.result.records})).finally((function(){return t.loading=!1}))},handlePageChange:function(t){var e=t.currentPage,a=t.pageSize;this.queryParam.pageNo=e,this.queryParam.pageSize=a,this.findList()}}},l=o,s=a("2877"),c=Object(s["a"])(l,r,i,!1,null,"4ed66e23",null);e["default"]=c.exports},b016:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bodyWrapper"},[e("div",{staticClass:"table-page-search-wrapper"},[e("a-form",{attrs:{layout:"inline"}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:6,sm:24}},[e("a-form-item",{attrs:{label:"工单"}},[e("a-input",{attrs:{placeholder:"工单编号或名称"},model:{value:t.queryParam.searchText,callback:function(e){t.$set(t.queryParam,"searchText",e)},expression:"queryParam.searchText"}})],1)],1),e("a-col",{attrs:{md:6,sm:24}},[e("a-form-item",{attrs:{label:"状态"}},[e("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_group_order_status"},model:{value:t.queryParam.status,callback:function(e){t.$set(t.queryParam,"status",e)},expression:"queryParam.status"}})],1)],1),e("a-col",{attrs:{md:6,sm:24}},[e("a-form-item",{attrs:{label:"工单日期"}},[e("a-date-picker",{attrs:{format:"YYYY-MM-DD"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)],1),e("a-col",{attrs:{md:6,sm:8}},[e("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[e("a-space",[e("a-button",{on:{click:t.findList}},[t._v("查询")])],1)],1)])],1)],1)],1),e("a-spin",{attrs:{spinning:t.loading}},[e("div",{staticStyle:{height:"calc(100vh - 250px)"}},[e("vxe-table",{ref:"listTable",staticStyle:{height:"calc(100vh - 298px)"},attrs:{border:"","max-height":"90%",align:t.allAlign,data:t.tableData,"show-overflow":"tooltip","edit-config":{trigger:"manual",mode:"row"}}},[e("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),e("vxe-table-column",{attrs:{field:"orderCode",title:"工单编号",width:"120"}}),e("vxe-table-column",{attrs:{field:"orderName",title:"工单名称","min-width":"120"}}),e("vxe-table-column",{attrs:{field:"orderType_dictText",title:"工单类型",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(a.orderType_dictText||a.orderType)+" ")]}}])}),e("vxe-table-column",{attrs:{field:"groupName",title:"作业工班",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(a.groupName||a.groupId)+" ")]}}])}),e("vxe-table-column",{attrs:{field:"lineName",title:"线路",width:"100"}}),e("vxe-table-column",{attrs:{field:"trainName",title:"车号",width:"100"}}),e("vxe-table-column",{attrs:{field:"startTime",title:"计划开始",width:"100"}}),e("vxe-table-column",{attrs:{field:"planName",title:"作业任务","min-width":"140",align:"left","header-align":"center"}}),e("vxe-table-column",{attrs:{field:"orderStatus_dictText",title:"工单状态",width:"80"}})],1),e("vxe-pager",{attrs:{perfect:"","current-page":t.queryParam.pageNo,"page-size":t.queryParam.pageSize,total:t.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(e){return t.$set(t.queryParam,"pageNo",e)},"update:current-page":function(e){return t.$set(t.queryParam,"pageNo",e)},"update:pageSize":function(e){return t.$set(t.queryParam,"pageSize",e)},"update:page-size":function(e){return t.$set(t.queryParam,"pageSize",e)},"page-change":t.handlePageChange}})],1)])],1)},i=[],n=a("3bcd"),o=a("c1df"),l=a.n(o),s={name:"WorkRecord",props:{trainNo:{type:String,default:""},structureDetailId:{type:String,default:""}},data:function(){return{date:null,queryParam:{searchText:"",status:"",workOrderDate:"",trainNo:this.trainNo,structureDetailId:"",pageNo:1,pageSize:10},totalResult:0,allAlign:"center",tableData:[],loading:!1}},watch:{structureDetailId:{immediate:!0,handler:function(t){this.queryParam.structureDetailId=t!==this.trainNo?t:"",this.findList()}},trainNo:{immediate:!0,handler:function(t){this.queryParam.trainNo=t,this.findList()}}},methods:{findList:function(){var t=this;this.loading=!0,this.date?this.queryParam.workOrderDate=l()(this.date).format("YYYY-MM-DD"):this.queryParam.workOrderDate="",Object(n["L"])(this.queryParam).then((function(e){t.totalResult=e.result.total,t.tableData=e.result.records})).finally((function(){return t.loading=!1}))},handlePageChange:function(t){var e=t.currentPage,a=t.pageSize;this.queryParam.pageNo=e,this.queryParam.pageSize=a,this.findList()}}},c=s,u=a("2877"),d=Object(u["a"])(c,r,i,!1,null,"06291508",null);e["default"]=d.exports},b245:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{width:"85%",title:"人员选择",visible:t.visible,confirmLoading:t.confirmLoading,cancelText:"关闭",bodyStyle:{height:"70vh"},destroyOnClose:!0},on:{ok:t.handleOk,cancel:t.handleCancel}},[e("a-row",[e("a-col",{attrs:{md:4,sm:24}},[e("div",{staticStyle:{height:"calc(70vh - 20px)","border-right":"1px solid #e3e1e1","margin-right":"15px"}},[t.treeData&&t.treeData.length>0?e("a-tree",{staticClass:"limitHeight",attrs:{defaultSelectedKeys:[t.queryParam.depId],defaultExpandAll:!0,"tree-data":t.treeData},on:{select:t.onSelect}}):t._e()],1)]),e("a-col",{attrs:{md:20,sm:24}},[e("div",{staticClass:"table-page-search-wrapper"},[e("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.findList.apply(null,arguments)}}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:5,sm:24}},[e("a-form-item",{attrs:{label:"账号"}},[e("a-input",{attrs:{placeholder:"请输入用户账号"},model:{value:t.queryParam.username,callback:function(e){t.$set(t.queryParam,"username",e)},expression:"queryParam.username"}})],1)],1),e("a-col",{attrs:{md:5,sm:24}},[e("a-form-item",{attrs:{label:"真实名字"}},[e("a-input",{attrs:{placeholder:"请输入真实名字"},model:{value:t.queryParam.realname,callback:function(e){t.$set(t.queryParam,"realname",e)},expression:"queryParam.realname"}})],1)],1),e("a-col",{attrs:{md:6,sm:24}},[e("a-form-item",{attrs:{label:"手机号码"}},[e("a-input",{attrs:{placeholder:"请输入手机号码"},model:{value:t.queryParam.phone,callback:function(e){t.$set(t.queryParam,"phone",e)},expression:"queryParam.phone"}})],1)],1),e("a-col",{attrs:{md:6,sm:24}},[e("a-form-item",{attrs:{label:"角色"}},[e("j-dict-select-tag",{attrs:{triggerChange:!0,dictCode:"sys_role,role_name,id",placeholder:"选择角色"},model:{value:t.queryParam.roleId,callback:function(e){t.$set(t.queryParam,"roleId",e)},expression:"queryParam.roleId"}})],1)],1),e("a-col",{attrs:{md:2,sm:8}},[e("a-button",{on:{click:t.findList}},[t._v("查询")])],1)],1)],1)],1),e("div",{staticStyle:{height:"calc(70vh - 130px)"}},[e("vxe-table",{ref:"listTable",staticStyle:{height:"calc(70vh - 130px)"},attrs:{border:"",align:t.allAlign,data:t.tableData,"max-height":"100%","show-overflow":"tooltip","radio-config":t.multiple?{}:{trigger:"row"},"checkbox-config":t.multiple?{trigger:"row",highlight:!0,range:!0}:{},"edit-config":{trigger:"manual",mode:"row"}}},[t.multiple?e("vxe-table-column",{attrs:{type:"checkbox",width:"5%"}}):e("vxe-table-column",{attrs:{type:"radio",width:"5%"}}),e("vxe-table-column",{attrs:{field:"workNo",title:"工号",width:"100",align:"center"}}),e("vxe-table-column",{attrs:{field:"username",title:"用户账号",width:"150",align:"left","header-align":"center"}}),e("vxe-table-column",{attrs:{field:"realname",title:"用户名字",width:"100",align:"left","header-align":"center"}}),e("vxe-table-column",{attrs:{field:"roleNames",title:"角色","min-width":"180",align:"left","header-align":"center"}}),e("vxe-table-column",{attrs:{field:"sex_dictText",title:"性别",width:"80"}}),e("vxe-table-column",{attrs:{field:"phone",title:"手机号码",width:"120"}}),e("vxe-table-column",{attrs:{field:"orgCode",title:"部门",width:"120",align:"left","header-align":"center"}}),e("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",width:"80"}})],1),e("vxe-pager",{attrs:{perfect:"","current-page":t.queryParam.pageNo,"page-size":t.queryParam.pageSize,total:t.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(e){return t.$set(t.queryParam,"pageNo",e)},"update:current-page":function(e){return t.$set(t.queryParam,"pageNo",e)},"update:pageSize":function(e){return t.$set(t.queryParam,"pageSize",e)},"update:page-size":function(e){return t.$set(t.queryParam,"pageSize",e)},"page-change":t.handlePageChange}})],1)])],1)],1)},i=[],n=a("8fad"),o={name:"UserList",props:{multiple:{type:Boolean,default:!0},depId:{type:String,default:""}},data:function(){return{queryParam:{username:"",realname:"",phone:"",orgCode:"",roleId:void 0,pageNo:1,pageSize:10},allAlign:"center",totalResult:0,tableData:[],visible:!1,confirmLoading:!1,treeData:[]}},watch:{depId:function(t){this.$set(this.queryParam,"depId",t||"")}},mounted:function(){this.$set(this.queryParam,"depId",this.depId||"")},methods:{showModal:function(){this.visible=!0,this.findList(),this.getTreeList()},getTreeList:function(){var t=this;Object(n["yb"])().then((function(e){e.success&&(t.treeData=e.result)}))},onSelect:function(t,e){if(t.length){var a=e.node.dataRef;this.queryParam.depId=a.id,this.findList()}else this.queryParam.orgCode="",this.findList()},findList:function(){var t=this;this.loading=!0,Object(n["uc"])(this.queryParam).then((function(e){t.loading=!1,e.success?(t.totalResult=e.result.total,t.tableData=e.result.records):t.$message.error("加载用户数据失败")})).catch((function(e){t.$message.error("加载用户数据异常")})).finally((function(){}))},handlePageChange:function(t){var e=t.currentPage,a=t.pageSize;this.queryParam.pageNo=e,this.queryParam.pageSize=a,this.findList()},handleOk:function(){var t=[];this.multiple?t=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&t.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",t),this.visible=!1},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,Object.assign(this.$data,this.$options.data())}}},l=o,s=(a("f76d"),a("2877")),c=Object(s["a"])(l,r,i,!1,null,"4aa7956f",null);e["default"]=c.exports},b2ea:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bodyWrapper"},[e("div",{staticClass:"table-page-search-wrapper"},[e("a-form",{attrs:{layout:"inline"}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:5,sm:24}},[e("a-form-item",{attrs:{label:"开口项"}},[e("a-input",{attrs:{placeholder:"请输入名称或编码"},model:{value:t.queryParam.searchText,callback:function(e){t.$set(t.queryParam,"searchText",e)},expression:"queryParam.searchText"}})],1)],1),e("a-col",{attrs:{md:5,sm:24}},[e("a-form-item",{attrs:{label:"线路"}},[e("line-select-list",{on:{change:t.changeLine},model:{value:t.queryParam.lineId,callback:function(e){t.$set(t.queryParam,"lineId",e)},expression:"queryParam.lineId"}})],1)],1),e("a-col",{attrs:{md:5,sm:24}},[e("a-form-item",{attrs:{label:"状态"}},[e("j-dict-select-tag",{attrs:{triggerChange:!0,dictCode:"bu_repair_leave_status"},model:{value:t.queryParam.status,callback:function(e){t.$set(t.queryParam,"status",e)},expression:"queryParam.status"}})],1)],1),e("a-col",{attrs:{md:3,sm:8}},[e("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[e("a-space",[e("a-button",{on:{click:t.findList}},[t._v("查询")])],1)],1)])],1)],1)],1),e("a-spin",{attrs:{spinning:t.loading}},[e("div",{staticStyle:{height:"calc(100vh - 250px)"}},[e("vxe-table",{ref:"listTable",staticStyle:{height:"calc(100vh - 298px)"},attrs:{border:"","max-height":"90%",align:t.allAlign,data:t.tableData,"show-overflow":"tooltip","edit-config":{trigger:"manual",mode:"row"}}},[e("vxe-table-column",{attrs:{field:"recordCode",title:"编号","min-width":"100"}}),e("vxe-table-column",{attrs:{field:"trainNo",title:"所属车辆",width:"80"}}),e("vxe-table-column",{attrs:{field:"lineName",title:"所属线路",width:"80"}}),e("vxe-table-column",{attrs:{field:"recordName",title:"开口项目名称","min-width":"100",align:"left","header-align":"center"}}),e("vxe-table-column",{attrs:{field:"recordDesc",title:"内容描述","min-width":"120",align:"left","header-align":"center"}}),e("vxe-table-column",{attrs:{field:"createTime",title:"创建日期",width:"100"}}),e("vxe-table-column",{attrs:{field:"orderName",title:"所属工单","min-width":"120",align:"left","header-align":"center"}}),e("vxe-table-column",{attrs:{field:"orderTaskName",title:"关联故障/任务","min-width":"120",align:"left","header-align":"center"}}),e("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",width:"80"}})],1),e("vxe-pager",{attrs:{perfect:"","current-page":t.queryParam.pageNo,"page-size":t.queryParam.pageSize,total:t.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(e){return t.$set(t.queryParam,"pageNo",e)},"update:current-page":function(e){return t.$set(t.queryParam,"pageNo",e)},"update:pageSize":function(e){return t.$set(t.queryParam,"pageSize",e)},"update:page-size":function(e){return t.$set(t.queryParam,"pageSize",e)},"page-change":t.handlePageChange}})],1)])],1)},i=[],n=a("3bcd"),o=(a("c1df"),a("5633")),l={name:"OpenItemRecord",components:{LineSelectList:o["default"]},props:{trainNo:{type:String,default:""},structureDetailId:{type:String,default:""}},data:function(){return{date:null,queryParam:{lineId:"",searchText:"",status:"",trainNo:this.trainNo,pageNo:1,pageSize:10},totalResult:0,allAlign:"center",tableData:[],loading:!1}},watch:{trainNo:{immediate:!0,handler:function(t){this.queryParam.trainNo=t,this.findList()}}},methods:{changeLine:function(t,e){this.dictTrainStr="",t&&(this.dictTrainStr="bu_train_info,train_no,train_no,line_id="+t+"|train_struct_id")},findList:function(){var t=this;this.loading=!0,Object(n["v"])(this.queryParam).then((function(e){t.totalResult=e.result.total,t.tableData=e.result.records})).finally((function(){return t.loading=!1}))},handlePageChange:function(t){var e=t.currentPage,a=t.pageSize;this.queryParam.pageNo=e,this.queryParam.pageSize=a,this.findList()}}},s=l,c=a("2877"),u=Object(c["a"])(s,r,i,!1,null,"5249c6b8",null);e["default"]=u.exports},bd18:function(t,e,a){"use strict";a("3ab9")},c35b:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("a-card",{attrs:{"body-style":t.cardStyle}},[e("a-form",{attrs:{form:t.form}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:10,sm:24}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"所属路线"}},[e("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["line"],expression:"['line' ]",modifiers:{trim:!0}}],attrs:{disabled:"",triggerChange:!0}})],1)],1),e("a-col",{attrs:{md:10,sm:24}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"车辆编码"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["trainNo"],expression:"[ 'trainNo' ]",modifiers:{trim:!0}}],attrs:{disabled:""}})],1)],1)],1),e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:10,sm:24}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"车型"}},[e("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["trainType"],expression:"['trainType' ]",modifiers:{trim:!0}}],attrs:{disabled:"",triggerChange:!0}})],1)],1),e("a-col",{attrs:{md:10,sm:24}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"编组数"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["groupNum"],expression:"[ 'groupNum' ]",modifiers:{trim:!0}}],attrs:{disabled:""}})],1)],1)],1),e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:10,sm:24}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"车辆状态"}},[e("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["status_dictText"],expression:"['status_dictText' ]",modifiers:{trim:!0}}],attrs:{disabled:"",triggerChange:!0}})],1)],1),e("a-col",{attrs:{md:10,sm:24}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"行走里程"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["mileage"],expression:"[ 'mileage' ]",modifiers:{trim:!0}}],attrs:{disabled:""}})],1)],1)],1),e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:10,sm:24}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"投入运营"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["useDate"],expression:"[ 'useDate' ]",modifiers:{trim:!0}}],attrs:{disabled:""}})],1)],1),e("a-col",{attrs:{md:10,sm:24}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"质保有效期"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["warrantyDate"],expression:"[ 'warrantyDate' ]",modifiers:{trim:!0}}],attrs:{disabled:""}})],1)],1)],1),e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:10,sm:24}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"停放股道"}},[e("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["track"],expression:"['track' ]",modifiers:{trim:!0}}],attrs:{disabled:"",triggerChange:!0}})],1)],1),e("a-col",{attrs:{md:10,sm:24}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"所属厂商"}},[e("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["supplier"],expression:"['supplier' ]",modifiers:{trim:!0}}],attrs:{disabled:"",triggerChange:!0}})],1)],1)],1),e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:10,sm:24}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"检修系统编码"}},[e("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["maximoTrainCode"],expression:"['maximoTrainCode' ]",modifiers:{trim:!0}}],attrs:{disabled:"",triggerChange:!0}})],1)],1)],1)],1),e("a-row",{staticStyle:{"margin-top":"40px"}},[e("a-col",{attrs:{md:20,sm:24}},[e("a-form-item",{attrs:{labelCol:t.labelCol1,wrapperCol:t.wrapperCol1,label:"架大修时间"}},[e("a-steps",{attrs:{"progress-dot":"",current:t.currentStepIndex},scopedSlots:t._u([{key:"progressDot",fn:function(a){var r=a.index,i=a.status,n=a.prefixCls;return e("a-popover",{},[e("template",{slot:"content"},[e("span",[t._v("step "+t._s(r)+" status: "+t._s(i))])]),e("span",{class:"".concat(n,"-icon-dot")})],2)}}])},t._l(t.trainPeriodList,(function(t,a){return e("a-step",{key:a,attrs:{title:t.date,description:t.description}})})),1)],1)],1)],1)],1)},i=[],n=a("3bcd"),o={name:"TrainResBasicInfo",props:["structureDetail","trainNo"],data:function(){return{cardStyle:{padding:"10px",height:"calc(100vh - 185px)"},labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:15}},labelCol1:{xs:{span:24},sm:{span:3}},wrapperCol1:{xs:{span:24},sm:{span:21}},queryParam:{trainNo:""},allAlign:"center",tableData:[],form:this.$form.createForm(this),trainPeriodList:[],currentStepIndex:0}},watch:{structureDetail:{immediate:!0,handler:function(t){this.queryParam.trainNo=t,this.findList()}}},methods:{findList:function(){var t=this;this.loading=!0,Object(n["F"])(this.queryParam).then((function(e){t.loading=!1,t.tableData=e.result,t.form.setFieldsValue({line:t.tableData.lineName,trainNo:t.tableData.trainNo,trainType:t.tableData.trainTypeName,groupNum:t.tableData.groupNum,status_dictText:t.tableData.status_dictText,mileage:t.tableData.mileage,useDate:t.tableData.useDate,warrantyDate:t.tableData.warrantyDate,track:t.tableData.trackName,supplier:t.tableData.supplierName,maximoTrainCode:t.tableData.id})})),this.findTrainPeriod()},findTrainPeriod:function(){var t=this;Object(n["G"])({trainNo:this.trainNo}).then((function(e){t.trainPeriodList=e.result,t.trainPeriodList.length>0&&t.trainPeriodList.map((function(e,a){e.isCurrent&&!0===e.isCurrent&&(t.currentStepIndex=a)}))}))}}},l=o,s=a("2877"),c=Object(s["a"])(l,r,i,!1,null,"4490ed0a",null);e["default"]=c.exports},d88b:function(t,e,a){"use strict";a("3ff1")},dc2e:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bodyWrapper"},[e("div",{staticClass:"table-page-search-wrapper"},[e("a-form",{attrs:{layout:"inline"}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:6,sm:24}},[e("a-form-item",{attrs:{label:"部件"}},[e("a-input",{attrs:{placeholder:"名称"},model:{value:t.queryParam.assetName,callback:function(e){t.$set(t.queryParam,"assetName",e)},expression:"queryParam.assetName"}})],1)],1),e("a-col",{attrs:{md:6,sm:24}},[e("a-form-item",{attrs:{label:"系统"}},[e("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:t.dicSysIdStr},model:{value:t.queryParam.sysId,callback:function(e){t.$set(t.queryParam,"sysId",e)},expression:"queryParam.sysId"}})],1)],1),e("a-col",{attrs:{md:6,sm:24}},[e("a-form-item",{attrs:{label:"更换日期"}},[e("a-date-picker",{model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)],1),e("a-col",{attrs:{md:6,sm:8}},[e("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[e("a-space",[e("a-button",{on:{click:t.findList}},[t._v("查询")])],1)],1)])],1)],1)],1),e("a-spin",{attrs:{spinning:t.loading}},[e("div",{staticStyle:{height:"calc(100vh - 250px)"}},[e("vxe-table",{ref:"listTable",staticStyle:{height:"calc(100vh - 298px)"},attrs:{border:"","max-height":"90%",align:t.allAlign,data:t.tableData,"show-overflow":"tooltip","edit-config":{trigger:"manual",mode:"row"}}},[e("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),e("vxe-table-column",{attrs:{field:"downAssetName",title:"更换部件名称","min-width":"120"}}),e("vxe-table-column",{attrs:{field:"sysName",title:"所属系统",width:"120"}}),e("vxe-table-column",{attrs:{field:"downAssetSn",title:"原部件序列号",width:"120"}}),e("vxe-table-column",{attrs:{field:"upAssetSn",title:"换上件序列号",width:"120"}}),e("vxe-table-column",{attrs:{field:"brand",title:"更换原因","min-width":"140","header-align":"center",align:"left"}}),e("vxe-table-column",{attrs:{field:"exchangeTime",title:"更换时间",width:"100"}}),e("vxe-table-column",{attrs:{field:"workUser",title:"更换人员",width:"100"}}),e("vxe-table-column",{attrs:{field:"alertDescribe",title:"更换阶段",width:"100"}})],1),e("vxe-pager",{attrs:{perfect:"","current-page":t.queryParam.pageNo,"page-size":t.queryParam.pageSize,total:t.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(e){return t.$set(t.queryParam,"pageNo",e)},"update:current-page":function(e){return t.$set(t.queryParam,"pageNo",e)},"update:pageSize":function(e){return t.$set(t.queryParam,"pageSize",e)},"update:page-size":function(e){return t.$set(t.queryParam,"pageSize",e)},"page-change":t.handlePageChange}})],1)])],1)},i=[],n=a("3bcd"),o=a("c1df"),l=a.n(o),s=a("ca00"),c={name:"ReplaceRecord",props:{trainNo:{type:String,default:""},structureDetailId:{type:String,default:""}},data:function(){return{date:null,queryParam:{trainNo:this.trainNo,assetId:"",assetName:"",sysId:"",structureDetailId:"",changeDate:"",pageNo:1,pageSize:10},dicSysIdStr:"bu_train_asset_type,name,id,struct_type=1",totalResult:0,allAlign:"center",tableData:[],loading:!1}},watch:{structureDetailId:{immediate:!0,handler:function(t){this.queryParam.structureDetailId=t!==this.trainNo?t:"",this.findList()}},trainNo:{immediate:!0,handler:function(t){this.queryParam.trainNo=t,Object(s["e"])(t)?this.dicSysIdStr="bu_train_asset_type,name,id,struct_type=1":this.dicSysIdStr="bu_train_asset_type,name,id,struct_type=1 and train_type_id=(select train_type_id from bu_train_info where train_no='".concat(this.trainNo,"')"),this.findList()}}},methods:{findList:function(){var t=this;this.loading=!0,this.date?this.queryParam.changeDate=l()(this.date).format("YYYY-MM-DD"):this.queryParam.changeDate="",Object(n["a"])(this.queryParam).then((function(e){t.totalResult=e.result.total,t.tableData=e.result.records})).finally((function(){return t.loading=!1}))},handlePageChange:function(t){var e=t.currentPage,a=t.pageSize;this.queryParam.pageNo=e,this.queryParam.pageSize=a,this.findList()}}},u=c,d=a("2877"),m=Object(d["a"])(u,r,i,!1,null,"3d3965fe",null);e["default"]=m.exports},e0ce:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("table",{staticClass:"table"},[e("thead",[e("tr",[e("th",{staticClass:"tg-d1f0",attrs:{colspan:"10"}},[t._v(t._s(t.sheetData.title))])])]),e("tbody",[e("tr",[e("td",{staticClass:"tg-ld8d",attrs:{colspan:"3"}},[e("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[t._v("车号："+t._s(t.sheetData.trainNo))])]),e("td",{staticClass:"tg-ld8d",attrs:{colspan:"3"}},[e("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[t._v("部件名称："+t._s(t.sheetData.assetName))])]),e("td",{staticClass:"tg-ld8d",attrs:{colspan:"4"}},[t._v("作业周期："+t._s(t.sheetData.period))])]),e("tr",[e("td",{staticClass:"tg-ld8d",attrs:{colspan:"3"}},[e("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[t._v("部件编号："+t._s(t.sheetData.assetNo))])]),e("td",{staticClass:"tg-ld8d",attrs:{colspan:"3"}},[e("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[t._v("作业位置："+t._s(t.sheetData.location))])]),e("td",{staticClass:"tg-ld8d",attrs:{colspan:"4"}},[t._v("作业班组："+t._s(t.sheetData.groupName))])]),t._m(0),t._l(t.sheetData.itemList,(function(a,r){return e("tr",{key:r},[e("td",{staticClass:"tg-0pky tg-9wq8"},[t._v(t._s(a.sortNo))]),e("td",{staticClass:"tg-0pky"},[t._v(t._s(a.title))]),e("td",{staticClass:"tg-0pky"},[t._v(t._s(a.content))]),e("td",{staticClass:"tg-0pky tg-9wq8"},[e("a-rate",{attrs:{disabled:"",count:3},model:{value:a.checkLevel,callback:function(e){t.$set(a,"checkLevel",e)},expression:"item.checkLevel"}})],1),e("td",{staticClass:"tg-0pky"},[t._v(t._s(a.checkDesc))]),e("td",{staticClass:"tg-0pky tg-9wq8"},[t._v(t._s(a.checkUserName?a.checkResult_dictText:""))]),e("td",{staticClass:"tg-0pky tg-9wq8"},[t._v(t._s(a.workTime))]),e("td",{staticClass:"tg-0pky tg-9wq8"},[t._v(t._s(a.checkMethod_dictText))]),e("td",{staticClass:"tg-0pky tg-9wq8"},[t._v(t._s(a.checkUserName))]),e("td",{staticClass:"tg-0pky tg-9wq8"},[t._v(t._s(a.checkTime))])])})),t._m(1),e("tr",[e("td",{staticClass:"tg-9wq8",attrs:{colspan:"2"}},[t._v("参考工艺文件")]),e("td",{staticClass:"tg-0pky",attrs:{colspan:"8"}},t._l(t.sheetData.techLinkList,(function(a,r){return e("p",{key:r,staticStyle:{margin:"0","font-size":"12px","line-height":"18px"}},[t._v(" "+t._s(a.teckBookName)+" ")])})),0)]),t._m(2),t._m(3),t._l(t.sheetData.rectifyList,(function(a,r){return e("tr",{key:r},[e("td",{staticClass:"tg-0pky",attrs:{colspan:"7"}},[t._v(t._s(a.itemInfo))]),e("td",{staticClass:"tg-0pky"},[t._v(t._s(a.rectifyDesc))]),e("td",{staticClass:"tg-0pky"},[t._v(t._s(a.reviewTime))]),e("td",{staticClass:"tg-0pky"},[t._v(t._s(a.reviewUserName))])])})),t._m(4),e("tr",[e("td",{staticClass:"tg-9wq8",attrs:{colspan:"2"}},[t._v("评定：")]),e("td",{staticClass:"tg-0pky",attrs:{colspan:"8"}},[t._l(t.sheetData.judgeList,(function(a){return e("div",{key:a.id,staticClass:"qualityBox"},[e("div",{staticClass:"flex1",style:t.qualityEvaluation&&"padding-right: 20px;"},[e("span",[t._v(t._s("评定人：".concat(a.jdUserName)))]),e("span",[t._v(t._s("评定时间：".concat(a.jdTime)))]),e("span",[t._v(t._s("评定内容：".concat(a.jdContent)))])]),t.qualityEvaluation&&a.jdUserId===t.$store.getters.userInfo.id?e("div",[e("a-button",{directives:[{name:"has",rawName:"v-has",value:"jobchekc:evaluation:add",expression:"'jobchekc:evaluation:add'"}],attrs:{type:"link"},on:{click:t.openJudgeModal}},[t._v("质量评定")]),e("a-button",{directives:[{name:"has",rawName:"v-has",value:"jobchekc:evaluation:del",expression:"'jobchekc:evaluation:del'"}],attrs:{type:"link"},on:{click:function(e){return t.delJudge(a.id)}}},[t._v("删除")])],1):t._e()])})),t.sheetData.judgeList&&0!==t.sheetData.judgeList.length&&t.isJudge?t._e():e("div",{staticClass:"qualityBox"},[e("div",{staticClass:"flex1",style:t.qualityEvaluation&&"padding-right: 20px;"}),e("div",[t.fromData?e("a-button",{directives:[{name:"has",rawName:"v-has",value:"jobchekc:evaluation:add",expression:"'jobchekc:evaluation:add'"}],attrs:{type:"link"},on:{click:t.openJudgeModal}},[t._v("质量评定")]):t._e()],1)])],2)]),t._m(5),e("tr",[e("td",{staticClass:"tg-9wq8",attrs:{colspan:"2"}},[t._v("说明："+t._s(t.sheetData.remark))]),t._m(6)])],2),e("a-modal",{attrs:{title:"作业质量评定",width:800,visible:t.visible,centered:"",cancelText:"关闭",destroyOnClose:!0},on:{ok:t.handleOk,cancel:function(e){t.visible=!1}}},[e("a-form",{ref:"initForm",attrs:{form:t.form}},[e("a-form-item",[e("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["jdContent",t.validatorRules.jdContent],expression:"['jdContent', validatorRules.jdContent]"}],attrs:{"auto-size":{minRows:8,maxRows:8}}})],1)],1)],1)],1)},i=[function(){var t=this,e=t._self._c;return e("tr",[e("td",{staticClass:"tg-87ij",staticStyle:{width:"6%"}},[e("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[t._v("序号")])]),e("td",{staticClass:"tg-87ij",staticStyle:{width:"12%"}},[e("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[t._v("项点")])]),e("td",{staticClass:"tg-87ij",staticStyle:{width:"18%"}},[e("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[t._v("检查内容")])]),e("td",{staticClass:"tg-87ij",staticStyle:{width:"8%"}},[e("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[t._v("等级")])]),e("td",{staticClass:"tg-87ij",staticStyle:{width:"8%"}},[e("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[t._v("检查情况")])]),e("td",{staticClass:"tg-87ij",staticStyle:{width:"8%"}},[e("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[t._v("结果")])]),e("td",{staticClass:"tg-87ij",staticStyle:{width:"10%"}},[e("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[t._v("作业时间")])]),e("td",{staticClass:"tg-87ij",staticStyle:{width:"10%"}},[e("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[t._v("检查方式")])]),e("td",{staticClass:"tg-87ij",staticStyle:{width:"10%"}},[e("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[t._v("检查人")])]),e("td",{staticClass:"tg-87ij",staticStyle:{width:"10%"}},[e("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[t._v("检查时间")])])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{staticClass:"tg-0pky",attrs:{colspan:"10"}})])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{staticClass:"tg-0pky",attrs:{colspan:"10"}})])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{staticClass:"tg-87ij",attrs:{colspan:"7"}},[e("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[t._v("不合格项汇总")])]),e("td",{staticClass:"tg-87ij"},[e("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[t._v("整改情况")])]),e("td",{staticClass:"tg-87ij"},[e("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[t._v("复查时间")])]),e("td",{staticClass:"tg-87ij"},[e("span",{staticStyle:{"font-weight":"bold",color:"#000"}},[t._v("复查人")])])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{staticClass:"tg-0pky",attrs:{colspan:"10"}})])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{staticClass:"tg-0pky",attrs:{colspan:"10"}})])},function(){var t=this,e=t._self._c;return e("td",{staticClass:"tg-0pky",attrs:{colspan:"8"}},[t._v(" 1、表中只列出关键项点，检查人员在检查时参照工艺文件标准执行。"),e("br"),t._v(" 2、检查人员必须对当天作业内容进行检查。"),e("br"),t._v(" 3、表中所有内容全部现场检查时填写完成，并悬挂于部件上，随部件流转。"),e("br"),t._v(" 4、作业时间由作业班组填写，其余由检查人员填写。“检查情况”一栏详细记录检查情况；“结果”一栏对检查合格的画“√”不合格的画“×”；“检查方式”一栏写明检查手段，如：目视、测量、操作等。"),e("br"),t._v(" 5、检查人员对不合格项视情节严重情况开具整改单，及时提出整改意见，并督促整改，整改完成后及时进行复查。"),e("br"),t._v(" 6、由检查人员、质量工程师及专业工程师对整体作业质量做出最终判定。 ")])}],n=a("b7b4");function o(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",i=a.toStringTag||"@@toStringTag";function n(a,r,i,n){var o=r&&r.prototype instanceof c?r:c,u=Object.create(o.prototype);return l(u,"_invoke",function(a,r,i){var n,o,l,c=0,u=i||[],d=!1,m={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,a){return n=e,o=0,l=t,m.n=a,s}};function f(a,r){for(o=a,l=r,e=0;!d&&c&&!i&&e<u.length;e++){var i,n=u[e],f=m.p,h=n[2];a>3?(i=h===r)&&(l=n[(o=n[4])?5:(o=3,3)],n[4]=n[5]=t):n[0]<=f&&((i=a<2&&f<n[1])?(o=0,m.v=r,m.n=n[1]):f<h&&(i=a<3||n[0]>r||r>h)&&(n[4]=a,n[5]=r,m.n=h,o=0))}if(i||a>1)return s;throw d=!0,r}return function(i,u,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,h),o=u,l=h;(e=o<2?t:l)||!d;){n||(o?o<3?(o>1&&(m.n=-1),f(o,l)):m.n=l:m.v=l);try{if(c=2,n){if(o||(i="next"),e=n[i]){if(!(e=e.call(n,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,o<2&&(o=0)}else 1===o&&(e=n.return)&&e.call(n),o<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),o=1);n=t}else if((e=(d=m.n<0)?l:a.call(r,m))!==s)break}catch(e){n=t,o=1,l=e}finally{c=1}}return{value:e,done:d}}}(a,i,n),!0),u}var s={};function c(){}function u(){}function d(){}e=Object.getPrototypeOf;var m=[][r]?e(e([][r]())):(l(e={},r,(function(){return this})),e),f=d.prototype=c.prototype=Object.create(m);function h(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,l(t,i,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=d,l(f,"constructor",d),l(d,"constructor",u),u.displayName="GeneratorFunction",l(d,i,"GeneratorFunction"),l(f),l(f,i,"Generator"),l(f,r,(function(){return this})),l(f,"toString",(function(){return"[object Generator]"})),(o=function(){return{w:n,m:h}})()}function l(t,e,a,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}l=function(t,e,a,r){function n(e,a){l(t,e,(function(t){return this._invoke(e,a,t)}))}e?i?i(t,e,{value:a,enumerable:!r,configurable:!r,writable:!r}):t[e]=a:(n("next",0),n("throw",1),n("return",2))},l(t,e,a,r)}function s(t,e,a,r,i,n,o){try{var l=t[n](o),s=l.value}catch(t){return void a(t)}l.done?e(s):Promise.resolve(s).then(r,i)}function c(t){return function(){var e=this,a=arguments;return new Promise((function(r,i){var n=t.apply(e,a);function o(t){s(n,r,i,o,l,"next",t)}function l(t){s(n,r,i,o,l,"throw",t)}o(void 0)}))}}var u={name:"JobCheckSheetTable",data:function(){return{jdContentText:"",form:this.$form.createForm(this),validatorRules:{jdContent:{rules:[{required:!0,message:"请输入评定内容!"}]}},judgeQueryParam:{id:null,checkInstId:"",checkInstName:"",jdContent:"",jdTime:null,jdUserId:this.$store.getters.userInfo.id,jdUserName:this.$store.getters.userInfo.username},visible:!1,sheetData:{}}},props:{data:{type:Object,default:function(){return{}}},qualityEvaluation:{type:Boolean,default:!1},fromData:{type:Object,default:function(){}}},created:function(){this.sheetData=Object.assign({},this.data),this.sheetData.itemList=this.sortArray(this.sheetData.itemList)},mounted:function(){},computed:{isJudge:function(){var t=this;return!(!this.sheetData||!this.sheetData.judgeList||this.sheetData.judgeList.length<1)&&!!this.sheetData.judgeList.find((function(e){return e.jdUserId===t.$store.getters.userInfo.id}))}},methods:{getWorkCheckForm:function(){var t=c(o().m((function t(){var e,a=this;return o().w((function(t){while(1)switch(t.n){case 0:return e=this.fromData,t.a(2,Object(n["z"])({task2InstId:e.task2InstId,formInstId:e.id}).then((function(t){return t.success&&t.result&&(t.result.itemList=a.sortArray(t.result.itemList),a.sheetData=t.result),a.sheetData})))}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),openJudgeModal:function(){var t=this,e=this.fromData;this.judgeQueryParam.checkInstId=e.id,this.judgeQueryParam.checkInstName=e.name,this.visible=!0;var a=e.judgeList.find((function(e){return e.jdUserId===t.$store.getters.userInfo.id}));a?(this.judgeQueryParam.jdContent=a.jdContent,this.judgeQueryParam.id=a.id,this.form.getFieldDecorator("jdContent"),this.$nextTick((function(){t.form.setFieldsValue({jdContent:t.jdContentText||t.judgeQueryParam.jdContent})}))):(this.judgeQueryParam.jdContent="",this.judgeQueryParam.id=null,this.form.getFieldDecorator("jdContent"),this.$nextTick((function(){t.form.setFieldsValue({jdContent:""})})))},handleOk:function(){var t=this;this.form.validateFields((function(e,a){e||(Object.assign(t.judgeQueryParam,a),Object(n["I"])(t.judgeQueryParam).then((function(e){e.success?(t.jdContentText=a.jdContent,t.$message.success("保存成功"),t.$emit("brush"),t.getWorkCheckForm().then((function(e){t.$emit("judgeChange",t.sheetData)}))):t.$message.error(e.message)})),t.visible=!1)}))},sortArray:function(t){return t.sort(this.compare("sortNo")),t},compare:function(t){return function(e,a){return e[t]-a[t]}},delJudge:function(t){var e=this;this.$confirm({content:"是否删除作业质量评定？",okText:"确定",cancelText:"取消",onOk:function(){var a=new FormData;a.append("ids",t),Object(n["h"])(a).then((function(t){t.success?(e.$message.success("执行成功"),e.$emit("brush"),e.getWorkCheckForm().then((function(t){e.$emit("judgeChange",e.sheetData)}))):e.$message.error(t.message)}))}})}}},d=u,m=(a("bd18"),a("2877")),f=Object(m["a"])(d,r,i,!1,null,"3c8c4fbe",null);e["default"]=f.exports},e24e:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));var r=a("e8ae"),i=a.n(r),n=a("21a6"),o=a.n(n),l=(a("7268"),"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"),s=function(t,e){var a=new i.a.Workbook;"[object Object]"===Object.prototype.toString.call(t)&&(t=[t]),t.forEach((function(t){if(0===t.data.length)return!0;var e=a.addWorksheet(t.name),r=t.config&&t.config.merge||{},i=t.config&&t.config.borderInfo||{},n=t.config&&t.config.columnlen||{},o=t.images||{};return d(o,a,e),u(n,e),c(t.config,e),h(t.data,e),m(r,e),f(i,e),!0}));var r=a.xlsx.writeBuffer().then((function(t){var a=new Blob([t],{type:l});o.a.saveAs(a,"".concat(e,".xlsx"))}));return r},c=function(t,e){if(t&&t.rowlen)for(var a in t.rowlen){var r=parseInt(a),i=parseInt(t.rowlen[a]),n=e.getRow(r+1);n.height=i}},u=function(t,e){for(var a in t){var r=parseInt(a),i=parseInt(t[a]);e.getColumn(r+1).width=parseInt(i/7)}},d=function(t,e,a){for(var r in t){var i=t[r],n=i.src.split(";base64,"),o=n[0].replaceAll("data:image/",""),l=e.addImage({base64:i.src,extension:o}),s=luckysheet.location(i.default.left,i.default.top);a.addImage(l,{tl:{col:s.col,row:s.row},ext:{width:i.default.width,height:i.default.height}})}},m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,a=Object.values(t);a.forEach((function(t){e.mergeCells(t.r+1,t.c+1,t.r+t.rs,t.c+t.cs)}))},f=function(t,e){Array.isArray(t)&&t.forEach((function(t){if("range"===t.rangeType)for(var a=v(t.borderType,t.style,t.color),r=t.range[0],i=r.row,n=r.column,o=i[0]+1;o<i[1]+2;o++)for(var l=n[0]+1;l<n[1]+2;l++)e.getCell(o,l).border=a;if("cell"===t.rangeType){var s=t.value,c=s.col_index,u=s.row_index,d=Object.assign({},t.value);delete d.col_index,delete d.row_index;var m=y(d,u,c);e.getCell(u+1,c+1).border=m}}))},h=function(t,e){Array.isArray(t)&&t.forEach((function(t,a){t.every((function(t,r){if(!t)return!0;var i=p(t.bg),n=g(t.ff,t.fc,t.bl,t.it,t.fs,t.cl,t.ul),o=b(t.vt,t.ht,t.tb,t.tr),l="";t.f?l={formula:t.f,result:t.v}:!t.v&&t.ct&&t.ct.s?t.ct.s.forEach((function(t){l+=t.v})):l=t.v;var s=w(r),c=e.getCell(s+(a+1));for(var u in i){c.fill=i;break}return c.font=n,c.alignment=o,c.value=l,!0}))}))},p=function(t){if(!t)return{};var e={type:"pattern",pattern:"solid",fgColor:{argb:t.replace("#","")}};return e},g=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#000000",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:10,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l={0:"微软雅黑",1:"宋体（Song）",2:"黑体（ST Heiti）",3:"楷体（ST Kaiti）",4:"仿宋（ST FangSong）",5:"新宋体（ST Song）",6:"华文新魏",7:"华文行楷",8:"华文隶书",9:"Arial",10:"Times New Roman ",11:"Tahoma ",12:"Verdana",num2bl:function(t){return 0!==t}},s={name:"number"===typeof t?l[t]:t,family:1,size:i,color:{argb:e.replace("#","")},bold:l.num2bl(a),italic:l.num2bl(r),underline:l.num2bl(o),strike:l.num2bl(n)};return s},b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"default",i={vertical:{0:"middle",1:"top",2:"bottom",default:"top"},horizontal:{0:"center",1:"left",2:"right",default:"left"},wrapText:{0:!1,1:!1,2:!0,default:!1},textRotation:{0:0,1:45,2:-45,3:"vertical",4:90,5:-90,default:0}},n={vertical:i.vertical[t],horizontal:i.horizontal[e],wrapText:i.wrapText[a],textRotation:i.textRotation[r]};return n},v=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#000";if(!t)return{};var r={type:{"border-all":"all","border-top":"top","border-right":"right","border-bottom":"bottom","border-left":"left"},style:{0:"none",1:"thin",2:"hair",3:"dotted",4:"dashDot",5:"dashDot",6:"dashDotDot",7:"double",8:"medium",9:"mediumDashed",10:"mediumDashDot",11:"mediumDashDotDot",12:"slantDashDot",13:"thick"}},i={style:r.style[e],color:{argb:a.replace("#","")}},n={};return"all"===r.type[t]?(n["top"]=i,n["right"]=i,n["bottom"]=i,n["left"]=i):n[r.type[t]]=i,n};function y(t,e,a){var r={},i={type:{l:"left",r:"right",b:"bottom",t:"top"},style:{0:"none",1:"thin",2:"hair",3:"dotted",4:"dashDot",5:"dashDot",6:"dashDotDot",7:"double",8:"medium",9:"mediumDashed",10:"mediumDashDot",11:"mediumDashDotDot",12:"slantDashDot",13:"thick"}};for(var n in t)-1===t[n].color.indexOf("rgb")?r[i.type[n]]={style:i.style[t[n].style],color:{argb:t[n].color.replace("#","")}}:r[i.type[n]]={style:i.style[t[n].style],color:{argb:t[n].color}};return r}function w(t){var e="A".charCodeAt(0),a="Z".charCodeAt(0),r=a-e+1,i="";while(t>=0)i=String.fromCharCode(t%r+e)+i,t=Math.floor(t/r)-1;return i}},f000:function(t,e,a){},f0c5:function(t,e,a){"use strict";a("4b54")},f76d:function(t,e,a){"use strict";a("9527")}}]);