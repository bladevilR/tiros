(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a0d0b554","chunk-27981e40","chunk-35033241","chunk-29096d72","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7","chunk-2d0c89b7"],{"11d5":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"bodyWrapper",staticStyle:{height:"100% !important"},attrs:{"na-flex-height-full":""}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.findList.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:4,sm:24}},[t("a-form-item",{attrs:{label:"名称"}},[t("a-input",{attrs:{placeholder:"请输入名称","allow-clear":""},model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,"name",t)},expression:"queryParam.name"}})],1)],1),t("a-col",{attrs:{md:4,sm:24}},[t("a-form-item",{attrs:{label:"类型"}},[t("j-dict-select-tag",{attrs:{triggerChange:"",dictCode:"bu_form_type"},model:{value:e.queryParam.formType,callback:function(t){e.$set(e.queryParam,"formType",t)},expression:"queryParam.formType"}})],1)],1),t("a-col",{attrs:{md:3,sm:24}},[t("a-form-item",{attrs:{label:"线路"}},[t("line-select-list",{model:{value:e.queryParam.lineId,callback:function(t){e.$set(e.queryParam,"lineId",t)},expression:"queryParam.lineId"}})],1)],1),t("a-col",{attrs:{md:4,sm:24}},[t("a-form-item",{attrs:{label:"修程"}},[t("j-dict-select-tag",{attrs:{triggerChange:"",dictCode:"bu_repair_program,name,id"},on:{change:e.handleProgram},model:{value:e.queryParam.repairProgramId,callback:function(t){e.$set(e.queryParam,"repairProgramId",t)},expression:"queryParam.repairProgramId"}})],1)],1),t("a-col",{attrs:{md:4,sm:24}},[t("a-form-item",{attrs:{label:"规程"}},[t("j-dict-select-tag",{attrs:{triggerChange:"",dictCode:e.dicStr},on:{focus:e.handleFocusRegu},model:{value:e.queryParam.reguId,callback:function(t){e.$set(e.queryParam,"reguId",t)},expression:"queryParam.reguId"}})],1)],1),t("a-col",{attrs:{md:4,sm:24}},[t("a-space",[t("a-button",{on:{click:e.findList}},[e._v("查询")]),t("a-button",{attrs:{disabled:1!=e.records.length,type:"primary"},on:{click:function(t){return e.setValue(e.records[0])}}},[e._v(" 阈值设置 ")])],1)],1)],1)],1)],1),t("div",{staticStyle:{height:"calc(100% - 87px)"}},[t("vxe-table",{ref:"listTable",attrs:{border:"",align:"center",height:"auto","auto-resize":"",data:e.tableData,"checkbox-config":{trigger:"row",highlight:!0,range:!0},"show-overflow":"tooltip"},on:{"checkbox-change":e.rangeChange,"checkbox-all":e.rangeChange}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}),t("vxe-table-column",{attrs:{field:"name",title:"表单名称",align:"left","header-align":"center","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("a",{attrs:{href:"javascript:;"},on:{click:function(t){return t.stopPropagation(),e.viewForm(r)}}},[e._v(e._s(r.name))])]}}])}),t("vxe-table-column",{attrs:{field:"code",title:"编码",align:"left","header-align":"center",width:"80"}}),t("vxe-table-column",{attrs:{field:"type_dictText",title:"类型",width:"80"}}),t("vxe-table-column",{attrs:{field:"lineName",title:"线路",width:"100"}}),t("vxe-table-column",{attrs:{field:"repairProgramName",title:"修程",width:"100"}}),t("vxe-table-column",{attrs:{field:"reguName",title:"所属规程",width:"120"}}),t("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("div",{style:{backgroundColor:e.statusColor[r.status+""],borderRadius:"4px"}},[e._v(" "+e._s(r.status_dictText)+" ")])]}}])})],1)],1),t("div",{staticStyle:{height:"45px","background-color":"#fff"}},[t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.page.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1),t("FormModalView",{ref:"FormModalView"})],1)},n=[],i=a("b7b4"),o=a("5633"),s=a("ca00"),l=a("a296"),c={name:"ThresholdValuePage",components:{LineSelectList:o["default"],FormModalView:l["default"]},data:function(){return{assetTypeName:void 0,records:[],dicStr:"",statusColor:{0:"#dedede",1:"#bad795"},queryParam:{name:"",formType:null,lineId:"",repairProgramId:"",reguId:"",status:1,pageNo:1,pageSize:10},tableData:[],page:{totalResult:1}}},mounted:function(){this.findList()},methods:{setValue:function(e){this.$refs.FormModalView.showModal(e)},viewForm:function(e){this.$refs.FormModalView.showModal(e,!0)},handleProgram:function(e){e?this.dicStr="bu_repair_regu_info,name,id,status=1 and repair_pro_id='".concat(e,"'"):(this.queryParam.reguId="",this.dicStr="")},handleFocusRegu:function(){var e=this.queryParam.repairProgramId;Object(s["e"])(e)&&this.$message.warn("请先选择修程类型")},rangeChange:function(e){var t=e.records;this.records=t},findList:function(){var e=this;Object(i["F"])(this.queryParam).then((function(t){e.page.totalResult=t.result.total,e.tableData=t.result.records}))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=a,this.findList()}}},u=c,d=a("2877"),m=Object(d["a"])(u,r,n,!1,null,null,null);t["default"]=m.exports},"2cb5":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"90%",centered:"",title:e.title,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",destroyOnClose:!0,bodyStyle:{height:"80vh"}},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchQuery.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:7,sm:24}},[t("a-form-item",{attrs:{label:"名称"}},[t("a-input",{attrs:{placeholder:"名称或编码","allow-clear":""},model:{value:e.queryParam.searchText,callback:function(t){e.$set(e.queryParam,"searchText",t)},expression:"queryParam.searchText"}})],1)],1),t("a-col",{attrs:{md:7,sm:24}},[t("a-form-item",{attrs:{label:"状态"}},[t("j-dict-select-tag",{attrs:{dictCode:"bu_enable"},model:{value:e.queryParam.status,callback:function(t){e.$set(e.queryParam,"status",t)},expression:"queryParam.status"}})],1)],1),t("a-col",{attrs:{md:3,sm:12}},[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-button",{on:{click:e.searchQuery}},[e._v("查询")])],1)])],1)],1)],1),t("div",{staticStyle:{height:"calc(80vh - 85px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(80vh - 85px)"},attrs:{border:"","max-height":"100%","row-id":"id",align:e.allAlign,data:e.tableData,"show-overflow":"tooltip","radio-config":e.multiple?{}:{trigger:"row",checkMethod:e.checkRadioMethod},"checkbox-config":e.multiple?{trigger:"row",highlight:!0,checkMethod:e.checkRadioMethod}:{},"tree-config":{lazy:!0,children:"children",hasChild:"hasChildren",loadMethod:e.loadChildrenMethod}}},[e.multiple?t("vxe-table-column",{attrs:{type:"checkbox",width:"40"}}):t("vxe-table-column",{attrs:{type:"radio",width:"40"}}),t("vxe-table-column",{attrs:{field:"name",title:"名称","tree-node":"",align:"left"}}),t("vxe-table-column",{attrs:{align:"left","header-align":"center",field:"code",title:"编码",width:"15%"}}),t("vxe-table-column",{attrs:{field:"structType_dictText",title:"类型",width:"10%"}}),t("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",width:"10%"}}),t("vxe-table-column",{attrs:{field:"placeCode",title:"位置编码",width:"15%"}}),t("vxe-table-column",{attrs:{field:"placeDesc",title:"位置描述",width:"15%"}})],1)],1)])},n=[],i=a("8fad"),o={name:"TrainAssetType",props:{trainTypeId:{type:String,default:""},parentId:{type:String,default:null},multiple:{type:Boolean,default:!0},title:{type:String,default:"设备类型选择"},canSelectType:{type:Array,default:function(){return[1,2,3,4]}}},data:function(){return{queryParam:{trainTypeId:"",id:"",searchText:"",status:null,structType:null},allAlign:"center",tableData:[],treeData:[],selectParent:"",visible:!1,confirmLoading:!1}},mounted:function(){},methods:{showModal:function(){this.visible=!0,this.queryParam.trainTypeId=this.trainTypeId,this.findList()},handleOk:function(){var e=[];this.multiple?e=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&e.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",e),this.visible=!1},handleCancel:function(){this.$emit("cancel"),this.close()},close:function(){this.$emit("close"),this.visible=!1},findList:function(){var e=this;this.loading=!0,this.parentId&&(this.queryParam.id=this.parentId),this.selectParent&&(this.queryParam.id=this.selectParent),Object(i["Qd"])(this.queryParam).then((function(t){t.success&&(e.loading=!1,e.tableData=t.result)}))},findSelectList:function(){var e=this,t={id:this.parentId,trainTypeId:this.trainTypeId};this.parentId&&(t.id=this.parentId),Object(i["Qd"])(t).then((function(t){t.success&&(e.loading=!1,e.treeData=t.result.map((function(t){return e.genSelectTreeNode(t)})))}))},loadChildrenMethod:function(e){var t=this,a=e.row,r={trainTypeId:this.trainTypeId,id:a.id};return new Promise((function(e){Object(i["Qd"])(r).then((function(a){a.success?e(a.result):t.$message.error("".concat(a.msg))}))}))},loadSelectNodeMethod:function(e){var t=this,a={trainTypeId:this.trainTypeId,id:e.dataRef.id,searchText:this.queryParam.searchText,status:this.queryParam.status,structType:this.queryParam.structType};return new Promise((function(e){Object(i["Qd"])(a).then((function(e){e.success?e.result.map((function(e){t.treeData=t.treeData.concat(t.genSelectTreeNode(e))})):t.$message.warning(e.message)})),e()}))},genSelectTreeNode:function(e){return{id:e.id,pId:e.parentId,value:e.id,title:e.name,isLeaf:!e.hasChildren}},searchQuery:function(){this.findList()},checkRadioMethod:function(e){var t=e.row;return this.canSelectType.indexOf(t.structType)>-1}}},s=o,l=(a("9589"),a("2877")),c=Object(l["a"])(s,r,n,!1,null,"52968c59",null);t["default"]=c.exports},"3dcf":function(e,t,a){"use strict";a("ce49")},5633:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("span",[t("a-select",{key:e.key,attrs:{"allow-clear":"",value:e.getValueSting,disabled:e.disabled,placeholder:"线路"},on:{change:e.handleChange,select:e.onSelect}},[t("a-select-option",{attrs:{value:void 0}},[e._v("请选择")]),e._l(e.optionData,(function(a,r){return t("a-select-option",{key:r,attrs:{value:a.lineId}},[t("span",{staticStyle:{display:"inline-block",width:"100%"},attrs:{title:a.lineName}},[e._v(" "+e._s(a.lineName)+" ")])])}))],2)],1)},n=[],i=a("8fad"),o={name:"LineSelectList",props:{value:[String],triggerChange:Boolean,disabled:Boolean,defaultFirst:Boolean},data:function(){return{optionData:[],selectValue:"",key:0}},created:function(){this.findList()},computed:{getValueSting:function(){return null!=this.value?this.value.toString():void 0}},methods:{findList:function(){var e=this;Object(i["Jb"])().then((function(t){t.success&&(e.optionData=t.result,e.defaultFirst&&e.optionData&&e.optionData.length>0&&setTimeout((function(){e.$emit("change",e.optionData[0].lineId),e.$emit("input",e.optionData[0].lineId)}),500))}))},handleChange:function(e,t){var a="";if(t&&t.componentOptions.children[0].data&&(a=t.componentOptions.children[0].data.attrs.title),this.$emit("change",e),this.$emit("input",e),this.$emit("changeName",a),this.triggerChange)if(e){var r=this.optionData[t.key];this.$emit("change",e,r)}else this.$emit("change",e,null)},onSelect:function(e,t){if(e){var a=this.optionData[t.data.key];this.$emit("select",e,a)}else this.$emit("select","",null)}}},s=o,l=a("2877"),c=Object(l["a"])(s,r,n,!1,null,"77265147",null);t["default"]=c.exports},7237:function(e,t,a){},9589:function(e,t,a){"use strict";a("7237")},a296:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",[t("a-modal",{attrs:{title:"阈值设置",width:"100%",visible:e.visible,footer:null,dialogClass:"fullDialog no-footer",destroyOnClose:""},on:{cancel:e.handleCancel}},[t("div",[t("a-row",{staticStyle:{"margin-bottom":"13px"},attrs:{type:"flex",justify:"space-between"}},[t("a-col",{attrs:{span:18}},[e.selectItem?t("div",{staticStyle:{"line-height":"32px","padding-left":"15px","font-weight":"bold",color:"red"}},[e._v(" "+e._s(e.selectItem.itemName)+"："+e._s(e.selectItem.linkDomain)+" "+e._s(e.selectItem.operator_dictText)+" "+e._s(e.selectItem.threshold)+" "),e.selectItem.operator2&&e.selectItem.threshold2?t("span",[e._v(" 且 "+e._s(e.selectItem.operator2_dictText)+" "+e._s(e.selectItem.threshold2)+" ")]):e._e(),t("span",{staticStyle:{"margin-left":"10px",color:"#cccccc"}},[e._v(" 提示："+e._s(e.selectItem.template)+" ")])]):t("div",{staticStyle:{"line-height":"32px","padding-left":"15px","font-weight":"bold",color:"#cccccc"}},[t("span",[e._v("没有设置阈值")])])]),t("a-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[e.readOnly?e._e():t("a-space",[t("a-button",{directives:[{name:"show",rawName:"v-show",value:e.selectFormId,expression:"selectFormId"}],attrs:{type:"primary"},on:{click:e.setValue}},[e._v(" 设置阈值 ")]),t("a-button",{directives:[{name:"show",rawName:"v-show",value:e.selectFormId,expression:"selectFormId"}],staticClass:"primary-color",attrs:{type:"dashed"},on:{click:e.showDrawer}},[e._v(" 已设置列表 ")])],1)],1)],1),t("div",{staticStyle:{margin:"0px",padding:"0px",width:"100%",height:"calc(100vh - 115px)"},attrs:{id:"luckysheet"}})],1)]),t("a-drawer",{attrs:{title:"已设置列表",placement:"right",closable:!0,visible:e.drawerVisible,destroyOnClose:!0,zIndex:99998,width:800},on:{close:e.onClose}},[t("vxe-table",{ref:"listTable",attrs:{border:"",align:e.allAlign,data:e.settingList,"auto-resize":!0,"show-overflow":"ellipsis","edit-config":{trigger:"manual",mode:"row"}}},[t("vxe-table-column",{attrs:{field:"itemName",title:"测量项名","min-width":"200",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"linkDomain",title:"区域",width:"120"}}),t("vxe-table-column",{attrs:{field:"operator_dictText",title:"操作符",width:"80"}}),t("vxe-table-column",{attrs:{field:"threshold",title:"阈值",width:"100"}}),t("vxe-table-column",{attrs:{field:"assetTypeName",title:"设备","min-width":"120"}}),t("vxe-table-column",{attrs:{title:"操作",width:"100",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("a-space",[t("a-button",{attrs:{type:"link"},on:{click:function(t){return e.editSetting(r)}}},[e._v("编辑")]),t("a-button",{attrs:{type:"link"},on:{click:function(t){return e.deleteSetting(r)}}},[e._v("删除")])],1)]}}])})],1)],1),e.editVisible&&e.selectFormId?t("ThresholdEdit",{attrs:{setting:e.curSetting,"form-id":e.selectFormId,visible:e.editVisible,zones:e.selectZones,zoneNames:e.selectZoneNames},on:{"update:visible":function(t){e.editVisible=t}}}):e._e(),t("train-asset-type",{ref:"selectForm",attrs:{multiple:!1},on:{ok:e.selectTrainSys}})],1)},n=[],i=a("b7b4"),o=a("2cb5"),s=a("8fad"),l=a("4328"),c=a.n(l),u=a("2410"),d=a.n(u),m=a("d21d"),h={name:"formModal",components:{TrainAssetType:o["default"],ThresholdEdit:m["default"]},data:function(){var e=this;return{visible:!1,readOnly:!1,drawerVisible:!1,selectFormId:"",editVisible:!1,loading:!1,queryParam:{name:"",lineId:"",assetTypeId:"",pageNo:1,pageSize:1e3},allAlign:"center",tableData:[],assetTypeName:void 0,colNames:[],defaultOptions:{container:"luckysheet",title:"sheet",column:26,row:50,lang:"zh",allowEdit:!1,showinfobar:!1,sheetFormulaBar:!1,showsheetbar:!1,showstatisticBar:!1,enableAddRow:!1,enableAddCol:!1,showtoolbar:!1,hook:{cellMousedown:function(t,a,r,n){e.getRowColData(a.r,a.c)}}},selectZones:"",selectZoneNames:"",curFormId:null,settingList:[],curSetting:null,selectItem:null}},mounted:function(){mini.parse();for(var e=65;e<91;e++)this.colNames.push(String.fromCharCode(e))},beforeDestroy:function(){luckysheet.destroy()},methods:{showModal:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.readOnly=a,this.visible=!0,this.$nextTick((function(){e?(t.loadForm(e.id),t.curFormId=e.id):t.curFormId=null}))},handleCancel:function(){this.visible=!1},selectTrainSys:function(e){e.length&&(this.queryParam.assetTypeId=e[0].id,this.assetTypeName=e[0].name)},loadForm:function(e){var t=this;luckysheet.destroy(),Object(s["Db"])(e).then((function(a){if(a.success){t.selectFormId=e;var r=JSON.parse(a.result),n=d()(t.defaultOptions);n.data=[r],luckysheet.create(n)}else t.selectFormId=""})).catch((function(e){t.$message.error("加载表单内容异常"),luckysheet.create(op)}))},setValue:function(){var e=this,t=luckysheet.getRange();if(t){var a=[],r=[];t.forEach((function(t){var n=e.colNames[t.column[0]]+t.row[0]+":"+e.colNames[t.column[1]]+t.row[1];r.push(n),a.push({row:t.row,col:t.column})})),this.selectZones=a[0],this.selectZoneNames=r[0],this.curSetting=null,this.editVisible=!0}},showDrawer:function(){this.loadFormThresholds(),this.drawerVisible=!0},onClose:function(){this.drawerVisible=!1},loadFormThresholds:function(){var e=this;Object(i["r"])(this.curFormId).then((function(t){t.success?e.settingList=t.result:e.$message.error("加载已设置的数据错误")})).catch((function(t){e.$message.error("加载已设置的数据错误")}))},deleteSetting:function(e){var t=this;this.$confirm({zIndex:99999,content:"你确定要删除该设置",onOk:function(){Object(i["l"])(c.a.stringify({id:e.id})).then((function(e){e.success?(t.$message.success("删除成功"),t.loadFormThresholds()):t.$message.error("删除失败")})).catch((function(e){t.$message.error("删除异常")}))}})},editSetting:function(e){this.curSetting=e,this.drawerVisible=!1,this.editVisible=!0},getRowColData:function(e,t){var a=this;this.selectItem=null,Object(i["y"])({customId:this.curFormId,row1:e,row2:e,col1:t,col2:t}).then((function(e){e.success&&(a.selectItem=e.result)}))}}},f=h,p=(a("3dcf"),a("2877")),g=Object(p["a"])(f,r,n,!1,null,"1630050a",null);t["default"]=g.exports},b7b4:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"j",(function(){return i})),a.d(t,"n",(function(){return o})),a.d(t,"c",(function(){return l})),a.d(t,"v",(function(){return c})),a.d(t,"x",(function(){return s})),a.d(t,"p",(function(){return d})),a.d(t,"F",(function(){return m})),a.d(t,"H",(function(){return h})),a.d(t,"r",(function(){return f})),a.d(t,"o",(function(){return g})),a.d(t,"l",(function(){return b})),a.d(t,"y",(function(){return y})),a.d(t,"a",(function(){return v})),a.d(t,"i",(function(){return w})),a.d(t,"m",(function(){return k})),a.d(t,"s",(function(){return T})),a.d(t,"B",(function(){return j})),a.d(t,"C",(function(){return I})),a.d(t,"G",(function(){return q})),a.d(t,"J",(function(){return O})),a.d(t,"g",(function(){return P})),a.d(t,"k",(function(){return $})),a.d(t,"t",(function(){return _})),a.d(t,"e",(function(){return S})),a.d(t,"u",(function(){return C})),a.d(t,"E",(function(){return z})),a.d(t,"z",(function(){return N})),a.d(t,"A",(function(){return D})),a.d(t,"d",(function(){return x})),a.d(t,"f",(function(){return F})),a.d(t,"q",(function(){return p})),a.d(t,"D",(function(){return M})),a.d(t,"I",(function(){return V})),a.d(t,"h",(function(){return L})),a.d(t,"w",(function(){return u}));var r=a("0fea"),n=function(e){return Object(r["j"])("/quality/rectify/add",e)},i=function(e){return Object(r["j"])("/quality/rectify/delete",e)},o=function(e){return Object(r["j"])("/quality/rectify/edit",e)},s=function(e){return Object(r["d"])("/quality/rectify/page",e)},l=function(e){return Object(r["j"])("/quality/rectify/close",e)},c=function(e){return Object(r["d"])("/quality/rectify/get",e)},u=function(e){return Object(r["d"])("/quality/rectify/getCode",e)},d=function(e){return Object(r["d"])("/quality/measurealert/page",e)},m=function(e){return Object(r["d"])("/quality/measurethreshold/form/page-data-form",e)},h=function(e){return Object(r["j"])("/quality/measurethreshold/threshold/save",e)},f=function(e){return Object(r["d"])("/quality/measurethreshold/threshold/list/".concat(e))},p=function(e){return Object(r["d"])("/serialPlan/plan/forms/online-form/alert-records",{dataRecordId:e})},g=function(e){return Object(r["j"])("/quality/measurethreshold/threshold/edit",e)},b=function(e){return Object(r["j"])("/quality/measurethreshold/threshold/delete",e)},y=function(e){return Object(r["d"])("/quality/measurethreshold/threshold/get",e)},v=function(e){return Object(r["j"])("/quality/leaverecord/add",e)},w=function(e){return Object(r["j"])("/quality/leaverecord/delete",e)},x=function(e){return Object(r["j"])("/quality/leaverecord/close",e)},k=function(e){return Object(r["j"])("/quality/leaverecord/edit",e)},T=function(e){return Object(r["d"])("/quality/leaverecord/page",e)},j=function(e,t){return Object(r["c"])("/quality/leaverecord/workLeaveRecordExport",e,t)},I=function(e){return Object(r["d"])("/quality/exception-transfer/page",e)},q=function(e){return Object(r["j"])("/quality/exception-transfer/add",e)},O=function(e){return Object(r["j"])("/quality/exception-transfer/edit",e)},P=function(e){return Object(r["j"])("/quality/exception-transfer/decide",e)},$=function(e){return Object(r["j"])("/quality/exception-transfer/delete",e)},_=function(e){return Object(r["d"])("/quality/record-confirm/list",e)},S=function(e){return Object(r["j"])("/quality/record-confirm/confirm",e)},C=function(e){return Object(r["d"])("/quality/record-confirm/work-record/get",e)},N=function(e){return Object(r["d"])("/serialPlan/plan/forms/check-record/get",e)},D=function(e){return Object(r["d"])("/workcheck/get",e)},F=function(e){return Object(r["j"])("/quality/record-confirm/confirm",e)},z=function(e){return Object(r["d"])("/quality/record-confirm/page",e)},M=function(e){return Object(r["d"])("/quality/record-confirm/page/check-record",e)},V=function(e){return Object(r["j"])("/serialPlan/plan/forms/judge/save",e)},L=function(e){return Object(r["j"])("/serialPlan/plan/forms/judge/delete",e)}},ce49:function(e,t,a){},d21d:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"600px",title:"阈值设置",visible:e.visible,cancelText:"关闭",centered:"",destroyOnClose:!0,bodyStyle:{height:"500px"}},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-form-model",{ref:"form",attrs:{model:e.form,rules:e.rules}},[t("a-row",[t("a-col",{attrs:{span:24}},[t("a-form-model-item",{attrs:{label:"测量项名",prop:"itemName"}},[t("a-input",{attrs:{placeholder:"请输入测量项名称"},model:{value:e.form.itemName,callback:function(t){e.$set(e.form,"itemName",t)},expression:"form.itemName"}})],1)],1)],1),t("a-row",[t("a-col",{attrs:{span:5}},[t("a-form-model-item",{attrs:{label:"比较值",prop:"linkDomain"}},[e._v(" "+e._s(e.form.linkDomain)+" ")])],1),t("a-col",{attrs:{span:5}},[t("a-form-model-item",{attrs:{label:"比较符",prop:"operator"}},[t("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_operator"},model:{value:e.form.operator,callback:function(t){e.$set(e.form,"operator",t)},expression:"form.operator"}})],1)],1),t("a-col",{attrs:{span:13,offset:1}},[t("a-form-model-item",{attrs:{label:"阈值",prop:"threshold"}},[t("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入阈值"},model:{value:e.form.threshold,callback:function(t){e.$set(e.form,"threshold",t)},expression:"form.threshold"}})],1)],1)],1),t("a-row",[t("a-col",{attrs:{span:5}},[t("a-form-model-item",[e._v(" - ")])],1),t("a-col",{attrs:{span:5}},[t("a-form-model-item",{attrs:{label:"比较符2",prop:"operator2"}},[t("j-dict-select-tag",{attrs:{placeholder:"请选择",dictCode:"bu_operator"},model:{value:e.form.operator2,callback:function(t){e.$set(e.form,"operator2",t)},expression:"form.operator2"}})],1)],1),t("a-col",{attrs:{span:13,offset:1}},[t("a-form-model-item",{attrs:{label:"阈值2",prop:"threshold2"}},[t("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入阈值"},model:{value:e.form.threshold2,callback:function(t){e.$set(e.form,"threshold2",t)},expression:"form.threshold2"}})],1)],1)],1),t("a-row",[t("a-col",{attrs:{span:24}},[t("a-form-model-item",{attrs:{label:"提示消息模版"}},[t("a-textarea",{attrs:{placeholder:"请输入提示模版,支持${value}","auto-size":{minRows:2,maxRows:3}},model:{value:e.form.template,callback:function(t){e.$set(e.form,"template",t)},expression:"form.template"}})],1)],1)],1),t("a-row",[t("a-col",{attrs:{span:24}},[t("a-form-model-item",{attrs:{label:"指定设备"}},[t("a-select",{ref:"assetType",attrs:{placeholder:"请选择设备",open:!1},on:{focus:e.openAssetTypeModal},model:{value:e.form.assetTypeName,callback:function(t){e.$set(e.form,"assetTypeName",t)},expression:"form.assetTypeName"}},[t("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},on:{click:e.openAssetTypeModal},slot:"suffixIcon"})],1)],1)],1)],1)],1),t("train-asset-type",{ref:"assetTypeModal",attrs:{title:"设备选择",multiple:!1},on:{ok:e.onAssetTypeSelect}})],1)},n=[],i=a("2cb5"),o=a("b7b4"),s={name:"ThresholdEdit",props:["visible","formId","setting","zones","zoneNames"],components:{TrainAssetType:i["default"]},data:function(){return{form:{customId:"",itemName:"",operator:"",threshold:"",operator2:"",threshold2:"",template:"${trainNo} > ${assetTypeName} > ${name} ${operator} ${value}",linkDomain:"",assetTypeId:"",assetTypeName:"",row1:0,row2:0,col1:0,col2:0},rules:{itemName:[{required:!0,message:"请输入测量项名称",trigger:"blur"}],operator:[{required:!0,message:"请选择比较符",trigger:"blur"}],threshold:[{required:!0,message:"请输入阈值",trigger:"blur"}],linkDomain:[{required:!0,message:"请选择范围",trigger:"blur"}]}}},mounted:function(){this.setting?Object.assign(this.form,this.setting):(this.form.linkDomain=this.zoneNames,this.form.row1=this.zones.row[0],this.form.row2=this.zones.row[1],this.form.col1=this.zones.col[0],this.form.col2=this.zones.col[1],this.form.customId=this.formId)},methods:{handleOk:function(){var e=this;this.$refs.form.validate((function(t){t&&(e.form.operator||(e.form.operator="",e.form.threshold=""),e.form.operator2||(e.form.operator2="",e.form.threshold2=""),e.setting?Object(o["o"])(e.form).then((function(t){t.success?(e.$message.success("保存成功"),e.handleCancel()):e.$message.error(t.message)})).catch((function(t){e.$message.error("保存异常")})):Object(o["H"])(e.form).then((function(t){t.success?(e.$message.success("保存成功"),e.handleCancel()):e.$message.error(t.message)})).catch((function(t){e.$message.error("保存异常")})))}))},handleCancel:function(){this.form={customId:"",itemName:"",operator:"",threshold:"",template:"${trainNo} > ${assetTypeName} > ${name} ${operator} ${value}",linkDomain:"",assetTypeId:"",assetTypeName:""},this.$emit("update:visible",!1)},openAssetTypeModal:function(){this.$refs.assetTypeModal.showModal(),this.$refs.assetType.blur()},onAssetTypeSelect:function(e){if(e.length>0){var t=e[0];t?(this.form.assetTypeName=t.name,this.form.assetTypeId=t.id):(this.form.assetTypeName="",this.form.assetTypeId=""),this.$forceUpdate(),this.$refs.form.validateField("assetType")}else this.form.assetTypeId=""}}},l=s,c=a("2877"),u=Object(c["a"])(l,r,n,!1,null,"796585d2",null);t["default"]=u.exports}}]);