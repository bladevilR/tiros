(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ef16cf90","chunk-24cb054c"],{"0743":function(e,t,r){},9527:function(e,t,r){},a6da:function(e,t,r){e.exports=r.p+"img/code.77bdebfa.png"},b245:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:"85%",title:"人员选择",visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",bodyStyle:{height:"70vh"},destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-row",[t("a-col",{attrs:{md:4,sm:24}},[t("div",{staticStyle:{height:"calc(70vh - 20px)","border-right":"1px solid #e3e1e1","margin-right":"15px"}},[e.treeData&&e.treeData.length>0?t("a-tree",{staticClass:"limitHeight",attrs:{defaultSelectedKeys:[e.queryParam.depId],defaultExpandAll:!0,"tree-data":e.treeData},on:{select:e.onSelect}}):e._e()],1)]),t("a-col",{attrs:{md:20,sm:24}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.findList.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"账号"}},[t("a-input",{attrs:{placeholder:"请输入用户账号"},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"真实名字"}},[t("a-input",{attrs:{placeholder:"请输入真实名字"},model:{value:e.queryParam.realname,callback:function(t){e.$set(e.queryParam,"realname",t)},expression:"queryParam.realname"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"手机号码"}},[t("a-input",{attrs:{placeholder:"请输入手机号码"},model:{value:e.queryParam.phone,callback:function(t){e.$set(e.queryParam,"phone",t)},expression:"queryParam.phone"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"角色"}},[t("j-dict-select-tag",{attrs:{triggerChange:!0,dictCode:"sys_role,role_name,id",placeholder:"选择角色"},model:{value:e.queryParam.roleId,callback:function(t){e.$set(e.queryParam,"roleId",t)},expression:"queryParam.roleId"}})],1)],1),t("a-col",{attrs:{md:2,sm:8}},[t("a-button",{on:{click:e.findList}},[e._v("查询")])],1)],1)],1)],1),t("div",{staticStyle:{height:"calc(70vh - 130px)"}},[t("vxe-table",{ref:"listTable",staticStyle:{height:"calc(70vh - 130px)"},attrs:{border:"",align:e.allAlign,data:e.tableData,"max-height":"100%","show-overflow":"tooltip","radio-config":e.multiple?{}:{trigger:"row"},"checkbox-config":e.multiple?{trigger:"row",highlight:!0,range:!0}:{},"edit-config":{trigger:"manual",mode:"row"}}},[e.multiple?t("vxe-table-column",{attrs:{type:"checkbox",width:"5%"}}):t("vxe-table-column",{attrs:{type:"radio",width:"5%"}}),t("vxe-table-column",{attrs:{field:"workNo",title:"工号",width:"100",align:"center"}}),t("vxe-table-column",{attrs:{field:"username",title:"用户账号",width:"150",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"realname",title:"用户名字",width:"100",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"roleNames",title:"角色","min-width":"180",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"sex_dictText",title:"性别",width:"80"}}),t("vxe-table-column",{attrs:{field:"phone",title:"手机号码",width:"120"}}),t("vxe-table-column",{attrs:{field:"orgCode",title:"部门",width:"120",align:"left","header-align":"center"}}),t("vxe-table-column",{attrs:{field:"status_dictText",title:"状态",width:"80"}})],1),t("vxe-pager",{attrs:{perfect:"","current-page":e.queryParam.pageNo,"page-size":e.queryParam.pageSize,total:e.totalResult,layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"]},on:{"update:currentPage":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryParam,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.queryParam,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParam,"pageSize",t)},"page-change":e.handlePageChange}})],1)])],1)],1)},o=[],a=r("8fad"),i={name:"UserList",props:{multiple:{type:Boolean,default:!0},depId:{type:String,default:""}},data:function(){return{queryParam:{username:"",realname:"",phone:"",orgCode:"",roleId:void 0,pageNo:1,pageSize:10},allAlign:"center",totalResult:0,tableData:[],visible:!1,confirmLoading:!1,treeData:[]}},watch:{depId:function(e){this.$set(this.queryParam,"depId",e||"")}},mounted:function(){this.$set(this.queryParam,"depId",this.depId||"")},methods:{showModal:function(){this.visible=!0,this.findList(),this.getTreeList()},getTreeList:function(){var e=this;Object(a["yb"])().then((function(t){t.success&&(e.treeData=t.result)}))},onSelect:function(e,t){if(e.length){var r=t.node.dataRef;this.queryParam.depId=r.id,this.findList()}else this.queryParam.orgCode="",this.findList()},findList:function(){var e=this;this.loading=!0,Object(a["uc"])(this.queryParam).then((function(t){e.loading=!1,t.success?(e.totalResult=t.result.total,e.tableData=t.result.records):e.$message.error("加载用户数据失败")})).catch((function(t){e.$message.error("加载用户数据异常")})).finally((function(){}))},handlePageChange:function(e){var t=e.currentPage,r=e.pageSize;this.queryParam.pageNo=t,this.queryParam.pageSize=r,this.findList()},handleOk:function(){var e=[];this.multiple?e=this.$refs.listTable.getCheckboxRecords():this.$refs.listTable.getRadioRecord()&&e.push(this.$refs.listTable.getRadioRecord()),this.$emit("ok",e),this.visible=!1},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,Object.assign(this.$data,this.$options.data())}}},c=i,u=(r("f76d"),r("2877")),s=Object(u["a"])(c,n,o,!1,null,"4aa7956f",null);t["default"]=s.exports},b9c3:function(e,t,r){"use strict";r.d(t,"lb",(function(){return i})),r.d(t,"f",(function(){return c})),r.d(t,"i",(function(){return u})),r.d(t,"v",(function(){return s})),r.d(t,"b",(function(){return f})),r.d(t,"l",(function(){return p})),r.d(t,"p",(function(){return m})),r.d(t,"G",(function(){return h})),r.d(t,"c",(function(){return d})),r.d(t,"B",(function(){return b})),r.d(t,"k",(function(){return w})),r.d(t,"A",(function(){return k})),r.d(t,"x",(function(){return j})),r.d(t,"g",(function(){return v})),r.d(t,"E",(function(){return O})),r.d(t,"C",(function(){return y})),r.d(t,"M",(function(){return x})),r.d(t,"kb",(function(){return C})),r.d(t,"O",(function(){return P})),r.d(t,"N",(function(){return U})),r.d(t,"jb",(function(){return T})),r.d(t,"t",(function(){return $})),r.d(t,"d",(function(){return N})),r.d(t,"W",(function(){return S})),r.d(t,"X",(function(){return G})),r.d(t,"e",(function(){return L})),r.d(t,"o",(function(){return D})),r.d(t,"V",(function(){return F})),r.d(t,"R",(function(){return B})),r.d(t,"Q",(function(){return V})),r.d(t,"K",(function(){return Q})),r.d(t,"L",(function(){return E})),r.d(t,"fb",(function(){return be})),r.d(t,"bb",(function(){return H})),r.d(t,"Y",(function(){return Y})),r.d(t,"J",(function(){return W})),r.d(t,"hb",(function(){return ae})),r.d(t,"U",(function(){return ie})),r.d(t,"eb",(function(){return X})),r.d(t,"cb",(function(){return Z})),r.d(t,"a",(function(){return ee})),r.d(t,"j",(function(){return le})),r.d(t,"nb",(function(){return de})),r.d(t,"gb",(function(){return fe})),r.d(t,"m",(function(){return pe})),r.d(t,"H",(function(){return ke})),r.d(t,"T",(function(){return A})),r.d(t,"S",(function(){return _})),r.d(t,"mb",(function(){return z})),r.d(t,"z",(function(){return me})),r.d(t,"db",(function(){return he})),r.d(t,"y",(function(){return ge})),r.d(t,"u",(function(){return l})),r.d(t,"F",(function(){return g})),r.d(t,"ob",(function(){return q})),r.d(t,"q",(function(){return R})),r.d(t,"D",(function(){return I})),r.d(t,"ib",(function(){return te})),r.d(t,"n",(function(){return re})),r.d(t,"I",(function(){return K})),r.d(t,"P",(function(){return M})),r.d(t,"s",(function(){return ce})),r.d(t,"Z",(function(){return ue})),r.d(t,"ab",(function(){return se})),r.d(t,"h",(function(){return ne})),r.d(t,"w",(function(){return oe})),r.d(t,"r",(function(){return J}));var n=r("0fea"),o=r("4328"),a=r.n(o),i=function(e){return Object(n["j"])("/group/fault/info/submit",e)},c=function(e){return Object(n["j"])("/group/fault/info/cancel",e)},u=function(e){return Object(n["j"])("/group/fault/info/delete",e)},s=function(e){return Object(n["d"])("/group/fault/info/page",e)},l=function(e){return Object(n["d"])("/group/fault/info/get",e)},d=function(e){return Object(n["j"])("/group/safeassume/read/add",e)},f=function(e){return Object(n["j"])("/group/safeassume/add",e)},p=function(e){return Object(n["j"])("/group/safeassume/delete",e)},m=function(e){return Object(n["j"])("/group/safeassume/edit",e)},h=function(e){return Object(n["d"])("/group/safeassume/page",e)},g=function(e){return Object(n["d"])("/group/safeassume/get",e)},b=function(e){return Object(n["d"])("/group/turnoverchange/page",e)},k=function(e){return Object(n["d"])("/material/spare-part/get",e)},w=function(e){return Object(n["j"])("/group/turnoverchange/delete",e)},j=function(e){return Object(n["d"])("/group/measurealert/page",e)},v=function(e){return Object(n["j"])("/group/measurealert/close",e)},O=function(e){return Object(n["d"])("/group/spare-part/page",e)},y=function(e){return Object(n["d"])("/group/spare-part/get",e)},I=function(e){return Object(n["d"])("/produce/train/history/asset/use/page",e)},x=function(e){return Object(n["d"])("/group/toolequipment/page",e)},C=function(e){return Object(n["j"])("/group/toolequipment/setStatus",e)},R=function(e){return Object(n["d"])("/group/toolequipment/usage",e)},P=function(e){return Object(n["d"])("/group/tool/page",e)},U=function(e){return Object(n["d"])("/group/tool/get",e)},T=function(e){return Object(n["j"])("/group/tool/setDutyUser",e)},q=function(e){return Object(n["d"])("/group/tool/usage",e)},$=function(e){return Object(n["d"])("/group/information/basic",e)},N=function(e){return Object(n["j"])("/group/information/tools/add",e)},S=function(e){return Object(n["d"])("/group/information/workstation/page-related",e)},G=function(e){return Object(n["d"])("/group/information/workstation/page-unrelated",e)},L=function(e){return Object(n["j"])("/group/information/workstation/add",e)},D=function(e){return Object(n["j"])("/group/information/workstation/delete",e)},_=function(e){return Object(n["d"])("/workGroup/workOrder/relevanceInfo/".concat(e))},z=function(e){return Object(n["j"])("/workGroup/workOrder/submit-to-dispatcher",a.a.stringify(e))},F=function(e){return Object(n["d"])("/workGroup/workRecord/list",e)},V=function(e){return Object(n["d"])("/serialPlan/plan/forms/online-form/get",e)},B=function(e){return Object(n["d"])("/serialPlan/plan/forms/work-record/get",e)},M=function(e){return Object(n["d"])("/serialPlan/plan/forms/check-record/get",e)},A=function(e){return Object(n["d"])("/workGroup/workOrder/page",e)},J=function(e){return Object(n["d"])("/workGroup/workOrder/apply/page",e)},Q=function(e){return Object(n["d"])("/workGroup/workRecord/recordForm",e)},E=function(e){return Object(n["d"])("/workGroup/workRecord/relevanceInfo/".concat(e))},K=function(e){return Object(n["d"])("/workGroup/workRecord/relevanceInfo/bookSteps/".concat(e))},H=function(e){return Object(n["j"])("/workGroup/workRecord/save/form-result",e)},Y=function(e){return Object(n["j"])("/workGroup/workRecord/check",e)},W=function(e){return Object(n["j"])("/workGroup/workRecord/getTaskQRCode",e)},X=function(e){return Object(n["j"])("/workGroup/workRecord/work-record/save-manufNo",a.a.stringify(e))},Z=function(e){return Object(n["j"])("/workGroup/workRecord/save/material",e)},ee=function(e){return Object(n["j"])("/workGroup/workRecord/save/actMaterial",e)},te=function(e){return Object(n["j"])("/workGroup/workRecord/save/work-time",e)},re=function(e){return Object(n["j"])("/workGroup/workRecord/arrange/delete",e)},ne=function(e){return Object(n["j"])("/workGroup/workOrder/material/commit-temp-apply",e)},oe=function(e){return Object(n["d"])("/workGroup/workOrder/material/apply/list",e)},ae=function(e){return Object(n["j"])("/workGroup/workRecord/check/saveExcelData",e)},ie=function(e){return Object(n["d"])("/workGroup/workRecord/get/excelData/".concat(e))},ce=function(e){return Object(n["d"])("/serialPlan/plan/forms/check-record/item/list",e)},ue=function(e){return Object(n["j"])("/workGroup/workRecord/check-record/set-check",e)},se=function(e){return Object(n["j"])("/workGroup/workRecord/check-record/set-time",e)},le=function(e){return Object(n["j"])("/workGroup/workRecord/delete/material",a.a.stringify(e))},de=function(e){return Object(n["j"])("/workGroup/workRecord/submit-task",e)},fe=function(e){return Object(n["j"])("/workGroup/workRecord/save/tool",e)},pe=function(e){return Object(n["j"])("/workGroup/workRecord/delete/tool",a.a.stringify(e))},me=function(e){return Object(n["d"])("/workGroup/workRecord/outsourceOutin",e)},he=function(e){return Object(n["j"])("/workGroup/workRecord/save/outsourceOutin",e)},ge=function(e){return Object(n["d"])("/workGroup/workRecord/outin/not-returns",e)},be=function(e){return Object(n["j"])("/group/safeassume/read/add",a.a.stringify(e))},ke=function(e){return Object(n["d"])("/serialPlan/plan/page",e)}},d0f9:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,width:800,visible:e.visible,confirmLoading:e.confirmLoading,centered:"",cancelText:"关闭",destroyOnClose:!0},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-row",[t("a-col",{attrs:{md:18}},[t("div",[t("a-form",{ref:"initForm",attrs:{form:e.form}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"登录名称"}},[t("a-row",{attrs:{gutter:10}},[t("a-col",{attrs:{span:14}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["checkUserName",e.validatorRules.checkUserName],expression:"['checkUserName', validatorRules.checkUserName]",modifiers:{trim:!0}}]})],1),t("a-col",{attrs:{span:10}},[t("a-button",{attrs:{type:"link"},on:{click:e.useCurrentUser}},[e._v("使用当前账号和密码")])],1)],1)],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"登录密码"}},[t("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["checkUserPwd",e.validatorRules.checkUserPwd],expression:"['checkUserPwd', validatorRules.checkUserPwd]",modifiers:{trim:!0}}]})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"检查结果"}},[t("a-checkbox",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["exp",{initialValue:!1}],expression:"['exp', { initialValue: false }]",modifiers:{trim:!0}}]},[e._v(" 异常")]),t("a-checkbox",{on:{change:e.onIgnoreChange},model:{value:e.isIgnore,callback:function(t){e.isIgnore=t},expression:"isIgnore"}},[e._v(" 忽略")])],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"同检人员"}},[t("a-select",{ref:"userSelect",attrs:{placeholder:"请选择人员",open:!1,showArrow:!0,allowClear:""},on:{change:e.clearTogetherCheckUserNames,dropdownVisibleChange:function(t){return e.openSelectUser()}},model:{value:e.togetherCheckUserNames,callback:function(t){e.togetherCheckUserNames=t},expression:"togetherCheckUserNames"}},[t("a-icon",{attrs:{slot:"suffixIcon",type:"ellipsis"},slot:"suffixIcon"})],1)],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"结果描述"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["resultDesc",{initialValue:"",rules:[{required:e.isIgnore,message:"请输入忽略原因!"}]}],expression:"[\n                'resultDesc',\n                { initialValue: '', rules: [{ required: isIgnore, message: '请输入忽略原因!' }] },\n              ]",modifiers:{trim:!0}}],attrs:{"auto-size":{minRows:8,maxRows:8}}})],1)],1)],1)]),t("a-col",{attrs:{md:6}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("div",{staticStyle:{margin:"30px 10px 20px","text-align":"center"}},[t("a-spin",{attrs:{spinning:e.qrLoading}},[e.imageBase64Url?t("img",{staticClass:"QRcode",attrs:{src:e.imageBase64Url,alt:""}}):t("img",{staticClass:"QRcode",attrs:{src:r("a6da"),alt:""}})])],1),t("div",{staticStyle:{"text-align":"center"}},[e._v("通过APP扫码确认")])])],1)],1),t("UserList",{ref:"userSelectModal",attrs:{multiple:!0},on:{ok:e.onSelectUser}})],1)},o=[],a=r("b9c3"),i=r("b245"),c=r("986e"),u={name:"SheetItemModal",components:{UserList:i["default"]},props:["title","formInstId","workRecordType"],data:function(){return{detailIds:"",checkType:-1,colIndex:0,value:1,status:1,switchCheck:!0,visible:!1,model:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:18}},confirmLoading:!1,form:this.$form.createForm(this),validatorRules:{checkUserName:{rules:[{required:!0,message:"请输入登录名称!"}]},checkUserPwd:{rules:[{required:!0,message:"请输入密码!"}]},checkResult:{rules:[{required:!0,message:"选择检查结果!"}]}},isIgnore:!1,qrLoading:!1,imageBase64Url:"",togetherCheckUserIds:"",togetherCheckUserNames:""}},mounted:function(){var e=this;c["a"].$on("topic",(function(t){e.$message.success(t.msgTxt);var r=Object.assign(e.model);r.detailIds=1===e.workRecordType?e.detailIds:e.detailIds.join(","),r.result=r.exp?0:1,r.isIgnore=e.isIgnore?1:0,r.type=e.checkType,r.workRecordId=e.formInstId,r.colIndex=e.colIndex,r.workRecordType=e.workRecordType,r.detailIds=e.detailIds,e.$emit("scan",{saveSuccess:!0,data:r}),e.close()}))},methods:{add:function(){this.edit({})},getTaskQRCode:function(e){var t=this;this.qrLoading=!0,Object(a["J"])({formDetails:"string"===typeof this.detailIds?this.detailIds:this.detailIds.join(","),checkType:this.checkType,colIndex:this.colIndex,formInstId:e.formInstId,formType:e.instType,fromBy:"PC",orderId:e.workOrderId,targetType:"TASK",taskId:e.workOrderTaskId,workRecordType:e.workRecordType}).then((function(e){t.qrLoading=!1,e.success&&(t.imageBase64Url=e.result.base64)}))},showModal:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3?arguments[3]:void 0;this.imageBase64Url="",this.detailIds=e,this.checkType=t,this.colIndex=n,this.getTaskQRCode(o),this.form.resetFields(),this.isIgnore=!1,this.visible=!0,1===this.checkType&&this.$nextTick((function(){r.form.setFieldsValue({checkUserName:r.$store.getters.userInfo.username,checkUserPwd:"~**&&##@@$$%%^^~"})})),this.$nextTick((function(){r.form.setFieldsValue({exp:"",resultDesc:""})}))},useCurrentUser:function(){var e=this;this.$nextTick((function(){e.form.setFieldsValue({checkUserName:e.$store.getters.userInfo.username,checkUserPwd:"~**&&##@@$$%%^^~"})}))},clearTogetherCheckUserNames:function(e){e||(this.togetherCheckUserIds="",this.togetherCheckUserNames="")},openSelectUser:function(){this.$refs.userSelectModal.showModal(),this.$refs.userSelect.blur()},onSelectUser:function(e){if(e.length){var t="",r="";e.forEach((function(e,n,o){t+=e.realname,r+=e.id,n<o.length-1&&(t+=",",r+=",")})),this.togetherCheckUserIds=r,this.togetherCheckUserNames=t}},handleOk:function(){var e=this,t=this;t.form.validateFields((function(r,n){if(!r){var o=Object.assign(t.model,n);o.detailIds=1===e.workRecordType?e.detailIds:e.detailIds.join(","),o.result=o.exp?0:1,o.isIgnore=e.isIgnore?1:0,o.type=e.checkType,o.workRecordId=e.formInstId,o.colIndex=e.colIndex,o.workRecordType=e.workRecordType,o.togetherCheckUserIds=e.togetherCheckUserIds,o.togetherCheckUserNames=e.togetherCheckUserNames,Object(a["Y"])(o).then((function(r){r.success?(t.$message.success(r.message),o.detailIds=e.detailIds,r.result&&(o.checkUserInfo=r.result),t.$emit("ok",{saveSuccess:!0,data:o}),t.close()):t.$message.error(r.message)})).finally((function(){}))}}))},handleCancel:function(){this.close()},onIgnoreChange:function(){var e=this;this.$nextTick((function(){e.form.resetFields("resultDesc")}))},close:function(){this.$emit("close"),this.visible=!1}}},s=u,l=(r("fb4f"),r("2877")),d=Object(l["a"])(s,n,o,!1,null,"0804228c",null);t["default"]=d.exports},f76d:function(e,t,r){"use strict";r("9527")},fb4f:function(e,t,r){"use strict";r("0743")}}]);