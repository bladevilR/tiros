<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.jeecg.modules.material.stock.mapper.BuMaterialEntryAttrMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="org.jeecg.modules.material.stock.bean.BuMaterialEntryAttr">
        <id column="id" property="id"/>
        <result column="material_type_id" property="materialTypeId"/>
        <result column="trade_no" property="tradeNo"/>
        <result column="entry_date" property="entryDate"/>
        <result column="leave_factory" property="leaveFactory"/>
        <result column="production_date" property="productionDate"/>
        <result column="expir_day" property="expirDay"/>
        <result column="expir_date" property="expirDate"/>
    </resultMap>

    <!-- 通用查询结果列 -->
    <sql id="Base_Column_List">
        id, material_type_id, trade_no, entry_date, leave_factory, production_date, expir_day, expir_date
    </sql>


    <select id="selectListByMaterialAndTrade" resultType="org.jeecg.modules.material.stock.bean.BuMaterialEntryAttr">
        select t.*,
               t1.name as materialTypeName,
               t1.spec as materialTypeSpec
        from bu_material_entry_attr t
                 left join bu_material_type t1 on t1.id = t.material_type_id
        where t.material_type_id = #{materialTypeId}
          and t.trade_no = #{tradeNo}
    </select>

</mapper>
