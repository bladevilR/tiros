<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.jeecg.modules.basemanage.layout.mapper.SysWidgetsMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="org.jeecg.modules.basemanage.layout.bean.SysWidgets">
        <id column="id" property="id"/>
        <result column="widget_category" property="widgetCategory"/>
        <result column="widget_name" property="widgetName"/>
        <result column="widget_desc" property="widgetDesc"/>
        <result column="component_path" property="componentPath"/>
        <result column="def_width" property="defWidth"/>
        <result column="def_height" property="defHeight"/>
        <result column="status" property="status"/>
        <result column="create_time" property="createTime"/>
        <result column="create_by" property="createBy"/>
        <result column="update_time" property="updateTime"/>
        <result column="update_by" property="updateBy"/>
    </resultMap>

    <!-- 通用查询结果列 -->
    <sql id="Base_Column_List">
        id, widget_category, widget_name, widget_desc, component_path, def_width,
        def_height, status, create_time, create_by, update_time, update_by
    </sql>

    <select id="selectPageByCondition" resultType="org.jeecg.modules.basemanage.layout.bean.SysWidgets">
        select t.*,
        t1.name as widgetCategoryName
        from sys_widgets t
        left join sys_category t1 on t1.id = t.widget_category
        <where>
            <if test="queryVO.widgetCategory != null and queryVO.widgetCategory != ''">
                and t.widget_category = #{queryVO.widgetCategory}
            </if>
            <if test="queryVO.widgetName != null and queryVO.widgetName != ''">
                and t.widget_name like '%'||#{queryVO.widgetName}||'%'
            </if>
            <if test="queryVO.status != null">
                and t.status = #{queryVO.status}
            </if>
        </where>
        order by t.create_time desc
    </select>

</mapper>
